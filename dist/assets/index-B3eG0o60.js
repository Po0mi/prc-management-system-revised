var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),s=(e,n)=>{let r={};for(var i in e)t(r,i,{get:e[i],enumerable:!0});return n||t(r,Symbol.toStringTag,{value:`Module`}),r},c=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},l=(n,r,a)=>(a=n==null?{}:e(i(n)),c(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n));(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var u=o((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.portal`),r=Symbol.for(`react.fragment`),i=Symbol.for(`react.strict_mode`),a=Symbol.for(`react.profiler`),o=Symbol.for(`react.consumer`),s=Symbol.for(`react.context`),c=Symbol.for(`react.forward_ref`),l=Symbol.for(`react.suspense`),u=Symbol.for(`react.memo`),d=Symbol.for(`react.lazy`),f=Symbol.for(`react.activity`),p=Symbol.iterator;function m(e){return typeof e!=`object`||!e?null:(e=p&&e[p]||e[`@@iterator`],typeof e==`function`?e:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,_={};function v(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if(typeof e!=`object`&&typeof e!=`function`&&e!=null)throw Error(`takes an object of state variables to update or a function which returns an object of state variables.`);this.updater.enqueueSetState(this,e,t,`setState`)},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,`forceUpdate`)};function y(){}y.prototype=v.prototype;function b(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}var x=b.prototype=new y;x.constructor=b,g(x,v.prototype),x.isPureReactComponent=!0;var S=Array.isArray;function C(){}var w={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function E(e,n,r){var i=r.ref;return{$$typeof:t,type:e,key:n,ref:i===void 0?null:i,props:r}}function D(e,t){return E(e.type,t,e.props)}function O(e){return typeof e==`object`&&!!e&&e.$$typeof===t}function ee(e){var t={"=":`=0`,":":`=2`};return`$`+e.replace(/[=:]/g,function(e){return t[e]})}var k=/\/+/g;function te(e,t){return typeof e==`object`&&e&&e.key!=null?ee(``+e.key):t.toString(36)}function A(e){switch(e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason;default:switch(typeof e.status==`string`?e.then(C,C):(e.status=`pending`,e.then(function(t){e.status===`pending`&&(e.status=`fulfilled`,e.value=t)},function(t){e.status===`pending`&&(e.status=`rejected`,e.reason=t)})),e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason}}throw e}function ne(e,r,i,a,o){var s=typeof e;(s===`undefined`||s===`boolean`)&&(e=null);var c=!1;if(e===null)c=!0;else switch(s){case`bigint`:case`string`:case`number`:c=!0;break;case`object`:switch(e.$$typeof){case t:case n:c=!0;break;case d:return c=e._init,ne(c(e._payload),r,i,a,o)}}if(c)return o=o(e),c=a===``?`.`+te(e,0):a,S(o)?(i=``,c!=null&&(i=c.replace(k,`$&/`)+`/`),ne(o,r,i,``,function(e){return e})):o!=null&&(O(o)&&(o=D(o,i+(o.key==null||e&&e.key===o.key?``:(``+o.key).replace(k,`$&/`)+`/`)+c)),r.push(o)),1;c=0;var l=a===``?`.`:a+`:`;if(S(e))for(var u=0;u<e.length;u++)a=e[u],s=l+te(a,u),c+=ne(a,r,i,s,o);else if(u=m(e),typeof u==`function`)for(e=u.call(e),u=0;!(a=e.next()).done;)a=a.value,s=l+te(a,u++),c+=ne(a,r,i,s,o);else if(s===`object`){if(typeof e.then==`function`)return ne(A(e),r,i,a,o);throw r=String(e),Error(`Objects are not valid as a React child (found: `+(r===`[object Object]`?`object with keys {`+Object.keys(e).join(`, `)+`}`:r)+`). If you meant to render a collection of children, use an array instead.`)}return c}function j(e,t,n){if(e==null)return e;var r=[],i=0;return ne(e,r,``,``,function(e){return t.call(n,e,i++)}),r}function M(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var N=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},P={map:j,forEach:function(e,t,n){j(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return j(e,function(){t++}),t},toArray:function(e){return j(e,function(e){return e})||[]},only:function(e){if(!O(e))throw Error(`React.Children.only expected to receive a single React element child.`);return e}};e.Activity=f,e.Children=P,e.Component=v,e.Fragment=r,e.Profiler=a,e.PureComponent=b,e.StrictMode=i,e.Suspense=l,e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,e.__COMPILER_RUNTIME={__proto__:null,c:function(e){return w.H.useMemoCache(e)}},e.cache=function(e){return function(){return e.apply(null,arguments)}},e.cacheSignal=function(){return null},e.cloneElement=function(e,t,n){if(e==null)throw Error(`The argument must be a React element, but you passed `+e+`.`);var r=g({},e.props),i=e.key;if(t!=null)for(a in t.key!==void 0&&(i=``+t.key),t)!T.call(t,a)||a===`key`||a===`__self`||a===`__source`||a===`ref`&&t.ref===void 0||(r[a]=t[a]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),s=0;s<a;s++)o[s]=arguments[s+2];r.children=o}return E(e.type,i,r)},e.createContext=function(e){return e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:o,_context:e},e},e.createElement=function(e,t,n){var r,i={},a=null;if(t!=null)for(r in t.key!==void 0&&(a=``+t.key),t)T.call(t,r)&&r!==`key`&&r!==`__self`&&r!==`__source`&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var s=Array(o),c=0;c<o;c++)s[c]=arguments[c+2];i.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return E(e,a,i)},e.createRef=function(){return{current:null}},e.forwardRef=function(e){return{$$typeof:c,render:e}},e.isValidElement=O,e.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:M}},e.memo=function(e,t){return{$$typeof:u,type:e,compare:t===void 0?null:t}},e.startTransition=function(e){var t=w.T,n={};w.T=n;try{var r=e(),i=w.S;i!==null&&i(n,r),typeof r==`object`&&r&&typeof r.then==`function`&&r.then(C,N)}catch(e){N(e)}finally{t!==null&&n.types!==null&&(t.types=n.types),w.T=t}},e.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},e.use=function(e){return w.H.use(e)},e.useActionState=function(e,t,n){return w.H.useActionState(e,t,n)},e.useCallback=function(e,t){return w.H.useCallback(e,t)},e.useContext=function(e){return w.H.useContext(e)},e.useDebugValue=function(){},e.useDeferredValue=function(e,t){return w.H.useDeferredValue(e,t)},e.useEffect=function(e,t){return w.H.useEffect(e,t)},e.useEffectEvent=function(e){return w.H.useEffectEvent(e)},e.useId=function(){return w.H.useId()},e.useImperativeHandle=function(e,t,n){return w.H.useImperativeHandle(e,t,n)},e.useInsertionEffect=function(e,t){return w.H.useInsertionEffect(e,t)},e.useLayoutEffect=function(e,t){return w.H.useLayoutEffect(e,t)},e.useMemo=function(e,t){return w.H.useMemo(e,t)},e.useOptimistic=function(e,t){return w.H.useOptimistic(e,t)},e.useReducer=function(e,t,n){return w.H.useReducer(e,t,n)},e.useRef=function(e){return w.H.useRef(e)},e.useState=function(e){return w.H.useState(e)},e.useSyncExternalStore=function(e,t,n){return w.H.useSyncExternalStore(e,t,n)},e.useTransition=function(){return w.H.useTransition()},e.version=`19.2.4`})),d=o(((e,t)=>{t.exports=u()})),f=o((e=>{function t(e,t){var n=e.length;e.push(t);a:for(;0<n;){var r=n-1>>>1,a=e[r];if(0<i(a,t))e[r]=t,e[n]=a,n=r;else break a}}function n(e){return e.length===0?null:e[0]}function r(e){if(e.length===0)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;a:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,n))l<a&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else if(l<a&&0>i(u,n))e[r]=u,e[l]=n,r=l;else break a}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return n===0?e.id-t.id:n}if(e.unstable_now=void 0,typeof performance==`object`&&typeof performance.now==`function`){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var c=[],l=[],u=1,d=null,f=3,p=!1,m=!1,h=!1,g=!1,_=typeof setTimeout==`function`?setTimeout:null,v=typeof clearTimeout==`function`?clearTimeout:null,y=typeof setImmediate<`u`?setImmediate:null;function b(e){for(var i=n(l);i!==null;){if(i.callback===null)r(l);else if(i.startTime<=e)r(l),i.sortIndex=i.expirationTime,t(c,i);else break;i=n(l)}}function x(e){if(h=!1,b(e),!m)if(n(c)!==null)m=!0,S||(S=!0,O());else{var t=n(l);t!==null&&te(x,t.startTime-e)}}var S=!1,C=-1,w=5,T=-1;function E(){return g?!0:!(e.unstable_now()-T<w)}function D(){if(g=!1,S){var t=e.unstable_now();T=t;var i=!0;try{a:{m=!1,h&&(h=!1,v(C),C=-1),p=!0;var a=f;try{b:{for(b(t),d=n(c);d!==null&&!(d.expirationTime>t&&E());){var o=d.callback;if(typeof o==`function`){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=t);if(t=e.unstable_now(),typeof s==`function`){d.callback=s,b(t),i=!0;break b}d===n(c)&&r(c),b(t)}else r(c);d=n(c)}if(d!==null)i=!0;else{var u=n(l);u!==null&&te(x,u.startTime-t),i=!1}}break a}finally{d=null,f=a,p=!1}i=void 0}}finally{i?O():S=!1}}}var O;if(typeof y==`function`)O=function(){y(D)};else if(typeof MessageChannel<`u`){var ee=new MessageChannel,k=ee.port2;ee.port1.onmessage=D,O=function(){k.postMessage(null)}}else O=function(){_(D,0)};function te(t,n){C=_(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error(`forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported`):w=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_scheduleCallback=function(r,i,a){var o=e.unstable_now();switch(typeof a==`object`&&a?(a=a.delay,a=typeof a==`number`&&0<a?o+a:o):a=o,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return s=a+s,r={id:u++,callback:i,priorityLevel:r,startTime:a,expirationTime:s,sortIndex:-1},a>o?(r.sortIndex=a,t(l,r),n(c)===null&&r===n(l)&&(h?(v(C),C=-1):h=!0,te(x,a-o))):(r.sortIndex=s,t(c,r),m||p||(m=!0,S||(S=!0,O()))),r},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}})),p=o(((e,t)=>{t.exports=f()})),m=o((e=>{var t=d();function n(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for(`react.portal`);function o(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:r==null?null:``+r,children:e,containerInfo:t,implementation:n}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){if(e===`font`)return``;if(typeof t==`string`)return t===`use-credentials`?t:``}e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,e.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(n(299));return o(e,t,null,r)},e.flushSync=function(e){var t=s.T,n=i.p;try{if(s.T=null,i.p=2,e)return e()}finally{s.T=t,i.p=n,i.d.f()}},e.preconnect=function(e,t){typeof e==`string`&&(t?(t=t.crossOrigin,t=typeof t==`string`?t===`use-credentials`?t:``:void 0):t=null,i.d.C(e,t))},e.prefetchDNS=function(e){typeof e==`string`&&i.d.D(e)},e.preinit=function(e,t){if(typeof e==`string`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin),a=typeof t.integrity==`string`?t.integrity:void 0,o=typeof t.fetchPriority==`string`?t.fetchPriority:void 0;n===`style`?i.d.S(e,typeof t.precedence==`string`?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:o}):n===`script`&&i.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:o,nonce:typeof t.nonce==`string`?t.nonce:void 0})}},e.preinitModule=function(e,t){if(typeof e==`string`)if(typeof t==`object`&&t){if(t.as==null||t.as===`script`){var n=c(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0})}}else t??i.d.M(e)},e.preload=function(e,t){if(typeof e==`string`&&typeof t==`object`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:r,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0,type:typeof t.type==`string`?t.type:void 0,fetchPriority:typeof t.fetchPriority==`string`?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy==`string`?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet==`string`?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes==`string`?t.imageSizes:void 0,media:typeof t.media==`string`?t.media:void 0})}},e.preloadModule=function(e,t){if(typeof e==`string`)if(t){var n=c(t.as,t.crossOrigin);i.d.m(e,{as:typeof t.as==`string`&&t.as!==`script`?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0})}else i.d.m(e)},e.requestFormReset=function(e){i.d.r(e)},e.unstable_batchedUpdates=function(e,t){return e(t)},e.useFormState=function(e,t,n){return s.H.useFormState(e,t,n)},e.useFormStatus=function(){return s.H.useHostTransitionStatus()},e.version=`19.2.4`})),h=o(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=m()})),g=o((e=>{var t=p(),n=d(),r=h();function i(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function a(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function s(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function c(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function l(e){if(o(e)!==e)throw Error(i(188))}function u(e){var t=e.alternate;if(!t){if(t=o(e),t===null)throw Error(i(188));return t===e?e:null}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var s=a.alternate;if(s===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return l(a),e;if(s===r)return l(a),t;s=s.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=s;else{for(var c=!1,u=a.child;u;){if(u===n){c=!0,n=a,r=s;break}if(u===r){c=!0,r=a,n=s;break}u=u.sibling}if(!c){for(u=s.child;u;){if(u===n){c=!0,n=s,r=a;break}if(u===r){c=!0,r=s,n=a;break}u=u.sibling}if(!c)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(n.tag!==3)throw Error(i(188));return n.stateNode.current===n?e:t}function f(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=f(e),t!==null)return t;e=e.sibling}return null}var m=Object.assign,g=Symbol.for(`react.element`),_=Symbol.for(`react.transitional.element`),v=Symbol.for(`react.portal`),y=Symbol.for(`react.fragment`),b=Symbol.for(`react.strict_mode`),x=Symbol.for(`react.profiler`),S=Symbol.for(`react.consumer`),C=Symbol.for(`react.context`),w=Symbol.for(`react.forward_ref`),T=Symbol.for(`react.suspense`),E=Symbol.for(`react.suspense_list`),D=Symbol.for(`react.memo`),O=Symbol.for(`react.lazy`),ee=Symbol.for(`react.activity`),k=Symbol.for(`react.memo_cache_sentinel`),te=Symbol.iterator;function A(e){return typeof e!=`object`||!e?null:(e=te&&e[te]||e[`@@iterator`],typeof e==`function`?e:null)}var ne=Symbol.for(`react.client.reference`);function j(e){if(e==null)return null;if(typeof e==`function`)return e.$$typeof===ne?null:e.displayName||e.name||null;if(typeof e==`string`)return e;switch(e){case y:return`Fragment`;case x:return`Profiler`;case b:return`StrictMode`;case T:return`Suspense`;case E:return`SuspenseList`;case ee:return`Activity`}if(typeof e==`object`)switch(e.$$typeof){case v:return`Portal`;case C:return e.displayName||`Context`;case S:return(e._context.displayName||`Context`)+`.Consumer`;case w:var t=e.render;return e=e.displayName,e||=(e=t.displayName||t.name||``,e===``?`ForwardRef`:`ForwardRef(`+e+`)`),e;case D:return t=e.displayName||null,t===null?j(e.type)||`Memo`:t;case O:t=e._payload,e=e._init;try{return j(e(t))}catch{}}return null}var M=Array.isArray,N=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},F=[],I=-1;function ie(e){return{current:e}}function ae(e){0>I||(e.current=F[I],F[I]=null,I--)}function oe(e,t){I++,F[I]=e.current,e.current=t}var se=ie(null),ce=ie(null),le=ie(null),ue=ie(null);function de(e,t){switch(oe(le,t),oe(ce,e),oe(se,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Yd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Yd(t),e=Xd(t,e);else switch(e){case`svg`:e=1;break;case`math`:e=2;break;default:e=0}}ae(se),oe(se,e)}function fe(){ae(se),ae(ce),ae(le)}function pe(e){e.memoizedState!==null&&oe(ue,e);var t=se.current,n=Xd(t,e.type);t!==n&&(oe(ce,e),oe(se,n))}function me(e){ce.current===e&&(ae(se),ae(ce)),ue.current===e&&(ae(ue),op._currentValue=re)}var he,ge;function _e(e){if(he===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);he=t&&t[1]||``,ge=-1<e.stack.indexOf(`
    at`)?` (<anonymous>)`:-1<e.stack.indexOf(`@`)?`@unknown:0:0`:``}return`
`+he+e+ge}var ve=!1;function ye(e,t){if(!e||ve)return``;ve=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,`props`,{set:function(){throw Error()}}),typeof Reflect==`object`&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&typeof n.catch==`function`&&n.catch(function(){})}}catch(e){if(e&&r&&typeof e.stack==`string`)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName=`DetermineComponentFrameRoot`;var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,`name`);i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,`name`,{value:`DetermineComponentFrameRoot`});var a=r.DetermineComponentFrameRoot(),o=a[0],s=a[1];if(o&&s){var c=o.split(`
`),l=s.split(`
`);for(i=r=0;r<c.length&&!c[r].includes(`DetermineComponentFrameRoot`);)r++;for(;i<l.length&&!l[i].includes(`DetermineComponentFrameRoot`);)i++;if(r===c.length||i===l.length)for(r=c.length-1,i=l.length-1;1<=r&&0<=i&&c[r]!==l[i];)i--;for(;1<=r&&0<=i;r--,i--)if(c[r]!==l[i]){if(r!==1||i!==1)do if(r--,i--,0>i||c[r]!==l[i]){var u=`
`+c[r].replace(` at new `,` at `);return e.displayName&&u.includes(`<anonymous>`)&&(u=u.replace(`<anonymous>`,e.displayName)),u}while(1<=r&&0<=i);break}}}finally{ve=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:``)?_e(n):``}function be(e,t){switch(e.tag){case 26:case 27:case 5:return _e(e.type);case 16:return _e(`Lazy`);case 13:return e.child!==t&&t!==null?_e(`Suspense Fallback`):_e(`Suspense`);case 19:return _e(`SuspenseList`);case 0:case 15:return ye(e.type,!1);case 11:return ye(e.type.render,!1);case 1:return ye(e.type,!0);case 31:return _e(`Activity`);default:return``}}function xe(e){try{var t=``,n=null;do t+=be(e,n),n=e,e=e.return;while(e);return t}catch(e){return`
Error generating stack: `+e.message+`
`+e.stack}}var Se=Object.prototype.hasOwnProperty,Ce=t.unstable_scheduleCallback,we=t.unstable_cancelCallback,Te=t.unstable_shouldYield,Ee=t.unstable_requestPaint,De=t.unstable_now,Oe=t.unstable_getCurrentPriorityLevel,ke=t.unstable_ImmediatePriority,Ae=t.unstable_UserBlockingPriority,je=t.unstable_NormalPriority,Me=t.unstable_LowPriority,Ne=t.unstable_IdlePriority,Pe=t.log,Fe=t.unstable_setDisableYieldValue,Ie=null,Le=null;function Re(e){if(typeof Pe==`function`&&Fe(e),Le&&typeof Le.setStrictMode==`function`)try{Le.setStrictMode(Ie,e)}catch{}}var ze=Math.clz32?Math.clz32:He,Be=Math.log,Ve=Math.LN2;function He(e){return e>>>=0,e===0?32:31-(Be(e)/Ve|0)|0}var Ue=256,We=262144,Ge=4194304;function Ke(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function qe(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var i=0,a=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=r&134217727;return s===0?(s=r&~a,s===0?o===0?n||(n=r&~e,n!==0&&(i=Ke(n))):i=Ke(o):i=Ke(s)):(r=s&~a,r===0?(o&=s,o===0?n||(n=s&~e,n!==0&&(i=Ke(n))):i=Ke(o)):i=Ke(r)),i===0?0:t!==0&&t!==i&&(t&a)===0&&(a=i&-i,n=t&-t,a>=n||a===32&&n&4194048)?t:i}function Je(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Ye(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xe(){var e=Ge;return Ge<<=1,!(Ge&62914560)&&(Ge=4194304),e}function Ze(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function R(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Qe(e,t,n,r,i,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,c=e.expirationTimes,l=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-ze(n),d=1<<u;s[u]=0,c[u]=-1;var f=l[u];if(f!==null)for(l[u]=null,u=0;u<f.length;u++){var p=f[u];p!==null&&(p.lane&=-536870913)}n&=~d}r!==0&&$e(e,r,0),a!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=a&~(o&~t))}function $e(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-ze(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&261930}function et(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ze(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function tt(e,t){var n=t&-t;return n=n&42?1:nt(n),(n&(e.suspendedLanes|t))===0?n:0}function nt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function rt(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function it(){var e=P.p;return e===0?(e=window.event,e===void 0?32:Sp(e.type)):e}function at(e,t){var n=P.p;try{return P.p=e,t()}finally{P.p=n}}var ot=Math.random().toString(36).slice(2),st=`__reactFiber$`+ot,ct=`__reactProps$`+ot,lt=`__reactContainer$`+ot,ut=`__reactEvents$`+ot,dt=`__reactListeners$`+ot,ft=`__reactHandles$`+ot,pt=`__reactResources$`+ot,mt=`__reactMarker$`+ot;function ht(e){delete e[st],delete e[ct],delete e[ut],delete e[dt],delete e[ft]}function gt(e){var t=e[st];if(t)return t;for(var n=e.parentNode;n;){if(t=n[lt]||n[st]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=yf(e);e!==null;){if(n=e[st])return n;e=yf(e)}return t}e=n,n=e.parentNode}return null}function _t(e){if(e=e[st]||e[lt]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function vt(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function yt(e){var t=e[pt];return t||=e[pt]={hoistableStyles:new Map,hoistableScripts:new Map},t}function bt(e){e[mt]=!0}var xt=new Set,St={};function Ct(e,t){wt(e,t),wt(e+`Capture`,t)}function wt(e,t){for(St[e]=t,e=0;e<t.length;e++)xt.add(t[e])}var Tt=RegExp(`^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$`),Et={},Dt={};function z(e){return Se.call(Dt,e)?!0:Se.call(Et,e)?!1:Tt.test(e)?Dt[e]=!0:(Et[e]=!0,!1)}function B(e,t,n){if(z(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:e.removeAttribute(t);return;case`boolean`:var r=t.toLowerCase().slice(0,5);if(r!==`data-`&&r!==`aria-`){e.removeAttribute(t);return}}e.setAttribute(t,``+n)}}function Ot(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(t);return}e.setAttribute(t,``+n)}}function kt(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(n);return}e.setAttributeNS(t,n,``+r)}}function At(e){switch(typeof e){case`bigint`:case`boolean`:case`number`:case`string`:case`undefined`:return e;case`object`:return e;default:return``}}function jt(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()===`input`&&(t===`checkbox`||t===`radio`)}function Mt(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&r!==void 0&&typeof r.get==`function`&&typeof r.set==`function`){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=``+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=``+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Nt(e){if(!e._valueTracker){var t=jt(e)?`checked`:`value`;e._valueTracker=Mt(e,t,``+e[t])}}function Pt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r=``;return e&&(r=jt(e)?e.checked?`true`:`false`:e.value),e=r,e===n?!1:(t.setValue(e),!0)}function Ft(e){if(e||=typeof document<`u`?document:void 0,e===void 0)return null;try{return e.activeElement||e.body}catch{return e.body}}var It=/[\n"\\]/g;function Lt(e){return e.replace(It,function(e){return`\\`+e.charCodeAt(0).toString(16)+` `})}function Rt(e,t,n,r,i,a,o,s){e.name=``,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`?e.type=o:e.removeAttribute(`type`),t==null?o!==`submit`&&o!==`reset`||e.removeAttribute(`value`):o===`number`?(t===0&&e.value===``||e.value!=t)&&(e.value=``+At(t)):e.value!==``+At(t)&&(e.value=``+At(t)),t==null?n==null?r!=null&&e.removeAttribute(`value`):Bt(e,o,At(n)):Bt(e,o,At(t)),i==null&&a!=null&&(e.defaultChecked=!!a),i!=null&&(e.checked=i&&typeof i!=`function`&&typeof i!=`symbol`),s!=null&&typeof s!=`function`&&typeof s!=`symbol`&&typeof s!=`boolean`?e.name=``+At(s):e.removeAttribute(`name`)}function zt(e,t,n,r,i,a,o,s){if(a!=null&&typeof a!=`function`&&typeof a!=`symbol`&&typeof a!=`boolean`&&(e.type=a),t!=null||n!=null){if(!(a!==`submit`&&a!==`reset`||t!=null)){Nt(e);return}n=n==null?``:``+At(n),t=t==null?n:``+At(t),s||t===e.value||(e.value=t),e.defaultValue=t}r??=i,r=typeof r!=`function`&&typeof r!=`symbol`&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`&&(e.name=o),Nt(e)}function Bt(e,t,n){t===`number`&&Ft(e.ownerDocument)===e||e.defaultValue===``+n||(e.defaultValue=``+n)}function Vt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t[`$`+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty(`$`+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=``+At(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Ht(e,t,n){if(t!=null&&(t=``+At(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n==null?``:``+At(n)}function Ut(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(i(92));if(M(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}n??=``,t=n}n=At(t),e.defaultValue=n,r=e.textContent,r===n&&r!==``&&r!==null&&(e.value=r),Nt(e)}function Wt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Gt=new Set(`animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp`.split(` `));function Kt(e,t,n){var r=t.indexOf(`--`)===0;n==null||typeof n==`boolean`||n===``?r?e.setProperty(t,``):t===`float`?e.cssFloat=``:e[t]=``:r?e.setProperty(t,n):typeof n!=`number`||n===0||Gt.has(t)?t===`float`?e.cssFloat=n:e[t]=(``+n).trim():e[t]=n+`px`}function qt(e,t,n){if(t!=null&&typeof t!=`object`)throw Error(i(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf(`--`)===0?e.setProperty(r,``):r===`float`?e.cssFloat=``:e[r]=``);for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&Kt(e,a,r)}else for(var o in t)t.hasOwnProperty(o)&&Kt(e,o,t[o])}function Jt(e){if(e.indexOf(`-`)===-1)return!1;switch(e){case`annotation-xml`:case`color-profile`:case`font-face`:case`font-face-src`:case`font-face-uri`:case`font-face-format`:case`font-face-name`:case`missing-glyph`:return!1;default:return!0}}var Yt=new Map([[`acceptCharset`,`accept-charset`],[`htmlFor`,`for`],[`httpEquiv`,`http-equiv`],[`crossOrigin`,`crossorigin`],[`accentHeight`,`accent-height`],[`alignmentBaseline`,`alignment-baseline`],[`arabicForm`,`arabic-form`],[`baselineShift`,`baseline-shift`],[`capHeight`,`cap-height`],[`clipPath`,`clip-path`],[`clipRule`,`clip-rule`],[`colorInterpolation`,`color-interpolation`],[`colorInterpolationFilters`,`color-interpolation-filters`],[`colorProfile`,`color-profile`],[`colorRendering`,`color-rendering`],[`dominantBaseline`,`dominant-baseline`],[`enableBackground`,`enable-background`],[`fillOpacity`,`fill-opacity`],[`fillRule`,`fill-rule`],[`floodColor`,`flood-color`],[`floodOpacity`,`flood-opacity`],[`fontFamily`,`font-family`],[`fontSize`,`font-size`],[`fontSizeAdjust`,`font-size-adjust`],[`fontStretch`,`font-stretch`],[`fontStyle`,`font-style`],[`fontVariant`,`font-variant`],[`fontWeight`,`font-weight`],[`glyphName`,`glyph-name`],[`glyphOrientationHorizontal`,`glyph-orientation-horizontal`],[`glyphOrientationVertical`,`glyph-orientation-vertical`],[`horizAdvX`,`horiz-adv-x`],[`horizOriginX`,`horiz-origin-x`],[`imageRendering`,`image-rendering`],[`letterSpacing`,`letter-spacing`],[`lightingColor`,`lighting-color`],[`markerEnd`,`marker-end`],[`markerMid`,`marker-mid`],[`markerStart`,`marker-start`],[`overlinePosition`,`overline-position`],[`overlineThickness`,`overline-thickness`],[`paintOrder`,`paint-order`],[`panose-1`,`panose-1`],[`pointerEvents`,`pointer-events`],[`renderingIntent`,`rendering-intent`],[`shapeRendering`,`shape-rendering`],[`stopColor`,`stop-color`],[`stopOpacity`,`stop-opacity`],[`strikethroughPosition`,`strikethrough-position`],[`strikethroughThickness`,`strikethrough-thickness`],[`strokeDasharray`,`stroke-dasharray`],[`strokeDashoffset`,`stroke-dashoffset`],[`strokeLinecap`,`stroke-linecap`],[`strokeLinejoin`,`stroke-linejoin`],[`strokeMiterlimit`,`stroke-miterlimit`],[`strokeOpacity`,`stroke-opacity`],[`strokeWidth`,`stroke-width`],[`textAnchor`,`text-anchor`],[`textDecoration`,`text-decoration`],[`textRendering`,`text-rendering`],[`transformOrigin`,`transform-origin`],[`underlinePosition`,`underline-position`],[`underlineThickness`,`underline-thickness`],[`unicodeBidi`,`unicode-bidi`],[`unicodeRange`,`unicode-range`],[`unitsPerEm`,`units-per-em`],[`vAlphabetic`,`v-alphabetic`],[`vHanging`,`v-hanging`],[`vIdeographic`,`v-ideographic`],[`vMathematical`,`v-mathematical`],[`vectorEffect`,`vector-effect`],[`vertAdvY`,`vert-adv-y`],[`vertOriginX`,`vert-origin-x`],[`vertOriginY`,`vert-origin-y`],[`wordSpacing`,`word-spacing`],[`writingMode`,`writing-mode`],[`xmlnsXlink`,`xmlns:xlink`],[`xHeight`,`x-height`]]),Xt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zt(e){return Xt.test(``+e)?`javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')`:e}function Qt(){}var $t=null;function en(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var tn=null,nn=null;function rn(e){var t=_t(e);if(t&&(e=t.stateNode)){var n=e[ct]||null;a:switch(e=t.stateNode,t.type){case`input`:if(Rt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type===`radio`&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll(`input[name="`+Lt(``+t)+`"][type="radio"]`),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[ct]||null;if(!a)throw Error(i(90));Rt(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&Pt(r)}break a;case`textarea`:Ht(e,n.value,n.defaultValue);break a;case`select`:t=n.value,t!=null&&Vt(e,!!n.multiple,t,!1)}}}var an=!1;function on(e,t,n){if(an)return e(t,n);an=!0;try{return e(t)}finally{if(an=!1,(tn!==null||nn!==null)&&(Tu(),tn&&(t=tn,e=nn,nn=tn=null,rn(t),e)))for(t=0;t<e.length;t++)rn(e[t])}}function sn(e,t){var n=e.stateNode;if(n===null)return null;var r=n[ct]||null;if(r===null)return null;n=r[t];a:switch(t){case`onClick`:case`onClickCapture`:case`onDoubleClick`:case`onDoubleClickCapture`:case`onMouseDown`:case`onMouseDownCapture`:case`onMouseMove`:case`onMouseMoveCapture`:case`onMouseUp`:case`onMouseUpCapture`:case`onMouseEnter`:(r=!r.disabled)||(e=e.type,r=!(e===`button`||e===`input`||e===`select`||e===`textarea`)),e=!r;break a;default:e=!1}if(e)return null;if(n&&typeof n!=`function`)throw Error(i(231,t,typeof n));return n}var cn=!(typeof window>`u`||window.document===void 0||window.document.createElement===void 0),ln=!1;if(cn)try{var un={};Object.defineProperty(un,`passive`,{get:function(){ln=!0}}),window.addEventListener(`test`,un,un),window.removeEventListener(`test`,un,un)}catch{ln=!1}var dn=null,fn=null,pn=null;function mn(){if(pn)return pn;var e,t=fn,n=t.length,r,i=`value`in dn?dn.value:dn.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return pn=i.slice(e,1<r?1-r:void 0)}function hn(e){var t=e.keyCode;return`charCode`in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function gn(){return!0}function _n(){return!1}function vn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented==null?!1===i.returnValue:i.defaultPrevented)?gn:_n,this.isPropagationStopped=_n,this}return m(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!=`unknown`&&(e.returnValue=!1),this.isDefaultPrevented=gn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!=`unknown`&&(e.cancelBubble=!0),this.isPropagationStopped=gn)},persist:function(){},isPersistent:gn}),t}var yn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},V=vn(yn),bn=m({},yn,{view:0,detail:0}),xn=vn(bn),Sn,Cn,wn,Tn=m({},bn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return`movementX`in e?e.movementX:(e!==wn&&(wn&&e.type===`mousemove`?(Sn=e.screenX-wn.screenX,Cn=e.screenY-wn.screenY):Cn=Sn=0,wn=e),Sn)},movementY:function(e){return`movementY`in e?e.movementY:Cn}}),En=vn(Tn),Dn=vn(m({},Tn,{dataTransfer:0})),On=vn(m({},bn,{relatedTarget:0})),kn=vn(m({},yn,{animationName:0,elapsedTime:0,pseudoElement:0})),An=vn(m({},yn,{clipboardData:function(e){return`clipboardData`in e?e.clipboardData:window.clipboardData}})),jn=vn(m({},yn,{data:0})),Mn={Esc:`Escape`,Spacebar:` `,Left:`ArrowLeft`,Up:`ArrowUp`,Right:`ArrowRight`,Down:`ArrowDown`,Del:`Delete`,Win:`OS`,Menu:`ContextMenu`,Apps:`ContextMenu`,Scroll:`ScrollLock`,MozPrintableKey:`Unidentified`},Nn={8:`Backspace`,9:`Tab`,12:`Clear`,13:`Enter`,16:`Shift`,17:`Control`,18:`Alt`,19:`Pause`,20:`CapsLock`,27:`Escape`,32:` `,33:`PageUp`,34:`PageDown`,35:`End`,36:`Home`,37:`ArrowLeft`,38:`ArrowUp`,39:`ArrowRight`,40:`ArrowDown`,45:`Insert`,46:`Delete`,112:`F1`,113:`F2`,114:`F3`,115:`F4`,116:`F5`,117:`F6`,118:`F7`,119:`F8`,120:`F9`,121:`F10`,122:`F11`,123:`F12`,144:`NumLock`,145:`ScrollLock`,224:`Meta`},Pn={Alt:`altKey`,Control:`ctrlKey`,Meta:`metaKey`,Shift:`shiftKey`};function Fn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Pn[e])?!!t[e]:!1}function In(){return Fn}var Ln=vn(m({},bn,{key:function(e){if(e.key){var t=Mn[e.key]||e.key;if(t!==`Unidentified`)return t}return e.type===`keypress`?(e=hn(e),e===13?`Enter`:String.fromCharCode(e)):e.type===`keydown`||e.type===`keyup`?Nn[e.keyCode]||`Unidentified`:``},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return e.type===`keypress`?hn(e):0},keyCode:function(e){return e.type===`keydown`||e.type===`keyup`?e.keyCode:0},which:function(e){return e.type===`keypress`?hn(e):e.type===`keydown`||e.type===`keyup`?e.keyCode:0}})),Rn=vn(m({},Tn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),zn=vn(m({},bn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),H=vn(m({},yn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Bn=vn(m({},Tn,{deltaX:function(e){return`deltaX`in e?e.deltaX:`wheelDeltaX`in e?-e.wheelDeltaX:0},deltaY:function(e){return`deltaY`in e?e.deltaY:`wheelDeltaY`in e?-e.wheelDeltaY:`wheelDelta`in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Vn=vn(m({},yn,{newState:0,oldState:0})),Hn=[9,13,27,32],Un=cn&&`CompositionEvent`in window,Wn=null;cn&&`documentMode`in document&&(Wn=document.documentMode);var Gn=cn&&`TextEvent`in window&&!Wn,Kn=cn&&(!Un||Wn&&8<Wn&&11>=Wn),qn=` `,Jn=!1;function Yn(e,t){switch(e){case`keyup`:return Hn.indexOf(t.keyCode)!==-1;case`keydown`:return t.keyCode!==229;case`keypress`:case`mousedown`:case`focusout`:return!0;default:return!1}}function Xn(e){return e=e.detail,typeof e==`object`&&`data`in e?e.data:null}var Zn=!1;function Qn(e,t){switch(e){case`compositionend`:return Xn(t);case`keypress`:return t.which===32?(Jn=!0,qn):null;case`textInput`:return e=t.data,e===qn&&Jn?null:e;default:return null}}function $n(e,t){if(Zn)return e===`compositionend`||!Un&&Yn(e,t)?(e=mn(),pn=fn=dn=null,Zn=!1,e):null;switch(e){case`paste`:return null;case`keypress`:if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case`compositionend`:return Kn&&t.locale!==`ko`?null:t.data;default:return null}}var er={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t===`input`?!!er[e.type]:t===`textarea`}function nr(e,t,n,r){tn?nn?nn.push(r):nn=[r]:tn=r,t=Nd(t,`onChange`),0<t.length&&(n=new V(`onChange`,`change`,null,n,r),e.push({event:n,listeners:t}))}var rr=null,ir=null;function ar(e){Td(e,0)}function or(e){if(Pt(vt(e)))return e}function sr(e,t){if(e===`change`)return t}var cr=!1;if(cn){var lr;if(cn){var ur=`oninput`in document;if(!ur){var dr=document.createElement(`div`);dr.setAttribute(`oninput`,`return;`),ur=typeof dr.oninput==`function`}lr=ur}else lr=!1;cr=lr&&(!document.documentMode||9<document.documentMode)}function fr(){rr&&(rr.detachEvent(`onpropertychange`,pr),ir=rr=null)}function pr(e){if(e.propertyName===`value`&&or(ir)){var t=[];nr(t,ir,e,en(e)),on(ar,t)}}function mr(e,t,n){e===`focusin`?(fr(),rr=t,ir=n,rr.attachEvent(`onpropertychange`,pr)):e===`focusout`&&fr()}function hr(e){if(e===`selectionchange`||e===`keyup`||e===`keydown`)return or(ir)}function gr(e,t){if(e===`click`)return or(t)}function _r(e,t){if(e===`input`||e===`change`)return or(t)}function vr(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var yr=typeof Object.is==`function`?Object.is:vr;function br(e,t){if(yr(e,t))return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Se.call(t,i)||!yr(e[i],t[i]))return!1}return!0}function xr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Sr(e,t){var n=xr(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}a:{for(;n;){if(n.nextSibling){n=n.nextSibling;break a}n=n.parentNode}n=void 0}n=xr(n)}}function Cr(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Cr(e,t.parentNode):`contains`in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function wr(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ft(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href==`string`}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ft(e.document)}return t}function Tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t===`input`&&(e.type===`text`||e.type===`search`||e.type===`tel`||e.type===`url`||e.type===`password`)||t===`textarea`||e.contentEditable===`true`)}var Er=cn&&`documentMode`in document&&11>=document.documentMode,Dr=null,Or=null,kr=null,Ar=!1;function jr(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ar||Dr==null||Dr!==Ft(r)||(r=Dr,`selectionStart`in r&&Tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),kr&&br(kr,r)||(kr=r,r=Nd(Or,`onSelect`),0<r.length&&(t=new V(`onSelect`,`select`,null,t,n),e.push({event:t,listeners:r}),t.target=Dr)))}function Mr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n[`Webkit`+e]=`webkit`+t,n[`Moz`+e]=`moz`+t,n}var Nr={animationend:Mr(`Animation`,`AnimationEnd`),animationiteration:Mr(`Animation`,`AnimationIteration`),animationstart:Mr(`Animation`,`AnimationStart`),transitionrun:Mr(`Transition`,`TransitionRun`),transitionstart:Mr(`Transition`,`TransitionStart`),transitioncancel:Mr(`Transition`,`TransitionCancel`),transitionend:Mr(`Transition`,`TransitionEnd`)},Pr={},Fr={};cn&&(Fr=document.createElement(`div`).style,`AnimationEvent`in window||(delete Nr.animationend.animation,delete Nr.animationiteration.animation,delete Nr.animationstart.animation),`TransitionEvent`in window||delete Nr.transitionend.transition);function Ir(e){if(Pr[e])return Pr[e];if(!Nr[e])return e;var t=Nr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Fr)return Pr[e]=t[n];return e}var Lr=Ir(`animationend`),Rr=Ir(`animationiteration`),zr=Ir(`animationstart`),Br=Ir(`transitionrun`),Vr=Ir(`transitionstart`),Hr=Ir(`transitioncancel`),Ur=Ir(`transitionend`),Wr=new Map,Gr=`abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel`.split(` `);Gr.push(`scrollEnd`);function Kr(e,t){Wr.set(e,t),Ct(t,[e])}var U=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},W=[],qr=0,Jr=0;function Yr(){for(var e=qr,t=Jr=qr=0;t<e;){var n=W[t];W[t++]=null;var r=W[t];W[t++]=null;var i=W[t];W[t++]=null;var a=W[t];if(W[t++]=null,r!==null&&i!==null){var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}a!==0&&$r(n,i,a)}}function Xr(e,t,n,r){W[qr++]=e,W[qr++]=t,W[qr++]=n,W[qr++]=r,Jr|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function Zr(e,t,n,r){return Xr(e,t,n,r),ei(e)}function Qr(e,t){return Xr(e,null,null,t),ei(e)}function $r(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var i=!1,a=e.return;a!==null;)a.childLanes|=n,r=a.alternate,r!==null&&(r.childLanes|=n),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(i=!0)),e=a,a=a.return;return e.tag===3?(a=e.stateNode,i&&t!==null&&(i=31-ze(n),e=a.hiddenUpdates,r=e[i],r===null?e[i]=[t]:r.push(t),t.lane=n|536870912),a):null}function ei(e){if(50<gu)throw gu=0,_u=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ti={};function ni(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ri(e,t,n,r){return new ni(e,t,n,r)}function ii(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ai(e,t){var n=e.alternate;return n===null?(n=ri(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function oi(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function si(e,t,n,r,a,o){var s=0;if(r=e,typeof e==`function`)ii(e)&&(s=1);else if(typeof e==`string`)s=Zf(e,n,se.current)?26:e===`html`||e===`head`||e===`body`?27:5;else a:switch(e){case ee:return e=ri(31,n,t,a),e.elementType=ee,e.lanes=o,e;case y:return ci(n.children,a,o,t);case b:s=8,a|=24;break;case x:return e=ri(12,n,t,a|2),e.elementType=x,e.lanes=o,e;case T:return e=ri(13,n,t,a),e.elementType=T,e.lanes=o,e;case E:return e=ri(19,n,t,a),e.elementType=E,e.lanes=o,e;default:if(typeof e==`object`&&e)switch(e.$$typeof){case C:s=10;break a;case S:s=9;break a;case w:s=11;break a;case D:s=14;break a;case O:s=16,r=null;break a}s=29,n=Error(i(130,e===null?`null`:typeof e,``)),r=null}return t=ri(s,n,t,a),t.elementType=e,t.type=r,t.lanes=o,t}function ci(e,t,n,r){return e=ri(7,e,r,t),e.lanes=n,e}function li(e,t,n){return e=ri(6,e,null,t),e.lanes=n,e}function ui(e){var t=ri(18,null,null,0);return t.stateNode=e,t}function di(e,t,n){return t=ri(4,e.children===null?[]:e.children,e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var fi=new WeakMap;function pi(e,t){if(typeof e==`object`&&e){var n=fi.get(e);return n===void 0?(t={value:e,source:t,stack:xe(t)},fi.set(e,t),t):n}return{value:e,source:t,stack:xe(t)}}var mi=[],hi=0,gi=null,_i=0,vi=[],yi=0,bi=null,xi=1,Si=``;function Ci(e,t){mi[hi++]=_i,mi[hi++]=gi,gi=e,_i=t}function wi(e,t,n){vi[yi++]=xi,vi[yi++]=Si,vi[yi++]=bi,bi=e;var r=xi;e=Si;var i=32-ze(r)-1;r&=~(1<<i),n+=1;var a=32-ze(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,xi=1<<32-ze(t)+i|n<<i|r,Si=a+e}else xi=1<<a|n<<i|r,Si=e}function Ti(e){e.return!==null&&(Ci(e,1),wi(e,1,0))}function Ei(e){for(;e===gi;)gi=mi[--hi],mi[hi]=null,_i=mi[--hi],mi[hi]=null;for(;e===bi;)bi=vi[--yi],vi[yi]=null,Si=vi[--yi],vi[yi]=null,xi=vi[--yi],vi[yi]=null}function Di(e,t){vi[yi++]=xi,vi[yi++]=Si,vi[yi++]=bi,xi=t.id,Si=t.overflow,bi=e}var Oi=null,ki=null,G=!1,Ai=null,ji=!1,Mi=Error(i(519));function Ni(e){throw zi(pi(Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?`text`:`HTML`,``)),e)),Mi}function Pi(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[st]=e,t[ct]=r,n){case`dialog`:Ed(`cancel`,t),Ed(`close`,t);break;case`iframe`:case`object`:case`embed`:Ed(`load`,t);break;case`video`:case`audio`:for(n=0;n<Cd.length;n++)Ed(Cd[n],t);break;case`source`:Ed(`error`,t);break;case`img`:case`image`:case`link`:Ed(`error`,t),Ed(`load`,t);break;case`details`:Ed(`toggle`,t);break;case`input`:Ed(`invalid`,t),zt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case`select`:Ed(`invalid`,t);break;case`textarea`:Ed(`invalid`,t),Ut(t,r.value,r.defaultValue,r.children)}n=r.children,typeof n!=`string`&&typeof n!=`number`&&typeof n!=`bigint`||t.textContent===``+n||!0===r.suppressHydrationWarning||zd(t.textContent,n)?(r.popover!=null&&(Ed(`beforetoggle`,t),Ed(`toggle`,t)),r.onScroll!=null&&Ed(`scroll`,t),r.onScrollEnd!=null&&Ed(`scrollend`,t),r.onClick!=null&&(t.onclick=Qt),t=!0):t=!1,t||Ni(e,!0)}function Fi(e){for(Oi=e.return;Oi;)switch(Oi.tag){case 5:case 31:case 13:ji=!1;return;case 27:case 3:ji=!0;return;default:Oi=Oi.return}}function Ii(e){if(e!==Oi)return!1;if(!G)return Fi(e),G=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!==`form`&&n!==`button`)||Zd(e.type,e.memoizedProps)),n=!n),n&&ki&&Ni(e),Fi(e),t===13){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));ki=vf(e)}else if(t===31){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));ki=vf(e)}else t===27?(t=ki,of(e.type)?(e=_f,_f=null,ki=e):ki=t):ki=Oi?gf(e.stateNode.nextSibling):null;return!0}function Li(){ki=Oi=null,G=!1}function Ri(){var e=Ai;return e!==null&&(nu===null?nu=e:nu.push.apply(nu,e),Ai=null),e}function zi(e){Ai===null?Ai=[e]:Ai.push(e)}var Bi=ie(null),Vi=null,Hi=null;function Ui(e,t,n){oe(Bi,t._currentValue),t._currentValue=n}function Wi(e){e._currentValue=Bi.current,ae(Bi)}function Gi(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t?r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t):(e.childLanes|=t,r!==null&&(r.childLanes|=t)),e===n)break;e=e.return}}function Ki(e,t,n,r){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){var s=a.child;o=o.firstContext;a:for(;o!==null;){var c=o;o=a;for(var l=0;l<t.length;l++)if(c.context===t[l]){o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Gi(o.return,n,e),r||(s=null);break a}o=c.next}}else if(a.tag===18){if(s=a.return,s===null)throw Error(i(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),Gi(s,n,e),s=null}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}}function qi(e,t,n,r){e=null;for(var a=t,o=!1;a!==null;){if(!o){if(a.flags&524288)o=!0;else if(a.flags&262144)break}if(a.tag===10){var s=a.alternate;if(s===null)throw Error(i(387));if(s=s.memoizedProps,s!==null){var c=a.type;yr(a.pendingProps.value,s.value)||(e===null?e=[c]:e.push(c))}}else if(a===ue.current){if(s=a.alternate,s===null)throw Error(i(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e===null?e=[op]:e.push(op))}a=a.return}e!==null&&Ki(t,e,n,r),t.flags|=262144}function Ji(e){for(e=e.firstContext;e!==null;){if(!yr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Yi(e){Vi=e,Hi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Xi(e){return Qi(Vi,e)}function Zi(e,t){return Vi===null&&Yi(e),Qi(e,t)}function Qi(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Hi===null){if(e===null)throw Error(i(308));Hi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Hi=Hi.next=t;return n}var $i=typeof AbortController<`u`?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},ea=t.unstable_scheduleCallback,ta=t.unstable_NormalPriority,na={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ra(){return{controller:new $i,data:new Map,refCount:0}}function ia(e){e.refCount--,e.refCount===0&&ea(ta,function(){e.controller.abort()})}var aa=null,oa=0,sa=0,ca=null;function la(e,t){if(aa===null){var n=aa=[];oa=0,sa=_d(),ca={status:`pending`,value:void 0,then:function(e){n.push(e)}}}return oa++,t.then(ua,ua),t}function ua(){if(--oa===0&&aa!==null){ca!==null&&(ca.status=`fulfilled`);var e=aa;aa=null,sa=0,ca=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function da(e,t){var n=[],r={status:`pending`,value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status=`fulfilled`,r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status=`rejected`,r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}var fa=N.S;N.S=function(e,t){au=De(),typeof t==`object`&&t&&typeof t.then==`function`&&la(e,t),fa!==null&&fa(e,t)};var pa=ie(null);function ma(){var e=pa.current;return e===null?Bl.pooledCache:e}function ha(e,t){t===null?oe(pa,pa.current):oe(pa,t.pool)}function ga(){var e=ma();return e===null?null:{parent:na._currentValue,pool:e}}var _a=Error(i(460)),va=Error(i(474)),ya=Error(i(542)),ba={then:function(){}};function xa(e){return e=e.status,e===`fulfilled`||e===`rejected`}function Sa(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Qt,Qt),t=n),t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,Ea(e),e;default:if(typeof t.status==`string`)t.then(Qt,Qt);else{if(e=Bl,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status=`pending`,e.then(function(e){if(t.status===`pending`){var n=t;n.status=`fulfilled`,n.value=e}},function(e){if(t.status===`pending`){var n=t;n.status=`rejected`,n.reason=e}})}switch(t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,Ea(e),e}throw wa=t,_a}}function Ca(e){try{var t=e._init;return t(e._payload)}catch(e){throw typeof e==`object`&&e&&typeof e.then==`function`?(wa=e,_a):e}}var wa=null;function Ta(){if(wa===null)throw Error(i(459));var e=wa;return wa=null,e}function Ea(e){if(e===_a||e===ya)throw Error(i(483))}var Da=null,Oa=0;function K(e){var t=Oa;return Oa+=1,Da===null&&(Da=[]),Sa(Da,e,t)}function ka(e,t){t=t.props.ref,e.ref=t===void 0?null:t}function Aa(e,t){throw t.$$typeof===g?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e===`[object Object]`?`object with keys {`+Object.keys(t).join(`, `)+`}`:e)))}function ja(e){function t(t,n){if(e){var r=t.deletions;r===null?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;r!==null;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;e!==null;)e.key===null?t.set(e.index,e):t.set(e.key,e),e=e.sibling;return t}function a(e,t){return e=ai(e,t),e.index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?(r=t.alternate,r===null?(t.flags|=67108866,n):(r=r.index,r<n?(t.flags|=67108866,n):r)):(t.flags|=1048576,n)}function s(t){return e&&t.alternate===null&&(t.flags|=67108866),t}function c(e,t,n,r){return t===null||t.tag!==6?(t=li(n,e.mode,r),t.return=e,t):(t=a(t,n),t.return=e,t)}function l(e,t,n,r){var i=n.type;return i===y?d(e,t,n.props.children,r,n.key):t!==null&&(t.elementType===i||typeof i==`object`&&i&&i.$$typeof===O&&Ca(i)===t.type)?(t=a(t,n.props),ka(t,n),t.return=e,t):(t=si(n.type,n.key,n.props,null,e.mode,r),ka(t,n),t.return=e,t)}function u(e,t,n,r){return t===null||t.tag!==4||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=di(n,e.mode,r),t.return=e,t):(t=a(t,n.children||[]),t.return=e,t)}function d(e,t,n,r,i){return t===null||t.tag!==7?(t=ci(n,e.mode,r,i),t.return=e,t):(t=a(t,n),t.return=e,t)}function f(e,t,n){if(typeof t==`string`&&t!==``||typeof t==`number`||typeof t==`bigint`)return t=li(``+t,e.mode,n),t.return=e,t;if(typeof t==`object`&&t){switch(t.$$typeof){case _:return n=si(t.type,t.key,t.props,null,e.mode,n),ka(n,t),n.return=e,n;case v:return t=di(t,e.mode,n),t.return=e,t;case O:return t=Ca(t),f(e,t,n)}if(M(t)||A(t))return t=ci(t,e.mode,n,null),t.return=e,t;if(typeof t.then==`function`)return f(e,K(t),n);if(t.$$typeof===C)return f(e,Zi(e,t),n);Aa(e,t)}return null}function p(e,t,n,r){var i=t===null?null:t.key;if(typeof n==`string`&&n!==``||typeof n==`number`||typeof n==`bigint`)return i===null?c(e,t,``+n,r):null;if(typeof n==`object`&&n){switch(n.$$typeof){case _:return n.key===i?l(e,t,n,r):null;case v:return n.key===i?u(e,t,n,r):null;case O:return n=Ca(n),p(e,t,n,r)}if(M(n)||A(n))return i===null?d(e,t,n,r,null):null;if(typeof n.then==`function`)return p(e,t,K(n),r);if(n.$$typeof===C)return p(e,t,Zi(e,n),r);Aa(e,n)}return null}function m(e,t,n,r,i){if(typeof r==`string`&&r!==``||typeof r==`number`||typeof r==`bigint`)return e=e.get(n)||null,c(t,e,``+r,i);if(typeof r==`object`&&r){switch(r.$$typeof){case _:return e=e.get(r.key===null?n:r.key)||null,l(t,e,r,i);case v:return e=e.get(r.key===null?n:r.key)||null,u(t,e,r,i);case O:return r=Ca(r),m(e,t,n,r,i)}if(M(r)||A(r))return e=e.get(n)||null,d(t,e,r,i,null);if(typeof r.then==`function`)return m(e,t,n,K(r),i);if(r.$$typeof===C)return m(e,t,n,Zi(t,r),i);Aa(t,r)}return null}function h(i,a,s,c){for(var l=null,u=null,d=a,h=a=0,g=null;d!==null&&h<s.length;h++){d.index>h?(g=d,d=null):g=d.sibling;var _=p(i,d,s[h],c);if(_===null){d===null&&(d=g);break}e&&d&&_.alternate===null&&t(i,d),a=o(_,a,h),u===null?l=_:u.sibling=_,u=_,d=g}if(h===s.length)return n(i,d),G&&Ci(i,h),l;if(d===null){for(;h<s.length;h++)d=f(i,s[h],c),d!==null&&(a=o(d,a,h),u===null?l=d:u.sibling=d,u=d);return G&&Ci(i,h),l}for(d=r(d);h<s.length;h++)g=m(d,i,h,s[h],c),g!==null&&(e&&g.alternate!==null&&d.delete(g.key===null?h:g.key),a=o(g,a,h),u===null?l=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),G&&Ci(i,h),l}function g(a,s,c,l){if(c==null)throw Error(i(151));for(var u=null,d=null,h=s,g=s=0,_=null,v=c.next();h!==null&&!v.done;g++,v=c.next()){h.index>g?(_=h,h=null):_=h.sibling;var y=p(a,h,v.value,l);if(y===null){h===null&&(h=_);break}e&&h&&y.alternate===null&&t(a,h),s=o(y,s,g),d===null?u=y:d.sibling=y,d=y,h=_}if(v.done)return n(a,h),G&&Ci(a,g),u;if(h===null){for(;!v.done;g++,v=c.next())v=f(a,v.value,l),v!==null&&(s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return G&&Ci(a,g),u}for(h=r(h);!v.done;g++,v=c.next())v=m(h,a,g,v.value,l),v!==null&&(e&&v.alternate!==null&&h.delete(v.key===null?g:v.key),s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return e&&h.forEach(function(e){return t(a,e)}),G&&Ci(a,g),u}function b(e,r,o,c){if(typeof o==`object`&&o&&o.type===y&&o.key===null&&(o=o.props.children),typeof o==`object`&&o){switch(o.$$typeof){case _:a:{for(var l=o.key;r!==null;){if(r.key===l){if(l=o.type,l===y){if(r.tag===7){n(e,r.sibling),c=a(r,o.props.children),c.return=e,e=c;break a}}else if(r.elementType===l||typeof l==`object`&&l&&l.$$typeof===O&&Ca(l)===r.type){n(e,r.sibling),c=a(r,o.props),ka(c,o),c.return=e,e=c;break a}n(e,r);break}else t(e,r);r=r.sibling}o.type===y?(c=ci(o.props.children,e.mode,c,o.key),c.return=e,e=c):(c=si(o.type,o.key,o.props,null,e.mode,c),ka(c,o),c.return=e,e=c)}return s(e);case v:a:{for(l=o.key;r!==null;){if(r.key===l)if(r.tag===4&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),c=a(r,o.children||[]),c.return=e,e=c;break a}else{n(e,r);break}else t(e,r);r=r.sibling}c=di(o,e.mode,c),c.return=e,e=c}return s(e);case O:return o=Ca(o),b(e,r,o,c)}if(M(o))return h(e,r,o,c);if(A(o)){if(l=A(o),typeof l!=`function`)throw Error(i(150));return o=l.call(o),g(e,r,o,c)}if(typeof o.then==`function`)return b(e,r,K(o),c);if(o.$$typeof===C)return b(e,r,Zi(e,o),c);Aa(e,o)}return typeof o==`string`&&o!==``||typeof o==`number`||typeof o==`bigint`?(o=``+o,r!==null&&r.tag===6?(n(e,r.sibling),c=a(r,o),c.return=e,e=c):(n(e,r),c=li(o,e.mode,c),c.return=e,e=c),s(e)):n(e,r)}return function(e,t,n,r){try{Oa=0;var i=b(e,t,n,r);return Da=null,i}catch(t){if(t===_a||t===ya)throw t;var a=ri(29,t,null,e.mode);return a.lanes=r,a.return=e,a}}}var Ma=ja(!0),Na=ja(!1),Pa=!1;function Fa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ia(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function La(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ra(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,zl&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=ei(e),$r(e,null,n),t}return Xr(e,r,t,n),ei(e)}function za(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,n&4194048)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,et(e,n)}}function Ba(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Va=!1;function Ha(){if(Va){var e=ca;if(e!==null)throw e}}function Ua(e,t,n,r){Va=!1;var i=e.updateQueue;Pa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,o===null?a=l:o.next=l,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==o&&(s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(a!==null){var d=i.baseState;o=0,u=l=c=null,s=a;do{var f=s.lane&-536870913,p=f!==s.lane;if(p?(Hl&f)===f:(r&f)===f){f!==0&&f===sa&&(Va=!0),u!==null&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});a:{var h=e,g=s;f=t;var _=n;switch(g.tag){case 1:if(h=g.payload,typeof h==`function`){d=h.call(_,d,f);break a}d=h;break a;case 3:h.flags=h.flags&-65537|128;case 0:if(h=g.payload,f=typeof h==`function`?h.call(_,d,f):h,f==null)break a;d=m({},d,f);break a;case 2:Pa=!0}}f=s.callback,f!==null&&(e.flags|=64,p&&(e.flags|=8192),p=i.callbacks,p===null?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(l=u=p,c=d):u=u.next=p,o|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;p=s,s=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,a===null&&(i.shared.lanes=0),Xl|=o,e.lanes=o,e.memoizedState=d}}function Wa(e,t){if(typeof e!=`function`)throw Error(i(191,e));e.call(t)}function Ga(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Wa(n[e],t)}var Ka=ie(null),qa=ie(0);function Ja(e,t){e=Jl,oe(qa,e),oe(Ka,t),Jl=e|t.baseLanes}function Ya(){oe(qa,Jl),oe(Ka,Ka.current)}function Xa(){Jl=qa.current,ae(Ka),ae(qa)}var Za=ie(null),Qa=null;function $a(e){var t=e.alternate;oe(io,io.current&1),oe(Za,e),Qa===null&&(t===null||Ka.current!==null||t.memoizedState!==null)&&(Qa=e)}function eo(e){oe(io,io.current),oe(Za,e),Qa===null&&(Qa=e)}function to(e){e.tag===22?(oe(io,io.current),oe(Za,e),Qa===null&&(Qa=e)):no(e)}function no(){oe(io,io.current),oe(Za,Za.current)}function ro(e){ae(Za),Qa===e&&(Qa=null),ae(io)}var io=ie(0);function ao(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||pf(n)||mf(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder===`forwards`||t.memoizedProps.revealOrder===`backwards`||t.memoizedProps.revealOrder===`unstable_legacy-backwards`||t.memoizedProps.revealOrder===`together`)){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var oo=0,so=null,co=null,lo=null,uo=!1,fo=!1,po=!1,mo=0,ho=0,go=null,_o=0;function vo(){throw Error(i(321))}function yo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!yr(e[n],t[n]))return!1;return!0}function bo(e,t,n,r,i,a){return oo=a,so=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,N.H=e===null||e.memoizedState===null?Ls:Rs,po=!1,a=n(r,i),po=!1,fo&&(a=So(t,n,r,i)),xo(e),a}function xo(e){N.H=Is;var t=co!==null&&co.next!==null;if(oo=0,lo=co=so=null,uo=!1,ho=0,go=null,t)throw Error(i(300));e===null||tc||(e=e.dependencies,e!==null&&Ji(e)&&(tc=!0))}function So(e,t,n,r){so=e;var a=0;do{if(fo&&(go=null),ho=0,fo=!1,25<=a)throw Error(i(301));if(a+=1,lo=co=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}N.H=zs,o=t(n,r)}while(fo);return o}function Co(){var e=N.H,t=e.useState()[0];return t=typeof t.then==`function`?Ao(t):t,e=e.useState()[0],(co===null?null:co.memoizedState)!==e&&(so.flags|=1024),t}function wo(){var e=mo!==0;return mo=0,e}function To(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Eo(e){if(uo){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}uo=!1}oo=0,lo=co=so=null,fo=!1,ho=mo=0,go=null}function Do(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lo===null?so.memoizedState=lo=e:lo=lo.next=e,lo}function Oo(){if(co===null){var e=so.alternate;e=e===null?null:e.memoizedState}else e=co.next;var t=lo===null?so.memoizedState:lo.next;if(t!==null)lo=t,co=e;else{if(e===null)throw so.alternate===null?Error(i(467)):Error(i(310));co=e,e={memoizedState:co.memoizedState,baseState:co.baseState,baseQueue:co.baseQueue,queue:co.queue,next:null},lo===null?so.memoizedState=lo=e:lo=lo.next=e}return lo}function ko(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ao(e){var t=ho;return ho+=1,go===null&&(go=[]),e=Sa(go,e,t),t=so,(lo===null?t.memoizedState:lo.next)===null&&(t=t.alternate,N.H=t===null||t.memoizedState===null?Ls:Rs),e}function jo(e){if(typeof e==`object`&&e){if(typeof e.then==`function`)return Ao(e);if(e.$$typeof===C)return Xi(e)}throw Error(i(438,String(e)))}function Mo(e){var t=null,n=so.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=so.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(t??={data:[],index:0},n===null&&(n=ko(),so.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=k;return t.index++,n}function No(e,t){return typeof t==`function`?t(e):t}function Po(e){return Fo(Oo(),co,e)}function Fo(e,t,n){var r=e.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=n;var a=e.baseQueue,o=r.pending;if(o!==null){if(a!==null){var s=a.next;a.next=o.next,o.next=s}t.baseQueue=a=o,r.pending=null}if(o=e.baseState,a===null)e.memoizedState=o;else{t=a.next;var c=s=null,l=null,u=t,d=!1;do{var f=u.lane&-536870913;if(f===u.lane?(oo&f)===f:(Hl&f)===f){var p=u.revertLane;if(p===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===sa&&(d=!0);else if((oo&p)===p){u=u.next,p===sa&&(d=!0);continue}else f={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=f,s=o):l=l.next=f,so.lanes|=p,Xl|=p;f=u.action,po&&n(o,f),o=u.hasEagerState?u.eagerState:n(o,f)}else p={lane:f,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=p,s=o):l=l.next=p,so.lanes|=f,Xl|=f;u=u.next}while(u!==null&&u!==t);if(l===null?s=o:l.next=c,!yr(o,e.memoizedState)&&(tc=!0,d&&(n=ca,n!==null)))throw n;e.memoizedState=o,e.baseState=s,e.baseQueue=l,r.lastRenderedState=o}return a===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Io(e){var t=Oo(),n=t.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var s=a=a.next;do o=e(o,s.action),s=s.next;while(s!==a);yr(o,t.memoizedState)||(tc=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Lo(e,t,n){var r=so,a=Oo(),o=G;if(o){if(n===void 0)throw Error(i(407));n=n()}else n=t();var s=!yr((co||a).memoizedState,n);if(s&&(a.memoizedState=n,tc=!0),a=a.queue,cs(Bo.bind(null,r,a,e),[e]),a.getSnapshot!==t||s||lo!==null&&lo.memoizedState.tag&1){if(r.flags|=2048,rs(9,{destroy:void 0},zo.bind(null,r,a,n,t),null),Bl===null)throw Error(i(349));o||oo&127||Ro(r,t,n)}return n}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=so.updateQueue,t===null?(t=ko(),so.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function zo(e,t,n,r){t.value=n,t.getSnapshot=r,Vo(t)&&Ho(e)}function Bo(e,t,n){return n(function(){Vo(t)&&Ho(e)})}function Vo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!yr(e,n)}catch{return!0}}function Ho(e){var t=Qr(e,2);t!==null&&bu(t,e,2)}function Uo(e){var t=Do();if(typeof e==`function`){var n=e;if(e=n(),po){Re(!0);try{n()}finally{Re(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:e},t}function Wo(e,t,n,r){return e.baseState=n,Fo(e,co,typeof r==`function`?r:No)}function Go(e,t,n,r,a){if(Ns(e))throw Error(i(485));if(e=t.action,e!==null){var o={payload:a,action:e,next:null,isTransition:!0,status:`pending`,value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};N.T===null?o.isTransition=!1:n(!0),r(o),n=t.pending,n===null?(o.next=t.pending=o,Ko(t,o)):(o.next=n.next,t.pending=n.next=o)}}function Ko(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=N.T,o={};N.T=o;try{var s=n(i,r),c=N.S;c!==null&&c(o,s),qo(e,t,s)}catch(n){Yo(e,t,n)}finally{a!==null&&o.types!==null&&(a.types=o.types),N.T=a}}else try{a=n(i,r),qo(e,t,a)}catch(n){Yo(e,t,n)}}function qo(e,t,n){typeof n==`object`&&n&&typeof n.then==`function`?n.then(function(n){Jo(e,t,n)},function(n){return Yo(e,t,n)}):Jo(e,t,n)}function Jo(e,t,n){t.status=`fulfilled`,t.value=n,Xo(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Ko(e,n)))}function Yo(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status=`rejected`,t.reason=n,Xo(t),t=t.next;while(t!==r)}e.action=null}function Xo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Zo(e,t){return t}function Qo(e,t){if(G){var n=Bl.formState;if(n!==null){a:{var r=so;if(G){if(ki){b:{for(var i=ki,a=ji;i.nodeType!==8;){if(!a){i=null;break b}if(i=gf(i.nextSibling),i===null){i=null;break b}}a=i.data,i=a===`F!`||a===`F`?i:null}if(i){ki=gf(i.nextSibling),r=i.data===`F!`;break a}}Ni(r)}r=!1}r&&(t=n[0])}}return n=Do(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zo,lastRenderedState:t},n.queue=r,n=As.bind(null,so,r),r.dispatch=n,r=Uo(!1),a=Ms.bind(null,so,!1,r.queue),r=Do(),i={state:t,dispatch:null,action:e,pending:null},r.queue=i,n=Go.bind(null,so,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function $o(e){return es(Oo(),co,e)}function es(e,t,n){if(t=Fo(e,t,Zo)[0],e=Po(No)[0],typeof t==`object`&&t&&typeof t.then==`function`)try{var r=Ao(t)}catch(e){throw e===_a?ya:e}else r=t;t=Oo();var i=t.queue,a=i.dispatch;return n!==t.memoizedState&&(so.flags|=2048,rs(9,{destroy:void 0},ts.bind(null,i,n),null)),[r,a,e]}function ts(e,t){e.action=t}function ns(e){var t=Oo(),n=co;if(n!==null)return es(t,n,e);Oo(),t=t.memoizedState,n=Oo();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function rs(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=so.updateQueue,t===null&&(t=ko(),so.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function is(){return Oo().memoizedState}function as(e,t,n,r){var i=Do();so.flags|=e,i.memoizedState=rs(1|t,{destroy:void 0},n,r===void 0?null:r)}function os(e,t,n,r){var i=Oo();r=r===void 0?null:r;var a=i.memoizedState.inst;co!==null&&r!==null&&yo(r,co.memoizedState.deps)?i.memoizedState=rs(t,a,n,r):(so.flags|=e,i.memoizedState=rs(1|t,a,n,r))}function ss(e,t){as(8390656,8,e,t)}function cs(e,t){os(2048,8,e,t)}function ls(e){so.flags|=4;var t=so.updateQueue;if(t===null)t=ko(),so.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function us(e){var t=Oo().memoizedState;return ls({ref:t,nextImpl:e}),function(){if(zl&2)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function ds(e,t){return os(4,2,e,t)}function fs(e,t){return os(4,4,e,t)}function ps(e,t){if(typeof t==`function`){e=e();var n=t(e);return function(){typeof n==`function`?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ms(e,t,n){n=n==null?null:n.concat([e]),os(4,4,ps.bind(null,t,e),n)}function hs(){}function gs(e,t){var n=Oo();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&yo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function _s(e,t){var n=Oo();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&yo(t,r[1]))return r[0];if(r=e(),po){Re(!0);try{e()}finally{Re(!1)}}return n.memoizedState=[r,t],r}function vs(e,t,n){return n===void 0||oo&1073741824&&!(Hl&261930)?e.memoizedState=t:(e.memoizedState=n,e=yu(),so.lanes|=e,Xl|=e,n)}function ys(e,t,n,r){return yr(n,t)?n:Ka.current===null?!(oo&42)||oo&1073741824&&!(Hl&261930)?(tc=!0,e.memoizedState=n):(e=yu(),so.lanes|=e,Xl|=e,t):(e=vs(e,n,r),yr(e,t)||(tc=!0),e)}function bs(e,t,n,r,i){var a=P.p;P.p=a!==0&&8>a?a:8;var o=N.T,s={};N.T=s,Ms(e,!1,t,n);try{var c=i(),l=N.S;l!==null&&l(s,c),typeof c==`object`&&c&&typeof c.then==`function`?js(e,t,da(c,r),vu(e)):js(e,t,r,vu(e))}catch(n){js(e,t,{then:function(){},status:`rejected`,reason:n},vu())}finally{P.p=a,o!==null&&s.types!==null&&(o.types=s.types),N.T=o}}function xs(){}function Ss(e,t,n,r){if(e.tag!==5)throw Error(i(476));var a=Cs(e).queue;bs(e,a,t,re,n===null?xs:function(){return ws(e),n(r)})}function Cs(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:re},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function ws(e){var t=Cs(e);t.next===null&&(t=e.alternate.memoizedState),js(e,t.next.queue,{},vu())}function Ts(){return Xi(op)}function Es(){return Oo().memoizedState}function Ds(){return Oo().memoizedState}function Os(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=vu();e=La(n);var r=Ra(t,e,n);r!==null&&(bu(r,t,n),za(r,t,n)),t={cache:ra()},e.payload=t;return}t=t.return}}function ks(e,t,n){var r=vu();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ns(e)?Ps(t,n):(n=Zr(e,t,n,r),n!==null&&(bu(n,e,r),Fs(n,t,r)))}function As(e,t,n){js(e,t,n,vu())}function js(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ns(e))Ps(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,yr(s,o))return Xr(e,t,i,0),Bl===null&&Yr(),!1}catch{}if(n=Zr(e,t,i,r),n!==null)return bu(n,e,r),Fs(n,t,r),!0}return!1}function Ms(e,t,n,r){if(r={lane:2,revertLane:_d(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Ns(e)){if(t)throw Error(i(479))}else t=Zr(e,n,r,2),t!==null&&bu(t,e,2)}function Ns(e){var t=e.alternate;return e===so||t!==null&&t===so}function Ps(e,t){fo=uo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Fs(e,t,n){if(n&4194048){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,et(e,n)}}var Is={readContext:Xi,use:jo,useCallback:vo,useContext:vo,useEffect:vo,useImperativeHandle:vo,useLayoutEffect:vo,useInsertionEffect:vo,useMemo:vo,useReducer:vo,useRef:vo,useState:vo,useDebugValue:vo,useDeferredValue:vo,useTransition:vo,useSyncExternalStore:vo,useId:vo,useHostTransitionStatus:vo,useFormState:vo,useActionState:vo,useOptimistic:vo,useMemoCache:vo,useCacheRefresh:vo};Is.useEffectEvent=vo;var Ls={readContext:Xi,use:jo,useCallback:function(e,t){return Do().memoizedState=[e,t===void 0?null:t],e},useContext:Xi,useEffect:ss,useImperativeHandle:function(e,t,n){n=n==null?null:n.concat([e]),as(4194308,4,ps.bind(null,t,e),n)},useLayoutEffect:function(e,t){return as(4194308,4,e,t)},useInsertionEffect:function(e,t){as(4,2,e,t)},useMemo:function(e,t){var n=Do();t=t===void 0?null:t;var r=e();if(po){Re(!0);try{e()}finally{Re(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Do();if(n!==void 0){var i=n(t);if(po){Re(!0);try{n(t)}finally{Re(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=ks.bind(null,so,e),[r.memoizedState,e]},useRef:function(e){var t=Do();return e={current:e},t.memoizedState=e},useState:function(e){e=Uo(e);var t=e.queue,n=As.bind(null,so,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:hs,useDeferredValue:function(e,t){return vs(Do(),e,t)},useTransition:function(){var e=Uo(!1);return e=bs.bind(null,so,e.queue,!0,!1),Do().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=so,a=Do();if(G){if(n===void 0)throw Error(i(407));n=n()}else{if(n=t(),Bl===null)throw Error(i(349));Hl&127||Ro(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,ss(Bo.bind(null,r,o,e),[e]),r.flags|=2048,rs(9,{destroy:void 0},zo.bind(null,r,o,n,t),null),n},useId:function(){var e=Do(),t=Bl.identifierPrefix;if(G){var n=Si,r=xi;n=(r&~(1<<32-ze(r)-1)).toString(32)+n,t=`_`+t+`R_`+n,n=mo++,0<n&&(t+=`H`+n.toString(32)),t+=`_`}else n=_o++,t=`_`+t+`r_`+n.toString(32)+`_`;return e.memoizedState=t},useHostTransitionStatus:Ts,useFormState:Qo,useActionState:Qo,useOptimistic:function(e){var t=Do();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Ms.bind(null,so,!0,n),n.dispatch=t,[e,t]},useMemoCache:Mo,useCacheRefresh:function(){return Do().memoizedState=Os.bind(null,so)},useEffectEvent:function(e){var t=Do(),n={impl:e};return t.memoizedState=n,function(){if(zl&2)throw Error(i(440));return n.impl.apply(void 0,arguments)}}},Rs={readContext:Xi,use:jo,useCallback:gs,useContext:Xi,useEffect:cs,useImperativeHandle:ms,useInsertionEffect:ds,useLayoutEffect:fs,useMemo:_s,useReducer:Po,useRef:is,useState:function(){return Po(No)},useDebugValue:hs,useDeferredValue:function(e,t){return ys(Oo(),co.memoizedState,e,t)},useTransition:function(){var e=Po(No)[0],t=Oo().memoizedState;return[typeof e==`boolean`?e:Ao(e),t]},useSyncExternalStore:Lo,useId:Es,useHostTransitionStatus:Ts,useFormState:$o,useActionState:$o,useOptimistic:function(e,t){return Wo(Oo(),co,e,t)},useMemoCache:Mo,useCacheRefresh:Ds};Rs.useEffectEvent=us;var zs={readContext:Xi,use:jo,useCallback:gs,useContext:Xi,useEffect:cs,useImperativeHandle:ms,useInsertionEffect:ds,useLayoutEffect:fs,useMemo:_s,useReducer:Io,useRef:is,useState:function(){return Io(No)},useDebugValue:hs,useDeferredValue:function(e,t){var n=Oo();return co===null?vs(n,e,t):ys(n,co.memoizedState,e,t)},useTransition:function(){var e=Io(No)[0],t=Oo().memoizedState;return[typeof e==`boolean`?e:Ao(e),t]},useSyncExternalStore:Lo,useId:Es,useHostTransitionStatus:Ts,useFormState:ns,useActionState:ns,useOptimistic:function(e,t){var n=Oo();return co===null?(n.baseState=e,[e,n.queue.dispatch]):Wo(n,co,e,t)},useMemoCache:Mo,useCacheRefresh:Ds};zs.useEffectEvent=us;function Bs(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:m({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Vs={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=vu(),i=La(r);i.payload=t,n!=null&&(i.callback=n),t=Ra(e,i,r),t!==null&&(bu(t,e,r),za(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=vu(),i=La(r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Ra(e,i,r),t!==null&&(bu(t,e,r),za(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=vu(),r=La(n);r.tag=2,t!=null&&(r.callback=t),t=Ra(e,r,n),t!==null&&(bu(t,e,n),za(t,e,n))}};function Hs(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate==`function`?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!br(n,r)||!br(i,a):!0}function Us(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps==`function`&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps==`function`&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Vs.enqueueReplaceState(t,t.state,null)}function Ws(e,t){var n=t;if(`ref`in t)for(var r in n={},t)r!==`ref`&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=m({},n)),e)n[i]===void 0&&(n[i]=e[i]);return n}function Gs(e){U(e)}function Ks(e){console.error(e)}function qs(e){U(e)}function Js(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function Ys(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function Xs(e,t,n){return n=La(n),n.tag=3,n.payload={element:null},n.callback=function(){Js(e,t)},n}function Zs(e){return e=La(e),e.tag=3,e}function Qs(e,t,n,r){var i=n.type.getDerivedStateFromError;if(typeof i==`function`){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){Ys(t,n,r)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch==`function`&&(e.callback=function(){Ys(t,n,r),typeof i!=`function`&&(cu===null?cu=new Set([this]):cu.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:e===null?``:e})})}function $s(e,t,n,r,a){if(n.flags|=32768,typeof r==`object`&&r&&typeof r.then==`function`){if(t=n.alternate,t!==null&&qi(t,n,a,!0),n=Za.current,n!==null){switch(n.tag){case 31:case 13:return Qa===null?Mu():n.alternate===null&&Yl===0&&(Yl=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===ba?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),Zu(e,r,a)),!1;case 22:return n.flags|=65536,r===ba?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),Zu(e,r,a)),!1}throw Error(i(435,n.tag))}return Zu(e,r,a),Mu(),!1}if(G)return t=Za.current,t===null?(r!==Mi&&(t=Error(i(423),{cause:r}),zi(pi(t,n))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,r=pi(r,n),a=Xs(e.stateNode,r,a),Ba(e,a),Yl!==4&&(Yl=2)):(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==Mi&&(e=Error(i(422),{cause:r}),zi(pi(e,n)))),!1;var o=Error(i(520),{cause:r});if(o=pi(o,n),tu===null?tu=[o]:tu.push(o),Yl!==4&&(Yl=2),t===null)return!0;r=pi(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,e=Xs(n.stateNode,r,e),Ba(n,e),!1;case 1:if(t=n.type,o=n.stateNode,!(n.flags&128)&&(typeof t.getDerivedStateFromError==`function`||o!==null&&typeof o.componentDidCatch==`function`&&(cu===null||!cu.has(o))))return n.flags|=65536,a&=-a,n.lanes|=a,a=Zs(a),Qs(a,e,n,r),Ba(n,a),!1}n=n.return}while(n!==null);return!1}var ec=Error(i(461)),tc=!1;function nc(e,t,n,r){t.child=e===null?Na(t,null,n,r):Ma(t,e.child,n,r)}function rc(e,t,n,r,i){n=n.render;var a=t.ref;if(`ref`in r){var o={};for(var s in r)s!==`ref`&&(o[s]=r[s])}else o=r;return Yi(t),r=bo(e,t,n,o,a,i),s=wo(),e!==null&&!tc?(To(e,t,i),Dc(e,t,i)):(G&&s&&Ti(t),t.flags|=1,nc(e,t,r,i),t.child)}function ic(e,t,n,r,i){if(e===null){var a=n.type;return typeof a==`function`&&!ii(a)&&a.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=a,ac(e,t,a,r,i)):(e=si(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!Oc(e,i)){var o=a.memoizedProps;if(n=n.compare,n=n===null?br:n,n(o,r)&&e.ref===t.ref)return Dc(e,t,i)}return t.flags|=1,e=ai(a,r),e.ref=t.ref,e.return=t,t.child=e}function ac(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(br(a,r)&&e.ref===t.ref)if(tc=!1,t.pendingProps=r=a,Oc(e,i))e.flags&131072&&(tc=!0);else return t.lanes=e.lanes,Dc(e,t,i)}return pc(e,t,n,r,i)}function oc(e,t,n,r){var i=r.children,a=e===null?null:e.memoizedState;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode===`hidden`){if(t.flags&128){if(a=a===null?n:a.baseLanes|n,e!==null){for(r=t.child=e.child,i=0;r!==null;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~a}else r=0,t.child=null;return cc(e,t,a,n,r)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ha(t,a===null?null:a.cachePool),a===null?Ya():Ja(t,a),to(t);else return r=t.lanes=536870912,cc(e,t,a===null?n:a.baseLanes|n,n,r)}else a===null?(e!==null&&ha(t,null),Ya(),no(t)):(ha(t,a.cachePool),Ja(t,a),no(t),t.memoizedState=null);return nc(e,t,i,n),t.child}function sc(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function cc(e,t,n,r,i){var a=ma();return a=a===null?null:{parent:na._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},e!==null&&ha(t,null),Ya(),to(t),e!==null&&qi(e,t,r,!0),t.childLanes=i,null}function lc(e,t){return t=Sc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function uc(e,t,n){return Ma(t,e.child,null,n),e=lc(t,t.pendingProps),e.flags|=2,ro(t),t.memoizedState=null,e}function dc(e,t,n){var r=t.pendingProps,a=(t.flags&128)!=0;if(t.flags&=-129,e===null){if(G){if(r.mode===`hidden`)return e=lc(t,r),t.lanes=536870912,sc(null,e);if(eo(t),(e=ki)?(e=ff(e,ji),e=e!==null&&e.data===`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:bi===null?null:{id:xi,overflow:Si},retryLane:536870912,hydrationErrors:null},n=ui(e),n.return=t,t.child=n,Oi=t,ki=null)):e=null,e===null)throw Ni(t);return t.lanes=536870912,null}return lc(t,r)}var o=e.memoizedState;if(o!==null){var s=o.dehydrated;if(eo(t),a)if(t.flags&256)t.flags&=-257,t=uc(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(tc||qi(e,t,n,!1),a=(n&e.childLanes)!==0,tc||a){if(r=Bl,r!==null&&(s=tt(r,n),s!==0&&s!==o.retryLane))throw o.retryLane=s,Qr(e,s),bu(r,e,s),ec;Mu(),t=uc(e,t,n)}else e=o.treeContext,ki=gf(s.nextSibling),Oi=t,G=!0,Ai=null,ji=!1,e!==null&&Di(t,e),t=lc(t,r),t.flags|=4096;return t}return e=ai(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function fc(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!=`function`&&typeof n!=`object`)throw Error(i(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function pc(e,t,n,r,i){return Yi(t),n=bo(e,t,n,r,void 0,i),r=wo(),e!==null&&!tc?(To(e,t,i),Dc(e,t,i)):(G&&r&&Ti(t),t.flags|=1,nc(e,t,n,i),t.child)}function mc(e,t,n,r,i,a){return Yi(t),t.updateQueue=null,n=So(t,r,n,i),xo(e),r=wo(),e!==null&&!tc?(To(e,t,a),Dc(e,t,a)):(G&&r&&Ti(t),t.flags|=1,nc(e,t,n,a),t.child)}function hc(e,t,n,r,i){if(Yi(t),t.stateNode===null){var a=ti,o=n.contextType;typeof o==`object`&&o&&(a=Xi(o)),a=new n(r,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Vs,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=r,a.state=t.memoizedState,a.refs={},Fa(t),o=n.contextType,a.context=typeof o==`object`&&o?Xi(o):ti,a.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o==`function`&&(Bs(t,n,o,r),a.state=t.memoizedState),typeof n.getDerivedStateFromProps==`function`||typeof a.getSnapshotBeforeUpdate==`function`||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(o=a.state,typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount(),o!==a.state&&Vs.enqueueReplaceState(a,a.state,null),Ua(t,r,a,i),Ha(),a.state=t.memoizedState),typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!0}else if(e===null){a=t.stateNode;var s=t.memoizedProps,c=Ws(n,s);a.props=c;var l=a.context,u=n.contextType;o=ti,typeof u==`object`&&u&&(o=Xi(u));var d=n.getDerivedStateFromProps;u=typeof d==`function`||typeof a.getSnapshotBeforeUpdate==`function`,s=t.pendingProps!==s,u||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(s||l!==o)&&Us(t,a,r,o),Pa=!1;var f=t.memoizedState;a.state=f,Ua(t,r,a,i),Ha(),l=t.memoizedState,s||f!==l||Pa?(typeof d==`function`&&(Bs(t,n,d,r),l=t.memoizedState),(c=Pa||Hs(t,n,c,r,f,l,o))?(u||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount==`function`&&(t.flags|=4194308)):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=o,r=c):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ia(e,t),o=t.memoizedProps,u=Ws(n,o),a.props=u,d=t.pendingProps,f=a.context,l=n.contextType,c=ti,typeof l==`object`&&l&&(c=Xi(l)),s=n.getDerivedStateFromProps,(l=typeof s==`function`||typeof a.getSnapshotBeforeUpdate==`function`)||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(o!==d||f!==c)&&Us(t,a,r,c),Pa=!1,f=t.memoizedState,a.state=f,Ua(t,r,a,i),Ha();var p=t.memoizedState;o!==d||f!==p||Pa||e!==null&&e.dependencies!==null&&Ji(e.dependencies)?(typeof s==`function`&&(Bs(t,n,s,r),p=t.memoizedState),(u=Pa||Hs(t,n,u,r,f,p,c)||e!==null&&e.dependencies!==null&&Ji(e.dependencies))?(l||typeof a.UNSAFE_componentWillUpdate!=`function`&&typeof a.componentWillUpdate!=`function`||(typeof a.componentWillUpdate==`function`&&a.componentWillUpdate(r,p,c),typeof a.UNSAFE_componentWillUpdate==`function`&&a.UNSAFE_componentWillUpdate(r,p,c)),typeof a.componentDidUpdate==`function`&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate==`function`&&(t.flags|=1024)):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=u):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,fc(e,t),r=(t.flags&128)!=0,a||r?(a=t.stateNode,n=r&&typeof n.getDerivedStateFromError!=`function`?null:a.render(),t.flags|=1,e!==null&&r?(t.child=Ma(t,e.child,null,i),t.child=Ma(t,null,n,i)):nc(e,t,n,i),t.memoizedState=a.state,e=t.child):e=Dc(e,t,i),e}function gc(e,t,n,r){return Li(),t.flags|=256,nc(e,t,n,r),t.child}var _c={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vc(e){return{baseLanes:e,cachePool:ga()}}function yc(e,t,n){return e=e===null?0:e.childLanes&~n,t&&(e|=$l),e}function bc(e,t,n){var r=t.pendingProps,a=!1,o=(t.flags&128)!=0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(io.current&2)!=0),s&&(a=!0,t.flags&=-129),s=(t.flags&32)!=0,t.flags&=-33,e===null){if(G){if(a?$a(t):no(t),(e=ki)?(e=ff(e,ji),e=e!==null&&e.data!==`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:bi===null?null:{id:xi,overflow:Si},retryLane:536870912,hydrationErrors:null},n=ui(e),n.return=t,t.child=n,Oi=t,ki=null)):e=null,e===null)throw Ni(t);return mf(e)?t.lanes=32:t.lanes=536870912,null}var c=r.children;return r=r.fallback,a?(no(t),a=t.mode,c=Sc({mode:`hidden`,children:c},a),r=ci(r,a,n,null),c.return=t,r.return=t,c.sibling=r,t.child=c,r=t.child,r.memoizedState=vc(n),r.childLanes=yc(e,s,n),t.memoizedState=_c,sc(null,r)):($a(t),xc(t,c))}var l=e.memoizedState;if(l!==null&&(c=l.dehydrated,c!==null)){if(o)t.flags&256?($a(t),t.flags&=-257,t=Cc(e,t,n)):t.memoizedState===null?(no(t),c=r.fallback,a=t.mode,r=Sc({mode:`visible`,children:r.children},a),c=ci(c,a,n,null),c.flags|=2,r.return=t,c.return=t,r.sibling=c,t.child=r,Ma(t,e.child,null,n),r=t.child,r.memoizedState=vc(n),r.childLanes=yc(e,s,n),t.memoizedState=_c,t=sc(null,r)):(no(t),t.child=e.child,t.flags|=128,t=null);else if($a(t),mf(c)){if(s=c.nextSibling&&c.nextSibling.dataset,s)var u=s.dgst;s=u,r=Error(i(419)),r.stack=``,r.digest=s,zi({value:r,source:null,stack:null}),t=Cc(e,t,n)}else if(tc||qi(e,t,n,!1),s=(n&e.childLanes)!==0,tc||s){if(s=Bl,s!==null&&(r=tt(s,n),r!==0&&r!==l.retryLane))throw l.retryLane=r,Qr(e,r),bu(s,e,r),ec;pf(c)||Mu(),t=Cc(e,t,n)}else pf(c)?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ki=gf(c.nextSibling),Oi=t,G=!0,Ai=null,ji=!1,e!==null&&Di(t,e),t=xc(t,r.children),t.flags|=4096);return t}return a?(no(t),c=r.fallback,a=t.mode,l=e.child,u=l.sibling,r=ai(l,{mode:`hidden`,children:r.children}),r.subtreeFlags=l.subtreeFlags&65011712,u===null?(c=ci(c,a,n,null),c.flags|=2):c=ai(u,c),c.return=t,r.return=t,r.sibling=c,t.child=r,sc(null,r),r=t.child,c=e.child.memoizedState,c===null?c=vc(n):(a=c.cachePool,a===null?a=ga():(l=na._currentValue,a=a.parent===l?a:{parent:l,pool:l}),c={baseLanes:c.baseLanes|n,cachePool:a}),r.memoizedState=c,r.childLanes=yc(e,s,n),t.memoizedState=_c,sc(e.child,r)):($a(t),n=e.child,e=n.sibling,n=ai(n,{mode:`visible`,children:r.children}),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function xc(e,t){return t=Sc({mode:`visible`,children:t},e.mode),t.return=e,e.child=t}function Sc(e,t){return e=ri(22,e,null,t),e.lanes=0,e}function Cc(e,t,n){return Ma(t,e.child,null,n),e=xc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Gi(e.return,t,n)}function Tc(e,t,n,r,i,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.treeForkCount=a)}function Ec(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;r=r.children;var o=io.current,s=(o&2)!=0;if(s?(o=o&1|2,t.flags|=128):o&=1,oe(io,o),nc(e,t,r,n),r=G?_i:0,!s&&e!==null&&e.flags&128)a:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wc(e,n,t);else if(e.tag===19)wc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break a;for(;e.sibling===null;){if(e.return===null||e.return===t)break a;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case`forwards`:for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&ao(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Tc(t,!1,i,n,a,r);break;case`backwards`:case`unstable_legacy-backwards`:for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&ao(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Tc(t,!0,n,null,a,r);break;case`together`:Tc(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function Dc(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Xl|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(qi(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,n=ai(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ai(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Oc(e,t){return(e.lanes&t)===0?(e=e.dependencies,!!(e!==null&&Ji(e))):!0}function kc(e,t,n){switch(t.tag){case 3:de(t,t.stateNode.containerInfo),Ui(t,na,e.memoizedState.cache),Li();break;case 27:case 5:pe(t);break;case 4:de(t,t.stateNode.containerInfo);break;case 10:Ui(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,eo(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated===null?(n&t.child.childLanes)===0?($a(t),e=Dc(e,t,n),e===null?null:e.sibling):bc(e,t,n):($a(t),t.flags|=128,null);$a(t);break;case 19:var i=(e.flags&128)!=0;if(r=(n&t.childLanes)!==0,r||=(qi(e,t,n,!1),(n&t.childLanes)!==0),i){if(r)return Ec(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),oe(io,io.current),r)break;return null;case 22:return t.lanes=0,oc(e,t,n,t.pendingProps);case 24:Ui(t,na,e.memoizedState.cache)}return Dc(e,t,n)}function Ac(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)tc=!0;else{if(!Oc(e,n)&&!(t.flags&128))return tc=!1,kc(e,t,n);tc=!!(e.flags&131072)}else tc=!1,G&&t.flags&1048576&&wi(t,_i,t.index);switch(t.lanes=0,t.tag){case 16:a:{var r=t.pendingProps;if(e=Ca(t.elementType),t.type=e,typeof e==`function`)ii(e)?(r=Ws(e,r),t.tag=1,t=hc(null,t,e,r,n)):(t.tag=0,t=pc(null,t,e,r,n));else{if(e!=null){var a=e.$$typeof;if(a===w){t.tag=11,t=rc(null,t,e,r,n);break a}else if(a===D){t.tag=14,t=ic(null,t,e,r,n);break a}}throw t=j(e)||e,Error(i(306,t,``))}}return t;case 0:return pc(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,a=Ws(r,t.pendingProps),hc(e,t,r,a,n);case 3:a:{if(de(t,t.stateNode.containerInfo),e===null)throw Error(i(387));r=t.pendingProps;var o=t.memoizedState;a=o.element,Ia(e,t),Ua(t,r,null,n);var s=t.memoizedState;if(r=s.cache,Ui(t,na,r),r!==o.cache&&Ki(t,[na],n,!0),Ha(),r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=gc(e,t,r,n);break a}else if(r!==a){a=pi(Error(i(424)),t),zi(a),t=gc(e,t,r,n);break a}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName===`HTML`?e.ownerDocument.body:e}for(ki=gf(e.firstChild),Oi=t,G=!0,Ai=null,ji=!0,n=Na(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Li(),r===a){t=Dc(e,t,n);break a}nc(e,t,r,n)}t=t.child}return t;case 26:return fc(e,t),e===null?(n=Lf(t.type,null,t.pendingProps,null))?t.memoizedState=n:G||(n=t.type,e=t.pendingProps,r=Jd(le.current).createElement(n),r[st]=t,r[ct]=e,Hd(r,n,e),bt(r),t.stateNode=r):t.memoizedState=Lf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return pe(t),e===null&&G&&(r=t.stateNode=bf(t.type,t.pendingProps,le.current),Oi=t,ji=!0,a=ki,of(t.type)?(_f=a,ki=gf(r.firstChild)):ki=a),nc(e,t,t.pendingProps.children,n),fc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&G&&((a=r=ki)&&(r=uf(r,t.type,t.pendingProps,ji),r===null?a=!1:(t.stateNode=r,Oi=t,ki=gf(r.firstChild),ji=!1,a=!0)),a||Ni(t)),pe(t),a=t.type,o=t.pendingProps,s=e===null?null:e.memoizedProps,r=o.children,Zd(a,o)?r=null:s!==null&&Zd(a,s)&&(t.flags|=32),t.memoizedState!==null&&(a=bo(e,t,Co,null,null,n),op._currentValue=a),fc(e,t),nc(e,t,r,n),t.child;case 6:return e===null&&G&&((e=n=ki)&&(n=df(n,t.pendingProps,ji),n===null?e=!1:(t.stateNode=n,Oi=t,ki=null,e=!0)),e||Ni(t)),null;case 13:return bc(e,t,n);case 4:return de(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ma(t,null,r,n):nc(e,t,r,n),t.child;case 11:return rc(e,t,t.type,t.pendingProps,n);case 7:return nc(e,t,t.pendingProps,n),t.child;case 8:return nc(e,t,t.pendingProps.children,n),t.child;case 12:return nc(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Ui(t,t.type,r.value),nc(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,Yi(t),a=Xi(a),r=r(a),t.flags|=1,nc(e,t,r,n),t.child;case 14:return ic(e,t,t.type,t.pendingProps,n);case 15:return ac(e,t,t.type,t.pendingProps,n);case 19:return Ec(e,t,n);case 31:return dc(e,t,n);case 22:return oc(e,t,n,t.pendingProps);case 24:return Yi(t),r=Xi(na),e===null?(a=ma(),a===null&&(a=Bl,o=ra(),a.pooledCache=o,o.refCount++,o!==null&&(a.pooledCacheLanes|=n),a=o),t.memoizedState={parent:r,cache:a},Fa(t),Ui(t,na,a)):((e.lanes&n)!==0&&(Ia(e,t),Ua(t,null,null,n),Ha()),a=e.memoizedState,o=t.memoizedState,a.parent===r?(r=o.cache,Ui(t,na,r),r!==a.cache&&Ki(t,[na],n,!0)):(a={parent:r,cache:r},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),Ui(t,na,r))),nc(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function jc(e){e.flags|=4}function Mc(e,t,n,r,i){if((t=(e.mode&32)!=0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(ku())e.flags|=8192;else throw wa=ba,va}else e.flags&=-16777217}function Nc(e,t){if(t.type!==`stylesheet`||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Qf(t))if(ku())e.flags|=8192;else throw wa=ba,va}function Pc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag===22?536870912:Xe(),e.lanes|=t,eu|=t)}function Fc(e,t){if(!G)switch(e.tailMode){case`hidden`:t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case`collapsed`:n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ic(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Lc(e,t,n){var r=t.pendingProps;switch(Ei(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ic(t),null;case 1:return Ic(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Wi(na),fe(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ii(t)?jc(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ri())),Ic(t),null;case 26:var a=t.type,o=t.memoizedState;return e===null?(jc(t),o===null?(Ic(t),Mc(t,a,null,r,n)):(Ic(t),Nc(t,o))):o?o===e.memoizedState?(Ic(t),t.flags&=-16777217):(jc(t),Ic(t),Nc(t,o)):(e=e.memoizedProps,e!==r&&jc(t),Ic(t),Mc(t,a,e,r,n)),null;case 27:if(me(t),n=le.current,a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&jc(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return Ic(t),null}e=se.current,Ii(t)?Pi(t,e):(e=bf(a,r,n),t.stateNode=e,jc(t))}return Ic(t),null;case 5:if(me(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&jc(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return Ic(t),null}if(o=se.current,Ii(t))Pi(t,o);else{var s=Jd(le.current);switch(o){case 1:o=s.createElementNS(`http://www.w3.org/2000/svg`,a);break;case 2:o=s.createElementNS(`http://www.w3.org/1998/Math/MathML`,a);break;default:switch(a){case`svg`:o=s.createElementNS(`http://www.w3.org/2000/svg`,a);break;case`math`:o=s.createElementNS(`http://www.w3.org/1998/Math/MathML`,a);break;case`script`:o=s.createElement(`div`),o.innerHTML=`<script><\/script>`,o=o.removeChild(o.firstChild);break;case`select`:o=typeof r.is==`string`?s.createElement(`select`,{is:r.is}):s.createElement(`select`),r.multiple?o.multiple=!0:r.size&&(o.size=r.size);break;default:o=typeof r.is==`string`?s.createElement(a,{is:r.is}):s.createElement(a)}}o[st]=t,o[ct]=r;a:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)o.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break a;for(;s.sibling===null;){if(s.return===null||s.return===t)break a;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=o;a:switch(Hd(o,a,r),a){case`button`:case`input`:case`select`:case`textarea`:r=!!r.autoFocus;break a;case`img`:r=!0;break a;default:r=!1}r&&jc(t)}}return Ic(t),Mc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&jc(t);else{if(typeof r!=`string`&&t.stateNode===null)throw Error(i(166));if(e=le.current,Ii(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,a=Oi,a!==null)switch(a.tag){case 27:case 5:r=a.memoizedProps}e[st]=t,e=!!(e.nodeValue===n||r!==null&&!0===r.suppressHydrationWarning||zd(e.nodeValue,n)),e||Ni(t,!0)}else e=Jd(e).createTextNode(r),e[st]=t,t.stateNode=e}return Ic(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(r=Ii(t),n!==null){if(e===null){if(!r)throw Error(i(318));if(e=t.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(557));e[st]=t}else Li(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ic(t),e=!1}else n=Ri(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(ro(t),t):(ro(t),null);if(t.flags&128)throw Error(i(558))}return Ic(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=Ii(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(i(318));if(a=t.memoizedState,a=a===null?null:a.dehydrated,!a)throw Error(i(317));a[st]=t}else Li(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ic(t),a=!1}else a=Ri(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&256?(ro(t),t):(ro(t),null)}return ro(t),t.flags&128?(t.lanes=n,t):(n=r!==null,e=e!==null&&e.memoizedState!==null,n&&(r=t.child,a=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(a=r.alternate.memoizedState.cachePool.pool),o=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),o!==a&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Pc(t,t.updateQueue),Ic(t),null);case 4:return fe(),e===null&&kd(t.stateNode.containerInfo),Ic(t),null;case 10:return Wi(t.type),Ic(t),null;case 19:if(ae(io),r=t.memoizedState,r===null)return Ic(t),null;if(a=(t.flags&128)!=0,o=r.rendering,o===null)if(a)Fc(r,!1);else{if(Yl!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=ao(e),o!==null){for(t.flags|=128,Fc(r,!1),e=o.updateQueue,t.updateQueue=e,Pc(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)oi(n,e),n=n.sibling;return oe(io,io.current&1|2),G&&Ci(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&De()>ou&&(t.flags|=128,a=!0,Fc(r,!1),t.lanes=4194304)}else{if(!a)if(e=ao(o),e!==null){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,Pc(t,e),Fc(r,!0),r.tail===null&&r.tailMode===`hidden`&&!o.alternate&&!G)return Ic(t),null}else 2*De()-r.renderingStartTime>ou&&n!==536870912&&(t.flags|=128,a=!0,Fc(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(e=r.last,e===null?t.child=o:e.sibling=o,r.last=o)}return r.tail===null?(Ic(t),null):(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=De(),e.sibling=null,n=io.current,oe(io,a?n&1|2:n&1),G&&Ci(t,r.treeForkCount),e);case 22:case 23:return ro(t),Xa(),r=t.memoizedState!==null,e===null?r&&(t.flags|=8192):e.memoizedState!==null!==r&&(t.flags|=8192),r?n&536870912&&!(t.flags&128)&&(Ic(t),t.subtreeFlags&6&&(t.flags|=8192)):Ic(t),n=t.updateQueue,n!==null&&Pc(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&ae(pa),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Wi(na),Ic(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function Rc(e,t){switch(Ei(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Wi(na),fe(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return me(t),null;case 31:if(t.memoizedState!==null){if(ro(t),t.alternate===null)throw Error(i(340));Li()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(ro(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));Li()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ae(io),null;case 4:return fe(),null;case 10:return Wi(t.type),null;case 22:case 23:return ro(t),Xa(),e!==null&&ae(pa),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Wi(na),null;case 25:return null;default:return null}}function zc(e,t){switch(Ei(t),t.tag){case 3:Wi(na),fe();break;case 26:case 27:case 5:me(t);break;case 4:fe();break;case 31:t.memoizedState!==null&&ro(t);break;case 13:ro(t);break;case 19:ae(io);break;case 10:Wi(t.type);break;case 22:case 23:ro(t),Xa(),e!==null&&ae(pa);break;case 24:Wi(na)}}function Bc(e,t){try{var n=t.updateQueue,r=n===null?null:n.lastEffect;if(r!==null){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==i)}}catch(e){Xu(t,t.return,e)}}function Vc(e,t,n){try{var r=t.updateQueue,i=r===null?null:r.lastEffect;if(i!==null){var a=i.next;r=a;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(s!==void 0){o.destroy=void 0,i=t;var c=n,l=s;try{l()}catch(e){Xu(i,c,e)}}}r=r.next}while(r!==a)}}catch(e){Xu(t,t.return,e)}}function Hc(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Ga(t,n)}catch(t){Xu(e,e.return,t)}}}function Uc(e,t,n){n.props=Ws(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){Xu(e,t,n)}}function Wc(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n==`function`?e.refCleanup=n(r):n.current=r}}catch(n){Xu(e,t,n)}}function Gc(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r==`function`)try{r()}catch(n){Xu(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n==`function`)try{n(null)}catch(n){Xu(e,t,n)}else n.current=null}function Kc(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{a:switch(t){case`button`:case`input`:case`select`:case`textarea`:n.autoFocus&&r.focus();break a;case`img`:n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){Xu(e,e.return,t)}}function qc(e,t,n){try{var r=e.stateNode;Ud(r,e.type,n,t),r[ct]=t}catch(t){Xu(e,e.return,t)}}function Jc(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&of(e.type)||e.tag===4}function Yc(e){a:for(;;){for(;e.sibling===null;){if(e.return===null||Jc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&of(e.type)||e.flags&2||e.child===null||e.tag===4)continue a;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Xc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Qt));else if(r!==4&&(r===27&&of(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Xc(e,t,n),e=e.sibling;e!==null;)Xc(e,t,n),e=e.sibling}function Zc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&of(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Zc(e,t,n),e=e.sibling;e!==null;)Zc(e,t,n),e=e.sibling}function Qc(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Hd(t,r,n),t[st]=e,t[ct]=n}catch(t){Xu(e,e.return,t)}}var $c=!1,el=!1,tl=!1,nl=typeof WeakSet==`function`?WeakSet:Set,rl=null;function il(e,t){if(e=e.containerInfo,Kd=hp,e=wr(e),Tr(e)){if(`selectionStart`in e)var n={start:e.selectionStart,end:e.selectionEnd};else a:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break a}var s=0,c=-1,l=-1,u=0,d=0,f=e,p=null;b:for(;;){for(var m;f!==n||a!==0&&f.nodeType!==3||(c=s+a),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break b;if(p===n&&++u===a&&(c=s),p===o&&++d===r&&(l=s),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=c===-1||l===-1?null:{start:c,end:l}}else n=null}n||={start:0,end:0}}else n=null;for(qd={focusedElem:e,selectionRange:n},hp=!1,rl=t;rl!==null;)if(t=rl,e=t.child,t.subtreeFlags&1028&&e!==null)e.return=t,rl=e;else for(;rl!==null;){switch(t=rl,o=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e===null?null:e.events,e!==null))for(n=0;n<e.length;n++)a=e[n],a.ref.impl=a.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&o!==null){e=void 0,n=t,a=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var h=Ws(n.type,a);e=r.getSnapshotBeforeUpdate(h,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){Xu(n,n.return,e)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)lf(e);else if(n===1)switch(e.nodeName){case`HEAD`:case`HTML`:case`BODY`:lf(e);break;default:e.textContent=``}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,rl=e;break}rl=t.return}}function al(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:bl(e,n),r&4&&Bc(5,n);break;case 1:if(bl(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(e){Xu(n,n.return,e)}else{var i=Ws(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){Xu(n,n.return,e)}}r&64&&Hc(n),r&512&&Wc(n,n.return);break;case 3:if(bl(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Ga(e,t)}catch(e){Xu(n,n.return,e)}}break;case 27:t===null&&r&4&&Qc(n);case 26:case 5:bl(e,n),t===null&&r&4&&Kc(n),r&512&&Wc(n,n.return);break;case 12:bl(e,n);break;case 31:bl(e,n),r&4&&dl(e,n);break;case 13:bl(e,n),r&4&&fl(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=ed.bind(null,n),hf(e,n))));break;case 22:if(r=n.memoizedState!==null||$c,!r){t=t!==null&&t.memoizedState!==null||el,i=$c;var a=el;$c=r,(el=t)&&!a?Sl(e,n,(n.subtreeFlags&8772)!=0):bl(e,n),$c=i,el=a}break;case 30:break;default:bl(e,n)}}function ol(e){var t=e.alternate;t!==null&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ht(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var sl=null,cl=!1;function ll(e,t,n){for(n=n.child;n!==null;)ul(e,t,n),n=n.sibling}function ul(e,t,n){if(Le&&typeof Le.onCommitFiberUnmount==`function`)try{Le.onCommitFiberUnmount(Ie,n)}catch{}switch(n.tag){case 26:el||Gc(n,t),ll(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:el||Gc(n,t);var r=sl,i=cl;of(n.type)&&(sl=n.stateNode,cl=!1),ll(e,t,n),xf(n.stateNode),sl=r,cl=i;break;case 5:el||Gc(n,t);case 6:if(r=sl,i=cl,sl=null,ll(e,t,n),sl=r,cl=i,sl!==null)if(cl)try{(sl.nodeType===9?sl.body:sl.nodeName===`HTML`?sl.ownerDocument.body:sl).removeChild(n.stateNode)}catch(e){Xu(n,t,e)}else try{sl.removeChild(n.stateNode)}catch(e){Xu(n,t,e)}break;case 18:sl!==null&&(cl?(e=sl,sf(e.nodeType===9?e.body:e.nodeName===`HTML`?e.ownerDocument.body:e,n.stateNode),Vp(e)):sf(sl,n.stateNode));break;case 4:r=sl,i=cl,sl=n.stateNode.containerInfo,cl=!0,ll(e,t,n),sl=r,cl=i;break;case 0:case 11:case 14:case 15:Vc(2,n,t),el||Vc(4,n,t),ll(e,t,n);break;case 1:el||(Gc(n,t),r=n.stateNode,typeof r.componentWillUnmount==`function`&&Uc(n,t,r)),ll(e,t,n);break;case 21:ll(e,t,n);break;case 22:el=(r=el)||n.memoizedState!==null,ll(e,t,n),el=r;break;default:ll(e,t,n)}}function dl(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Vp(e)}catch(e){Xu(t,t.return,e)}}}function fl(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Vp(e)}catch(e){Xu(t,t.return,e)}}function pl(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new nl),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new nl),t;default:throw Error(i(435,e.tag))}}function ml(e,t){var n=pl(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=td.bind(null,e,t);t.then(r,r)}})}function hl(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r],o=e,s=t,c=s;a:for(;c!==null;){switch(c.tag){case 27:if(of(c.type)){sl=c.stateNode,cl=!1;break a}break;case 5:sl=c.stateNode,cl=!1;break a;case 3:case 4:sl=c.stateNode.containerInfo,cl=!0;break a}c=c.return}if(sl===null)throw Error(i(160));ul(o,s,a),sl=null,cl=!1,o=a.alternate,o!==null&&(o.return=null),a.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)_l(t,e),t=t.sibling}var gl=null;function _l(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:hl(t,e),vl(e),r&4&&(Vc(3,e,e.return),Bc(3,e),Vc(5,e,e.return));break;case 1:hl(t,e),vl(e),r&512&&(el||n===null||Gc(n,n.return)),r&64&&$c&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var a=gl;if(hl(t,e),vl(e),r&512&&(el||n===null||Gc(n,n.return)),r&4){var o=n===null?null:n.memoizedState;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){a:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;b:switch(r){case`title`:o=a.getElementsByTagName(`title`)[0],(!o||o[mt]||o[st]||o.namespaceURI===`http://www.w3.org/2000/svg`||o.hasAttribute(`itemprop`))&&(o=a.createElement(r),a.head.insertBefore(o,a.querySelector(`head > title`))),Hd(o,r,n),o[st]=e,bt(o),r=o;break a;case`link`:var s=Yf(`link`,`href`,a).get(r+(n.href||``));if(s){for(var c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`href`)===(n.href==null||n.href===``?null:n.href)&&o.getAttribute(`rel`)===(n.rel==null?null:n.rel)&&o.getAttribute(`title`)===(n.title==null?null:n.title)&&o.getAttribute(`crossorigin`)===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(c,1);break b}}o=a.createElement(r),Hd(o,r,n),a.head.appendChild(o);break;case`meta`:if(s=Yf(`meta`,`content`,a).get(r+(n.content||``))){for(c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`content`)===(n.content==null?null:``+n.content)&&o.getAttribute(`name`)===(n.name==null?null:n.name)&&o.getAttribute(`property`)===(n.property==null?null:n.property)&&o.getAttribute(`http-equiv`)===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute(`charset`)===(n.charSet==null?null:n.charSet)){s.splice(c,1);break b}}o=a.createElement(r),Hd(o,r,n),a.head.appendChild(o);break;default:throw Error(i(468,r))}o[st]=e,bt(o),r=o}e.stateNode=r}else Xf(a,e.type,e.stateNode);else e.stateNode=Wf(a,r,e.memoizedProps);else o===r?r===null&&e.stateNode!==null&&qc(e,e.memoizedProps,n.memoizedProps):(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,r===null?Xf(a,e.type,e.stateNode):Wf(a,r,e.memoizedProps))}break;case 27:hl(t,e),vl(e),r&512&&(el||n===null||Gc(n,n.return)),n!==null&&r&4&&qc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(hl(t,e),vl(e),r&512&&(el||n===null||Gc(n,n.return)),e.flags&32){a=e.stateNode;try{Wt(a,``)}catch(t){Xu(e,e.return,t)}}r&4&&e.stateNode!=null&&(a=e.memoizedProps,qc(e,a,n===null?a:n.memoizedProps)),r&1024&&(tl=!0);break;case 6:if(hl(t,e),vl(e),r&4){if(e.stateNode===null)throw Error(i(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){Xu(e,e.return,t)}}break;case 3:if(Jf=null,a=gl,gl=wf(t.containerInfo),hl(t,e),gl=a,vl(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Vp(t.containerInfo)}catch(t){Xu(e,e.return,t)}tl&&(tl=!1,yl(e));break;case 4:r=gl,gl=wf(e.stateNode.containerInfo),hl(t,e),vl(e),gl=r;break;case 12:hl(t,e),vl(e);break;case 31:hl(t,e),vl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,ml(e,r)));break;case 13:hl(t,e),vl(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(iu=De()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,ml(e,r)));break;case 22:a=e.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,u=$c,d=el;if($c=u||a,el=d||l,hl(t,e),el=d,$c=u,vl(e),r&8192)a:for(t=e.stateNode,t._visibility=a?t._visibility&-2:t._visibility|1,a&&(n===null||l||$c||el||xl(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){l=n=t;try{if(o=l.stateNode,a)s=o.style,typeof s.setProperty==`function`?s.setProperty(`display`,`none`,`important`):s.display=`none`;else{c=l.stateNode;var f=l.memoizedProps.style,p=f!=null&&f.hasOwnProperty(`display`)?f.display:null;c.style.display=p==null||typeof p==`boolean`?``:(``+p).trim()}}catch(e){Xu(l,l.return,e)}}}else if(t.tag===6){if(n===null){l=t;try{l.stateNode.nodeValue=a?``:l.memoizedProps}catch(e){Xu(l,l.return,e)}}}else if(t.tag===18){if(n===null){l=t;try{var m=l.stateNode;a?cf(m,!0):cf(l.stateNode,!1)}catch(e){Xu(l,l.return,e)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break a;for(;t.sibling===null;){if(t.return===null||t.return===e)break a;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,ml(e,n))));break;case 19:hl(t,e),vl(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,ml(e,r)));break;case 30:break;case 21:break;default:hl(t,e),vl(e)}}function vl(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if(Jc(r)){n=r;break}r=r.return}if(n==null)throw Error(i(160));switch(n.tag){case 27:var a=n.stateNode;Zc(e,Yc(e),a);break;case 5:var o=n.stateNode;n.flags&32&&(Wt(o,``),n.flags&=-33),Zc(e,Yc(e),o);break;case 3:case 4:var s=n.stateNode.containerInfo;Xc(e,Yc(e),s);break;default:throw Error(i(161))}}catch(t){Xu(e,e.return,t)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yl(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;yl(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function bl(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)al(e,t.alternate,t),t=t.sibling}function xl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Vc(4,t,t.return),xl(t);break;case 1:Gc(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount==`function`&&Uc(t,t.return,n),xl(t);break;case 27:xf(t.stateNode);case 26:case 5:Gc(t,t.return),xl(t);break;case 22:t.memoizedState===null&&xl(t);break;case 30:xl(t);break;default:xl(t)}e=e.sibling}}function Sl(e,t,n){for(n&&=(t.subtreeFlags&8772)!=0,t=t.child;t!==null;){var r=t.alternate,i=e,a=t,o=a.flags;switch(a.tag){case 0:case 11:case 15:Sl(i,a,n),Bc(4,a);break;case 1:if(Sl(i,a,n),r=a,i=r.stateNode,typeof i.componentDidMount==`function`)try{i.componentDidMount()}catch(e){Xu(r,r.return,e)}if(r=a,i=r.updateQueue,i!==null){var s=r.stateNode;try{var c=i.shared.hiddenCallbacks;if(c!==null)for(i.shared.hiddenCallbacks=null,i=0;i<c.length;i++)Wa(c[i],s)}catch(e){Xu(r,r.return,e)}}n&&o&64&&Hc(a),Wc(a,a.return);break;case 27:Qc(a);case 26:case 5:Sl(i,a,n),n&&r===null&&o&4&&Kc(a),Wc(a,a.return);break;case 12:Sl(i,a,n);break;case 31:Sl(i,a,n),n&&o&4&&dl(i,a);break;case 13:Sl(i,a,n),n&&o&4&&fl(i,a);break;case 22:a.memoizedState===null&&Sl(i,a,n),Wc(a,a.return);break;case 30:break;default:Sl(i,a,n)}t=t.sibling}}function Cl(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&ia(n))}function wl(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ia(e))}function Tl(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)El(e,t,n,r),t=t.sibling}function El(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Tl(e,t,n,r),i&2048&&Bc(9,t);break;case 1:Tl(e,t,n,r);break;case 3:Tl(e,t,n,r),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ia(e)));break;case 12:if(i&2048){Tl(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,s=a.onPostCommit;typeof s==`function`&&s(o,t.alternate===null?`mount`:`update`,e.passiveEffectDuration,-0)}catch(e){Xu(t,t.return,e)}}else Tl(e,t,n,r);break;case 31:Tl(e,t,n,r);break;case 13:Tl(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,o=t.alternate,t.memoizedState===null?a._visibility&2?Tl(e,t,n,r):(a._visibility|=2,Dl(e,t,n,r,(t.subtreeFlags&10256)!=0||!1)):a._visibility&2?Tl(e,t,n,r):Ol(e,t),i&2048&&Cl(o,t);break;case 24:Tl(e,t,n,r),i&2048&&wl(t.alternate,t);break;default:Tl(e,t,n,r)}}function Dl(e,t,n,r,i){for(i&&=(t.subtreeFlags&10256)!=0||!1,t=t.child;t!==null;){var a=e,o=t,s=n,c=r,l=o.flags;switch(o.tag){case 0:case 11:case 15:Dl(a,o,s,c,i),Bc(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState===null?(u._visibility|=2,Dl(a,o,s,c,i)):u._visibility&2?Dl(a,o,s,c,i):Ol(a,o),i&&l&2048&&Cl(o.alternate,o);break;case 24:Dl(a,o,s,c,i),i&&l&2048&&wl(o.alternate,o);break;default:Dl(a,o,s,c,i)}t=t.sibling}}function Ol(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Ol(n,r),i&2048&&Cl(r.alternate,r);break;case 24:Ol(n,r),i&2048&&wl(r.alternate,r);break;default:Ol(n,r)}t=t.sibling}}var kl=8192;function Al(e,t,n){if(e.subtreeFlags&kl)for(e=e.child;e!==null;)jl(e,t,n),e=e.sibling}function jl(e,t,n){switch(e.tag){case 26:Al(e,t,n),e.flags&kl&&e.memoizedState!==null&&$f(n,gl,e.memoizedState,e.memoizedProps);break;case 5:Al(e,t,n);break;case 3:case 4:var r=gl;gl=wf(e.stateNode.containerInfo),Al(e,t,n),gl=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=kl,kl=16777216,Al(e,t,n),kl=r):Al(e,t,n));break;default:Al(e,t,n)}}function Ml(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Nl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];rl=r,Il(r,e)}Ml(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Pl(e),e=e.sibling}function Pl(e){switch(e.tag){case 0:case 11:case 15:Nl(e),e.flags&2048&&Vc(9,e,e.return);break;case 3:Nl(e);break;case 12:Nl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Fl(e)):Nl(e);break;default:Nl(e)}}function Fl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];rl=r,Il(r,e)}Ml(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Vc(8,t,t.return),Fl(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Fl(t));break;default:Fl(t)}e=e.sibling}}function Il(e,t){for(;rl!==null;){var n=rl;switch(n.tag){case 0:case 11:case 15:Vc(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:ia(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,rl=r;else a:for(n=e;rl!==null;){r=rl;var i=r.sibling,a=r.return;if(ol(r),r===n){rl=null;break a}if(i!==null){i.return=a,rl=i;break a}rl=a}}}var Ll={getCacheForType:function(e){var t=Xi(na),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Xi(na).controller.signal}},Rl=typeof WeakMap==`function`?WeakMap:Map,zl=0,Bl=null,Vl=null,Hl=0,Ul=0,Wl=null,Gl=!1,Kl=!1,ql=!1,Jl=0,Yl=0,Xl=0,Zl=0,Ql=0,$l=0,eu=0,tu=null,nu=null,ru=!1,iu=0,au=0,ou=1/0,su=null,cu=null,lu=0,uu=null,du=null,fu=0,pu=0,mu=null,hu=null,gu=0,_u=null;function vu(){return zl&2&&Hl!==0?Hl&-Hl:N.T===null?it():_d()}function yu(){if($l===0)if(!(Hl&536870912)||G){var e=We;We<<=1,!(We&3932160)&&(We=262144),$l=e}else $l=536870912;return e=Za.current,e!==null&&(e.flags|=32),$l}function bu(e,t,n){(e===Bl&&(Ul===2||Ul===9)||e.cancelPendingCommit!==null)&&(Du(e,0),wu(e,Hl,$l,!1)),R(e,n),(!(zl&2)||e!==Bl)&&(e===Bl&&(!(zl&2)&&(Zl|=n),Yl===4&&wu(e,Hl,$l,!1)),ld(e))}function xu(e,t,n){if(zl&6)throw Error(i(327));var r=!n&&(t&127)==0&&(t&e.expiredLanes)===0||Je(e,t),a=r?Fu(e,t):Nu(e,t,!0),o=r;do{if(a===0){Kl&&!r&&wu(e,t,0,!1);break}else{if(n=e.current.alternate,o&&!Cu(n)){a=Nu(e,t,!1),o=!1;continue}if(a===2){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=e.pendingLanes&-536870913,s=s===0?s&536870912?536870912:0:s;if(s!==0){t=s;a:{var c=e;a=tu;var l=c.current.memoizedState.isDehydrated;if(l&&(Du(c,s).flags|=256),s=Nu(c,s,!1),s!==2){if(ql&&!l){c.errorRecoveryDisabledLanes|=o,Zl|=o,a=4;break a}o=nu,nu=a,o!==null&&(nu===null?nu=o:nu.push.apply(nu,o))}a=s}if(o=!1,a!==2)continue}}if(a===1){Du(e,0),wu(e,t,0,!0);break}a:{switch(r=e,o=a,o){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:wu(r,t,$l,!Gl);break a;case 2:nu=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(a=iu+300-De(),10<a)){if(wu(r,t,$l,!Gl),qe(r,0,!0)!==0)break a;fu=t,r.timeoutHandle=ef(Su.bind(null,r,n,nu,su,ru,t,$l,Zl,eu,Gl,o,`Throttled`,-0,0),a);break a}Su(r,n,nu,su,ru,t,$l,Zl,eu,Gl,o,null,-0,0)}}break}while(1);ld(e)}function Su(e,t,n,r,i,a,o,s,c,l,u,d,f,p){if(e.timeoutHandle=-1,d=t.subtreeFlags,d&8192||(d&16785408)==16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qt},jl(t,a,d);var m=(a&62914560)===a?iu-De():(a&4194048)===a?au-De():0;if(m=tp(d,m),m!==null){fu=a,e.cancelPendingCommit=m(Hu.bind(null,e,t,a,n,r,i,o,s,c,u,d,null,f,p)),wu(e,a,o,!l);return}}Hu(e,t,a,n,r,i,o,s,c)}function Cu(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!yr(a(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function wu(e,t,n,r){t&=~Ql,t&=~Zl,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-ze(i),o=1<<a;r[a]=-1,i&=~o}n!==0&&$e(e,n,t)}function Tu(){return zl&6?!0:(ud(0,!1),!1)}function Eu(){if(Vl!==null){if(Ul===0)var e=Vl.return;else e=Vl,Hi=Vi=null,Eo(e),Da=null,Oa=0,e=Vl;for(;e!==null;)zc(e.alternate,e),e=e.return;Vl=null}}function Du(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,tf(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),fu=0,Eu(),Bl=e,Vl=n=ai(e.current,null),Hl=t,Ul=0,Wl=null,Gl=!1,Kl=Je(e,t),ql=!1,eu=$l=Ql=Zl=Xl=Yl=0,nu=tu=null,ru=!1,t&8&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var i=31-ze(r),a=1<<i;t|=e[i],r&=~a}return Jl=t,Yr(),n}function Ou(e,t){so=null,N.H=Is,t===_a||t===ya?(t=Ta(),Ul=3):t===va?(t=Ta(),Ul=4):Ul=t===ec?8:typeof t==`object`&&t&&typeof t.then==`function`?6:1,Wl=t,Vl===null&&(Yl=1,Js(e,pi(t,e.current)))}function ku(){var e=Za.current;return e===null?!0:(Hl&4194048)===Hl?Qa===null:(Hl&62914560)===Hl||Hl&536870912?e===Qa:!1}function Au(){var e=N.H;return N.H=Is,e===null?Is:e}function ju(){var e=N.A;return N.A=Ll,e}function Mu(){Yl=4,Gl||(Hl&4194048)!==Hl&&Za.current!==null||(Kl=!0),!(Xl&134217727)&&!(Zl&134217727)||Bl===null||wu(Bl,Hl,$l,!1)}function Nu(e,t,n){var r=zl;zl|=2;var i=Au(),a=ju();(Bl!==e||Hl!==t)&&(su=null,Du(e,t)),t=!1;var o=Yl;a:do try{if(Ul!==0&&Vl!==null){var s=Vl,c=Wl;switch(Ul){case 8:Eu(),o=6;break a;case 3:case 2:case 9:case 6:Za.current===null&&(t=!0);var l=Ul;if(Ul=0,Wl=null,zu(e,s,c,l),n&&Kl){o=0;break a}break;default:l=Ul,Ul=0,Wl=null,zu(e,s,c,l)}}Pu(),o=Yl;break}catch(t){Ou(e,t)}while(1);return t&&e.shellSuspendCounter++,Hi=Vi=null,zl=r,N.H=i,N.A=a,Vl===null&&(Bl=null,Hl=0,Yr()),o}function Pu(){for(;Vl!==null;)Lu(Vl)}function Fu(e,t){var n=zl;zl|=2;var r=Au(),a=ju();Bl!==e||Hl!==t?(su=null,ou=De()+500,Du(e,t)):Kl=Je(e,t);a:do try{if(Ul!==0&&Vl!==null){t=Vl;var o=Wl;b:switch(Ul){case 1:Ul=0,Wl=null,zu(e,t,o,1);break;case 2:case 9:if(xa(o)){Ul=0,Wl=null,Ru(t);break}t=function(){Ul!==2&&Ul!==9||Bl!==e||(Ul=7),ld(e)},o.then(t,t);break a;case 3:Ul=7;break a;case 4:Ul=5;break a;case 7:xa(o)?(Ul=0,Wl=null,Ru(t)):(Ul=0,Wl=null,zu(e,t,o,7));break;case 5:var s=null;switch(Vl.tag){case 26:s=Vl.memoizedState;case 5:case 27:var c=Vl;if(s?Qf(s):c.stateNode.complete){Ul=0,Wl=null;var l=c.sibling;if(l!==null)Vl=l;else{var u=c.return;u===null?Vl=null:(Vl=u,Bu(u))}break b}}Ul=0,Wl=null,zu(e,t,o,5);break;case 6:Ul=0,Wl=null,zu(e,t,o,6);break;case 8:Eu(),Yl=6;break a;default:throw Error(i(462))}}Iu();break}catch(t){Ou(e,t)}while(1);return Hi=Vi=null,N.H=r,N.A=a,zl=n,Vl===null?(Bl=null,Hl=0,Yr(),Yl):0}function Iu(){for(;Vl!==null&&!Te();)Lu(Vl)}function Lu(e){var t=Ac(e.alternate,e,Jl);e.memoizedProps=e.pendingProps,t===null?Bu(e):Vl=t}function Ru(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=mc(n,t,t.pendingProps,t.type,void 0,Hl);break;case 11:t=mc(n,t,t.pendingProps,t.type.render,t.ref,Hl);break;case 5:Eo(t);default:zc(n,t),t=Vl=oi(t,Jl),t=Ac(n,t,Jl)}e.memoizedProps=e.pendingProps,t===null?Bu(e):Vl=t}function zu(e,t,n,r){Hi=Vi=null,Eo(t),Da=null,Oa=0;var i=t.return;try{if($s(e,i,t,n,Hl)){Yl=1,Js(e,pi(n,e.current)),Vl=null;return}}catch(t){if(i!==null)throw Vl=i,t;Yl=1,Js(e,pi(n,e.current)),Vl=null;return}t.flags&32768?(G||r===1?e=!0:Kl||Hl&536870912?e=!1:(Gl=e=!0,(r===2||r===9||r===3||r===6)&&(r=Za.current,r!==null&&r.tag===13&&(r.flags|=16384))),Vu(t,e)):Bu(t)}function Bu(e){var t=e;do{if(t.flags&32768){Vu(t,Gl);return}e=t.return;var n=Lc(t.alternate,t,Jl);if(n!==null){Vl=n;return}if(t=t.sibling,t!==null){Vl=t;return}Vl=t=e}while(t!==null);Yl===0&&(Yl=5)}function Vu(e,t){do{var n=Rc(e.alternate,e);if(n!==null){n.flags&=32767,Vl=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Vl=e;return}Vl=e=n}while(e!==null);Yl=6,Vl=null}function Hu(e,t,n,r,a,o,s,c,l){e.cancelPendingCommit=null;do qu();while(lu!==0);if(zl&6)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(o=t.lanes|t.childLanes,o|=Jr,Qe(e,n,o,s,c,l),e===Bl&&(Vl=Bl=null,Hl=0),du=t,uu=e,fu=n,pu=o,mu=a,hu=r,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,nd(je,function(){return Ju(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!=0,t.subtreeFlags&13878||r){r=N.T,N.T=null,a=P.p,P.p=2,s=zl,zl|=4;try{il(e,t,n)}finally{zl=s,P.p=a,N.T=r}}lu=1,Uu(),Wu(),Gu()}}function Uu(){if(lu===1){lu=0;var e=uu,t=du,n=(t.flags&13878)!=0;if(t.subtreeFlags&13878||n){n=N.T,N.T=null;var r=P.p;P.p=2;var i=zl;zl|=4;try{_l(t,e);var a=qd,o=wr(e.containerInfo),s=a.focusedElem,c=a.selectionRange;if(o!==s&&s&&s.ownerDocument&&Cr(s.ownerDocument.documentElement,s)){if(c!==null&&Tr(s)){var l=c.start,u=c.end;if(u===void 0&&(u=l),`selectionStart`in s)s.selectionStart=l,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),m=s.textContent.length,h=Math.min(c.start,m),g=c.end===void 0?h:Math.min(c.end,m);!p.extend&&h>g&&(o=g,g=h,h=o);var _=Sr(s,h),v=Sr(s,g);if(_&&v&&(p.rangeCount!==1||p.anchorNode!==_.node||p.anchorOffset!==_.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var y=d.createRange();y.setStart(_.node,_.offset),p.removeAllRanges(),h>g?(p.addRange(y),p.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),p.addRange(y))}}}}for(d=[],p=s;p=p.parentNode;)p.nodeType===1&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof s.focus==`function`&&s.focus(),s=0;s<d.length;s++){var b=d[s];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}hp=!!Kd,qd=Kd=null}finally{zl=i,P.p=r,N.T=n}}e.current=t,lu=2}}function Wu(){if(lu===2){lu=0;var e=uu,t=du,n=(t.flags&8772)!=0;if(t.subtreeFlags&8772||n){n=N.T,N.T=null;var r=P.p;P.p=2;var i=zl;zl|=4;try{al(e,t.alternate,t)}finally{zl=i,P.p=r,N.T=n}}lu=3}}function Gu(){if(lu===4||lu===3){lu=0,Ee();var e=uu,t=du,n=fu,r=hu;t.subtreeFlags&10256||t.flags&10256?lu=5:(lu=0,du=uu=null,Ku(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(cu=null),rt(n),t=t.stateNode,Le&&typeof Le.onCommitFiberRoot==`function`)try{Le.onCommitFiberRoot(Ie,t,void 0,(t.current.flags&128)==128)}catch{}if(r!==null){t=N.T,i=P.p,P.p=2,N.T=null;try{for(var a=e.onRecoverableError,o=0;o<r.length;o++){var s=r[o];a(s.value,{componentStack:s.stack})}}finally{N.T=t,P.p=i}}fu&3&&qu(),ld(e),i=e.pendingLanes,n&261930&&i&42?e===_u?gu++:(gu=0,_u=e):gu=0,ud(0,!1)}}function Ku(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ia(t)))}function qu(){return Uu(),Wu(),Gu(),Ju()}function Ju(){if(lu!==5)return!1;var e=uu,t=pu;pu=0;var n=rt(fu),r=N.T,a=P.p;try{P.p=32>n?32:n,N.T=null,n=mu,mu=null;var o=uu,s=fu;if(lu=0,du=uu=null,fu=0,zl&6)throw Error(i(331));var c=zl;if(zl|=4,Pl(o.current),El(o,o.current,s,n),zl=c,ud(0,!1),Le&&typeof Le.onPostCommitFiberRoot==`function`)try{Le.onPostCommitFiberRoot(Ie,o)}catch{}return!0}finally{P.p=a,N.T=r,Ku(e,t)}}function Yu(e,t,n){t=pi(n,t),t=Xs(e.stateNode,t,2),e=Ra(e,t,2),e!==null&&(R(e,2),ld(e))}function Xu(e,t,n){if(e.tag===3)Yu(e,e,n);else for(;t!==null;){if(t.tag===3){Yu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError==`function`||typeof r.componentDidCatch==`function`&&(cu===null||!cu.has(r))){e=pi(n,e),n=Zs(2),r=Ra(t,n,2),r!==null&&(Qs(n,r,t,e),R(r,2),ld(r));break}}t=t.return}}function Zu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Rl;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(ql=!0,i.add(n),e=Qu.bind(null,e,t,n),t.then(e,e))}function Qu(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Bl===e&&(Hl&n)===n&&(Yl===4||Yl===3&&(Hl&62914560)===Hl&&300>De()-iu?!(zl&2)&&Du(e,0):Ql|=n,eu===Hl&&(eu=0)),ld(e)}function $u(e,t){t===0&&(t=Xe()),e=Qr(e,t),e!==null&&(R(e,t),ld(e))}function ed(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),$u(e,n)}function td(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}r!==null&&r.delete(t),$u(e,n)}function nd(e,t){return Ce(e,t)}var rd=null,id=null,ad=!1,od=!1,sd=!1,cd=0;function ld(e){e!==id&&e.next===null&&(id===null?rd=id=e:id=id.next=e),od=!0,ad||(ad=!0,gd())}function ud(e,t){if(!sd&&od){sd=!0;do for(var n=!1,r=rd;r!==null;){if(!t)if(e!==0){var i=r.pendingLanes;if(i===0)var a=0;else{var o=r.suspendedLanes,s=r.pingedLanes;a=(1<<31-ze(42|e)+1)-1,a&=i&~(o&~s),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,hd(r,a))}else a=Hl,a=qe(r,r===Bl?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(a&3)||Je(r,a)||(n=!0,hd(r,a));r=r.next}while(n);sd=!1}}function dd(){fd()}function fd(){od=ad=!1;var e=0;cd!==0&&$d()&&(e=cd);for(var t=De(),n=null,r=rd;r!==null;){var i=r.next,a=pd(r,t);a===0?(r.next=null,n===null?rd=i:n.next=i,i===null&&(id=n)):(n=r,(e!==0||a&3)&&(od=!0)),r=i}lu!==0&&lu!==5||ud(e,!1),cd!==0&&(cd=0)}function pd(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var o=31-ze(a),s=1<<o,c=i[o];c===-1?((s&n)===0||(s&r)!==0)&&(i[o]=Ye(s,t)):c<=t&&(e.expiredLanes|=s),a&=~s}if(t=Bl,n=Hl,n=qe(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&(Ul===2||Ul===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&we(r),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Je(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&we(r),rt(n)){case 2:case 8:n=Ae;break;case 32:n=je;break;case 268435456:n=Ne;break;default:n=je}return r=md.bind(null,e),n=Ce(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&we(r),e.callbackPriority=2,e.callbackNode=null,2}function md(e,t){if(lu!==0&&lu!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(qu()&&e.callbackNode!==n)return null;var r=Hl;return r=qe(e,e===Bl?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(xu(e,r,t),pd(e,De()),e.callbackNode!=null&&e.callbackNode===n?md.bind(null,e):null)}function hd(e,t){if(qu())return null;xu(e,t,!0)}function gd(){rf(function(){zl&6?Ce(ke,dd):fd()})}function _d(){if(cd===0){var e=sa;e===0&&(e=Ue,Ue<<=1,!(Ue&261888)&&(Ue=256)),cd=e}return cd}function vd(e){return e==null||typeof e==`symbol`||typeof e==`boolean`?null:typeof e==`function`?e:Zt(``+e)}function yd(e,t){var n=t.ownerDocument.createElement(`input`);return n.name=t.name,n.value=t.value,e.id&&n.setAttribute(`form`,e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function bd(e,t,n,r,i){if(t===`submit`&&n&&n.stateNode===i){var a=vd((i[ct]||null).action),o=r.submitter;o&&(t=(t=o[ct]||null)?vd(t.formAction):o.getAttribute(`formAction`),t!==null&&(a=t,o=null));var s=new V(`action`,`action`,null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(cd!==0){var e=o?yd(i,o):new FormData(i);Ss(n,{pending:!0,data:e,method:i.method,action:a},null,e)}}else typeof a==`function`&&(s.preventDefault(),e=o?yd(i,o):new FormData(i),Ss(n,{pending:!0,data:e,method:i.method,action:a},a,e))},currentTarget:i}]})}}for(var xd=0;xd<Gr.length;xd++){var Sd=Gr[xd];Kr(Sd.toLowerCase(),`on`+(Sd[0].toUpperCase()+Sd.slice(1)))}Kr(Lr,`onAnimationEnd`),Kr(Rr,`onAnimationIteration`),Kr(zr,`onAnimationStart`),Kr(`dblclick`,`onDoubleClick`),Kr(`focusin`,`onFocus`),Kr(`focusout`,`onBlur`),Kr(Br,`onTransitionRun`),Kr(Vr,`onTransitionStart`),Kr(Hr,`onTransitionCancel`),Kr(Ur,`onTransitionEnd`),wt(`onMouseEnter`,[`mouseout`,`mouseover`]),wt(`onMouseLeave`,[`mouseout`,`mouseover`]),wt(`onPointerEnter`,[`pointerout`,`pointerover`]),wt(`onPointerLeave`,[`pointerout`,`pointerover`]),Ct(`onChange`,`change click focusin focusout input keydown keyup selectionchange`.split(` `)),Ct(`onSelect`,`focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange`.split(` `)),Ct(`onBeforeInput`,[`compositionend`,`keypress`,`textInput`,`paste`]),Ct(`onCompositionEnd`,`compositionend focusout keydown keypress keyup mousedown`.split(` `)),Ct(`onCompositionStart`,`compositionstart focusout keydown keypress keyup mousedown`.split(` `)),Ct(`onCompositionUpdate`,`compositionupdate focusout keydown keypress keyup mousedown`.split(` `));var Cd=`abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting`.split(` `),wd=new Set(`beforetoggle cancel close invalid load scroll scrollend toggle`.split(` `).concat(Cd));function Td(e,t){t=(t&4)!=0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;a:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){U(e)}i.currentTarget=null,a=c}else for(o=0;o<r.length;o++){if(s=r[o],c=s.instance,l=s.currentTarget,s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){U(e)}i.currentTarget=null,a=c}}}}function Ed(e,t){var n=t[ut];n===void 0&&(n=t[ut]=new Set);var r=e+`__bubble`;n.has(r)||(Ad(t,e,2,!1),n.add(r))}function Dd(e,t,n){var r=0;t&&(r|=4),Ad(n,e,r,t)}var Od=`_reactListening`+Math.random().toString(36).slice(2);function kd(e){if(!e[Od]){e[Od]=!0,xt.forEach(function(t){t!==`selectionchange`&&(wd.has(t)||Dd(t,!1,e),Dd(t,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Od]||(t[Od]=!0,Dd(`selectionchange`,!1,t))}}function Ad(e,t,n,r){switch(Sp(t)){case 2:var i=gp;break;case 8:i=_p;break;default:i=vp}n=i.bind(null,t,n,e),i=void 0,!ln||t!==`touchstart`&&t!==`touchmove`&&t!==`wheel`||(i=!0),r?i===void 0?e.addEventListener(t,n,!0):e.addEventListener(t,n,{capture:!0,passive:i}):i===void 0?e.addEventListener(t,n,!1):e.addEventListener(t,n,{passive:i})}function jd(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)a:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var c=r.stateNode.containerInfo;if(c===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&s.stateNode.containerInfo===i)return;s=s.return}for(;c!==null;){if(s=gt(c),s===null)return;if(l=s.tag,l===5||l===6||l===26||l===27){r=a=s;continue a}c=c.parentNode}}r=r.return}on(function(){var r=a,i=en(n),s=[];a:{var c=Wr.get(e);if(c!==void 0){var l=V,u=e;switch(e){case`keypress`:if(hn(n)===0)break a;case`keydown`:case`keyup`:l=Ln;break;case`focusin`:u=`focus`,l=On;break;case`focusout`:u=`blur`,l=On;break;case`beforeblur`:case`afterblur`:l=On;break;case`click`:if(n.button===2)break a;case`auxclick`:case`dblclick`:case`mousedown`:case`mousemove`:case`mouseup`:case`mouseout`:case`mouseover`:case`contextmenu`:l=En;break;case`drag`:case`dragend`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`dragstart`:case`drop`:l=Dn;break;case`touchcancel`:case`touchend`:case`touchmove`:case`touchstart`:l=zn;break;case Lr:case Rr:case zr:l=kn;break;case Ur:l=H;break;case`scroll`:case`scrollend`:l=xn;break;case`wheel`:l=Bn;break;case`copy`:case`cut`:case`paste`:l=An;break;case`gotpointercapture`:case`lostpointercapture`:case`pointercancel`:case`pointerdown`:case`pointermove`:case`pointerout`:case`pointerover`:case`pointerup`:l=Rn;break;case`toggle`:case`beforetoggle`:l=Vn}var d=(t&4)!=0,f=!d&&(e===`scroll`||e===`scrollend`),p=d?c===null?null:c+`Capture`:c;d=[];for(var m=r,h;m!==null;){var g=m;if(h=g.stateNode,g=g.tag,g!==5&&g!==26&&g!==27||h===null||p===null||(g=sn(m,p),g!=null&&d.push(Md(m,g,h))),f)break;m=m.return}0<d.length&&(c=new l(c,u,null,n,i),s.push({event:c,listeners:d}))}}if(!(t&7)){a:{if(c=e===`mouseover`||e===`pointerover`,l=e===`mouseout`||e===`pointerout`,c&&n!==$t&&(u=n.relatedTarget||n.fromElement)&&(gt(u)||u[lt]))break a;if((l||c)&&(c=i.window===i?i:(c=i.ownerDocument)?c.defaultView||c.parentWindow:window,l?(u=n.relatedTarget||n.toElement,l=r,u=u?gt(u):null,u!==null&&(f=o(u),d=u.tag,u!==f||d!==5&&d!==27&&d!==6)&&(u=null)):(l=null,u=r),l!==u)){if(d=En,g=`onMouseLeave`,p=`onMouseEnter`,m=`mouse`,(e===`pointerout`||e===`pointerover`)&&(d=Rn,g=`onPointerLeave`,p=`onPointerEnter`,m=`pointer`),f=l==null?c:vt(l),h=u==null?c:vt(u),c=new d(g,m+`leave`,l,n,i),c.target=f,c.relatedTarget=h,g=null,gt(i)===r&&(d=new d(p,m+`enter`,u,n,i),d.target=h,d.relatedTarget=f,g=d),f=g,l&&u)b:{for(d=Pd,p=l,m=u,h=0,g=p;g;g=d(g))h++;g=0;for(var _=m;_;_=d(_))g++;for(;0<h-g;)p=d(p),h--;for(;0<g-h;)m=d(m),g--;for(;h--;){if(p===m||m!==null&&p===m.alternate){d=p;break b}p=d(p),m=d(m)}d=null}else d=null;l!==null&&Fd(s,c,l,d,!1),u!==null&&f!==null&&Fd(s,f,u,d,!0)}}a:{if(c=r?vt(r):window,l=c.nodeName&&c.nodeName.toLowerCase(),l===`select`||l===`input`&&c.type===`file`)var v=sr;else if(tr(c))if(cr)v=_r;else{v=hr;var y=mr}else l=c.nodeName,!l||l.toLowerCase()!==`input`||c.type!==`checkbox`&&c.type!==`radio`?r&&Jt(r.elementType)&&(v=sr):v=gr;if(v&&=v(e,r)){nr(s,v,n,i);break a}y&&y(e,c,r),e===`focusout`&&r&&c.type===`number`&&r.memoizedProps.value!=null&&Bt(c,`number`,c.value)}switch(y=r?vt(r):window,e){case`focusin`:(tr(y)||y.contentEditable===`true`)&&(Dr=y,Or=r,kr=null);break;case`focusout`:kr=Or=Dr=null;break;case`mousedown`:Ar=!0;break;case`contextmenu`:case`mouseup`:case`dragend`:Ar=!1,jr(s,n,i);break;case`selectionchange`:if(Er)break;case`keydown`:case`keyup`:jr(s,n,i)}var b;if(Un)b:{switch(e){case`compositionstart`:var x=`onCompositionStart`;break b;case`compositionend`:x=`onCompositionEnd`;break b;case`compositionupdate`:x=`onCompositionUpdate`;break b}x=void 0}else Zn?Yn(e,n)&&(x=`onCompositionEnd`):e===`keydown`&&n.keyCode===229&&(x=`onCompositionStart`);x&&(Kn&&n.locale!==`ko`&&(Zn||x!==`onCompositionStart`?x===`onCompositionEnd`&&Zn&&(b=mn()):(dn=i,fn=`value`in dn?dn.value:dn.textContent,Zn=!0)),y=Nd(r,x),0<y.length&&(x=new jn(x,e,null,n,i),s.push({event:x,listeners:y}),b?x.data=b:(b=Xn(n),b!==null&&(x.data=b)))),(b=Gn?Qn(e,n):$n(e,n))&&(x=Nd(r,`onBeforeInput`),0<x.length&&(y=new jn(`onBeforeInput`,`beforeinput`,null,n,i),s.push({event:y,listeners:x}),y.data=b)),bd(s,e,r,n,i)}Td(s,t)})}function Md(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Nd(e,t){for(var n=t+`Capture`,r=[];e!==null;){var i=e,a=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||a===null||(i=sn(e,n),i!=null&&r.unshift(Md(e,i,a)),i=sn(e,t),i!=null&&r.push(Md(e,i,a))),e.tag===3)return r;e=e.return}return[]}function Pd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Fd(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(s=s.tag,c!==null&&c===r)break;s!==5&&s!==26&&s!==27||l===null||(c=l,i?(l=sn(n,a),l!=null&&o.unshift(Md(n,l,c))):i||(l=sn(n,a),l!=null&&o.push(Md(n,l,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Id=/\r\n?/g,Ld=/\u0000|\uFFFD/g;function Rd(e){return(typeof e==`string`?e:``+e).replace(Id,`
`).replace(Ld,``)}function zd(e,t){return t=Rd(t),Rd(e)===t}function Bd(e,t,n,r,a,o){switch(n){case`children`:typeof r==`string`?t===`body`||t===`textarea`&&r===``||Wt(e,r):(typeof r==`number`||typeof r==`bigint`)&&t!==`body`&&Wt(e,``+r);break;case`className`:Ot(e,`class`,r);break;case`tabIndex`:Ot(e,`tabindex`,r);break;case`dir`:case`role`:case`viewBox`:case`width`:case`height`:Ot(e,n,r);break;case`style`:qt(e,r,o);break;case`data`:if(t!==`object`){Ot(e,`data`,r);break}case`src`:case`href`:if(r===``&&(t!==`a`||n!==`href`)){e.removeAttribute(n);break}if(r==null||typeof r==`function`||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=Zt(``+r),e.setAttribute(n,r);break;case`action`:case`formAction`:if(typeof r==`function`){e.setAttribute(n,`javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')`);break}else typeof o==`function`&&(n===`formAction`?(t!==`input`&&Bd(e,t,`name`,a.name,a,null),Bd(e,t,`formEncType`,a.formEncType,a,null),Bd(e,t,`formMethod`,a.formMethod,a,null),Bd(e,t,`formTarget`,a.formTarget,a,null)):(Bd(e,t,`encType`,a.encType,a,null),Bd(e,t,`method`,a.method,a,null),Bd(e,t,`target`,a.target,a,null)));if(r==null||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=Zt(``+r),e.setAttribute(n,r);break;case`onClick`:r!=null&&(e.onclick=Qt);break;case`onScroll`:r!=null&&Ed(`scroll`,e);break;case`onScrollEnd`:r!=null&&Ed(`scrollend`,e);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`multiple`:e.multiple=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`muted`:e.muted=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`defaultValue`:case`defaultChecked`:case`innerHTML`:case`ref`:break;case`autoFocus`:break;case`xlinkHref`:if(r==null||typeof r==`function`||typeof r==`boolean`||typeof r==`symbol`){e.removeAttribute(`xlink:href`);break}n=Zt(``+r),e.setAttributeNS(`http://www.w3.org/1999/xlink`,`xlink:href`,n);break;case`contentEditable`:case`spellCheck`:case`draggable`:case`value`:case`autoReverse`:case`externalResourcesRequired`:case`focusable`:case`preserveAlpha`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``+r):e.removeAttribute(n);break;case`inert`:case`allowFullScreen`:case`async`:case`autoPlay`:case`controls`:case`default`:case`defer`:case`disabled`:case`disablePictureInPicture`:case`disableRemotePlayback`:case`formNoValidate`:case`hidden`:case`loop`:case`noModule`:case`noValidate`:case`open`:case`playsInline`:case`readOnly`:case`required`:case`reversed`:case`scoped`:case`seamless`:case`itemScope`:r&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``):e.removeAttribute(n);break;case`capture`:case`download`:!0===r?e.setAttribute(n,``):!1!==r&&r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,r):e.removeAttribute(n);break;case`cols`:case`rows`:case`size`:case`span`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case`rowSpan`:case`start`:r==null||typeof r==`function`||typeof r==`symbol`||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case`popover`:Ed(`beforetoggle`,e),Ed(`toggle`,e),B(e,`popover`,r);break;case`xlinkActuate`:kt(e,`http://www.w3.org/1999/xlink`,`xlink:actuate`,r);break;case`xlinkArcrole`:kt(e,`http://www.w3.org/1999/xlink`,`xlink:arcrole`,r);break;case`xlinkRole`:kt(e,`http://www.w3.org/1999/xlink`,`xlink:role`,r);break;case`xlinkShow`:kt(e,`http://www.w3.org/1999/xlink`,`xlink:show`,r);break;case`xlinkTitle`:kt(e,`http://www.w3.org/1999/xlink`,`xlink:title`,r);break;case`xlinkType`:kt(e,`http://www.w3.org/1999/xlink`,`xlink:type`,r);break;case`xmlBase`:kt(e,`http://www.w3.org/XML/1998/namespace`,`xml:base`,r);break;case`xmlLang`:kt(e,`http://www.w3.org/XML/1998/namespace`,`xml:lang`,r);break;case`xmlSpace`:kt(e,`http://www.w3.org/XML/1998/namespace`,`xml:space`,r);break;case`is`:B(e,`is`,r);break;case`innerText`:case`textContent`:break;default:(!(2<n.length)||n[0]!==`o`&&n[0]!==`O`||n[1]!==`n`&&n[1]!==`N`)&&(n=Yt.get(n)||n,B(e,n,r))}}function Vd(e,t,n,r,a,o){switch(n){case`style`:qt(e,r,o);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`children`:typeof r==`string`?Wt(e,r):(typeof r==`number`||typeof r==`bigint`)&&Wt(e,``+r);break;case`onScroll`:r!=null&&Ed(`scroll`,e);break;case`onScrollEnd`:r!=null&&Ed(`scrollend`,e);break;case`onClick`:r!=null&&(e.onclick=Qt);break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`innerHTML`:case`ref`:break;case`innerText`:case`textContent`:break;default:if(!St.hasOwnProperty(n))a:{if(n[0]===`o`&&n[1]===`n`&&(a=n.endsWith(`Capture`),t=n.slice(2,a?n.length-7:void 0),o=e[ct]||null,o=o==null?null:o[n],typeof o==`function`&&e.removeEventListener(t,o,a),typeof r==`function`)){typeof o!=`function`&&o!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a);break a}n in e?e[n]=r:!0===r?e.setAttribute(n,``):B(e,n,r)}}}function Hd(e,t,n){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`img`:Ed(`error`,e),Ed(`load`,e);var r=!1,a=!1,o;for(o in n)if(n.hasOwnProperty(o)){var s=n[o];if(s!=null)switch(o){case`src`:r=!0;break;case`srcSet`:a=!0;break;case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:Bd(e,t,o,s,n,null)}}a&&Bd(e,t,`srcSet`,n.srcSet,n,null),r&&Bd(e,t,`src`,n.src,n,null);return;case`input`:Ed(`invalid`,e);var c=o=s=a=null,l=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var d=n[r];if(d!=null)switch(r){case`name`:a=d;break;case`type`:s=d;break;case`checked`:l=d;break;case`defaultChecked`:u=d;break;case`value`:o=d;break;case`defaultValue`:c=d;break;case`children`:case`dangerouslySetInnerHTML`:if(d!=null)throw Error(i(137,t));break;default:Bd(e,t,r,d,n,null)}}zt(e,o,c,l,u,s,a,!1);return;case`select`:for(a in Ed(`invalid`,e),r=s=o=null,n)if(n.hasOwnProperty(a)&&(c=n[a],c!=null))switch(a){case`value`:o=c;break;case`defaultValue`:s=c;break;case`multiple`:r=c;default:Bd(e,t,a,c,n,null)}t=o,n=s,e.multiple=!!r,t==null?n!=null&&Vt(e,!!r,n,!0):Vt(e,!!r,t,!1);return;case`textarea`:for(s in Ed(`invalid`,e),o=a=r=null,n)if(n.hasOwnProperty(s)&&(c=n[s],c!=null))switch(s){case`value`:r=c;break;case`defaultValue`:a=c;break;case`children`:o=c;break;case`dangerouslySetInnerHTML`:if(c!=null)throw Error(i(91));break;default:Bd(e,t,s,c,n,null)}Ut(e,r,a,o);return;case`option`:for(l in n)if(n.hasOwnProperty(l)&&(r=n[l],r!=null))switch(l){case`selected`:e.selected=r&&typeof r!=`function`&&typeof r!=`symbol`;break;default:Bd(e,t,l,r,n,null)}return;case`dialog`:Ed(`beforetoggle`,e),Ed(`toggle`,e),Ed(`cancel`,e),Ed(`close`,e);break;case`iframe`:case`object`:Ed(`load`,e);break;case`video`:case`audio`:for(r=0;r<Cd.length;r++)Ed(Cd[r],e);break;case`image`:Ed(`error`,e),Ed(`load`,e);break;case`details`:Ed(`toggle`,e);break;case`embed`:case`source`:case`link`:Ed(`error`,e),Ed(`load`,e);case`area`:case`base`:case`br`:case`col`:case`hr`:case`keygen`:case`meta`:case`param`:case`track`:case`wbr`:case`menuitem`:for(u in n)if(n.hasOwnProperty(u)&&(r=n[u],r!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:Bd(e,t,u,r,n,null)}return;default:if(Jt(t)){for(d in n)n.hasOwnProperty(d)&&(r=n[d],r!==void 0&&Vd(e,t,d,r,n,void 0));return}}for(c in n)n.hasOwnProperty(c)&&(r=n[c],r!=null&&Bd(e,t,c,r,n,null))}function Ud(e,t,n,r){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`input`:var a=null,o=null,s=null,c=null,l=null,u=null,d=null;for(m in n){var f=n[m];if(n.hasOwnProperty(m)&&f!=null)switch(m){case`checked`:break;case`value`:break;case`defaultValue`:l=f;default:r.hasOwnProperty(m)||Bd(e,t,m,null,r,f)}}for(var p in r){var m=r[p];if(f=n[p],r.hasOwnProperty(p)&&(m!=null||f!=null))switch(p){case`type`:o=m;break;case`name`:a=m;break;case`checked`:u=m;break;case`defaultChecked`:d=m;break;case`value`:s=m;break;case`defaultValue`:c=m;break;case`children`:case`dangerouslySetInnerHTML`:if(m!=null)throw Error(i(137,t));break;default:m!==f&&Bd(e,t,p,m,r,f)}}Rt(e,s,c,l,u,d,o,a);return;case`select`:for(o in m=s=c=p=null,n)if(l=n[o],n.hasOwnProperty(o)&&l!=null)switch(o){case`value`:break;case`multiple`:m=l;default:r.hasOwnProperty(o)||Bd(e,t,o,null,r,l)}for(a in r)if(o=r[a],l=n[a],r.hasOwnProperty(a)&&(o!=null||l!=null))switch(a){case`value`:p=o;break;case`defaultValue`:c=o;break;case`multiple`:s=o;default:o!==l&&Bd(e,t,a,o,r,l)}t=c,n=s,r=m,p==null?!!r!=!!n&&(t==null?Vt(e,!!n,n?[]:``,!1):Vt(e,!!n,t,!0)):Vt(e,!!n,p,!1);return;case`textarea`:for(c in m=p=null,n)if(a=n[c],n.hasOwnProperty(c)&&a!=null&&!r.hasOwnProperty(c))switch(c){case`value`:break;case`children`:break;default:Bd(e,t,c,null,r,a)}for(s in r)if(a=r[s],o=n[s],r.hasOwnProperty(s)&&(a!=null||o!=null))switch(s){case`value`:p=a;break;case`defaultValue`:m=a;break;case`children`:break;case`dangerouslySetInnerHTML`:if(a!=null)throw Error(i(91));break;default:a!==o&&Bd(e,t,s,a,r,o)}Ht(e,p,m);return;case`option`:for(var h in n)if(p=n[h],n.hasOwnProperty(h)&&p!=null&&!r.hasOwnProperty(h))switch(h){case`selected`:e.selected=!1;break;default:Bd(e,t,h,null,r,p)}for(l in r)if(p=r[l],m=n[l],r.hasOwnProperty(l)&&p!==m&&(p!=null||m!=null))switch(l){case`selected`:e.selected=p&&typeof p!=`function`&&typeof p!=`symbol`;break;default:Bd(e,t,l,p,r,m)}return;case`img`:case`link`:case`area`:case`base`:case`br`:case`col`:case`embed`:case`hr`:case`keygen`:case`meta`:case`param`:case`source`:case`track`:case`wbr`:case`menuitem`:for(var g in n)p=n[g],n.hasOwnProperty(g)&&p!=null&&!r.hasOwnProperty(g)&&Bd(e,t,g,null,r,p);for(u in r)if(p=r[u],m=n[u],r.hasOwnProperty(u)&&p!==m&&(p!=null||m!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:if(p!=null)throw Error(i(137,t));break;default:Bd(e,t,u,p,r,m)}return;default:if(Jt(t)){for(var _ in n)p=n[_],n.hasOwnProperty(_)&&p!==void 0&&!r.hasOwnProperty(_)&&Vd(e,t,_,void 0,r,p);for(d in r)p=r[d],m=n[d],!r.hasOwnProperty(d)||p===m||p===void 0&&m===void 0||Vd(e,t,d,p,r,m);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&p!=null&&!r.hasOwnProperty(v)&&Bd(e,t,v,null,r,p);for(f in r)p=r[f],m=n[f],!r.hasOwnProperty(f)||p===m||p==null&&m==null||Bd(e,t,f,p,r,m)}function Wd(e){switch(e){case`css`:case`script`:case`font`:case`img`:case`image`:case`input`:case`link`:return!0;default:return!1}}function Gd(){if(typeof performance.getEntriesByType==`function`){for(var e=0,t=0,n=performance.getEntriesByType(`resource`),r=0;r<n.length;r++){var i=n[r],a=i.transferSize,o=i.initiatorType,s=i.duration;if(a&&s&&Wd(o)){for(o=0,s=i.responseEnd,r+=1;r<n.length;r++){var c=n[r],l=c.startTime;if(l>s)break;var u=c.transferSize,d=c.initiatorType;u&&Wd(d)&&(c=c.responseEnd,o+=u*(c<s?1:(s-l)/(c-l)))}if(--r,t+=8*(a+o)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e==`number`)?e:5}var Kd=null,qd=null;function Jd(e){return e.nodeType===9?e:e.ownerDocument}function Yd(e){switch(e){case`http://www.w3.org/2000/svg`:return 1;case`http://www.w3.org/1998/Math/MathML`:return 2;default:return 0}}function Xd(e,t){if(e===0)switch(t){case`svg`:return 1;case`math`:return 2;default:return 0}return e===1&&t===`foreignObject`?0:e}function Zd(e,t){return e===`textarea`||e===`noscript`||typeof t.children==`string`||typeof t.children==`number`||typeof t.children==`bigint`||typeof t.dangerouslySetInnerHTML==`object`&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Qd=null;function $d(){var e=window.event;return e&&e.type===`popstate`?e===Qd?!1:(Qd=e,!0):(Qd=null,!1)}var ef=typeof setTimeout==`function`?setTimeout:void 0,tf=typeof clearTimeout==`function`?clearTimeout:void 0,nf=typeof Promise==`function`?Promise:void 0,rf=typeof queueMicrotask==`function`?queueMicrotask:nf===void 0?ef:function(e){return nf.resolve(null).then(e).catch(af)};function af(e){setTimeout(function(){throw e})}function of(e){return e===`head`}function sf(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n===`/$`||n===`/&`){if(r===0){e.removeChild(i),Vp(t);return}r--}else if(n===`$`||n===`$?`||n===`$~`||n===`$!`||n===`&`)r++;else if(n===`html`)xf(e.ownerDocument.documentElement);else if(n===`head`){n=e.ownerDocument.head,xf(n);for(var a=n.firstChild;a;){var o=a.nextSibling,s=a.nodeName;a[mt]||s===`SCRIPT`||s===`STYLE`||s===`LINK`&&a.rel.toLowerCase()===`stylesheet`||n.removeChild(a),a=o}}else n===`body`&&xf(e.ownerDocument.body);n=i}while(n);Vp(t)}function cf(e,t){var n=e;e=0;do{var r=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display=`none`):(n.style.display=n._stashedDisplay||``,n.getAttribute(`style`)===``&&n.removeAttribute(`style`)):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=``):n.nodeValue=n._stashedText||``),r&&r.nodeType===8)if(n=r.data,n===`/$`){if(e===0)break;e--}else n!==`$`&&n!==`$?`&&n!==`$~`&&n!==`$!`||e++;n=r}while(n)}function lf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case`HTML`:case`HEAD`:case`BODY`:lf(n),ht(n);continue;case`SCRIPT`:case`STYLE`:continue;case`LINK`:if(n.rel.toLowerCase()===`stylesheet`)continue}e.removeChild(n)}}function uf(e,t,n,r){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!==`INPUT`||e.type!==`hidden`))break}else if(!r)if(t===`input`&&e.type===`hidden`){var a=i.name==null?null:``+i.name;if(i.type===`hidden`&&e.getAttribute(`name`)===a)return e}else return e;else if(!e[mt])switch(t){case`meta`:if(!e.hasAttribute(`itemprop`))break;return e;case`link`:if(a=e.getAttribute(`rel`),a===`stylesheet`&&e.hasAttribute(`data-precedence`)||a!==i.rel||e.getAttribute(`href`)!==(i.href==null||i.href===``?null:i.href)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute(`title`)!==(i.title==null?null:i.title))break;return e;case`style`:if(e.hasAttribute(`data-precedence`))break;return e;case`script`:if(a=e.getAttribute(`src`),(a!==(i.src==null?null:i.src)||e.getAttribute(`type`)!==(i.type==null?null:i.type)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin))&&a&&e.hasAttribute(`async`)&&!e.hasAttribute(`itemprop`))break;return e;default:return e}if(e=gf(e.nextSibling),e===null)break}return null}function df(e,t,n){if(t===``)return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!n||(e=gf(e.nextSibling),e===null))return null;return e}function ff(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!t||(e=gf(e.nextSibling),e===null))return null;return e}function pf(e){return e.data===`$?`||e.data===`$~`}function mf(e){return e.data===`$!`||e.data===`$?`&&e.ownerDocument.readyState!==`loading`}function hf(e,t){var n=e.ownerDocument;if(e.data===`$~`)e._reactRetry=t;else if(e.data!==`$?`||n.readyState!==`loading`)t();else{var r=function(){t(),n.removeEventListener(`DOMContentLoaded`,r)};n.addEventListener(`DOMContentLoaded`,r),e._reactRetry=r}}function gf(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t===`$`||t===`$!`||t===`$?`||t===`$~`||t===`&`||t===`F!`||t===`F`)break;if(t===`/$`||t===`/&`)return null}}return e}var _f=null;function vf(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`/$`||n===`/&`){if(t===0)return gf(e.nextSibling);t--}else n!==`$`&&n!==`$!`&&n!==`$?`&&n!==`$~`&&n!==`&`||t++}e=e.nextSibling}return null}function yf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`$`||n===`$!`||n===`$?`||n===`$~`||n===`&`){if(t===0)return e;t--}else n!==`/$`&&n!==`/&`||t++}e=e.previousSibling}return null}function bf(e,t,n){switch(t=Jd(n),e){case`html`:if(e=t.documentElement,!e)throw Error(i(452));return e;case`head`:if(e=t.head,!e)throw Error(i(453));return e;case`body`:if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function xf(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ht(e)}var Sf=new Map,Cf=new Set;function wf(e){return typeof e.getRootNode==`function`?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Tf=P.d;P.d={f:Ef,r:Df,D:Af,C:jf,L:Mf,m:Nf,X:Ff,S:Pf,M:If};function Ef(){var e=Tf.f(),t=Tu();return e||t}function Df(e){var t=_t(e);t!==null&&t.tag===5&&t.type===`form`?ws(t):Tf.r(e)}var Of=typeof document>`u`?null:document;function kf(e,t,n){var r=Of;if(r&&typeof t==`string`&&t){var i=Lt(t);i=`link[rel="`+e+`"][href="`+i+`"]`,typeof n==`string`&&(i+=`[crossorigin="`+n+`"]`),Cf.has(i)||(Cf.add(i),e={rel:e,crossOrigin:n,href:t},r.querySelector(i)===null&&(t=r.createElement(`link`),Hd(t,`link`,e),bt(t),r.head.appendChild(t)))}}function Af(e){Tf.D(e),kf(`dns-prefetch`,e,null)}function jf(e,t){Tf.C(e,t),kf(`preconnect`,e,t)}function Mf(e,t,n){Tf.L(e,t,n);var r=Of;if(r&&e&&t){var i=`link[rel="preload"][as="`+Lt(t)+`"]`;t===`image`&&n&&n.imageSrcSet?(i+=`[imagesrcset="`+Lt(n.imageSrcSet)+`"]`,typeof n.imageSizes==`string`&&(i+=`[imagesizes="`+Lt(n.imageSizes)+`"]`)):i+=`[href="`+Lt(e)+`"]`;var a=i;switch(t){case`style`:a=Rf(e);break;case`script`:a=Hf(e)}Sf.has(a)||(e=m({rel:`preload`,href:t===`image`&&n&&n.imageSrcSet?void 0:e,as:t},n),Sf.set(a,e),r.querySelector(i)!==null||t===`style`&&r.querySelector(zf(a))||t===`script`&&r.querySelector(Uf(a))||(t=r.createElement(`link`),Hd(t,`link`,e),bt(t),r.head.appendChild(t)))}}function Nf(e,t){Tf.m(e,t);var n=Of;if(n&&e){var r=t&&typeof t.as==`string`?t.as:`script`,i=`link[rel="modulepreload"][as="`+Lt(r)+`"][href="`+Lt(e)+`"]`,a=i;switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:a=Hf(e)}if(!Sf.has(a)&&(e=m({rel:`modulepreload`,href:e},t),Sf.set(a,e),n.querySelector(i)===null)){switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:if(n.querySelector(Uf(a)))return}r=n.createElement(`link`),Hd(r,`link`,e),bt(r),n.head.appendChild(r)}}}function Pf(e,t,n){Tf.S(e,t,n);var r=Of;if(r&&e){var i=yt(r).hoistableStyles,a=Rf(e);t||=`default`;var o=i.get(a);if(!o){var s={loading:0,preload:null};if(o=r.querySelector(zf(a)))s.loading=5;else{e=m({rel:`stylesheet`,href:e,"data-precedence":t},n),(n=Sf.get(a))&&Kf(e,n);var c=o=r.createElement(`link`);bt(c),Hd(c,`link`,e),c._p=new Promise(function(e,t){c.onload=e,c.onerror=t}),c.addEventListener(`load`,function(){s.loading|=1}),c.addEventListener(`error`,function(){s.loading|=2}),s.loading|=4,Gf(o,t,r)}o={type:`stylesheet`,instance:o,count:1,state:s},i.set(a,o)}}}function Ff(e,t){Tf.X(e,t);var n=Of;if(n&&e){var r=yt(n).hoistableScripts,i=Hf(e),a=r.get(i);a||(a=n.querySelector(Uf(i)),a||(e=m({src:e,async:!0},t),(t=Sf.get(i))&&qf(e,t),a=n.createElement(`script`),bt(a),Hd(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function If(e,t){Tf.M(e,t);var n=Of;if(n&&e){var r=yt(n).hoistableScripts,i=Hf(e),a=r.get(i);a||(a=n.querySelector(Uf(i)),a||(e=m({src:e,async:!0,type:`module`},t),(t=Sf.get(i))&&qf(e,t),a=n.createElement(`script`),bt(a),Hd(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function Lf(e,t,n,r){var a=(a=le.current)?wf(a):null;if(!a)throw Error(i(446));switch(e){case`meta`:case`title`:return null;case`style`:return typeof n.precedence==`string`&&typeof n.href==`string`?(t=Rf(n.href),n=yt(a).hoistableStyles,r=n.get(t),r||(r={type:`style`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};case`link`:if(n.rel===`stylesheet`&&typeof n.href==`string`&&typeof n.precedence==`string`){e=Rf(n.href);var o=yt(a).hoistableStyles,s=o.get(e);if(s||(a=a.ownerDocument||a,s={type:`stylesheet`,instance:null,count:0,state:{loading:0,preload:null}},o.set(e,s),(o=a.querySelector(zf(e)))&&!o._p&&(s.instance=o,s.state.loading=5),Sf.has(e)||(n={rel:`preload`,as:`style`,href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Sf.set(e,n),o||Vf(a,e,n,s.state))),t&&r===null)throw Error(i(528,``));return s}if(t&&r!==null)throw Error(i(529,``));return null;case`script`:return t=n.async,n=n.src,typeof n==`string`&&t&&typeof t!=`function`&&typeof t!=`symbol`?(t=Hf(n),n=yt(a).hoistableScripts,r=n.get(t),r||(r={type:`script`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Rf(e){return`href="`+Lt(e)+`"`}function zf(e){return`link[rel="stylesheet"][`+e+`]`}function Bf(e){return m({},e,{"data-precedence":e.precedence,precedence:null})}function Vf(e,t,n,r){e.querySelector(`link[rel="preload"][as="style"][`+t+`]`)?r.loading=1:(t=e.createElement(`link`),r.preload=t,t.addEventListener(`load`,function(){return r.loading|=1}),t.addEventListener(`error`,function(){return r.loading|=2}),Hd(t,`link`,n),bt(t),e.head.appendChild(t))}function Hf(e){return`[src="`+Lt(e)+`"]`}function Uf(e){return`script[async]`+e}function Wf(e,t,n){if(t.count++,t.instance===null)switch(t.type){case`style`:var r=e.querySelector(`style[data-href~="`+Lt(n.href)+`"]`);if(r)return t.instance=r,bt(r),r;var a=m({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement(`style`),bt(r),Hd(r,`style`,a),Gf(r,n.precedence,e),t.instance=r;case`stylesheet`:a=Rf(n.href);var o=e.querySelector(zf(a));if(o)return t.state.loading|=4,t.instance=o,bt(o),o;r=Bf(n),(a=Sf.get(a))&&Kf(r,a),o=(e.ownerDocument||e).createElement(`link`),bt(o);var s=o;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),Hd(o,`link`,r),t.state.loading|=4,Gf(o,n.precedence,e),t.instance=o;case`script`:return o=Hf(n.src),(a=e.querySelector(Uf(o)))?(t.instance=a,bt(a),a):(r=n,(a=Sf.get(o))&&(r=m({},n),qf(r,a)),e=e.ownerDocument||e,a=e.createElement(`script`),bt(a),Hd(a,`link`,r),e.head.appendChild(a),t.instance=a);case`void`:return null;default:throw Error(i(443,t.type))}else t.type===`stylesheet`&&!(t.state.loading&4)&&(r=t.instance,t.state.loading|=4,Gf(r,n.precedence,e));return t.instance}function Gf(e,t,n){for(var r=n.querySelectorAll(`link[rel="stylesheet"][data-precedence],style[data-precedence]`),i=r.length?r[r.length-1]:null,a=i,o=0;o<r.length;o++){var s=r[o];if(s.dataset.precedence===t)a=s;else if(a!==i)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Kf(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.title??=t.title}function qf(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.integrity??=t.integrity}var Jf=null;function Yf(e,t,n){if(Jf===null){var r=new Map,i=Jf=new Map;i.set(n,r)}else i=Jf,r=i.get(n),r||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var a=n[i];if(!(a[mt]||a[st]||e===`link`&&a.getAttribute(`rel`)===`stylesheet`)&&a.namespaceURI!==`http://www.w3.org/2000/svg`){var o=a.getAttribute(t)||``;o=e+o;var s=r.get(o);s?s.push(a):r.set(o,[a])}}return r}function Xf(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t===`title`?e.querySelector(`head > title`):null)}function Zf(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case`meta`:case`title`:return!0;case`style`:if(typeof t.precedence!=`string`||typeof t.href!=`string`||t.href===``)break;return!0;case`link`:if(typeof t.rel!=`string`||typeof t.href!=`string`||t.href===``||t.onLoad||t.onError)break;switch(t.rel){case`stylesheet`:return e=t.disabled,typeof t.precedence==`string`&&e==null;default:return!0}case`script`:if(t.async&&typeof t.async!=`function`&&typeof t.async!=`symbol`&&!t.onLoad&&!t.onError&&t.src&&typeof t.src==`string`)return!0}return!1}function Qf(e){return!(e.type===`stylesheet`&&!(e.state.loading&3))}function $f(e,t,n,r){if(n.type===`stylesheet`&&(typeof r.media!=`string`||!1!==matchMedia(r.media).matches)&&!(n.state.loading&4)){if(n.instance===null){var i=Rf(r.href),a=t.querySelector(zf(i));if(a){t=a._p,typeof t==`object`&&t&&typeof t.then==`function`&&(e.count++,e=np.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,bt(a);return}a=t.ownerDocument||t,r=Bf(r),(i=Sf.get(i))&&Kf(r,i),a=a.createElement(`link`),bt(a);var o=a;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),Hd(a,`link`,r),n.instance=a}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=np.bind(e),t.addEventListener(`load`,n),t.addEventListener(`error`,n))}}var ep=0;function tp(e,t){return e.stylesheets&&e.count===0&&ip(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&ip(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&ep===0&&(ep=62500*Gd());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ip(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>ep?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}function np(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ip(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var rp=null;function ip(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,rp=new Map,t.forEach(ap,e),rp=null,np.call(e))}function ap(e,t){if(!(t.state.loading&4)){var n=rp.get(e);if(n)var r=n.get(null);else{n=new Map,rp.set(e,n);for(var i=e.querySelectorAll(`link[data-precedence],style[data-precedence]`),a=0;a<i.length;a++){var o=i[a];(o.nodeName===`LINK`||o.getAttribute(`media`)!==`not all`)&&(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}i=t.instance,o=i.getAttribute(`data-precedence`),a=n.get(o)||r,a===r&&n.set(null,i),n.set(o,i),this.count++,r=np.bind(this),i.addEventListener(`load`,r),i.addEventListener(`error`,r),a?a.parentNode.insertBefore(i,a.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var op={$$typeof:C,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function sp(e,t,n,r,i,a,o,s,c){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ze(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ze(0),this.hiddenUpdates=Ze(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function cp(e,t,n,r,i,a,o,s,c,l,u,d){return e=new sp(e,t,n,o,c,l,u,d,s),t=1,!0===a&&(t|=24),a=ri(3,null,null,t),e.current=a,a.stateNode=e,t=ra(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},Fa(a),e}function lp(e){return e?(e=ti,e):ti}function up(e,t,n,r,i,a){i=lp(i),r.context===null?r.context=i:r.pendingContext=i,r=La(t),r.payload={element:n},a=a===void 0?null:a,a!==null&&(r.callback=a),n=Ra(e,r,t),n!==null&&(bu(n,e,t),za(n,e,t))}function dp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function fp(e,t){dp(e,t),(e=e.alternate)&&dp(e,t)}function pp(e){if(e.tag===13||e.tag===31){var t=Qr(e,67108864);t!==null&&bu(t,e,67108864),fp(e,67108864)}}function mp(e){if(e.tag===13||e.tag===31){var t=vu();t=nt(t);var n=Qr(e,t);n!==null&&bu(n,e,t),fp(e,t)}}var hp=!0;function gp(e,t,n,r){var i=N.T;N.T=null;var a=P.p;try{P.p=2,vp(e,t,n,r)}finally{P.p=a,N.T=i}}function _p(e,t,n,r){var i=N.T;N.T=null;var a=P.p;try{P.p=8,vp(e,t,n,r)}finally{P.p=a,N.T=i}}function vp(e,t,n,r){if(hp){var i=yp(r);if(i===null)jd(e,t,r,bp,n),jp(e,r);else if(Np(i,e,t,n,r))r.stopPropagation();else if(jp(e,r),t&4&&-1<Ap.indexOf(e)){for(;i!==null;){var a=_t(i);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var o=Ke(a.pendingLanes);if(o!==0){var s=a;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var c=1<<31-ze(o);s.entanglements[1]|=c,o&=~c}ld(a),!(zl&6)&&(ou=De()+500,ud(0,!1))}}break;case 31:case 13:s=Qr(a,2),s!==null&&bu(s,a,2),Tu(),fp(a,2)}if(a=yp(r),a===null&&jd(e,t,r,bp,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else jd(e,t,r,null,n)}}function yp(e){return e=en(e),xp(e)}var bp=null;function xp(e){if(bp=null,e=gt(e),e!==null){var t=o(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=s(t),e!==null)return e;e=null}else if(n===31){if(e=c(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return bp=e,null}function Sp(e){switch(e){case`beforetoggle`:case`cancel`:case`click`:case`close`:case`contextmenu`:case`copy`:case`cut`:case`auxclick`:case`dblclick`:case`dragend`:case`dragstart`:case`drop`:case`focusin`:case`focusout`:case`input`:case`invalid`:case`keydown`:case`keypress`:case`keyup`:case`mousedown`:case`mouseup`:case`paste`:case`pause`:case`play`:case`pointercancel`:case`pointerdown`:case`pointerup`:case`ratechange`:case`reset`:case`resize`:case`seeked`:case`submit`:case`toggle`:case`touchcancel`:case`touchend`:case`touchstart`:case`volumechange`:case`change`:case`selectionchange`:case`textInput`:case`compositionstart`:case`compositionend`:case`compositionupdate`:case`beforeblur`:case`afterblur`:case`beforeinput`:case`blur`:case`fullscreenchange`:case`focus`:case`hashchange`:case`popstate`:case`select`:case`selectstart`:return 2;case`drag`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`mousemove`:case`mouseout`:case`mouseover`:case`pointermove`:case`pointerout`:case`pointerover`:case`scroll`:case`touchmove`:case`wheel`:case`mouseenter`:case`mouseleave`:case`pointerenter`:case`pointerleave`:return 8;case`message`:switch(Oe()){case ke:return 2;case Ae:return 8;case je:case Me:return 32;case Ne:return 268435456;default:return 32}default:return 32}}var Cp=!1,wp=null,Tp=null,Ep=null,Dp=new Map,Op=new Map,kp=[],Ap=`mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset`.split(` `);function jp(e,t){switch(e){case`focusin`:case`focusout`:wp=null;break;case`dragenter`:case`dragleave`:Tp=null;break;case`mouseover`:case`mouseout`:Ep=null;break;case`pointerover`:case`pointerout`:Dp.delete(t.pointerId);break;case`gotpointercapture`:case`lostpointercapture`:Op.delete(t.pointerId)}}function Mp(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=_t(t),t!==null&&pp(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Np(e,t,n,r,i){switch(t){case`focusin`:return wp=Mp(wp,e,t,n,r,i),!0;case`dragenter`:return Tp=Mp(Tp,e,t,n,r,i),!0;case`mouseover`:return Ep=Mp(Ep,e,t,n,r,i),!0;case`pointerover`:var a=i.pointerId;return Dp.set(a,Mp(Dp.get(a)||null,e,t,n,r,i)),!0;case`gotpointercapture`:return a=i.pointerId,Op.set(a,Mp(Op.get(a)||null,e,t,n,r,i)),!0}return!1}function Pp(e){var t=gt(e.target);if(t!==null){var n=o(t);if(n!==null){if(t=n.tag,t===13){if(t=s(n),t!==null){e.blockedOn=t,at(e.priority,function(){mp(n)});return}}else if(t===31){if(t=c(n),t!==null){e.blockedOn=t,at(e.priority,function(){mp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=yp(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);$t=r,n.target.dispatchEvent(r),$t=null}else return t=_t(n),t!==null&&pp(t),e.blockedOn=n,!1;t.shift()}return!0}function Ip(e,t,n){Fp(e)&&n.delete(t)}function Lp(){Cp=!1,wp!==null&&Fp(wp)&&(wp=null),Tp!==null&&Fp(Tp)&&(Tp=null),Ep!==null&&Fp(Ep)&&(Ep=null),Dp.forEach(Ip),Op.forEach(Ip)}function Rp(e,n){e.blockedOn===n&&(e.blockedOn=null,Cp||(Cp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Lp)))}var zp=null;function Bp(e){zp!==e&&(zp=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){zp===e&&(zp=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if(typeof r!=`function`){if(xp(r||n)===null)continue;break}var a=_t(n);a!==null&&(e.splice(t,3),t-=3,Ss(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Vp(e){function t(t){return Rp(t,e)}wp!==null&&Rp(wp,e),Tp!==null&&Rp(Tp,e),Ep!==null&&Rp(Ep,e),Dp.forEach(t),Op.forEach(t);for(var n=0;n<kp.length;n++){var r=kp[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<kp.length&&(n=kp[0],n.blockedOn===null);)Pp(n),n.blockedOn===null&&kp.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],o=i[ct]||null;if(typeof a==`function`)o||Bp(n);else if(o){var s=null;if(a&&a.hasAttribute(`formAction`)){if(i=a,o=a[ct]||null)s=o.formAction;else if(xp(i)!==null)continue}else s=o.action;typeof s==`function`?n[r+1]=s:(n.splice(r,3),r-=3),Bp(n)}}}function Hp(){function e(e){e.canIntercept&&e.info===`react-transition`&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:`manual`,scroll:`manual`})}function t(){i!==null&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&e.url!=null&&navigation.navigate(e.url,{state:e.getState(),info:`react-transition`,history:`replace`})}}if(typeof navigation==`object`){var r=!1,i=null;return navigation.addEventListener(`navigate`,e),navigation.addEventListener(`navigatesuccess`,t),navigation.addEventListener(`navigateerror`,t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener(`navigate`,e),navigation.removeEventListener(`navigatesuccess`,t),navigation.removeEventListener(`navigateerror`,t),i!==null&&(i(),i=null)}}}function Up(e){this._internalRoot=e}q.prototype.render=Up.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var n=t.current;up(n,vu(),e,t,null,null)},q.prototype.unmount=Up.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;up(e.current,2,null,e,null,null),Tu(),t[lt]=null}};function q(e){this._internalRoot=e}q.prototype.unstable_scheduleHydration=function(e){if(e){var t=it();e={blockedOn:null,target:e,priority:t};for(var n=0;n<kp.length&&t!==0&&t<kp[n].priority;n++);kp.splice(n,0,e),n===0&&Pp(e)}};var Wp=n.version;if(Wp!==`19.2.4`)throw Error(i(527,Wp,`19.2.4`));P.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render==`function`?Error(i(188)):(e=Object.keys(e).join(`,`),Error(i(268,e)));return e=u(t),e=e===null?null:f(e),e=e===null?null:e.stateNode,e};var Gp={bundleType:0,version:`19.2.4`,rendererPackageName:`react-dom`,currentDispatcherRef:N,reconcilerVersion:`19.2.4`};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<`u`){var Kp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kp.isDisabled&&Kp.supportsFiber)try{Ie=Kp.inject(Gp),Le=Kp}catch{}}e.createRoot=function(e,t){if(!a(e))throw Error(i(299));var n=!1,r=``,o=Gs,s=Ks,c=qs;return t!=null&&(!0===t.unstable_strictMode&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=cp(e,1,!1,null,null,n,r,null,o,s,c,Hp),e[lt]=t.current,kd(e),new Up(t)}})),_=o(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=g()}))(),v=l(d(),1),y=`modulepreload`,b=function(e){return`/`+e},x={};const S=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=document.getElementsByTagName(`link`),i=document.querySelector(`meta[property=csp-nonce]`),a=i?.nonce||i?.getAttribute(`nonce`);function o(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:`fulfilled`,value:e}),e=>({status:`rejected`,reason:e}))))}r=o(t.map(t=>{if(t=b(t,n),t in x)return;x[t]=!0;let r=t.endsWith(`.css`),i=r?`[rel="stylesheet"]`:``;if(n)for(let n=e.length-1;n>=0;n--){let i=e[n];if(i.href===t&&(!r||i.rel===`stylesheet`))return}else if(document.querySelector(`link[href="${t}"]${i}`))return;let o=document.createElement(`link`);if(o.rel=r?`stylesheet`:y,r||(o.as=`script`),o.crossOrigin=``,o.href=t,a&&o.setAttribute(`nonce`,a),document.head.appendChild(o),r)return new Promise((e,n)=>{o.addEventListener(`load`,e),o.addEventListener(`error`,()=>n(Error(`Unable to preload CSS for ${t}`)))})}))}function i(e){let t=new Event(`vite:preloadError`,{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(let e of t||[])e.status===`rejected`&&i(e.reason);return e().catch(i)})};var C=`popstate`;function w(e={}){function t(e,t){let{pathname:n,search:r,hash:i}=e.location;return ee(``,{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||`default`)}function n(e,t){return typeof t==`string`?t:k(t)}return A(t,n,null,e)}function T(e,t){if(e===!1||e==null)throw Error(t)}function E(e,t){if(!e){typeof console<`u`&&console.warn(t);try{throw Error(t)}catch{}}}function D(){return Math.random().toString(36).substring(2,10)}function O(e,t){return{usr:e.state,key:e.key,idx:t}}function ee(e,t,n=null,r){return{pathname:typeof e==`string`?e:e.pathname,search:``,hash:``,...typeof t==`string`?te(t):t,state:n,key:t&&t.key||r||D()}}function k({pathname:e=`/`,search:t=``,hash:n=``}){return t&&t!==`?`&&(e+=t.charAt(0)===`?`?t:`?`+t),n&&n!==`#`&&(e+=n.charAt(0)===`#`?n:`#`+n),e}function te(e){let t={};if(e){let n=e.indexOf(`#`);n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf(`?`);r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function A(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,s=`POP`,c=null,l=u();l??(l=0,o.replaceState({...o.state,idx:l},``));function u(){return(o.state||{idx:null}).idx}function d(){s=`POP`;let e=u(),t=e==null?null:e-l;l=e,c&&c({action:s,location:h.location,delta:t})}function f(e,t){s=`PUSH`;let r=ee(h.location,e,t);n&&n(r,e),l=u()+1;let d=O(r,l),f=h.createHref(r);try{o.pushState(d,``,f)}catch(e){if(e instanceof DOMException&&e.name===`DataCloneError`)throw e;i.location.assign(f)}a&&c&&c({action:s,location:h.location,delta:1})}function p(e,t){s=`REPLACE`;let r=ee(h.location,e,t);n&&n(r,e),l=u();let i=O(r,l),d=h.createHref(r);o.replaceState(i,``,d),a&&c&&c({action:s,location:h.location,delta:0})}function m(e){return ne(e)}let h={get action(){return s},get location(){return e(i,o)},listen(e){if(c)throw Error(`A history only accepts one active listener`);return i.addEventListener(C,d),c=e,()=>{i.removeEventListener(C,d),c=null}},createHref(e){return t(i,e)},createURL:m,encodeLocation(e){let t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:f,replace:p,go(e){return o.go(e)}};return h}function ne(e,t=!1){let n=`http://localhost`;typeof window<`u`&&(n=window.location.origin===`null`?window.location.href:window.location.origin),T(n,`No window.location.(origin|href) available to create URL`);let r=typeof e==`string`?e:k(e);return r=r.replace(/ $/,`%20`),!t&&r.startsWith(`//`)&&(r=n+r),new URL(r,n)}function j(e,t,n=`/`){return M(e,t,n,!1)}function M(e,t,n,r){let i=ge((typeof t==`string`?te(t):t).pathname||`/`,n);if(i==null)return null;let a=P(e);F(a);let o=null;for(let e=0;o==null&&e<a.length;++e){let t=he(i);o=fe(a[e],t,r)}return o}function N(e,t){let{route:n,pathname:r,params:i}=e;return{id:n.id,pathname:r,params:i,data:t[n.id],loaderData:t[n.id],handle:n.handle}}function P(e,t=[],n=[],r=``,i=!1){let a=(e,a,o=i,s)=>{let c={relativePath:s===void 0?e.path||``:s,caseSensitive:e.caseSensitive===!0,childrenIndex:a,route:e};if(c.relativePath.startsWith(`/`)){if(!c.relativePath.startsWith(r)&&o)return;T(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length)}let l=we([r,c.relativePath]),u=n.concat(c);e.children&&e.children.length>0&&(T(e.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),P(e.children,t,u,l,o)),!(e.path==null&&!e.index)&&t.push({path:l,score:ue(l,e.index),routesMeta:u})};return e.forEach((e,t)=>{if(e.path===``||!e.path?.includes(`?`))a(e,t);else for(let n of re(e.path))a(e,t,!0,n)}),t}function re(e){let t=e.split(`/`);if(t.length===0)return[];let[n,...r]=t,i=n.endsWith(`?`),a=n.replace(/\?$/,``);if(r.length===0)return i?[a,``]:[a];let o=re(r.join(`/`)),s=[];return s.push(...o.map(e=>e===``?a:[a,e].join(`/`))),i&&s.push(...o),s.map(t=>e.startsWith(`/`)&&t===``?`/`:t)}function F(e){e.sort((e,t)=>e.score===t.score?de(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)):t.score-e.score)}var I=/^:[\w-]+$/,ie=3,ae=2,oe=1,se=10,ce=-2,le=e=>e===`*`;function ue(e,t){let n=e.split(`/`),r=n.length;return n.some(le)&&(r+=ce),t&&(r+=ae),n.filter(e=>!le(e)).reduce((e,t)=>e+(I.test(t)?ie:t===``?oe:se),r)}function de(e,t){return e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n])?e[e.length-1]-t[t.length-1]:0}function fe(e,t,n=!1){let{routesMeta:r}=e,i={},a=`/`,o=[];for(let e=0;e<r.length;++e){let s=r[e],c=e===r.length-1,l=a===`/`?t:t.slice(a.length)||`/`,u=pe({path:s.relativePath,caseSensitive:s.caseSensitive,end:c},l),d=s.route;if(!u&&c&&n&&!r[r.length-1].route.index&&(u=pe({path:s.relativePath,caseSensitive:s.caseSensitive,end:!1},l)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:we([a,u.pathname]),pathnameBase:Te(we([a,u.pathnameBase])),route:d}),u.pathnameBase!==`/`&&(a=we([a,u.pathnameBase]))}return o}function pe(e,t){typeof e==`string`&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=me(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,`$1`),s=i.slice(1);return{params:r.reduce((e,{paramName:t,isOptional:n},r)=>{if(t===`*`){let e=s[r]||``;o=a.slice(0,a.length-e.length).replace(/(.)\/+$/,`$1`)}let i=s[r];return n&&!i?e[t]=void 0:e[t]=(i||``).replace(/%2F/g,`/`),e},{}),pathname:a,pathnameBase:o,pattern:e}}function me(e,t=!1,n=!0){E(e===`*`||!e.endsWith(`*`)||e.endsWith(`/*`),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,`/*`)}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,`/*`)}".`);let r=[],i=`^`+e.replace(/\/*\*?$/,``).replace(/^\/*/,`/`).replace(/[\\.*+^${}|()[\]]/g,`\\$&`).replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:n!=null}),n?`/?([^\\/]+)?`:`/([^\\/]+)`)).replace(/\/([\w-]+)\?(\/|$)/g,`(/$1)?$2`);return e.endsWith(`*`)?(r.push({paramName:`*`}),i+=e===`*`||e===`/*`?`(.*)$`:`(?:\\/(.+)|\\/*)$`):n?i+=`\\/*$`:e!==``&&e!==`/`&&(i+=`(?:(?=\\/|$))`),[new RegExp(i,t?void 0:`i`),r]}function he(e){try{return e.split(`/`).map(e=>decodeURIComponent(e).replace(/\//g,`%2F`)).join(`/`)}catch(t){return E(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ge(e,t){if(t===`/`)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith(`/`)?t.length-1:t.length,r=e.charAt(n);return r&&r!==`/`?null:e.slice(n)||`/`}var _e=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function ve(e,t=`/`){let{pathname:n,search:r=``,hash:i=``}=typeof e==`string`?te(e):e,a;return n?(n=n.replace(/\/\/+/g,`/`),a=n.startsWith(`/`)?ye(n.substring(1),`/`):ye(n,t)):a=t,{pathname:a,search:Ee(r),hash:De(i)}}function ye(e,t){let n=t.replace(/\/+$/,``).split(`/`);return e.split(`/`).forEach(e=>{e===`..`?n.length>1&&n.pop():e!==`.`&&n.push(e)}),n.length>1?n.join(`/`):`/`}function be(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function xe(e){return e.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Se(e){let t=xe(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function Ce(e,t,n,r=!1){let i;typeof e==`string`?i=te(e):(i={...e},T(!i.pathname||!i.pathname.includes(`?`),be(`?`,`pathname`,`search`,i)),T(!i.pathname||!i.pathname.includes(`#`),be(`#`,`pathname`,`hash`,i)),T(!i.search||!i.search.includes(`#`),be(`#`,`search`,`hash`,i)));let a=e===``||i.pathname===``,o=a?`/`:i.pathname,s;if(o==null)s=n;else{let e=t.length-1;if(!r&&o.startsWith(`..`)){let t=o.split(`/`);for(;t[0]===`..`;)t.shift(),--e;i.pathname=t.join(`/`)}s=e>=0?t[e]:`/`}let c=ve(i,s),l=o&&o!==`/`&&o.endsWith(`/`),u=(a||o===`.`)&&n.endsWith(`/`);return!c.pathname.endsWith(`/`)&&(l||u)&&(c.pathname+=`/`),c}var we=e=>e.join(`/`).replace(/\/\/+/g,`/`),Te=e=>e.replace(/\/+$/,``).replace(/^\/*/,`/`),Ee=e=>!e||e===`?`?``:e.startsWith(`?`)?e:`?`+e,De=e=>!e||e===`#`?``:e.startsWith(`#`)?e:`#`+e,Oe=class{constructor(e,t,n,r=!1){this.status=e,this.statusText=t||``,this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function ke(e){return e!=null&&typeof e.status==`number`&&typeof e.statusText==`string`&&typeof e.internal==`boolean`&&`data`in e}function Ae(e){return e.map(e=>e.route.path).filter(Boolean).join(`/`).replace(/\/\/*/g,`/`)||`/`}var je=typeof window<`u`&&window.document!==void 0&&window.document.createElement!==void 0;function Me(e,t){let n=e;if(typeof n!=`string`||!_e.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(je)try{let e=new URL(window.location.href),r=n.startsWith(`//`)?new URL(e.protocol+n):new URL(n),a=ge(r.pathname,t);r.origin===e.origin&&a!=null?n=a+r.search+r.hash:i=!0}catch{E(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join(`\0`);var Ne=v.createContext(null);Ne.displayName=`DataRouter`;var Pe=v.createContext(null);Pe.displayName=`DataRouterState`;var Fe=v.createContext(!1),Ie=v.createContext({isTransitioning:!1});Ie.displayName=`ViewTransition`;var Le=v.createContext(new Map);Le.displayName=`Fetchers`;var Re=v.createContext(null);Re.displayName=`Await`;var ze=v.createContext(null);ze.displayName=`Navigation`;var Be=v.createContext(null);Be.displayName=`Location`;var Ve=v.createContext({outlet:null,matches:[],isDataRoute:!1});Ve.displayName=`Route`;var He=v.createContext(null);He.displayName=`RouteError`;var Ue=`REACT_ROUTER_ERROR`,We=`REDIRECT`,Ge=`ROUTE_ERROR_RESPONSE`;function Ke(e){if(e.startsWith(`${Ue}:${We}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t==`object`&&t&&typeof t.status==`number`&&typeof t.statusText==`string`&&typeof t.location==`string`&&typeof t.reloadDocument==`boolean`&&typeof t.replace==`boolean`)return t}catch{}}function qe(e){if(e.startsWith(`${Ue}:${Ge}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t==`object`&&t&&typeof t.status==`number`&&typeof t.statusText==`string`)return new Oe(t.status,t.statusText,t.data)}catch{}}function Je(e,{relative:t}={}){T(Ye(),`useHref() may be used only in the context of a <Router> component.`);let{basename:n,navigator:r}=v.useContext(ze),{hash:i,pathname:a,search:o}=rt(e,{relative:t}),s=a;return n!==`/`&&(s=a===`/`?n:we([n,a])),r.createHref({pathname:s,search:o,hash:i})}function Ye(){return v.useContext(Be)!=null}function Xe(){return T(Ye(),`useLocation() may be used only in the context of a <Router> component.`),v.useContext(Be).location}var Ze=`You should call navigate() in a React.useEffect(), not when your component is first rendered.`;function R(e){v.useContext(ze).static||v.useLayoutEffect(e)}function Qe(){let{isDataRoute:e}=v.useContext(Ve);return e?St():$e()}function $e(){T(Ye(),`useNavigate() may be used only in the context of a <Router> component.`);let e=v.useContext(Ne),{basename:t,navigator:n}=v.useContext(ze),{matches:r}=v.useContext(Ve),{pathname:i}=Xe(),a=JSON.stringify(Se(r)),o=v.useRef(!1);return R(()=>{o.current=!0}),v.useCallback((r,s={})=>{if(E(o.current,Ze),!o.current)return;if(typeof r==`number`){n.go(r);return}let c=Ce(r,JSON.parse(a),i,s.relative===`path`);e==null&&t!==`/`&&(c.pathname=c.pathname===`/`?t:we([t,c.pathname])),(s.replace?n.replace:n.push)(c,s.state,s)},[t,n,a,i,e])}var et=v.createContext(null);function tt(e){let t=v.useContext(Ve).outlet;return v.useMemo(()=>t&&v.createElement(et.Provider,{value:e},t),[t,e])}function nt(){let{matches:e}=v.useContext(Ve),t=e[e.length-1];return t?t.params:{}}function rt(e,{relative:t}={}){let{matches:n}=v.useContext(Ve),{pathname:r}=Xe(),i=JSON.stringify(Se(n));return v.useMemo(()=>Ce(e,JSON.parse(i),r,t===`path`),[e,i,r,t])}function it(e,t){return at(e,t)}function at(e,t,n,r,i){T(Ye(),`useRoutes() may be used only in the context of a <Router> component.`);let{navigator:a}=v.useContext(ze),{matches:o}=v.useContext(Ve),s=o[o.length-1],c=s?s.params:{},l=s?s.pathname:`/`,u=s?s.pathnameBase:`/`,d=s&&s.route;{let e=d&&d.path||``;wt(l,!d||e.endsWith(`*`)||e.endsWith(`*?`),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${e}"> to <Route path="${e===`/`?`*`:`${e}/*`}">.`)}let f=Xe(),p;if(t){let e=typeof t==`string`?te(t):t;T(u===`/`||e.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${e.pathname}" was given in the \`location\` prop.`),p=e}else p=f;let m=p.pathname||`/`,h=m;if(u!==`/`){let e=u.replace(/^\//,``).split(`/`);h=`/`+m.replace(/^\//,``).split(`/`).slice(e.length).join(`/`)}let g=j(e,{pathname:h});E(d||g!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),E(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=ft(g&&g.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:we([u,a.encodeLocation?a.encodeLocation(e.pathname.replace(/\?/g,`%3F`).replace(/#/g,`%23`)).pathname:e.pathname]),pathnameBase:e.pathnameBase===`/`?u:we([u,a.encodeLocation?a.encodeLocation(e.pathnameBase.replace(/\?/g,`%3F`).replace(/#/g,`%23`)).pathname:e.pathnameBase])})),o,n,r,i);return t&&_?v.createElement(Be.Provider,{value:{location:{pathname:`/`,search:``,hash:``,state:null,key:`default`,...p},navigationType:`POP`}},_):_}function ot(){let e=xt(),t=ke(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r=`rgba(200,200,200, 0.5)`,i={padding:`0.5rem`,backgroundColor:r},a={padding:`2px 4px`,backgroundColor:r},o=null;return console.error(`Error handled by React Router default ErrorBoundary:`,e),o=v.createElement(v.Fragment,null,v.createElement(`p`,null,` Hey developer `),v.createElement(`p`,null,`You can provide a way better UX than this when your app throws errors by providing your own `,v.createElement(`code`,{style:a},`ErrorBoundary`),` or`,` `,v.createElement(`code`,{style:a},`errorElement`),` prop on your route.`)),v.createElement(v.Fragment,null,v.createElement(`h2`,null,`Unexpected Application Error!`),v.createElement(`h3`,{style:{fontStyle:`italic`}},t),n?v.createElement(`pre`,{style:i},n):null,o)}var st=v.createElement(ot,null),ct=class extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!==`idle`&&e.revalidation===`idle`?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error===void 0?t.error:e.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error(`React Router caught the following error during render`,e)}render(){let e=this.state.error;if(this.context&&typeof e==`object`&&e&&`digest`in e&&typeof e.digest==`string`){let t=qe(e.digest);t&&(e=t)}let t=e===void 0?this.props.children:v.createElement(Ve.Provider,{value:this.props.routeContext},v.createElement(He.Provider,{value:e,children:this.props.component}));return this.context?v.createElement(ut,{error:e},t):t}};ct.contextType=Fe;var lt=new WeakMap;function ut({children:e,error:t}){let{basename:n}=v.useContext(ze);if(typeof t==`object`&&t&&`digest`in t&&typeof t.digest==`string`){let e=Ke(t.digest);if(e){let r=lt.get(t);if(r)throw r;let i=Me(e.location,n);if(je&&!lt.get(t))if(i.isExternal||e.reloadDocument)window.location.href=i.absoluteURL||i.to;else{let n=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:e.replace}));throw lt.set(t,n),n}return v.createElement(`meta`,{httpEquiv:`refresh`,content:`0;url=${i.absoluteURL||i.to}`})}}return e}function dt({routeContext:e,match:t,children:n}){let r=v.useContext(Ne);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),v.createElement(Ve.Provider,{value:e},n)}function ft(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,o=n?.errors;if(o!=null){let e=a.findIndex(e=>e.route.id&&o?.[e.route.id]!==void 0);T(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(`,`)}`),a=a.slice(0,Math.min(a.length,e+1))}let s=!1,c=-1;if(n)for(let e=0;e<a.length;e++){let t=a[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(c=e),t.route.id){let{loaderData:e,errors:r}=n,i=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!r||r[t.route.id]===void 0);if(t.route.lazy||i){s=!0,a=c>=0?a.slice(0,c+1):[a[0]];break}}}let l=n&&r?(e,t)=>{r(e,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:Ae(n.matches),errorInfo:t})}:void 0;return a.reduceRight((e,r,i)=>{let u,d=!1,f=null,p=null;n&&(u=o&&r.route.id?o[r.route.id]:void 0,f=r.route.errorElement||st,s&&(c<0&&i===0?(wt(`route-fallback`,!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):c===i&&(d=!0,p=r.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,i+1)),h=()=>{let t;return t=u?f:d?p:r.route.Component?v.createElement(r.route.Component,null):r.route.element?r.route.element:e,v.createElement(dt,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:n!=null},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||i===0)?v.createElement(ct,{location:n.location,revalidation:n.revalidation,component:f,error:u,children:h(),routeContext:{outlet:null,matches:m,isDataRoute:!0},onError:l}):h()},null)}function pt(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mt(e){let t=v.useContext(Ne);return T(t,pt(e)),t}function ht(e){let t=v.useContext(Pe);return T(t,pt(e)),t}function gt(e){let t=v.useContext(Ve);return T(t,pt(e)),t}function _t(e){let t=gt(e),n=t.matches[t.matches.length-1];return T(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function vt(){return _t(`useRouteId`)}function yt(){return ht(`useNavigation`).navigation}function bt(){let{matches:e,loaderData:t}=ht(`useMatches`);return v.useMemo(()=>e.map(e=>N(e,t)),[e,t])}function xt(){let e=v.useContext(He),t=ht(`useRouteError`),n=_t(`useRouteError`);return e===void 0?t.errors?.[n]:e}function St(){let{router:e}=mt(`useNavigate`),t=_t(`useNavigate`),n=v.useRef(!1);return R(()=>{n.current=!0}),v.useCallback(async(r,i={})=>{E(n.current,Ze),n.current&&(typeof r==`number`?await e.navigate(r):await e.navigate(r,{fromRouteId:t,...i}))},[e,t])}var Ct={};function wt(e,t,n){!t&&!Ct[e]&&(Ct[e]=!0,E(!1,n))}v.useOptimistic,v.memo(Tt);function Tt({routes:e,future:t,state:n,onError:r}){return at(e,void 0,n,r,t)}function Et({to:e,replace:t,state:n,relative:r}){T(Ye(),`<Navigate> may be used only in the context of a <Router> component.`);let{static:i}=v.useContext(ze);E(!i,`<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.`);let{matches:a}=v.useContext(Ve),{pathname:o}=Xe(),s=Qe(),c=Ce(e,Se(a),o,r===`path`),l=JSON.stringify(c);return v.useEffect(()=>{s(JSON.parse(l),{replace:t,state:n,relative:r})},[s,l,r,t,n]),null}function Dt(e){return tt(e.context)}function z(e){T(!1,`A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.`)}function B({basename:e=`/`,children:t=null,location:n,navigationType:r=`POP`,navigator:i,static:a=!1,unstable_useTransitions:o}){T(!Ye(),`You cannot render a <Router> inside another <Router>. You should never have more than one in your app.`);let s=e.replace(/^\/*/,`/`),c=v.useMemo(()=>({basename:s,navigator:i,static:a,unstable_useTransitions:o,future:{}}),[s,i,a,o]);typeof n==`string`&&(n=te(n));let{pathname:l=`/`,search:u=``,hash:d=``,state:f=null,key:p=`default`}=n,m=v.useMemo(()=>{let e=ge(l,s);return e==null?null:{location:{pathname:e,search:u,hash:d,state:f,key:p},navigationType:r}},[s,l,u,d,f,p,r]);return E(m!=null,`<Router basename="${s}"> is not able to match the URL "${l}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:v.createElement(ze.Provider,{value:c},v.createElement(Be.Provider,{children:t,value:m}))}function Ot({children:e,location:t}){return it(kt(e),t)}function kt(e,t=[]){let n=[];return v.Children.forEach(e,(e,r)=>{if(!v.isValidElement(e))return;let i=[...t,r];if(e.type===v.Fragment){n.push.apply(n,kt(e.props.children,i));return}T(e.type===z,`[${typeof e.type==`string`?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),T(!e.props.index||!e.props.children,`An index route cannot have child routes.`);let a={id:e.props.id||i.join(`-`),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:e.props.hasErrorBoundary===!0||e.props.ErrorBoundary!=null||e.props.errorElement!=null,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=kt(e.props.children,i)),n.push(a)}),n}var At=`get`,jt=`application/x-www-form-urlencoded`;function Mt(e){return typeof HTMLElement<`u`&&e instanceof HTMLElement}function Nt(e){return Mt(e)&&e.tagName.toLowerCase()===`button`}function Pt(e){return Mt(e)&&e.tagName.toLowerCase()===`form`}function Ft(e){return Mt(e)&&e.tagName.toLowerCase()===`input`}function It(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Lt(e,t){return e.button===0&&(!t||t===`_self`)&&!It(e)}function Rt(e=``){return new URLSearchParams(typeof e==`string`||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(e=>[n,e]):[[n,r]])},[]))}function zt(e,t){let n=Rt(e);return t&&t.forEach((e,r)=>{n.has(r)||t.getAll(r).forEach(e=>{n.append(r,e)})}),n}var Bt=null;function Vt(){if(Bt===null)try{new FormData(document.createElement(`form`),0),Bt=!1}catch{Bt=!0}return Bt}var Ht=new Set([`application/x-www-form-urlencoded`,`multipart/form-data`,`text/plain`]);function Ut(e){return e!=null&&!Ht.has(e)?(E(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${jt}"`),null):e}function Wt(e,t){let n,r,i,a,o;if(Pt(e)){let o=e.getAttribute(`action`);r=o?ge(o,t):null,n=e.getAttribute(`method`)||At,i=Ut(e.getAttribute(`enctype`))||jt,a=new FormData(e)}else if(Nt(e)||Ft(e)&&(e.type===`submit`||e.type===`image`)){let o=e.form;if(o==null)throw Error(`Cannot submit a <button> or <input type="submit"> without a <form>`);let s=e.getAttribute(`formaction`)||o.getAttribute(`action`);if(r=s?ge(s,t):null,n=e.getAttribute(`formmethod`)||o.getAttribute(`method`)||At,i=Ut(e.getAttribute(`formenctype`))||Ut(o.getAttribute(`enctype`))||jt,a=new FormData(o,e),!Vt()){let{name:t,type:n,value:r}=e;if(n===`image`){let e=t?`${t}.`:``;a.append(`${e}x`,`0`),a.append(`${e}y`,`0`)}else t&&a.append(t,r)}}else if(Mt(e))throw Error(`Cannot submit element that is not <form>, <button>, or <input type="submit|image">`);else n=At,r=null,i=jt,o=e;return a&&i===`text/plain`&&(o=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join(`\0`);var Gt={"&":`\\u0026`,">":`\\u003e`,"<":`\\u003c`,"\u2028":`\\u2028`,"\u2029":`\\u2029`},Kt=/[&><\u2028\u2029]/g;function qt(e){return e.replace(Kt,e=>Gt[e])}function Jt(e,t){if(e===!1||e==null)throw Error(t)}function Yt(e,t,n,r){let i=typeof e==`string`?new URL(e,typeof window>`u`?`server://singlefetch/`:window.location.origin):e;return n?i.pathname.endsWith(`/`)?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname===`/`?i.pathname=`_root.${r}`:t&&ge(i.pathname,t)===`/`?i.pathname=`${t.replace(/\/$/,``)}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,``)}.${r}`,i}async function Xt(e,t){if(e.id in t)return t[e.id];try{let n=await S(()=>import(e.module),[]);return t[e.id]=n,n}catch(t){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Zt(e){return e!=null&&typeof e.page==`string`}function Qt(e){return e==null?!1:e.href==null?e.rel===`preload`&&typeof e.imageSrcSet==`string`&&typeof e.imageSizes==`string`:typeof e.rel==`string`&&typeof e.href==`string`}async function $t(e,t,n){return an((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await Xt(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Qt).filter(e=>e.rel===`stylesheet`||e.rel===`preload`).map(e=>e.rel===`stylesheet`?{...e,rel:`prefetch`,as:`style`}:{...e,rel:`prefetch`}))}function en(e,t,n,r,i,a){let o=(e,t)=>n[t]?e.route.id!==n[t].route.id:!0,s=(e,t)=>n[t].pathname!==e.pathname||n[t].route.path?.endsWith(`*`)&&n[t].params[`*`]!==e.params[`*`];return a===`assets`?t.filter((e,t)=>o(e,t)||s(e,t)):a===`data`?t.filter((t,a)=>{let c=r.routes[t.route.id];if(!c||!c.hasLoader)return!1;if(o(t,a)||s(t,a))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if(typeof r==`boolean`)return r}return!0}):[]}function tn(e,t,{includeHydrateFallback:n}={}){return nn(e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function nn(e){return[...new Set(e)]}function rn(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function an(e,t){let n=new Set,r=new Set(t);return e.reduce((e,i)=>{if(t&&!Zt(i)&&i.as===`script`&&i.href&&r.has(i.href))return e;let a=JSON.stringify(rn(i));return n.has(a)||(n.add(a),e.push({key:a,link:i})),e},[])}function on(){let e=v.useContext(Ne);return Jt(e,`You must render this element inside a <DataRouterContext.Provider> element`),e}function sn(){let e=v.useContext(Pe);return Jt(e,`You must render this element inside a <DataRouterStateContext.Provider> element`),e}var cn=v.createContext(void 0);cn.displayName=`FrameworkContext`;function ln(){let e=v.useContext(cn);return Jt(e,`You must render this element inside a <HydratedRouter> element`),e}function un(e,t){let n=v.useContext(cn),[r,i]=v.useState(!1),[a,o]=v.useState(!1),{onFocus:s,onBlur:c,onMouseEnter:l,onMouseLeave:u,onTouchStart:d}=t,f=v.useRef(null);v.useEffect(()=>{if(e===`render`&&o(!0),e===`viewport`){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[e]),v.useEffect(()=>{if(r){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[r]);let p=()=>{i(!0)},m=()=>{i(!1),o(!1)};return n?e===`intent`?[a,f,{onFocus:dn(s,p),onBlur:dn(c,m),onMouseEnter:dn(l,p),onMouseLeave:dn(u,m),onTouchStart:dn(d,p)}]:[a,f,{}]:[!1,f,{}]}function dn(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function fn({page:e,...t}){let{router:n}=on(),r=v.useMemo(()=>j(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?v.createElement(mn,{page:e,matches:r,...t}):null}function pn(e){let{manifest:t,routeModules:n}=ln(),[r,i]=v.useState([]);return v.useEffect(()=>{let r=!1;return $t(e,t,n).then(e=>{r||i(e)}),()=>{r=!0}},[e,t,n]),r}function mn({page:e,matches:t,...n}){let r=Xe(),{future:i,manifest:a,routeModules:o}=ln(),{basename:s}=on(),{loaderData:c,matches:l}=sn(),u=v.useMemo(()=>en(e,t,l,a,r,`data`),[e,t,l,a,r]),d=v.useMemo(()=>en(e,t,l,a,r,`assets`),[e,t,l,a,r]),f=v.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let n=new Set,l=!1;if(t.forEach(e=>{let t=a.routes[e.route.id];!t||!t.hasLoader||(!u.some(t=>t.route.id===e.route.id)&&e.route.id in c&&o[e.route.id]?.shouldRevalidate||t.hasClientLoader?l=!0:n.add(e.route.id))}),n.size===0)return[];let d=Yt(e,s,i.unstable_trailingSlashAwareDataRequests,`data`);return l&&n.size>0&&d.searchParams.set(`_routes`,t.filter(e=>n.has(e.route.id)).map(e=>e.route.id).join(`,`)),[d.pathname+d.search]},[s,i.unstable_trailingSlashAwareDataRequests,c,r,a,u,t,e,o]),p=v.useMemo(()=>tn(d,a),[d,a]),m=pn(d);return v.createElement(v.Fragment,null,f.map(e=>v.createElement(`link`,{key:e,rel:`prefetch`,as:`fetch`,href:e,...n})),p.map(e=>v.createElement(`link`,{key:e,rel:`modulepreload`,href:e,...n})),m.map(({key:e,link:t})=>v.createElement(`link`,{key:e,nonce:n.nonce,...t,crossOrigin:t.crossOrigin??n.crossOrigin})))}function hn(...e){return t=>{e.forEach(e=>{typeof e==`function`?e(t):e!=null&&(e.current=t)})}}var gn=typeof window<`u`&&window.document!==void 0&&window.document.createElement!==void 0;try{gn&&(window.__reactRouterVersion=`7.13.0`)}catch{}function _n({basename:e,children:t,unstable_useTransitions:n,window:r}){let i=v.useRef();i.current??=w({window:r,v5Compat:!0});let a=i.current,[o,s]=v.useState({action:a.action,location:a.location}),c=v.useCallback(e=>{n===!1?s(e):v.startTransition(()=>s(e))},[n]);return v.useLayoutEffect(()=>a.listen(c),[a,c]),v.createElement(B,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a,unstable_useTransitions:n})}function vn({basename:e,children:t,history:n,unstable_useTransitions:r}){let[i,a]=v.useState({action:n.action,location:n.location}),o=v.useCallback(e=>{r===!1?a(e):v.startTransition(()=>a(e))},[r]);return v.useLayoutEffect(()=>n.listen(o),[n,o]),v.createElement(B,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:n,unstable_useTransitions:r})}vn.displayName=`unstable_HistoryRouter`;var yn=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,V=v.forwardRef(function({onClick:e,discover:t=`render`,prefetch:n=`none`,relative:r,reloadDocument:i,replace:a,state:o,target:s,to:c,preventScrollReset:l,viewTransition:u,unstable_defaultShouldRevalidate:d,...f},p){let{basename:m,unstable_useTransitions:h}=v.useContext(ze),g=typeof c==`string`&&yn.test(c),_=Me(c,m);c=_.to;let y=Je(c,{relative:r}),[b,x,S]=un(n,f),C=En(c,{replace:a,state:o,target:s,preventScrollReset:l,relative:r,viewTransition:u,unstable_defaultShouldRevalidate:d,unstable_useTransitions:h});function w(t){e&&e(t),t.defaultPrevented||C(t)}let T=v.createElement(`a`,{...f,...S,href:_.absoluteURL||y,onClick:_.isExternal||i?e:w,ref:hn(p,x),target:s,"data-discover":!g&&t===`render`?`true`:void 0});return b&&!g?v.createElement(v.Fragment,null,T,v.createElement(fn,{page:y})):T});V.displayName=`Link`;var bn=v.forwardRef(function({"aria-current":e=`page`,caseSensitive:t=!1,className:n=``,end:r=!1,style:i,to:a,viewTransition:o,children:s,...c},l){let u=rt(a,{relative:c.relative}),d=Xe(),f=v.useContext(Pe),{navigator:p,basename:m}=v.useContext(ze),h=f!=null&&Ln(u)&&o===!0,g=p.encodeLocation?p.encodeLocation(u).pathname:u.pathname,_=d.pathname,y=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;t||(_=_.toLowerCase(),y=y?y.toLowerCase():null,g=g.toLowerCase()),y&&m&&(y=ge(y,m)||y);let b=g!==`/`&&g.endsWith(`/`)?g.length-1:g.length,x=_===g||!r&&_.startsWith(g)&&_.charAt(b)===`/`,S=y!=null&&(y===g||!r&&y.startsWith(g)&&y.charAt(g.length)===`/`),C={isActive:x,isPending:S,isTransitioning:h},w=x?e:void 0,T;T=typeof n==`function`?n(C):[n,x?`active`:null,S?`pending`:null,h?`transitioning`:null].filter(Boolean).join(` `);let E=typeof i==`function`?i(C):i;return v.createElement(V,{...c,"aria-current":w,className:T,ref:l,style:E,to:a,viewTransition:o},typeof s==`function`?s(C):s)});bn.displayName=`NavLink`;var xn=v.forwardRef(({discover:e=`render`,fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:a,method:o=At,action:s,onSubmit:c,relative:l,preventScrollReset:u,viewTransition:d,unstable_defaultShouldRevalidate:f,...p},m)=>{let{unstable_useTransitions:h}=v.useContext(ze),g=An(),_=jn(s,{relative:l}),y=o.toLowerCase()===`get`?`get`:`post`,b=typeof s==`string`&&yn.test(s);return v.createElement(`form`,{ref:m,method:y,action:_,onSubmit:r?c:e=>{if(c&&c(e),e.defaultPrevented)return;e.preventDefault();let r=e.nativeEvent.submitter,s=r?.getAttribute(`formmethod`)||o,p=()=>g(r||e.currentTarget,{fetcherKey:t,method:s,navigate:n,replace:i,state:a,relative:l,preventScrollReset:u,viewTransition:d,unstable_defaultShouldRevalidate:f});h&&n!==!1?v.startTransition(()=>p()):p()},...p,"data-discover":!b&&e===`render`?`true`:void 0})});xn.displayName=`Form`;function Sn({getKey:e,storageKey:t,...n}){let r=v.useContext(cn),{basename:i}=v.useContext(ze),a=Xe(),o=bt();Fn({getKey:e,storageKey:t});let s=v.useMemo(()=>{if(!r||!e)return null;let t=Pn(a,o,i,e);return t===a.key?null:t},[]);if(!r||r.isSpaMode)return null;let c=((e,t)=>{if(!window.history.state||!window.history.state.key){let e=Math.random().toString(32).slice(2);window.history.replaceState({key:e},``)}try{let n=JSON.parse(sessionStorage.getItem(e)||`{}`)[t||window.history.state.key];typeof n==`number`&&window.scrollTo(0,n)}catch(t){console.error(t),sessionStorage.removeItem(e)}}).toString();return v.createElement(`script`,{...n,suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:`(${c})(${qt(JSON.stringify(t||Mn))}, ${qt(JSON.stringify(s))})`}})}Sn.displayName=`ScrollRestoration`;function Cn(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wn(e){let t=v.useContext(Ne);return T(t,Cn(e)),t}function Tn(e){let t=v.useContext(Pe);return T(t,Cn(e)),t}function En(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:o,unstable_defaultShouldRevalidate:s,unstable_useTransitions:c}={}){let l=Qe(),u=Xe(),d=rt(e,{relative:a});return v.useCallback(f=>{if(Lt(f,t)){f.preventDefault();let t=n===void 0?k(u)===k(d):n,p=()=>l(e,{replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:o,unstable_defaultShouldRevalidate:s});c?v.startTransition(()=>p()):p()}},[u,l,d,n,r,t,e,i,a,o,s,c])}function Dn(e){E(typeof URLSearchParams<`u`,"You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=v.useRef(Rt(e)),n=v.useRef(!1),r=Xe(),i=v.useMemo(()=>zt(r.search,n.current?null:t.current),[r.search]),a=Qe();return[i,v.useCallback((e,t)=>{let r=Rt(typeof e==`function`?e(new URLSearchParams(i)):e);n.current=!0,a(`?`+r,t)},[a,i])]}var On=0,kn=()=>`__${String(++On)}__`;function An(){let{router:e}=wn(`useSubmit`),{basename:t}=v.useContext(ze),n=vt(),r=e.fetch,i=e.navigate;return v.useCallback(async(e,a={})=>{let{action:o,method:s,encType:c,formData:l,body:u}=Wt(e,t);a.navigate===!1?await r(a.fetcherKey||kn(),n,a.action||o,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:l,body:u,formMethod:a.method||s,formEncType:a.encType||c,flushSync:a.flushSync}):await i(a.action||o,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:l,body:u,formMethod:a.method||s,formEncType:a.encType||c,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,i,t,n])}function jn(e,{relative:t}={}){let{basename:n}=v.useContext(ze),r=v.useContext(Ve);T(r,`useFormAction must be used inside a RouteContext`);let[i]=r.matches.slice(-1),a={...rt(e||`.`,{relative:t})},o=Xe();if(e==null){a.search=o.search;let e=new URLSearchParams(a.search),t=e.getAll(`index`);if(t.some(e=>e===``)){e.delete(`index`),t.filter(e=>e).forEach(t=>e.append(`index`,t));let n=e.toString();a.search=n?`?${n}`:``}}return(!e||e===`.`)&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,`?index&`):`?index`),n!==`/`&&(a.pathname=a.pathname===`/`?n:we([n,a.pathname])),k(a)}var Mn=`react-router-scroll-positions`,Nn={};function Pn(e,t,n,r){let i=null;return r&&(i=r(n===`/`?e:{...e,pathname:ge(e.pathname,n)||e.pathname},t)),i??=e.key,i}function Fn({getKey:e,storageKey:t}={}){let{router:n}=wn(`useScrollRestoration`),{restoreScrollPosition:r,preventScrollReset:i}=Tn(`useScrollRestoration`),{basename:a}=v.useContext(ze),o=Xe(),s=bt(),c=yt();v.useEffect(()=>(window.history.scrollRestoration=`manual`,()=>{window.history.scrollRestoration=`auto`}),[]),In(v.useCallback(()=>{if(c.state===`idle`){let t=Pn(o,s,a,e);Nn[t]=window.scrollY}try{sessionStorage.setItem(t||Mn,JSON.stringify(Nn))}catch(e){E(!1,`Failed to save scroll positions in sessionStorage, <ScrollRestoration /> will not work properly (${e}).`)}window.history.scrollRestoration=`auto`},[c.state,e,a,o,s,t])),typeof document<`u`&&(v.useLayoutEffect(()=>{try{let e=sessionStorage.getItem(t||Mn);e&&(Nn=JSON.parse(e))}catch{}},[t]),v.useLayoutEffect(()=>{let t=n?.enableScrollRestoration(Nn,()=>window.scrollY,e?(t,n)=>Pn(t,n,a,e):void 0);return()=>t&&t()},[n,a,e]),v.useLayoutEffect(()=>{if(r!==!1){if(typeof r==`number`){window.scrollTo(0,r);return}try{if(o.hash){let e=document.getElementById(decodeURIComponent(o.hash.slice(1)));if(e){e.scrollIntoView();return}}}catch{E(!1,`"${o.hash.slice(1)}" is not a decodable element ID. The view will not scroll to it.`)}i!==!0&&window.scrollTo(0,0)}},[o,r,i]))}function In(e,t){let{capture:n}=t||{};v.useEffect(()=>{let t=n==null?void 0:{capture:n};return window.addEventListener(`pagehide`,e,t),()=>{window.removeEventListener(`pagehide`,e,t)}},[e,n])}function Ln(e,{relative:t}={}){let n=v.useContext(Ie);T(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=wn(`useViewTransitionState`),i=rt(e,{relative:t});if(!n.isTransitioning)return!1;let a=ge(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=ge(n.nextLocation.pathname,r)||n.nextLocation.pathname;return pe(i.pathname,o)!=null||pe(i.pathname,a)!=null}var Rn=`/assets/prc-logo-DdJMYLUd.png`,zn=o((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.fragment`);function r(e,n,r){var i=null;if(r!==void 0&&(i=``+r),n.key!==void 0&&(i=``+n.key),`key`in n)for(var a in r={},n)a!==`key`&&(r[a]=n[a]);else r=n;return n=r.ref,{$$typeof:t,type:e,key:i,ref:n===void 0?null:n,props:r}}e.Fragment=n,e.jsx=r,e.jsxs=r})),H=o(((e,t)=>{t.exports=zn()}))();function Bn(){let[e,t]=(0,v.useState)([]),[n,r]=(0,v.useState)(!0),[i,a]=(0,v.useState)(!1),[o,s]=(0,v.useState)(0);(0,v.useEffect)(()=>{c();let e=()=>{a(window.scrollY>50)};return window.addEventListener(`scroll`,e),()=>window.removeEventListener(`scroll`,e)},[]),(0,v.useEffect)(()=>{let e=setInterval(()=>{s(e=>(e+1)%l.length)},5e3);return()=>clearInterval(e)},[]);let c=async()=>{try{let e=await(await fetch(`http://localhost/prc-management-system/backend/api/announcements.php`)).json();e.success&&t(e.data.filter(e=>e.status===`published`).slice(0,3))}catch(e){console.error(`Error fetching announcements:`,e)}finally{r(!1)}},l=[{title:`Blood Donation Drives`,description:`Saving lives through voluntary blood donation campaigns nationwide. Every donation can save up to three lives.`,icon:`fa-solid fa-droplet`,stats:`500,000+ units collected`,action:`Donate Now`},{title:`Disaster Response`,description:`Rapid emergency response and relief operations across the Philippines. Ready to deploy 24/7 when disasters strike.`,icon:`fa-solid fa-truck-fast`,stats:`1,000+ operations yearly`,action:`Learn More`},{title:`Community Training`,description:`Empowering communities with life-saving skills and knowledge. Training programs in first aid, CPR, and disaster preparedness.`,icon:`fa-solid fa-graduation-cap`,stats:`100,000+ trained annually`,action:`Join Training`},{title:`Volunteer Network`,description:`Join our growing network of dedicated volunteers making a difference in their communities every day.`,icon:`fa-solid fa-hand-holding-heart`,stats:`50,000+ active volunteers`,action:`Volunteer Now`},{title:`Health Services`,description:`Providing essential health services and medical missions to underserved communities across the nation.`,icon:`fa-solid fa-heart-pulse`,stats:`200+ communities served`,action:`Get Support`},{title:`Red Cross Youth`,description:`Developing future leaders through youth empowerment programs and character-building activities.`,icon:`fa-solid fa-users`,stats:`25,000+ youth members`,action:`Join Youth`}],u=e=>{let t=e.image_path||e.image_url;return t?`http://localhost/prc-management-system/${t}`:null};return(0,H.jsxs)(`div`,{className:`landing-page`,children:[(0,H.jsx)(`header`,{className:`header ${i?`scrolled`:``}`,children:(0,H.jsx)(`div`,{className:`container`,children:(0,H.jsxs)(`div`,{className:`header__content`,children:[(0,H.jsxs)(V,{to:`/`,className:`header__logo`,children:[(0,H.jsx)(`img`,{src:Rn,alt:`PRC Logo`,className:`header__logo-img`,onError:e=>e.target.style.display=`none`}),(0,H.jsxs)(`div`,{className:`header__logo-text`,children:[(0,H.jsx)(`h1`,{children:`Philippine Red Cross`}),(0,H.jsx)(`p`,{children:`Serving Humanity`})]})]}),(0,H.jsxs)(`nav`,{className:`header__nav`,children:[(0,H.jsxs)(V,{to:`/login`,className:`header__nav-btn header__nav-btn--login`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-right-to-bracket`}),`Login`]}),(0,H.jsxs)(V,{to:`/register`,className:`header__nav-btn header__nav-btn--register`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-user-plus`}),`Register`]})]})]})})}),(0,H.jsx)(`section`,{className:`hero`,children:(0,H.jsx)(`div`,{className:`container`,children:(0,H.jsxs)(`div`,{className:`hero__content`,children:[(0,H.jsxs)(`span`,{className:`hero__badge`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-heart`}),`Humanitarian Excellence Since 1947`]}),(0,H.jsxs)(`h1`,{className:`hero__title`,children:[`Empowering Communities`,(0,H.jsx)(`span`,{className:`hero__title-highlight`,children:`Through Compassion`})]}),(0,H.jsx)(`p`,{className:`hero__description`,children:`Join the Philippine Red Cross in our mission to alleviate human suffering, protect life and health, and uphold human dignity especially during emergencies.`}),(0,H.jsxs)(`div`,{className:`hero__buttons`,children:[(0,H.jsxs)(V,{to:`/register`,className:`hero__btn hero__btn--primary`,children:[`Get Started `,(0,H.jsx)(`i`,{className:`fa-solid fa-arrow-right`})]}),(0,H.jsxs)(`a`,{href:`#services`,className:`hero__btn hero__btn--secondary`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-play`}),` Learn More`]})]}),(0,H.jsxs)(`div`,{className:`hero__stats`,children:[(0,H.jsxs)(`div`,{className:`hero__stat`,children:[(0,H.jsx)(`h3`,{children:`1M+`}),(0,H.jsx)(`p`,{children:`Lives Touched`})]}),(0,H.jsxs)(`div`,{className:`hero__stat`,children:[(0,H.jsx)(`h3`,{children:`500+`}),(0,H.jsx)(`p`,{children:`Communities Served`})]}),(0,H.jsxs)(`div`,{className:`hero__stat`,children:[(0,H.jsx)(`h3`,{children:`24/7`}),(0,H.jsx)(`p`,{children:`Emergency Response`})]})]})]})})}),(0,H.jsx)(`section`,{className:`impact`,children:(0,H.jsxs)(`div`,{className:`container`,children:[(0,H.jsxs)(`span`,{className:`section__badge`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-star`}),`Our Impact`]}),(0,H.jsx)(`h2`,{className:`section__title`,children:`Making a Difference Every Day`}),(0,H.jsx)(`p`,{className:`section__subtitle`,children:`Witness the Philippine Red Cross in action across the nation`}),(0,H.jsxs)(`div`,{className:`impact__carousel`,children:[(0,H.jsxs)(`div`,{className:`impact__item`,children:[(0,H.jsxs)(`div`,{className:`impact__item-image`,children:[(0,H.jsx)(`div`,{className:`image-placeholder`,children:(0,H.jsx)(`i`,{className:`fa-solid ${l[o].icon}`})}),(0,H.jsxs)(`div`,{className:`impact__item-stats`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-chart-line`}),(0,H.jsx)(`span`,{children:l[o].stats})]})]}),(0,H.jsxs)(`div`,{className:`impact__item-content`,children:[(0,H.jsxs)(`div`,{className:`impact__item-header`,children:[(0,H.jsx)(`i`,{className:`fa-solid ${l[o].icon} impact__item-icon`}),(0,H.jsx)(`h3`,{children:l[o].title})]}),(0,H.jsx)(`p`,{children:l[o].description}),(0,H.jsxs)(`div`,{className:`impact__item-footer`,children:[(0,H.jsxs)(`span`,{className:`impact__item-slide-indicator`,children:[o+1,` / `,l.length]}),(0,H.jsxs)(`button`,{className:`impact__item-content-btn`,children:[l[o].action,` `,(0,H.jsx)(`i`,{className:`fa-solid fa-arrow-right`})]})]})]})]}),(0,H.jsx)(`div`,{className:`impact__indicators`,children:l.map((e,t)=>(0,H.jsx)(`button`,{className:`impact__indicator ${t===o?`impact__indicator--active`:``}`,onClick:()=>s(t),"aria-label":`Go to slide ${t+1}`},t))}),(0,H.jsx)(`div`,{className:`impact__timer`,children:(0,H.jsx)(`div`,{className:`impact__timer-progress`,style:{animation:`timerProgress 5s linear infinite`,animationPlayState:`running`}})})]})]})}),(0,H.jsx)(`section`,{className:`services`,id:`services`,children:(0,H.jsxs)(`div`,{className:`container`,children:[(0,H.jsxs)(`span`,{className:`section__badge`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-heart`}),`What We Do`]}),(0,H.jsx)(`h2`,{className:`section__title`,children:`Comprehensive Humanitarian Services`}),(0,H.jsx)(`p`,{className:`section__subtitle`,children:`Discover how we serve humanity through our life-saving programs and initiatives`}),(0,H.jsxs)(`div`,{className:`services__grid`,children:[(0,H.jsxs)(`div`,{className:`services__card`,children:[(0,H.jsx)(`div`,{className:`services__card-icon services__card-icon--health`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-heart-pulse`})}),(0,H.jsx)(`h3`,{children:`Health Services`}),(0,H.jsx)(`p`,{children:`Improving health outcomes for vulnerable communities through medical programs and health education initiatives.`}),(0,H.jsxs)(`ul`,{children:[(0,H.jsx)(`li`,{children:`Community Health Programs`}),(0,H.jsx)(`li`,{children:`Epidemic Control`}),(0,H.jsx)(`li`,{children:`Maternal & Child Health`}),(0,H.jsx)(`li`,{children:`Water & Sanitation`})]}),(0,H.jsxs)(`a`,{href:`#`,className:`services__card-link`,children:[`Learn More `,(0,H.jsx)(`i`,{className:`fa-solid fa-arrow-right`})]})]}),(0,H.jsxs)(`div`,{className:`services__card`,children:[(0,H.jsx)(`div`,{className:`services__card-icon services__card-icon--blood`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-droplet`})}),(0,H.jsx)(`h3`,{children:`Blood Services`}),(0,H.jsx)(`p`,{children:`Safe blood collection, testing, and distribution to save lives through our nationwide blood bank network.`}),(0,H.jsxs)(`ul`,{children:[(0,H.jsx)(`li`,{children:`Voluntary Blood Donation`}),(0,H.jsx)(`li`,{children:`Blood Testing & Screening`}),(0,H.jsx)(`li`,{children:`Emergency Blood Supply`}),(0,H.jsx)(`li`,{children:`Donor Education Programs`})]}),(0,H.jsxs)(`a`,{href:`#`,className:`services__card-link`,children:[`Donate Blood `,(0,H.jsx)(`i`,{className:`fa-solid fa-arrow-right`})]})]}),(0,H.jsxs)(`div`,{className:`services__card`,children:[(0,H.jsx)(`div`,{className:`services__card-icon services__card-icon--training`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-graduation-cap`})}),(0,H.jsx)(`h3`,{children:`Training & Safety`}),(0,H.jsx)(`p`,{children:`Educational programs on first aid, CPR, disaster response, and safety courses for all skill levels.`}),(0,H.jsxs)(`ul`,{children:[(0,H.jsx)(`li`,{children:`First Aid Certification`}),(0,H.jsx)(`li`,{children:`CPR & Life Support`}),(0,H.jsx)(`li`,{children:`Disaster Response Training`}),(0,H.jsx)(`li`,{children:`Water Safety Training`})]}),(0,H.jsxs)(`a`,{href:`#`,className:`services__card-link`,children:[`Join Training `,(0,H.jsx)(`i`,{className:`fa-solid fa-arrow-right`})]})]}),(0,H.jsxs)(`div`,{className:`services__card`,children:[(0,H.jsx)(`div`,{className:`services__card-icon services__card-icon--disaster`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-triangle-exclamation`})}),(0,H.jsx)(`h3`,{children:`Disaster Services`}),(0,H.jsx)(`p`,{children:`Providing relief and disaster preparedness training to help communities during natural and man-made disasters.`}),(0,H.jsxs)(`ul`,{children:[(0,H.jsx)(`li`,{children:`Emergency Relief Operations`}),(0,H.jsx)(`li`,{children:`Disaster Preparedness`}),(0,H.jsx)(`li`,{children:`Community Response Teams`}),(0,H.jsx)(`li`,{children:`Recovery Support`})]}),(0,H.jsxs)(`a`,{href:`#`,className:`services__card-link`,children:[`Get Involved `,(0,H.jsx)(`i`,{className:`fa-solid fa-arrow-right`})]})]}),(0,H.jsxs)(`div`,{className:`services__card`,children:[(0,H.jsx)(`div`,{className:`services__card-icon services__card-icon--welfare`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-hand-holding-heart`})}),(0,H.jsx)(`h3`,{children:`Welfare Services`}),(0,H.jsx)(`p`,{children:`Supporting vulnerable individuals and families through comprehensive social welfare programs.`}),(0,H.jsxs)(`ul`,{children:[(0,H.jsx)(`li`,{children:`Psychosocial Support`}),(0,H.jsx)(`li`,{children:`Family Assistance`}),(0,H.jsx)(`li`,{children:`Elderly Care`}),(0,H.jsx)(`li`,{children:`Child Protection`})]}),(0,H.jsxs)(`a`,{href:`#`,className:`services__card-link`,children:[`Find Support `,(0,H.jsx)(`i`,{className:`fa-solid fa-arrow-right`})]})]}),(0,H.jsxs)(`div`,{className:`services__card`,children:[(0,H.jsx)(`div`,{className:`services__card-icon services__card-icon--youth`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-users`})}),(0,H.jsx)(`h3`,{children:`Red Cross Youth`}),(0,H.jsx)(`p`,{children:`Educating and empowering youth through Red Cross values, leadership training, and community service.`}),(0,H.jsxs)(`ul`,{children:[(0,H.jsx)(`li`,{children:`Leadership Development`}),(0,H.jsx)(`li`,{children:`Peer Education`}),(0,H.jsx)(`li`,{children:`Community Service`}),(0,H.jsx)(`li`,{children:`International Friendship`})]}),(0,H.jsxs)(`a`,{href:`#`,className:`services__card-link`,children:[`Join Youth `,(0,H.jsx)(`i`,{className:`fa-solid fa-arrow-right`})]})]})]})]})}),(0,H.jsx)(`section`,{className:`announcements`,id:`announcements`,children:(0,H.jsxs)(`div`,{className:`container`,children:[(0,H.jsxs)(`span`,{className:`section__badge`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-newspaper`}),`Latest News`]}),(0,H.jsx)(`h2`,{className:`section__title`,children:`Stay Updated`}),(0,H.jsx)(`p`,{className:`section__subtitle`,children:`Get the latest announcements and important updates from Philippine Red Cross`}),(0,H.jsx)(`div`,{className:`announcements__grid`,children:n?(0,H.jsxs)(`div`,{className:`announcements__loading`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-spinner fa-spin`}),(0,H.jsx)(`p`,{children:`Loading announcements...`})]}):e.length>0?e.map(e=>{let t=u(e);return(0,H.jsxs)(`div`,{className:`announcements__card`,children:[(0,H.jsx)(`div`,{className:`announcements__card-image`,children:t?(0,H.jsx)(`img`,{src:t,alt:e.title,onError:e=>{e.target.onerror=null,e.target.src=`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300'%3E%3Crect width='400' height='300' fill='%23e0e0e0'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='Arial' font-size='20' fill='%23999'%3EImage Not Found%3C/text%3E%3C/svg%3E`}}):(0,H.jsxs)(`div`,{className:`image-placeholder`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-image`}),(0,H.jsx)(`span`,{children:`No Image`})]})}),(0,H.jsxs)(`div`,{className:`announcements__card-content`,children:[(0,H.jsxs)(`span`,{className:`announcements__card-date`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-calendar`}),new Date(e.posted_at).toLocaleDateString(`en-US`,{month:`long`,day:`numeric`,year:`numeric`})]}),(0,H.jsx)(`h3`,{children:e.title}),(0,H.jsxs)(`p`,{children:[e.content.substring(0,120),`...`]}),(0,H.jsxs)(V,{to:`/login`,className:`announcements__card-link`,children:[`Read More `,(0,H.jsx)(`i`,{className:`fa-solid fa-arrow-right`})]})]})]},e.announcement_id)}):(0,H.jsxs)(`div`,{className:`announcements__empty`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-newspaper`}),(0,H.jsx)(`p`,{children:`No announcements available at the moment.`})]})})]})}),(0,H.jsx)(`section`,{className:`cta`,children:(0,H.jsx)(`div`,{className:`container`,children:(0,H.jsxs)(`div`,{className:`cta__content`,children:[(0,H.jsx)(`h2`,{children:`Ready to Make a Difference?`}),(0,H.jsx)(`p`,{children:`Join thousands of volunteers and humanitarian workers in serving communities across the Philippines. Your compassion can save lives.`}),(0,H.jsxs)(`div`,{className:`cta__buttons`,children:[(0,H.jsxs)(V,{to:`/register`,className:`cta__btn cta__btn--primary`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-heart`}),`Become a Volunteer`]}),(0,H.jsxs)(V,{to:`/login`,className:`cta__btn cta__btn--secondary`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-right-to-bracket`}),`Member Login`]})]}),(0,H.jsxs)(`div`,{className:`cta__features`,children:[(0,H.jsxs)(`div`,{className:`cta__feature`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-phone-volume`}),(0,H.jsx)(`h4`,{children:`24/7 Emergency Response`}),(0,H.jsx)(`p`,{children:`Always ready to help when disaster strikes`})]}),(0,H.jsxs)(`div`,{className:`cta__feature`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-certificate`}),(0,H.jsx)(`h4`,{children:`Professional Training`}),(0,H.jsx)(`p`,{children:`World-class certification programs`})]}),(0,H.jsxs)(`div`,{className:`cta__feature`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-hand-holding-heart`}),(0,H.jsx)(`h4`,{children:`Community Impact`}),(0,H.jsx)(`p`,{children:`Building resilient communities together`})]})]})]})})}),(0,H.jsx)(`footer`,{className:`footer`,children:(0,H.jsxs)(`div`,{className:`container`,children:[(0,H.jsxs)(`div`,{className:`footer__content`,children:[(0,H.jsxs)(`div`,{className:`footer__brand`,children:[(0,H.jsxs)(`div`,{className:`footer__brand-logo`,children:[(0,H.jsx)(`img`,{src:Rn,alt:`PRC`,onError:e=>e.target.style.display=`none`}),(0,H.jsx)(`h3`,{children:`Philippine Red Cross`})]}),(0,H.jsx)(`p`,{children:`The Philippine Red Cross is committed to providing humanitarian services that help vulnerable communities become self-reliant.`}),(0,H.jsxs)(`div`,{className:`footer__social`,children:[(0,H.jsx)(`a`,{href:`#`,"aria-label":`Facebook`,children:(0,H.jsx)(`i`,{className:`fa-brands fa-facebook-f`})}),(0,H.jsx)(`a`,{href:`#`,"aria-label":`Twitter`,children:(0,H.jsx)(`i`,{className:`fa-brands fa-twitter`})}),(0,H.jsx)(`a`,{href:`#`,"aria-label":`Instagram`,children:(0,H.jsx)(`i`,{className:`fa-brands fa-instagram`})}),(0,H.jsx)(`a`,{href:`#`,"aria-label":`YouTube`,children:(0,H.jsx)(`i`,{className:`fa-brands fa-youtube`})})]})]}),(0,H.jsxs)(`div`,{className:`footer__links`,children:[(0,H.jsxs)(`div`,{className:`footer__column`,children:[(0,H.jsx)(`h4`,{children:`Quick Access`}),(0,H.jsxs)(`ul`,{children:[(0,H.jsxs)(`li`,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-right`}),(0,H.jsx)(V,{to:`/register`,children:`Member Portal`})]}),(0,H.jsxs)(`li`,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-right`}),(0,H.jsx)(V,{to:`/login`,children:`Join Us`})]}),(0,H.jsxs)(`li`,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-right`}),(0,H.jsx)(`a`,{href:`#services`,children:`Our Services`})]}),(0,H.jsxs)(`li`,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-right`}),(0,H.jsx)(`a`,{href:`#announcements`,children:`Events`})]}),(0,H.jsxs)(`li`,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-right`}),(0,H.jsx)(`a`,{href:`#announcements`,children:`Training`})]})]})]}),(0,H.jsxs)(`div`,{className:`footer__column`,children:[(0,H.jsx)(`h4`,{children:`Services`}),(0,H.jsxs)(`ul`,{children:[(0,H.jsxs)(`li`,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-right`}),(0,H.jsx)(`a`,{href:`#services`,children:`Blood Donation`})]}),(0,H.jsxs)(`li`,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-right`}),(0,H.jsx)(`a`,{href:`#services`,children:`Emergency Response`})]}),(0,H.jsxs)(`li`,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-right`}),(0,H.jsx)(`a`,{href:`#services`,children:`Health Programs`})]}),(0,H.jsxs)(`li`,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-right`}),(0,H.jsx)(`a`,{href:`#services`,children:`Disaster Relief`})]}),(0,H.jsxs)(`li`,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-right`}),(0,H.jsx)(`a`,{href:`#services`,children:`Training Programs`})]})]})]}),(0,H.jsxs)(`div`,{className:`footer__column`,children:[(0,H.jsx)(`h4`,{children:`Contact`}),(0,H.jsxs)(`ul`,{children:[(0,H.jsxs)(`li`,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-phone`}),`143 (Emergency Hotline)`]}),(0,H.jsxs)(`li`,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-envelope`}),`info@redcross.org.ph`]}),(0,H.jsxs)(`li`,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-dot`}),`PRC National Headquarters, Manila`]})]})]})]})]}),(0,H.jsxs)(`div`,{className:`footer__bottom`,children:[(0,H.jsxs)(`p`,{children:[(0,H.jsx)(`i`,{className:`fa-regular fa-copyright`}),new Date().getFullYear(),` Philippine Red Cross. All rights reserved.`]}),(0,H.jsx)(`button`,{className:`footer__scroll-top`,onClick:()=>window.scrollTo({top:0,behavior:`smooth`}),children:(0,H.jsx)(`i`,{className:`fa-solid fa-arrow-up`})})]})]})})]})}function Vn(e,t){return function(){return e.apply(t,arguments)}}var{toString:Hn}=Object.prototype,{getPrototypeOf:Un}=Object,{iterator:Wn,toStringTag:Gn}=Symbol,Kn=(e=>t=>{let n=Hn.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),qn=e=>(e=e.toLowerCase(),t=>Kn(t)===e),Jn=e=>t=>typeof t===e,{isArray:Yn}=Array,Xn=Jn(`undefined`);function Zn(e){return e!==null&&!Xn(e)&&e.constructor!==null&&!Xn(e.constructor)&&tr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}var Qn=qn(`ArrayBuffer`);function $n(e){let t;return t=typeof ArrayBuffer<`u`&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Qn(e.buffer),t}var er=Jn(`string`),tr=Jn(`function`),nr=Jn(`number`),rr=e=>typeof e==`object`&&!!e,ir=e=>e===!0||e===!1,ar=e=>{if(Kn(e)!==`object`)return!1;let t=Un(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Gn in e)&&!(Wn in e)},or=e=>{if(!rr(e)||Zn(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},sr=qn(`Date`),cr=qn(`File`),lr=qn(`Blob`),ur=qn(`FileList`),dr=e=>rr(e)&&tr(e.pipe),fr=e=>{let t;return e&&(typeof FormData==`function`&&e instanceof FormData||tr(e.append)&&((t=Kn(e))===`formdata`||t===`object`&&tr(e.toString)&&e.toString()===`[object FormData]`))},pr=qn(`URLSearchParams`),[mr,hr,gr,_r]=[`ReadableStream`,`Request`,`Response`,`Headers`].map(qn),vr=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,``);function yr(e,t,{allOwnKeys:n=!1}={}){if(e==null)return;let r,i;if(typeof e!=`object`&&(e=[e]),Yn(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{if(Zn(e))return;let i=n?Object.getOwnPropertyNames(e):Object.keys(e),a=i.length,o;for(r=0;r<a;r++)o=i[r],t.call(null,e[o],o,e)}}function br(e,t){if(Zn(e))return null;t=t.toLowerCase();let n=Object.keys(e),r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}var xr=typeof globalThis<`u`?globalThis:typeof self<`u`?self:typeof window<`u`?window:global,Sr=e=>!Xn(e)&&e!==xr;function Cr(){let{caseless:e,skipUndefined:t}=Sr(this)&&this||{},n={},r=(r,i)=>{if(i===`__proto__`||i===`constructor`||i===`prototype`)return;let a=e&&br(n,i)||i;ar(n[a])&&ar(r)?n[a]=Cr(n[a],r):ar(r)?n[a]=Cr({},r):Yn(r)?n[a]=r.slice():(!t||!Xn(r))&&(n[a]=r)};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&yr(arguments[e],r);return n}var wr=(e,t,n,{allOwnKeys:r}={})=>(yr(t,(t,r)=>{n&&tr(t)?Object.defineProperty(e,r,{value:Vn(t,n),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,r,{value:t,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:r}),e),Tr=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Er=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),Object.defineProperty(e.prototype,`constructor`,{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,`super`,{value:t.prototype}),n&&Object.assign(e.prototype,n)},Dr=(e,t,n,r)=>{let i,a,o,s={};if(t||={},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)o=i[a],(!r||r(o,e,t))&&!s[o]&&(t[o]=e[o],s[o]=!0);e=n!==!1&&Un(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Or=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;let r=e.indexOf(t,n);return r!==-1&&r===n},kr=e=>{if(!e)return null;if(Yn(e))return e;let t=e.length;if(!nr(t))return null;let n=Array(t);for(;t-- >0;)n[t]=e[t];return n},Ar=(e=>t=>e&&t instanceof e)(typeof Uint8Array<`u`&&Un(Uint8Array)),jr=(e,t)=>{let n=(e&&e[Wn]).call(e),r;for(;(r=n.next())&&!r.done;){let n=r.value;t.call(e,n[0],n[1])}},Mr=(e,t)=>{let n,r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},Nr=qn(`HTMLFormElement`),Pr=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),Fr=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Ir=qn(`RegExp`),Lr=(e,t)=>{let n=Object.getOwnPropertyDescriptors(e),r={};yr(n,(n,i)=>{let a;(a=t(n,i,e))!==!1&&(r[i]=a||n)}),Object.defineProperties(e,r)},Rr=e=>{Lr(e,(t,n)=>{if(tr(e)&&[`arguments`,`caller`,`callee`].indexOf(n)!==-1)return!1;let r=e[n];if(tr(r)){if(t.enumerable=!1,`writable`in t){t.writable=!1;return}t.set||=()=>{throw Error(`Can not rewrite read-only method '`+n+`'`)}}})},zr=(e,t)=>{let n={},r=e=>{e.forEach(e=>{n[e]=!0})};return Yn(e)?r(e):r(String(e).split(t)),n},Br=()=>{},Vr=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Hr(e){return!!(e&&tr(e.append)&&e[Gn]===`FormData`&&e[Wn])}var Ur=e=>{let t=Array(10),n=(e,r)=>{if(rr(e)){if(t.indexOf(e)>=0)return;if(Zn(e))return e;if(!(`toJSON`in e)){t[r]=e;let i=Yn(e)?[]:{};return yr(e,(e,t)=>{let a=n(e,r+1);!Xn(a)&&(i[t]=a)}),t[r]=void 0,i}}return e};return n(e,0)},Wr=qn(`AsyncFunction`),Gr=e=>e&&(rr(e)||tr(e))&&tr(e.then)&&tr(e.catch),Kr=((e,t)=>e?setImmediate:t?((e,t)=>(xr.addEventListener(`message`,({source:n,data:r})=>{n===xr&&r===e&&t.length&&t.shift()()},!1),n=>{t.push(n),xr.postMessage(e,`*`)}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate==`function`,tr(xr.postMessage)),U={isArray:Yn,isArrayBuffer:Qn,isBuffer:Zn,isFormData:fr,isArrayBufferView:$n,isString:er,isNumber:nr,isBoolean:ir,isObject:rr,isPlainObject:ar,isEmptyObject:or,isReadableStream:mr,isRequest:hr,isResponse:gr,isHeaders:_r,isUndefined:Xn,isDate:sr,isFile:cr,isBlob:lr,isRegExp:Ir,isFunction:tr,isStream:dr,isURLSearchParams:pr,isTypedArray:Ar,isFileList:ur,forEach:yr,merge:Cr,extend:wr,trim:vr,stripBOM:Tr,inherits:Er,toFlatObject:Dr,kindOf:Kn,kindOfTest:qn,endsWith:Or,toArray:kr,forEachEntry:jr,matchAll:Mr,isHTMLForm:Nr,hasOwnProperty:Fr,hasOwnProp:Fr,reduceDescriptors:Lr,freezeMethods:Rr,toObjectSet:zr,toCamelCase:Pr,noop:Br,toFiniteNumber:Vr,findKey:br,global:xr,isContextDefined:Sr,isSpecCompliantForm:Hr,toJSONObject:Ur,isAsyncFn:Wr,isThenable:Gr,setImmediate:Kr,asap:typeof queueMicrotask<`u`?queueMicrotask.bind(xr):typeof process<`u`&&process.nextTick||Kr,isIterable:e=>e!=null&&tr(e[Wn])},W=class e extends Error{static from(t,n,r,i,a,o){let s=new e(t.message,n||t.code,r,i,a);return s.cause=t,s.name=t.name,o&&Object.assign(s,o),s}constructor(e,t,n,r,i){super(e),this.name=`AxiosError`,this.isAxiosError=!0,t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:U.toJSONObject(this.config),code:this.code,status:this.status}}};W.ERR_BAD_OPTION_VALUE=`ERR_BAD_OPTION_VALUE`,W.ERR_BAD_OPTION=`ERR_BAD_OPTION`,W.ECONNABORTED=`ECONNABORTED`,W.ETIMEDOUT=`ETIMEDOUT`,W.ERR_NETWORK=`ERR_NETWORK`,W.ERR_FR_TOO_MANY_REDIRECTS=`ERR_FR_TOO_MANY_REDIRECTS`,W.ERR_DEPRECATED=`ERR_DEPRECATED`,W.ERR_BAD_RESPONSE=`ERR_BAD_RESPONSE`,W.ERR_BAD_REQUEST=`ERR_BAD_REQUEST`,W.ERR_CANCELED=`ERR_CANCELED`,W.ERR_NOT_SUPPORT=`ERR_NOT_SUPPORT`,W.ERR_INVALID_URL=`ERR_INVALID_URL`;function qr(e){return U.isPlainObject(e)||U.isArray(e)}function Jr(e){return U.endsWith(e,`[]`)?e.slice(0,-2):e}function Yr(e,t,n){return e?e.concat(t).map(function(e,t){return e=Jr(e),!n&&t?`[`+e+`]`:e}).join(n?`.`:``):t}function Xr(e){return U.isArray(e)&&!e.some(qr)}var Zr=U.toFlatObject(U,{},null,function(e){return/^is[A-Z]/.test(e)});function Qr(e,t,n){if(!U.isObject(e))throw TypeError(`target must be an object`);t||=new FormData,n=U.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!U.isUndefined(t[e])});let r=n.metaTokens,i=n.visitor||l,a=n.dots,o=n.indexes,s=(n.Blob||typeof Blob<`u`&&Blob)&&U.isSpecCompliantForm(t);if(!U.isFunction(i))throw TypeError(`visitor must be a function`);function c(e){if(e===null)return``;if(U.isDate(e))return e.toISOString();if(U.isBoolean(e))return e.toString();if(!s&&U.isBlob(e))throw new W(`Blob is not supported. Use a Buffer instead.`);return U.isArrayBuffer(e)||U.isTypedArray(e)?s&&typeof Blob==`function`?new Blob([e]):Buffer.from(e):e}function l(e,n,i){let s=e;if(e&&!i&&typeof e==`object`){if(U.endsWith(n,`{}`))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(U.isArray(e)&&Xr(e)||(U.isFileList(e)||U.endsWith(n,`[]`))&&(s=U.toArray(e)))return n=Jr(n),s.forEach(function(e,r){!(U.isUndefined(e)||e===null)&&t.append(o===!0?Yr([n],r,a):o===null?n:n+`[]`,c(e))}),!1}return qr(e)?!0:(t.append(Yr(i,n,a),c(e)),!1)}let u=[],d=Object.assign(Zr,{defaultVisitor:l,convertValue:c,isVisitable:qr});function f(e,n){if(!U.isUndefined(e)){if(u.indexOf(e)!==-1)throw Error(`Circular reference detected in `+n.join(`.`));u.push(e),U.forEach(e,function(e,r){(!(U.isUndefined(e)||e===null)&&i.call(t,e,U.isString(r)?r.trim():r,n,d))===!0&&f(e,n?n.concat(r):[r])}),u.pop()}}if(!U.isObject(e))throw TypeError(`data must be an object`);return f(e),t}function $r(e){let t={"!":`%21`,"'":`%27`,"(":`%28`,")":`%29`,"~":`%7E`,"%20":`+`,"%00":`\0`};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function ei(e,t){this._pairs=[],e&&Qr(e,this,t)}var ti=ei.prototype;ti.append=function(e,t){this._pairs.push([e,t])},ti.toString=function(e){let t=e?function(t){return e.call(this,t,$r)}:$r;return this._pairs.map(function(e){return t(e[0])+`=`+t(e[1])},``).join(`&`)};function ni(e){return encodeURIComponent(e).replace(/%3A/gi,`:`).replace(/%24/g,`$`).replace(/%2C/gi,`,`).replace(/%20/g,`+`)}function ri(e,t,n){if(!t)return e;let r=n&&n.encode||ni,i=U.isFunction(n)?{serialize:n}:n,a=i&&i.serialize,o;if(o=a?a(t,i):U.isURLSearchParams(t)?t.toString():new ei(t,i).toString(r),o){let t=e.indexOf(`#`);t!==-1&&(e=e.slice(0,t)),e+=(e.indexOf(`?`)===-1?`?`:`&`)+o}return e}var ii=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&=[]}forEach(e){U.forEach(this.handlers,function(t){t!==null&&e(t)})}},ai={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},oi={isBrowser:!0,classes:{URLSearchParams:typeof URLSearchParams<`u`?URLSearchParams:ei,FormData:typeof FormData<`u`?FormData:null,Blob:typeof Blob<`u`?Blob:null},protocols:[`http`,`https`,`file`,`blob`,`url`,`data`]},si=s({hasBrowserEnv:()=>ci,hasStandardBrowserEnv:()=>ui,hasStandardBrowserWebWorkerEnv:()=>di,navigator:()=>li,origin:()=>fi}),ci=typeof window<`u`&&typeof document<`u`,li=typeof navigator==`object`&&navigator||void 0,ui=ci&&(!li||[`ReactNative`,`NativeScript`,`NS`].indexOf(li.product)<0),di=typeof WorkerGlobalScope<`u`&&self instanceof WorkerGlobalScope&&typeof self.importScripts==`function`,fi=ci&&window.location.href||`http://localhost`,pi={...si,...oi};function mi(e,t){return Qr(e,new pi.classes.URLSearchParams,{visitor:function(e,t,n,r){return pi.isNode&&U.isBuffer(e)?(this.append(t,e.toString(`base64`)),!1):r.defaultVisitor.apply(this,arguments)},...t})}function hi(e){return U.matchAll(/\w+|\[(\w*)]/g,e).map(e=>e[0]===`[]`?``:e[1]||e[0])}function gi(e){let t={},n=Object.keys(e),r,i=n.length,a;for(r=0;r<i;r++)a=n[r],t[a]=e[a];return t}function _i(e){function t(e,n,r,i){let a=e[i++];if(a===`__proto__`)return!0;let o=Number.isFinite(+a),s=i>=e.length;return a=!a&&U.isArray(r)?r.length:a,s?(U.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!o):((!r[a]||!U.isObject(r[a]))&&(r[a]=[]),t(e,n,r[a],i)&&U.isArray(r[a])&&(r[a]=gi(r[a])),!o)}if(U.isFormData(e)&&U.isFunction(e.entries)){let n={};return U.forEachEntry(e,(e,r)=>{t(hi(e),r,n,0)}),n}return null}function vi(e,t,n){if(U.isString(e))try{return(t||JSON.parse)(e),U.trim(e)}catch(e){if(e.name!==`SyntaxError`)throw e}return(n||JSON.stringify)(e)}var yi={transitional:ai,adapter:[`xhr`,`http`,`fetch`],transformRequest:[function(e,t){let n=t.getContentType()||``,r=n.indexOf(`application/json`)>-1,i=U.isObject(e);if(i&&U.isHTMLForm(e)&&(e=new FormData(e)),U.isFormData(e))return r?JSON.stringify(_i(e)):e;if(U.isArrayBuffer(e)||U.isBuffer(e)||U.isStream(e)||U.isFile(e)||U.isBlob(e)||U.isReadableStream(e))return e;if(U.isArrayBufferView(e))return e.buffer;if(U.isURLSearchParams(e))return t.setContentType(`application/x-www-form-urlencoded;charset=utf-8`,!1),e.toString();let a;if(i){if(n.indexOf(`application/x-www-form-urlencoded`)>-1)return mi(e,this.formSerializer).toString();if((a=U.isFileList(e))||n.indexOf(`multipart/form-data`)>-1){let t=this.env&&this.env.FormData;return Qr(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType(`application/json`,!1),vi(e)):e}],transformResponse:[function(e){let t=this.transitional||yi.transitional,n=t&&t.forcedJSONParsing,r=this.responseType===`json`;if(U.isResponse(e)||U.isReadableStream(e))return e;if(e&&U.isString(e)&&(n&&!this.responseType||r)){let n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(e){if(n)throw e.name===`SyntaxError`?W.from(e,W.ERR_BAD_RESPONSE,this,null,this.response):e}}return e}],timeout:0,xsrfCookieName:`XSRF-TOKEN`,xsrfHeaderName:`X-XSRF-TOKEN`,maxContentLength:-1,maxBodyLength:-1,env:{FormData:pi.classes.FormData,Blob:pi.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:`application/json, text/plain, */*`,"Content-Type":void 0}}};U.forEach([`delete`,`get`,`head`,`post`,`put`,`patch`],e=>{yi.headers[e]={}});var bi=U.toObjectSet([`age`,`authorization`,`content-length`,`content-type`,`etag`,`expires`,`from`,`host`,`if-modified-since`,`if-unmodified-since`,`last-modified`,`location`,`max-forwards`,`proxy-authorization`,`referer`,`retry-after`,`user-agent`]),xi=e=>{let t={},n,r,i;return e&&e.split(`
`).forEach(function(e){i=e.indexOf(`:`),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!(!n||t[n]&&bi[n])&&(n===`set-cookie`?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+`, `+r:r)}),t},Si=Symbol(`internals`);function Ci(e){return e&&String(e).trim().toLowerCase()}function wi(e){return e===!1||e==null?e:U.isArray(e)?e.map(wi):String(e)}function Ti(e){let t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}var Ei=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Di(e,t,n,r,i){if(U.isFunction(r))return r.call(this,t,n);if(i&&(t=n),U.isString(t)){if(U.isString(r))return t.indexOf(r)!==-1;if(U.isRegExp(r))return r.test(t)}}function Oi(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function ki(e,t){let n=U.toCamelCase(` `+t);[`get`,`set`,`has`].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})})}var G=class{constructor(e){e&&this.set(e)}set(e,t,n){let r=this;function i(e,t,n){let i=Ci(t);if(!i)throw Error(`header name must be a non-empty string`);let a=U.findKey(r,i);(!a||r[a]===void 0||n===!0||n===void 0&&r[a]!==!1)&&(r[a||t]=wi(e))}let a=(e,t)=>U.forEach(e,(e,n)=>i(e,n,t));if(U.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(U.isString(e)&&(e=e.trim())&&!Ei(e))a(xi(e),t);else if(U.isObject(e)&&U.isIterable(e)){let n={},r,i;for(let t of e){if(!U.isArray(t))throw TypeError(`Object iterator must return a key-value pair`);n[i=t[0]]=(r=n[i])?U.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}a(n,t)}else e!=null&&i(t,e,n);return this}get(e,t){if(e=Ci(e),e){let n=U.findKey(this,e);if(n){let e=this[n];if(!t)return e;if(t===!0)return Ti(e);if(U.isFunction(t))return t.call(this,e,n);if(U.isRegExp(t))return t.exec(e);throw TypeError(`parser must be boolean|regexp|function`)}}}has(e,t){if(e=Ci(e),e){let n=U.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||Di(this,this[n],n,t)))}return!1}delete(e,t){let n=this,r=!1;function i(e){if(e=Ci(e),e){let i=U.findKey(n,e);i&&(!t||Di(n,n[i],i,t))&&(delete n[i],r=!0)}}return U.isArray(e)?e.forEach(i):i(e),r}clear(e){let t=Object.keys(this),n=t.length,r=!1;for(;n--;){let i=t[n];(!e||Di(this,this[i],i,e,!0))&&(delete this[i],r=!0)}return r}normalize(e){let t=this,n={};return U.forEach(this,(r,i)=>{let a=U.findKey(n,i);if(a){t[a]=wi(r),delete t[i];return}let o=e?Oi(i):String(i).trim();o!==i&&delete t[i],t[o]=wi(r),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let t=Object.create(null);return U.forEach(this,(n,r)=>{n!=null&&n!==!1&&(t[r]=e&&U.isArray(n)?n.join(`, `):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+`: `+t).join(`
`)}getSetCookie(){return this.get(`set-cookie`)||[]}get[Symbol.toStringTag](){return`AxiosHeaders`}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){let n=new this(e);return t.forEach(e=>n.set(e)),n}static accessor(e){let t=(this[Si]=this[Si]={accessors:{}}).accessors,n=this.prototype;function r(e){let r=Ci(e);t[r]||(ki(n,e),t[r]=!0)}return U.isArray(e)?e.forEach(r):r(e),this}};G.accessor([`Content-Type`,`Content-Length`,`Accept`,`Accept-Encoding`,`User-Agent`,`Authorization`]),U.reduceDescriptors(G.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}}),U.freezeMethods(G);function Ai(e,t){let n=this||yi,r=t||n,i=G.from(r.headers),a=r.data;return U.forEach(e,function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function ji(e){return!!(e&&e.__CANCEL__)}var Mi=class extends W{constructor(e,t,n){super(e??`canceled`,W.ERR_CANCELED,t,n),this.name=`CanceledError`,this.__CANCEL__=!0}};function Ni(e,t,n){let r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new W(`Request failed with status code `+n.status,[W.ERR_BAD_REQUEST,W.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Pi(e){let t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||``}function Fi(e,t){e||=10;let n=Array(e),r=Array(e),i=0,a=0,o;return t=t===void 0?1e3:t,function(s){let c=Date.now(),l=r[a];o||=c,n[i]=s,r[i]=c;let u=a,d=0;for(;u!==i;)d+=n[u++],u%=e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),c-o<t)return;let f=l&&c-l;return f?Math.round(d*1e3/f):void 0}}function Ii(e,t){let n=0,r=1e3/t,i,a,o=(t,r=Date.now())=>{n=r,i=null,a&&=(clearTimeout(a),null),e(...t)};return[(...e)=>{let t=Date.now(),s=t-n;s>=r?o(e,t):(i=e,a||=setTimeout(()=>{a=null,o(i)},r-s))},()=>i&&o(i)]}const Li=(e,t,n=3)=>{let r=0,i=Fi(50,250);return Ii(n=>{let a=n.loaded,o=n.lengthComputable?n.total:void 0,s=a-r,c=i(s),l=a<=o;r=a,e({loaded:a,total:o,progress:o?a/o:void 0,bytes:s,rate:c||void 0,estimated:c&&o&&l?(o-a)/c:void 0,event:n,lengthComputable:o!=null,[t?`download`:`upload`]:!0})},n)},Ri=(e,t)=>{let n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},zi=e=>(...t)=>U.asap(()=>e(...t));var Bi=pi.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,pi.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(pi.origin),pi.navigator&&/(msie|trident)/i.test(pi.navigator.userAgent)):()=>!0,Vi=pi.hasStandardBrowserEnv?{write(e,t,n,r,i,a,o){if(typeof document>`u`)return;let s=[`${e}=${encodeURIComponent(t)}`];U.isNumber(n)&&s.push(`expires=${new Date(n).toUTCString()}`),U.isString(r)&&s.push(`path=${r}`),U.isString(i)&&s.push(`domain=${i}`),a===!0&&s.push(`secure`),U.isString(o)&&s.push(`SameSite=${o}`),document.cookie=s.join(`; `)},read(e){if(typeof document>`u`)return null;let t=document.cookie.match(RegExp(`(?:^|; )`+e+`=([^;]*)`));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,``,Date.now()-864e5,`/`)}}:{write(){},read(){return null},remove(){}};function Hi(e){return typeof e==`string`?/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e):!1}function Ui(e,t){return t?e.replace(/\/?\/$/,``)+`/`+t.replace(/^\/+/,``):e}function Wi(e,t,n){let r=!Hi(t);return e&&(r||n==0)?Ui(e,t):t}var Gi=e=>e instanceof G?{...e}:e;function Ki(e,t){t||={};let n={};function r(e,t,n,r){return U.isPlainObject(e)&&U.isPlainObject(t)?U.merge.call({caseless:r},e,t):U.isPlainObject(t)?U.merge({},t):U.isArray(t)?t.slice():t}function i(e,t,n,i){if(!U.isUndefined(t))return r(e,t,n,i);if(!U.isUndefined(e))return r(void 0,e,n,i)}function a(e,t){if(!U.isUndefined(t))return r(void 0,t)}function o(e,t){if(!U.isUndefined(t))return r(void 0,t);if(!U.isUndefined(e))return r(void 0,e)}function s(n,i,a){if(a in t)return r(n,i);if(a in e)return r(void 0,n)}let c={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:(e,t,n)=>i(Gi(e),Gi(t),n,!0)};return U.forEach(Object.keys({...e,...t}),function(r){if(r===`__proto__`||r===`constructor`||r===`prototype`)return;let a=U.hasOwnProp(c,r)?c[r]:i,o=a(e[r],t[r],r);U.isUndefined(o)&&a!==s||(n[r]=o)}),n}var qi=e=>{let t=Ki({},e),{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:a,headers:o,auth:s}=t;if(t.headers=o=G.from(o),t.url=ri(Wi(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),s&&o.set(`Authorization`,`Basic `+btoa((s.username||``)+`:`+(s.password?unescape(encodeURIComponent(s.password)):``))),U.isFormData(n)){if(pi.hasStandardBrowserEnv||pi.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(U.isFunction(n.getHeaders)){let e=n.getHeaders(),t=[`content-type`,`content-length`];Object.entries(e).forEach(([e,n])=>{t.includes(e.toLowerCase())&&o.set(e,n)})}}if(pi.hasStandardBrowserEnv&&(r&&U.isFunction(r)&&(r=r(t)),r||r!==!1&&Bi(t.url))){let e=i&&a&&Vi.read(a);e&&o.set(i,e)}return t},Ji=typeof XMLHttpRequest<`u`&&function(e){return new Promise(function(t,n){let r=qi(e),i=r.data,a=G.from(r.headers).normalize(),{responseType:o,onUploadProgress:s,onDownloadProgress:c}=r,l,u,d,f,p;function m(){f&&f(),p&&p(),r.cancelToken&&r.cancelToken.unsubscribe(l),r.signal&&r.signal.removeEventListener(`abort`,l)}let h=new XMLHttpRequest;h.open(r.method.toUpperCase(),r.url,!0),h.timeout=r.timeout;function g(){if(!h)return;let r=G.from(`getAllResponseHeaders`in h&&h.getAllResponseHeaders());Ni(function(e){t(e),m()},function(e){n(e),m()},{data:!o||o===`text`||o===`json`?h.responseText:h.response,status:h.status,statusText:h.statusText,headers:r,config:e,request:h}),h=null}`onloadend`in h?h.onloadend=g:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf(`file:`)===0)||setTimeout(g)},h.onabort=function(){h&&=(n(new W(`Request aborted`,W.ECONNABORTED,e,h)),null)},h.onerror=function(t){let r=new W(t&&t.message?t.message:`Network Error`,W.ERR_NETWORK,e,h);r.event=t||null,n(r),h=null},h.ontimeout=function(){let t=r.timeout?`timeout of `+r.timeout+`ms exceeded`:`timeout exceeded`,i=r.transitional||ai;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new W(t,i.clarifyTimeoutError?W.ETIMEDOUT:W.ECONNABORTED,e,h)),h=null},i===void 0&&a.setContentType(null),`setRequestHeader`in h&&U.forEach(a.toJSON(),function(e,t){h.setRequestHeader(t,e)}),U.isUndefined(r.withCredentials)||(h.withCredentials=!!r.withCredentials),o&&o!==`json`&&(h.responseType=r.responseType),c&&([d,p]=Li(c,!0),h.addEventListener(`progress`,d)),s&&h.upload&&([u,f]=Li(s),h.upload.addEventListener(`progress`,u),h.upload.addEventListener(`loadend`,f)),(r.cancelToken||r.signal)&&(l=t=>{h&&=(n(!t||t.type?new Mi(null,e,h):t),h.abort(),null)},r.cancelToken&&r.cancelToken.subscribe(l),r.signal&&(r.signal.aborted?l():r.signal.addEventListener(`abort`,l)));let _=Pi(r.url);if(_&&pi.protocols.indexOf(_)===-1){n(new W(`Unsupported protocol `+_+`:`,W.ERR_BAD_REQUEST,e));return}h.send(i||null)})},Yi=(e,t)=>{let{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n=new AbortController,r,i=function(e){if(!r){r=!0,o();let t=e instanceof Error?e:this.reason;n.abort(t instanceof W?t:new Mi(t instanceof Error?t.message:t))}},a=t&&setTimeout(()=>{a=null,i(new W(`timeout of ${t}ms exceeded`,W.ETIMEDOUT))},t),o=()=>{e&&=(a&&clearTimeout(a),a=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener(`abort`,i)}),null)};e.forEach(e=>e.addEventListener(`abort`,i));let{signal:s}=n;return s.unsubscribe=()=>U.asap(o),s}};const Xi=function*(e,t){let n=e.byteLength;if(!t||n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},Zi=async function*(e,t){for await(let n of Qi(e))yield*Xi(n,t)};var Qi=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}let t=e.getReader();try{for(;;){let{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}};const $i=(e,t,n,r)=>{let i=Zi(e,t),a=0,o,s=e=>{o||(o=!0,r&&r(e))};return new ReadableStream({async pull(e){try{let{done:t,value:r}=await i.next();if(t){s(),e.close();return}let o=r.byteLength;n&&n(a+=o),e.enqueue(new Uint8Array(r))}catch(e){throw s(e),e}},cancel(e){return s(e),i.return()}},{highWaterMark:2})};var ea=64*1024,{isFunction:ta}=U,na=(({Request:e,Response:t})=>({Request:e,Response:t}))(U.global),{ReadableStream:ra,TextEncoder:ia}=U.global,aa=(e,...t)=>{try{return!!e(...t)}catch{return!1}},oa=e=>{e=U.merge.call({skipUndefined:!0},na,e);let{fetch:t,Request:n,Response:r}=e,i=t?ta(t):typeof fetch==`function`,a=ta(n),o=ta(r);if(!i)return!1;let s=i&&ta(ra),c=i&&(typeof ia==`function`?(e=>t=>e.encode(t))(new ia):async e=>new Uint8Array(await new n(e).arrayBuffer())),l=a&&s&&aa(()=>{let e=!1,t=new n(pi.origin,{body:new ra,method:`POST`,get duplex(){return e=!0,`half`}}).headers.has(`Content-Type`);return e&&!t}),u=o&&s&&aa(()=>U.isReadableStream(new r(``).body)),d={stream:u&&(e=>e.body)};i&&[`text`,`arrayBuffer`,`blob`,`formData`,`stream`].forEach(e=>{!d[e]&&(d[e]=(t,n)=>{let r=t&&t[e];if(r)return r.call(t);throw new W(`Response type '${e}' is not supported`,W.ERR_NOT_SUPPORT,n)})});let f=async e=>{if(e==null)return 0;if(U.isBlob(e))return e.size;if(U.isSpecCompliantForm(e))return(await new n(pi.origin,{method:`POST`,body:e}).arrayBuffer()).byteLength;if(U.isArrayBufferView(e)||U.isArrayBuffer(e))return e.byteLength;if(U.isURLSearchParams(e)&&(e+=``),U.isString(e))return(await c(e)).byteLength},p=async(e,t)=>U.toFiniteNumber(e.getContentLength())??f(t);return async e=>{let{url:i,method:o,data:s,signal:c,cancelToken:f,timeout:m,onDownloadProgress:h,onUploadProgress:g,responseType:_,headers:v,withCredentials:y=`same-origin`,fetchOptions:b}=qi(e),x=t||fetch;_=_?(_+``).toLowerCase():`text`;let S=Yi([c,f&&f.toAbortSignal()],m),C=null,w=S&&S.unsubscribe&&(()=>{S.unsubscribe()}),T;try{if(g&&l&&o!==`get`&&o!==`head`&&(T=await p(v,s))!==0){let e=new n(i,{method:`POST`,body:s,duplex:`half`}),t;if(U.isFormData(s)&&(t=e.headers.get(`content-type`))&&v.setContentType(t),e.body){let[t,n]=Ri(T,Li(zi(g)));s=$i(e.body,ea,t,n)}}U.isString(y)||(y=y?`include`:`omit`);let t=a&&`credentials`in n.prototype,c={...b,signal:S,method:o.toUpperCase(),headers:v.normalize().toJSON(),body:s,duplex:`half`,credentials:t?y:void 0};C=a&&new n(i,c);let f=await(a?x(C,b):x(i,c)),m=u&&(_===`stream`||_===`response`);if(u&&(h||m&&w)){let e={};[`status`,`statusText`,`headers`].forEach(t=>{e[t]=f[t]});let t=U.toFiniteNumber(f.headers.get(`content-length`)),[n,i]=h&&Ri(t,Li(zi(h),!0))||[];f=new r($i(f.body,ea,n,()=>{i&&i(),w&&w()}),e)}_||=`text`;let E=await d[U.findKey(d,_)||`text`](f,e);return!m&&w&&w(),await new Promise((t,n)=>{Ni(t,n,{data:E,headers:G.from(f.headers),status:f.status,statusText:f.statusText,config:e,request:C})})}catch(t){throw w&&w(),t&&t.name===`TypeError`&&/Load failed|fetch/i.test(t.message)?Object.assign(new W(`Network Error`,W.ERR_NETWORK,e,C,t&&t.response),{cause:t.cause||t}):W.from(t,t&&t.code,e,C,t&&t.response)}}},sa=new Map;const ca=e=>{let t=e&&e.env||{},{fetch:n,Request:r,Response:i}=t,a=[r,i,n],o=a.length,s,c,l=sa;for(;o--;)s=a[o],c=l.get(s),c===void 0&&l.set(s,c=o?new Map:oa(t)),l=c;return c};ca();var la={http:null,xhr:Ji,fetch:{get:ca}};U.forEach(la,(e,t)=>{if(e){try{Object.defineProperty(e,`name`,{value:t})}catch{}Object.defineProperty(e,`adapterName`,{value:t})}});var ua=e=>`- ${e}`,da=e=>U.isFunction(e)||e===null||e===!1;function fa(e,t){e=U.isArray(e)?e:[e];let{length:n}=e,r,i,a={};for(let o=0;o<n;o++){r=e[o];let n;if(i=r,!da(r)&&(i=la[(n=String(r)).toLowerCase()],i===void 0))throw new W(`Unknown adapter '${n}'`);if(i&&(U.isFunction(i)||(i=i.get(t))))break;a[n||`#`+o]=i}if(!i){let e=Object.entries(a).map(([e,t])=>`adapter ${e} `+(t===!1?`is not supported by the environment`:`is not available in the build`));throw new W(`There is no suitable adapter to dispatch the request `+(n?e.length>1?`since :
`+e.map(ua).join(`
`):` `+ua(e[0]):`as no adapter specified`),`ERR_NOT_SUPPORT`)}return i}var pa={getAdapter:fa,adapters:la};function ma(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Mi(null,e)}function ha(e){return ma(e),e.headers=G.from(e.headers),e.data=Ai.call(e,e.transformRequest),[`post`,`put`,`patch`].indexOf(e.method)!==-1&&e.headers.setContentType(`application/x-www-form-urlencoded`,!1),pa.getAdapter(e.adapter||yi.adapter,e)(e).then(function(t){return ma(e),t.data=Ai.call(e,e.transformResponse,t),t.headers=G.from(t.headers),t},function(t){return ji(t)||(ma(e),t&&t.response&&(t.response.data=Ai.call(e,e.transformResponse,t.response),t.response.headers=G.from(t.response.headers))),Promise.reject(t)})}const ga=`1.13.5`;var _a={};[`object`,`boolean`,`number`,`function`,`string`,`symbol`].forEach((e,t)=>{_a[e]=function(n){return typeof n===e||`a`+(t<1?`n `:` `)+e}});var va={};_a.transitional=function(e,t,n){function r(e,t){return`[Axios v`+ga+`] Transitional option '`+e+`'`+t+(n?`. `+n:``)}return(n,i,a)=>{if(e===!1)throw new W(r(i,` has been removed`+(t?` in `+t:``)),W.ERR_DEPRECATED);return t&&!va[i]&&(va[i]=!0,console.warn(r(i,` has been deprecated since v`+t+` and will be removed in the near future`))),e?e(n,i,a):!0}},_a.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function ya(e,t,n){if(typeof e!=`object`)throw new W(`options must be an object`,W.ERR_BAD_OPTION_VALUE);let r=Object.keys(e),i=r.length;for(;i-- >0;){let a=r[i],o=t[a];if(o){let t=e[a],n=t===void 0||o(t,a,e);if(n!==!0)throw new W(`option `+a+` must be `+n,W.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new W(`Unknown option `+a,W.ERR_BAD_OPTION)}}var ba={assertOptions:ya,validators:_a},xa=ba.validators,Sa=class{constructor(e){this.defaults=e||{},this.interceptors={request:new ii,response:new ii}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=Error();let n=t.stack?t.stack.replace(/^.+\n/,``):``;try{e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,``))&&(e.stack+=`
`+n):e.stack=n}catch{}}throw e}}_request(e,t){typeof e==`string`?(t||={},t.url=e):t=e||{},t=Ki(this.defaults,t);let{transitional:n,paramsSerializer:r,headers:i}=t;n!==void 0&&ba.assertOptions(n,{silentJSONParsing:xa.transitional(xa.boolean),forcedJSONParsing:xa.transitional(xa.boolean),clarifyTimeoutError:xa.transitional(xa.boolean),legacyInterceptorReqResOrdering:xa.transitional(xa.boolean)},!1),r!=null&&(U.isFunction(r)?t.paramsSerializer={serialize:r}:ba.assertOptions(r,{encode:xa.function,serialize:xa.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls===void 0?t.allowAbsoluteUrls=!0:t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls),ba.assertOptions(t,{baseUrl:xa.spelling(`baseURL`),withXsrfToken:xa.spelling(`withXSRFToken`)},!0),t.method=(t.method||this.defaults.method||`get`).toLowerCase();let a=i&&U.merge(i.common,i[t.method]);i&&U.forEach([`delete`,`get`,`head`,`post`,`put`,`patch`,`common`],e=>{delete i[e]}),t.headers=G.concat(a,i);let o=[],s=!0;this.interceptors.request.forEach(function(e){if(typeof e.runWhen==`function`&&e.runWhen(t)===!1)return;s&&=e.synchronous;let n=t.transitional||ai;n&&n.legacyInterceptorReqResOrdering?o.unshift(e.fulfilled,e.rejected):o.push(e.fulfilled,e.rejected)});let c=[];this.interceptors.response.forEach(function(e){c.push(e.fulfilled,e.rejected)});let l,u=0,d;if(!s){let e=[ha.bind(this),void 0];for(e.unshift(...o),e.push(...c),d=e.length,l=Promise.resolve(t);u<d;)l=l.then(e[u++],e[u++]);return l}d=o.length;let f=t;for(;u<d;){let e=o[u++],t=o[u++];try{f=e(f)}catch(e){t.call(this,e);break}}try{l=ha.call(this,f)}catch(e){return Promise.reject(e)}for(u=0,d=c.length;u<d;)l=l.then(c[u++],c[u++]);return l}getUri(e){return e=Ki(this.defaults,e),ri(Wi(e.baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};U.forEach([`delete`,`get`,`head`,`options`],function(e){Sa.prototype[e]=function(t,n){return this.request(Ki(n||{},{method:e,url:t,data:(n||{}).data}))}}),U.forEach([`post`,`put`,`patch`],function(e){function t(t){return function(n,r,i){return this.request(Ki(i||{},{method:e,headers:t?{"Content-Type":`multipart/form-data`}:{},url:n,data:r}))}}Sa.prototype[e]=t(),Sa.prototype[e+`Form`]=t(!0)});var Ca=class e{constructor(e){if(typeof e!=`function`)throw TypeError(`executor must be a function.`);let t;this.promise=new Promise(function(e){t=e});let n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t,r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,r,i){n.reason||(n.reason=new Mi(e,r,i),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){let e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;return{token:new e(function(e){t=e}),cancel:t}}};function wa(e){return function(t){return e.apply(null,t)}}function Ta(e){return U.isObject(e)&&e.isAxiosError===!0}var Ea={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Ea).forEach(([e,t])=>{Ea[t]=e});function Da(e){let t=new Sa(e),n=Vn(Sa.prototype.request,t);return U.extend(n,Sa.prototype,t,{allOwnKeys:!0}),U.extend(n,t,null,{allOwnKeys:!0}),n.create=function(t){return Da(Ki(e,t))},n}var Oa=Da(yi);Oa.Axios=Sa,Oa.CanceledError=Mi,Oa.CancelToken=Ca,Oa.isCancel=ji,Oa.VERSION=ga,Oa.toFormData=Qr,Oa.AxiosError=W,Oa.Cancel=Oa.CanceledError,Oa.all=function(e){return Promise.all(e)},Oa.spread=wa,Oa.isAxiosError=Ta,Oa.mergeConfig=Ki,Oa.AxiosHeaders=G,Oa.formToJSON=e=>_i(U.isHTMLForm(e)?new FormData(e):e),Oa.getAdapter=pa.getAdapter,Oa.HttpStatusCode=Ea,Oa.default=Oa;var K=Oa.create({baseURL:`/`,headers:{"Content-Type":`application/json`,Accept:`application/json`},withCredentials:!0,timeout:3e4});K.interceptors.request.use(e=>e,e=>Promise.reject(e)),K.interceptors.response.use(e=>e,e=>(e.response?.status===401&&!window.location.pathname.includes(`/login`)&&(localStorage.removeItem(`user`),window.location.href=`/login`),Promise.reject(e)));var ka=`/api/auth.php`,Aa=`/api/register.php`,ja={async login(e,t){let n=await K.post(ka,{username:e,password:t},{params:{action:`login`}});if(n.data.success)return localStorage.setItem(`user`,JSON.stringify(n.data.user)),n.data;throw Error(n.data.message||`Login failed`)},async register(e){try{let t;t=e instanceof FormData?await K.post(Aa,e,{headers:{"Content-Type":`multipart/form-data`}}):await K.post(Aa,e);let n=t.data;if(typeof n==`string`){let e=n.match(/\{.*\}/s);e&&(n=JSON.parse(e[0]))}return n}catch(e){let t=e.response?.data?.message||e.message||`Registration failed`;throw Error(t)}},async verifyEmail(e){try{return(await K.post(`/api/verify-email.php`,{token:e})).data}catch(e){let t=e.response?.data?.message||`Email verification failed`;throw Error(t)}},async logout(){try{await K.post(ka,{},{params:{action:`logout`}})}catch{}finally{localStorage.removeItem(`user`);try{let{getAuth:e,signOut:t}=await S(async()=>{let{getAuth:e,signOut:t}=await Promise.resolve().then(()=>fO);return{getAuth:e,signOut:t}},void 0);await t(e())}catch{}window.location.href=`/login`}},async checkSession(){try{let e=await K.get(ka,{params:{action:`check`}});if(e.data.success&&e.data.loggedIn){let t=this.getCurrentUser();t&&localStorage.setItem(`user`,JSON.stringify({...t,...e.data.user}))}return e.data}catch{return{success:!1,loggedIn:!1}}},getCurrentUser(){let e=localStorage.getItem(`user`);return e?JSON.parse(e):null},getCurrentUserId(){return this.getCurrentUser()?.user_id||null},getCurrentUserName(){let e=this.getCurrentUser();return e?.full_name||e?.username||`User`},getCurrentUserEmail(){return this.getCurrentUser()?.email||null},isAuthenticated(){return!!this.getCurrentUser()},isAdmin(){let e=this.getCurrentUser();return e?.role?.includes(`_admin`)||e?.is_admin===1},getAdminRole(){let e=this.getCurrentUser();return this.isAdmin()?e?.role:null},isSuperAdmin(){return this.getCurrentUser()?.role===`super_admin`},isServiceAdmin(){let e=this.getCurrentUser();return[`safety_admin`,`welfare_admin`,`health_admin`,`disaster_admin`,`youth_admin`].includes(e?.role)},getServiceArea(){return{safety_admin:`safety`,welfare_admin:`welfare`,health_admin:`health`,disaster_admin:`disaster`,youth_admin:`youth`,super_admin:`all`}[this.getCurrentUser()?.role]||null},updateUserData(e){let t=this.getCurrentUser();if(t){let n={...t,...e};return localStorage.setItem(`user`,JSON.stringify(n)),n}return null},clearUserData(){localStorage.removeItem(`user`)}};function Ma(){let e=Qe(),[t,n]=(0,v.useState)({username:``,password:``}),[r,i]=(0,v.useState)(``),[a,o]=(0,v.useState)(!1),s=e=>{n({...t,[e.target.name]:e.target.value})};return(0,H.jsx)(`div`,{className:`login-page`,children:(0,H.jsxs)(`div`,{className:`login-container`,children:[(0,H.jsxs)(`div`,{className:`login-header`,children:[(0,H.jsx)(`div`,{className:`logo`,children:(0,H.jsx)(`img`,{src:`/prc-logo.png`,alt:`PRC Logo`,onError:e=>e.target.style.display=`none`})}),(0,H.jsx)(`h1`,{children:`Philippine Red Cross`}),(0,H.jsx)(`p`,{children:`Management System`}),(0,H.jsx)(`h2`,{children:`Sign in to continue`})]}),r&&(0,H.jsxs)(`div`,{className:`error-message`,children:[(0,H.jsx)(`i`,{className:`fas fa-exclamation-circle`}),r]}),(0,H.jsxs)(`form`,{onSubmit:async n=>{n.preventDefault(),i(``),o(!0);try{let n=await ja.login(t.username,t.password);if(n.success){let t=n.user;t.is_admin===1||t.role===`admin`?e(`/admin/dashboard`):e(`/user/dashboard`)}}catch(e){i(e.message||`Login failed. Please try again.`)}finally{o(!1)}},className:`login-form`,children:[(0,H.jsxs)(`div`,{className:`form-group`,children:[(0,H.jsxs)(`label`,{htmlFor:`username`,children:[(0,H.jsx)(`i`,{className:`fas fa-user`}),` Username or Email`]}),(0,H.jsx)(`input`,{type:`text`,id:`username`,name:`username`,value:t.username,onChange:s,required:!0,placeholder:`Enter your username`})]}),(0,H.jsxs)(`div`,{className:`form-group`,children:[(0,H.jsxs)(`label`,{htmlFor:`password`,children:[(0,H.jsx)(`i`,{className:`fas fa-lock`}),` Password`]}),(0,H.jsx)(`input`,{type:`password`,id:`password`,name:`password`,value:t.password,onChange:s,required:!0,placeholder:`Enter your password`})]}),(0,H.jsx)(`button`,{type:`submit`,className:`btn-login`,disabled:a,children:a?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fas fa-spinner fa-spin`}),` Logging in...`]}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fas fa-sign-in-alt`}),` Login`]})})]}),(0,H.jsxs)(`div`,{className:`login-footer`,children:[(0,H.jsxs)(V,{to:`/`,children:[(0,H.jsx)(`i`,{className:`fas fa-arrow-left`}),` Back to Home`]}),(0,H.jsxs)(V,{to:`/register`,children:[`Create Account `,(0,H.jsx)(`i`,{className:`fas fa-arrow-right`})]})]})]})})}function Na({message:e,type:t,onClose:n}){return(0,v.useEffect)(()=>{let e=setTimeout(n,4e3);return()=>clearTimeout(e)},[n]),(0,H.jsxs)(`div`,{className:`toast toast--${t}`,onClick:n,children:[(0,H.jsx)(`div`,{className:`toast__icon`,children:(0,H.jsx)(`i`,{className:`fas ${t===`error`?`fa-circle-exclamation`:t===`success`?`fa-circle-check`:`fa-circle-info`}`})}),(0,H.jsx)(`div`,{className:`toast__content`,children:(0,H.jsx)(`div`,{className:`toast__message`,children:e})}),(0,H.jsx)(`button`,{className:`toast__close`,children:(0,H.jsx)(`i`,{className:`fas fa-xmark`})})]})}function Pa({password:e}){let[t,n]=(0,v.useState)(0),[r,i]=(0,v.useState)([]);(0,v.useEffect)(()=>{let t=[{regex:/.{8,}/,message:`At least 8 characters`},{regex:/[A-Z]/,message:`Uppercase letter`},{regex:/[a-z]/,message:`Lowercase letter`},{regex:/[0-9]/,message:`Number`},{regex:/[^A-Za-z0-9]/,message:`Special character`}],r=t.filter(t=>t.regex.test(e)),a=t.filter(t=>!t.regex.test(e));n(r.length/t.length*100),i(a.map(e=>e.message))},[e]);let a=()=>t<40?`#c41e3a`:t<70?`#f59e0b`:`#10b981`;return e?(0,H.jsxs)(`div`,{className:`password-strength`,children:[(0,H.jsx)(`div`,{className:`strength-meter`,children:(0,H.jsx)(`div`,{className:`strength-meter-fill`,style:{width:`${t}%`,backgroundColor:a()}})}),(0,H.jsxs)(`div`,{className:`strength-label`,style:{color:a()},children:[t<40?`Weak`:t<70?`Medium`:`Strong`,` Password`]}),r.length>0&&(0,H.jsx)(`div`,{className:`strength-feedback`,children:r.map((e,t)=>(0,H.jsxs)(`small`,{children:[` `,e]},t))})]}):null}function Fa({value:e,onChange:t,error:n,onBlur:r}){let i=e=>{let t=e.replace(/\D/g,``);if(t.startsWith(`02`)&&t.length<=10){if(t.length>6)return t.replace(/^(\d{2})(\d{4})(\d{0,4})/,(e,t,n,r)=>r?`${t}-${n}-${r}`:`${t}-${n}`)}else if(t.startsWith(`09`)&&t.length<=11&&t.length>7)return t.replace(/^(\d{4})(\d{3})(\d{0,4})/,(e,t,n,r)=>r?`${t}-${n}-${r}`:`${t}-${n}`);return t},a=e=>{let n=i(e.target.value);t({...e,target:{...e.target,value:n,name:e.target.name}})},o=e=>{let t=e.replace(/\D/g,``);return/^(09\d{9}|02\d{8}|\d{8})$/.test(t)};return(0,H.jsxs)(`div`,{className:`form-group`,children:[(0,H.jsxs)(`label`,{htmlFor:`phone`,children:[(0,H.jsx)(`i`,{className:`fas fa-phone`}),` Phone Number`,` `,(0,H.jsx)(`span`,{className:`required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`tel`,id:`phone`,name:`phone`,value:e,onChange:a,onBlur:r,placeholder:`09XX-XXX-XXXX or 02-XXXX-XXXX`,className:n?`error`:``,required:!0}),e&&(0,H.jsxs)(`small`,{className:o(e)?`valid`:`invalid`,children:[(0,H.jsx)(`i`,{className:`fas ${o(e)?`fa-check-circle`:`fa-info-circle`}`}),o(e)?` Valid Philippine number`:` Please enter a valid Philippine number (e.g., 09123456789 or 0285270864)`]}),n&&(0,H.jsx)(`span`,{className:`error-message`,children:n})]})}function Ia({onVerify:e,onExpired:t}){let n=(0,v.useRef)(null),[r,i]=(0,v.useState)(!1),[a,o]=(0,v.useState)(!1);(0,v.useEffect)(()=>(new Promise(e=>{if(window.grecaptcha){e();return}let t=document.createElement(`script`);t.src=`https://www.google.com/recaptcha/api.js?render=explicit`,t.async=!0,t.defer=!0,t.onload=()=>{window.grecaptcha.ready(()=>{e()})},document.head.appendChild(t)}).then(()=>{i(!0)}),()=>{if(window.grecaptcha&&window.__recaptchaWidgetId!==void 0)try{window.grecaptcha.reset(window.__recaptchaWidgetId)}catch(e){console.log(`Error resetting reCAPTCHA:`,e)}}),[]),(0,v.useEffect)(()=>{if(r&&window.grecaptcha&&n.current&&!a){if(n.current.hasChildNodes())for(;n.current.firstChild;)n.current.removeChild(n.current.firstChild);try{let r=window.grecaptcha.render(n.current,{sitekey:`6LdKInQsAAAAAFJZRd65k9ftb0AqHunJZehNU7fu`,callback:t=>{e(t)},"expired-callback":()=>{t()},"error-callback":()=>{console.error(`reCAPTCHA error`),t()},theme:`light`,size:`normal`});window.__recaptchaWidgetId=r,o(!0)}catch(e){console.error(`Error rendering reCAPTCHA:`,e)}}},[r,e,t,a]);let s=()=>{if(window.grecaptcha&&window.__recaptchaWidgetId!==void 0)try{window.grecaptcha.reset(window.__recaptchaWidgetId)}catch(e){console.log(`Error resetting reCAPTCHA:`,e)}};return(0,v.useEffect)(()=>{window.__resetRecaptcha=s},[]),(0,H.jsxs)(`div`,{className:`google-recaptcha`,children:[(0,H.jsx)(`div`,{ref:n}),!r&&(0,H.jsxs)(`div`,{className:`recaptcha-loading`,children:[(0,H.jsx)(`i`,{className:`fas fa-spinner fa-spin`}),` Loading reCAPTCHA...`]})]})}function La(){let e=Qe(),[t,n]=(0,v.useState)(1),[r,i]=(0,v.useState)({username:``,password:``,confirmPassword:``,first_name:``,last_name:``,email:``,phone:``,gender:``,user_type:``,rcy_role:``,maab_id:null,supporting_doc:null}),[a,o]=(0,v.useState)({}),[s,c]=(0,v.useState)(!1),[l,u]=(0,v.useState)(!1),[d,f]=(0,v.useState)(!1),[p,m]=(0,v.useState)(``),[h,g]=(0,v.useState)({}),[_,y]=(0,v.useState)(null),[b,x]=(0,v.useState)(0),S=(e,t=`error`)=>{y({message:e,type:t})},C=e=>{let{name:t,value:n,type:r,files:s}=e.target;i(r===`file`?e=>({...e,[t]:s[0]}):e=>({...e,[t]:n})),a[t]&&o(e=>({...e,[t]:null}))},w=e=>{g(t=>({...t,[e]:!0}))},T=e=>{i({...r,user_type:e}),n(e===`non_rcy_member`?3:2)},E=e=>{f(!0),m(e),a.captcha&&o(e=>({...e,captcha:null}))},D=()=>{f(!1),m(``),x(e=>e+1)},O=()=>{f(!1),m(``),x(e=>e+1),window.__resetRecaptcha&&window.__resetRecaptcha()},ee=()=>{let e={};if(r.username?/^[a-zA-Z0-9_]{4,20}$/.test(r.username)||(e.username=`Username must be 4-20 characters (letters, numbers, underscores)`):e.username=`Username is required`,!r.password)e.password=`Password is required`;else{let t=[];r.password.length<8&&t.push(`at least 8 characters`),/[A-Z]/.test(r.password)||t.push(`an uppercase letter`),/[a-z]/.test(r.password)||t.push(`a lowercase letter`),/[0-9]/.test(r.password)||t.push(`a number`),/[^A-Za-z0-9]/.test(r.password)||t.push(`a special character`),t.length>0&&(e.password=`Password must contain: ${t.join(`, `)}`)}if(r.password!==r.confirmPassword&&(e.confirmPassword=`Passwords do not match`),r.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(e.email=`Invalid email format`):e.email=`Email is required`,!r.phone)e.phone=`Phone number is required`;else{let t=r.phone.replace(/\D/g,``);/^(09\d{9}|02\d{8}|\d{8})$/.test(t)||(e.phone=`Please enter a valid Philippine number`)}return r.first_name||(e.first_name=`First name is required`),r.last_name||(e.last_name=`Last name is required`),r.gender||(e.gender=`Gender is required`),r.user_type===`rcy_member`&&(r.rcy_role||(e.rcy_role=`RCY role is required`),r.maab_id||(e.maab_id=`MAAB ID is required`),r.supporting_doc||(e.supporting_doc=`Supporting document is required`)),e},k=async e=>{e.preventDefault(),o({});let t=ee();if(Object.keys(t).length>0){o(t);let e=Object.values(t)[0];S(e,`error`);return}if(!d||!p){let e=`Please complete the reCAPTCHA verification`;o({captcha:e}),S(e,`error`);return}c(!0);try{let e=new FormData;Object.keys(r).forEach(t=>{r[t]!==null&&r[t]!==``&&e.append(t,r[t])}),e.append(`recaptcha_token`,p);let t=await ja.register(e);t.success?(u(!0),O()):(o({submit:t.message}),S(t.message,`error`),O())}catch(e){let t=e.message||`Registration failed. Please try again.`;o({submit:t}),S(t,`error`),O()}finally{c(!1)}},te=()=>{u(!1),e(`/login`)};return t===1?(0,H.jsxs)(`div`,{className:`register-page`,children:[(0,H.jsxs)(`div`,{className:`register-container account-type-selection`,children:[(0,H.jsxs)(`div`,{className:`register-header`,children:[(0,H.jsx)(`div`,{className:`logo`,children:(0,H.jsx)(`img`,{src:`/prc-logo.png`,alt:`PRC Logo`,onError:e=>e.target.style.display=`none`})}),(0,H.jsx)(`h1`,{children:`Philippine Red Cross`}),(0,H.jsx)(`p`,{children:`Management System`}),(0,H.jsxs)(`h2`,{children:[(0,H.jsx)(`i`,{className:`fas fa-user-plus`}),` Create Your Account`]}),(0,H.jsx)(`p`,{className:`subtitle`,children:`Join the Philippine Red Cross community. All fields marked with * are required.`})]}),(0,H.jsxs)(`div`,{className:`account-type-section`,children:[(0,H.jsxs)(`label`,{className:`account-type-label`,children:[`Account Type `,(0,H.jsx)(`span`,{className:`required`,children:`*`})]}),(0,H.jsxs)(`div`,{className:`account-type-card`,onClick:()=>T(`non_rcy_member`),children:[(0,H.jsx)(`div`,{className:`card-icon`,children:(0,H.jsx)(`i`,{className:`fas fa-user`})}),(0,H.jsxs)(`div`,{className:`card-content`,children:[(0,H.jsx)(`h3`,{children:`Non-RCY Member`}),(0,H.jsx)(`p`,{children:`General community member account`})]}),(0,H.jsx)(`div`,{className:`card-arrow`,children:(0,H.jsx)(`i`,{className:`fas fa-chevron-right`})})]}),(0,H.jsxs)(`div`,{className:`account-type-card rcy-card`,onClick:()=>T(`rcy_member`),children:[(0,H.jsx)(`div`,{className:`card-icon`,children:(0,H.jsx)(`i`,{className:`fas fa-users`})}),(0,H.jsxs)(`div`,{className:`card-content`,children:[(0,H.jsx)(`h3`,{children:`RCY Member`}),(0,H.jsx)(`p`,{className:`card-subtitle`,children:`Red Cross Youth member with specialized access`}),(0,H.jsxs)(`ul`,{className:`benefits-list`,children:[(0,H.jsxs)(`li`,{children:[(0,H.jsx)(`i`,{className:`fas fa-check`}),` All Non-RCY Member benefits`]}),(0,H.jsxs)(`li`,{children:[(0,H.jsx)(`i`,{className:`fas fa-check`}),` Access to RCY programs and activities`]}),(0,H.jsxs)(`li`,{children:[(0,H.jsx)(`i`,{className:`fas fa-check`}),` Member directory and networking`]}),(0,H.jsxs)(`li`,{children:[(0,H.jsx)(`i`,{className:`fas fa-check`}),` Advanced training opportunities`]}),(0,H.jsxs)(`li`,{children:[(0,H.jsx)(`i`,{className:`fas fa-check`}),` Leadership development programs`]})]})]}),(0,H.jsx)(`div`,{className:`card-arrow`,children:(0,H.jsx)(`i`,{className:`fas fa-chevron-right`})})]})]}),(0,H.jsx)(`div`,{className:`register-footer`,children:(0,H.jsxs)(V,{to:`/login`,children:[(0,H.jsx)(`i`,{className:`fas fa-arrow-left`}),` Already have an account? Sign in`]})})]}),_&&(0,H.jsx)(Na,{message:_.message,type:_.type,onClose:()=>y(null)})]}):t===3?(0,H.jsx)(`div`,{className:`register-page`,children:(0,H.jsxs)(`div`,{className:`register-container account-type-selection`,children:[(0,H.jsxs)(`div`,{className:`register-header`,children:[(0,H.jsx)(`div`,{className:`logo`,children:(0,H.jsx)(`img`,{src:`/prc-logo.png`,alt:`PRC Logo`,onError:e=>e.target.style.display=`none`})}),(0,H.jsx)(`h1`,{children:`Philippine Red Cross`}),(0,H.jsx)(`p`,{children:`Management System`})]}),(0,H.jsxs)(`div`,{className:`non-rcy-notice`,children:[(0,H.jsx)(`div`,{className:`notice-icon`,children:(0,H.jsx)(`i`,{className:`fas fa-info-circle`})}),(0,H.jsxs)(`div`,{className:`notice-content`,children:[(0,H.jsx)(`h3`,{children:`Non-RCY Member Registration Not Available Online`}),(0,H.jsx)(`p`,{children:`To register as a Non-RCY Member, you must visit your local RCY Chapter to obtain your MAAB ID and complete the registration process in person.`}),(0,H.jsxs)(`div`,{className:`notice-actions`,children:[(0,H.jsxs)(`button`,{className:`btn-find-chapter`,onClick:()=>window.open(`https://www.redcross.org.ph/chapters`,`_blank`),children:[(0,H.jsx)(`i`,{className:`fas fa-map-marker-alt`}),` Find Nearest Chapter`]}),(0,H.jsxs)(`button`,{className:`btn-back-selection`,onClick:()=>n(1),children:[(0,H.jsx)(`i`,{className:`fas fa-arrow-left`}),` Back to Selection`]})]})]})]}),(0,H.jsx)(`div`,{className:`register-footer`,children:(0,H.jsxs)(V,{to:`/login`,children:[(0,H.jsx)(`i`,{className:`fas fa-arrow-left`}),` Already have an account? Sign in`]})})]})}):(0,H.jsxs)(`div`,{className:`register-page`,children:[(0,H.jsxs)(`div`,{className:`register-container`,children:[(0,H.jsxs)(`div`,{className:`register-header`,children:[(0,H.jsx)(`div`,{className:`logo`,children:(0,H.jsx)(`img`,{src:`/prc-logo.png`,alt:`PRC Logo`,onError:e=>e.target.style.display=`none`})}),(0,H.jsx)(`h1`,{children:`Philippine Red Cross`}),(0,H.jsx)(`p`,{children:`Management System`}),(0,H.jsxs)(`div`,{className:`selected-type`,children:[(0,H.jsx)(`i`,{className:`fas fa-users`}),(0,H.jsx)(`span`,{children:`RCY Member Registration`})]})]}),(0,H.jsxs)(`form`,{onSubmit:k,className:`register-form`,encType:`multipart/form-data`,children:[(0,H.jsxs)(`div`,{className:`form-row`,children:[(0,H.jsxs)(`div`,{className:`form-group`,children:[(0,H.jsxs)(`label`,{htmlFor:`first_name`,children:[(0,H.jsx)(`i`,{className:`fas fa-id-badge`}),` First Name`,` `,(0,H.jsx)(`span`,{className:`required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`text`,id:`first_name`,name:`first_name`,value:r.first_name,onChange:C,onBlur:()=>w(`first_name`),className:a.first_name&&h.first_name?`error`:``,placeholder:`Enter your first name`,required:!0}),a.first_name&&h.first_name&&(0,H.jsx)(`span`,{className:`error-message`,children:a.first_name})]}),(0,H.jsxs)(`div`,{className:`form-group`,children:[(0,H.jsxs)(`label`,{htmlFor:`last_name`,children:[(0,H.jsx)(`i`,{className:`fas fa-id-badge`}),` Last Name`,` `,(0,H.jsx)(`span`,{className:`required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`text`,id:`last_name`,name:`last_name`,value:r.last_name,onChange:C,onBlur:()=>w(`last_name`),className:a.last_name&&h.last_name?`error`:``,placeholder:`Enter your last name`,required:!0}),a.last_name&&h.last_name&&(0,H.jsx)(`span`,{className:`error-message`,children:a.last_name})]})]}),(0,H.jsxs)(`div`,{className:`form-group`,children:[(0,H.jsxs)(`label`,{htmlFor:`gender`,children:[(0,H.jsx)(`i`,{className:`fas fa-venus-mars`}),` Gender`,` `,(0,H.jsx)(`span`,{className:`required`,children:`*`})]}),(0,H.jsxs)(`select`,{id:`gender`,name:`gender`,value:r.gender,onChange:C,onBlur:()=>w(`gender`),className:a.gender&&h.gender?`error`:``,required:!0,children:[(0,H.jsx)(`option`,{value:``,children:`Select Gender`}),(0,H.jsx)(`option`,{value:`male`,children:`Male`}),(0,H.jsx)(`option`,{value:`female`,children:`Female`})]}),a.gender&&h.gender&&(0,H.jsx)(`span`,{className:`error-message`,children:a.gender})]}),(0,H.jsxs)(`div`,{className:`form-group`,children:[(0,H.jsxs)(`label`,{htmlFor:`username`,children:[(0,H.jsx)(`i`,{className:`fas fa-user`}),` Username`,` `,(0,H.jsx)(`span`,{className:`required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`text`,id:`username`,name:`username`,value:r.username,onChange:C,onBlur:()=>w(`username`),className:a.username&&h.username?`error`:``,placeholder:`Choose a unique username`,required:!0}),(0,H.jsx)(`small`,{className:`help-text`,children:`4-20 characters. Letters, numbers, and underscores only.`}),a.username&&h.username&&(0,H.jsx)(`span`,{className:`error-message`,children:a.username})]}),(0,H.jsxs)(`div`,{className:`form-group`,children:[(0,H.jsxs)(`label`,{htmlFor:`email`,children:[(0,H.jsx)(`i`,{className:`fas fa-envelope`}),` Email Address`,` `,(0,H.jsx)(`span`,{className:`required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`email`,id:`email`,name:`email`,value:r.email,onChange:C,onBlur:()=>w(`email`),className:a.email&&h.email?`error`:``,placeholder:`Enter your email address`,required:!0}),(0,H.jsx)(`small`,{className:`help-text`,children:`We'll send a verification email to this address`}),a.email&&h.email&&(0,H.jsx)(`span`,{className:`error-message`,children:a.email})]}),(0,H.jsx)(Fa,{value:r.phone,onChange:C,onBlur:()=>w(`phone`),error:a.phone&&h.phone?a.phone:null}),(0,H.jsxs)(`div`,{className:`form-row`,children:[(0,H.jsxs)(`div`,{className:`form-group`,children:[(0,H.jsxs)(`label`,{htmlFor:`password`,children:[(0,H.jsx)(`i`,{className:`fas fa-lock`}),` Password`,` `,(0,H.jsx)(`span`,{className:`required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`password`,id:`password`,name:`password`,value:r.password,onChange:C,onBlur:()=>w(`password`),className:a.password&&h.password?`error`:``,placeholder:`Create a strong password`,required:!0}),(0,H.jsx)(Pa,{password:r.password}),a.password&&h.password&&(0,H.jsx)(`span`,{className:`error-message`,children:a.password})]}),(0,H.jsxs)(`div`,{className:`form-group`,children:[(0,H.jsxs)(`label`,{htmlFor:`confirmPassword`,children:[(0,H.jsx)(`i`,{className:`fas fa-lock`}),` Confirm Password`,` `,(0,H.jsx)(`span`,{className:`required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`password`,id:`confirmPassword`,name:`confirmPassword`,value:r.confirmPassword,onChange:C,onBlur:()=>w(`confirmPassword`),className:a.confirmPassword&&h.confirmPassword?`error`:``,placeholder:`Confirm your password`,required:!0}),a.confirmPassword&&h.confirmPassword&&(0,H.jsx)(`span`,{className:`error-message`,children:a.confirmPassword})]})]}),(0,H.jsxs)(`div`,{className:`section-divider`,children:[(0,H.jsx)(`i`,{className:`fas fa-user-shield`}),(0,H.jsx)(`span`,{children:`RCY Member Information`})]}),(0,H.jsxs)(`div`,{className:`form-group`,children:[(0,H.jsxs)(`label`,{children:[(0,H.jsx)(`i`,{className:`fas fa-user-shield`}),` Select Your RCY Role`,` `,(0,H.jsx)(`span`,{className:`required`,children:`*`})]}),(0,H.jsx)(`p`,{className:`help-text-block`,children:`Choose your role within the Red Cross Youth organization.`}),(0,H.jsxs)(`div`,{className:`role-cards`,children:[(0,H.jsxs)(`div`,{className:`role-card ${r.rcy_role===`adviser`?`selected`:``}`,onClick:()=>i({...r,rcy_role:`adviser`}),children:[(0,H.jsx)(`input`,{type:`radio`,name:`rcy_role`,value:`adviser`,checked:r.rcy_role===`adviser`,onChange:C}),(0,H.jsx)(`div`,{className:`role-icon`,children:(0,H.jsx)(`i`,{className:`fas fa-chalkboard-teacher`})}),(0,H.jsx)(`h4`,{children:`Adviser`}),(0,H.jsx)(`p`,{children:`Provide guidance and mentorship to RCY members`}),(0,H.jsxs)(`ul`,{children:[(0,H.jsxs)(`li`,{children:[(0,H.jsx)(`i`,{className:`fas fa-check`}),` Mentor young volunteers`]}),(0,H.jsxs)(`li`,{children:[(0,H.jsx)(`i`,{className:`fas fa-check`}),` Provide strategic guidance`]}),(0,H.jsxs)(`li`,{children:[(0,H.jsx)(`i`,{className:`fas fa-check`}),` Support program development`]}),(0,H.jsxs)(`li`,{children:[(0,H.jsx)(`i`,{className:`fas fa-check`}),` Share expertise and knowledge`]})]})]}),(0,H.jsxs)(`div`,{className:`role-card ${r.rcy_role===`member`?`selected`:``}`,onClick:()=>i({...r,rcy_role:`member`}),children:[(0,H.jsx)(`input`,{type:`radio`,name:`rcy_role`,value:`member`,checked:r.rcy_role===`member`,onChange:C}),(0,H.jsx)(`div`,{className:`role-icon`,children:(0,H.jsx)(`i`,{className:`fas fa-user-friends`})}),(0,H.jsx)(`h4`,{children:`Member`}),(0,H.jsx)(`p`,{children:`Active participant in RCY programs and activities`}),(0,H.jsxs)(`ul`,{children:[(0,H.jsxs)(`li`,{children:[(0,H.jsx)(`i`,{className:`fas fa-check`}),` Participate in RCY activities`]}),(0,H.jsxs)(`li`,{children:[(0,H.jsx)(`i`,{className:`fas fa-check`}),` Access member resources`]}),(0,H.jsxs)(`li`,{children:[(0,H.jsx)(`i`,{className:`fas fa-check`}),` Join training programs`]}),(0,H.jsxs)(`li`,{children:[(0,H.jsx)(`i`,{className:`fas fa-check`}),` Volunteer for events`]})]})]})]}),a.rcy_role&&(0,H.jsx)(`span`,{className:`error-message`,children:a.rcy_role})]}),(0,H.jsxs)(`div`,{className:`section-divider`,children:[(0,H.jsx)(`i`,{className:`fas fa-file-upload`}),(0,H.jsx)(`span`,{children:`Upload Required Documents`})]}),(0,H.jsxs)(`div`,{className:`form-row`,children:[(0,H.jsxs)(`div`,{className:`form-group file-upload`,children:[(0,H.jsxs)(`label`,{htmlFor:`maab_id`,children:[(0,H.jsx)(`i`,{className:`fas fa-id-card`}),` MAAB ID`,` `,(0,H.jsx)(`span`,{className:`required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`file`,id:`maab_id`,name:`maab_id`,onChange:C,accept:`.pdf,.doc,.docx,.jpg,.jpeg,.png`,className:a.maab_id?`error`:``,required:!0}),(0,H.jsx)(`small`,{className:`help-text`,children:`Upload your MAAB ID document`}),a.maab_id&&(0,H.jsx)(`span`,{className:`error-message`,children:a.maab_id})]}),(0,H.jsxs)(`div`,{className:`form-group file-upload`,children:[(0,H.jsxs)(`label`,{htmlFor:`supporting_doc`,children:[(0,H.jsx)(`i`,{className:`fas fa-file-alt`}),` Supporting Document`,` `,(0,H.jsx)(`span`,{className:`required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`file`,id:`supporting_doc`,name:`supporting_doc`,onChange:C,accept:`.pdf,.doc,.docx,.jpg,.jpeg,.png`,className:a.supporting_doc?`error`:``,required:!0}),(0,H.jsx)(`small`,{className:`help-text`,children:`Additional verification document`}),a.supporting_doc&&(0,H.jsx)(`span`,{className:`error-message`,children:a.supporting_doc})]})]}),(0,H.jsxs)(`div`,{className:`document-info`,children:[(0,H.jsx)(`i`,{className:`fas fa-info-circle`}),(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`strong`,{children:`Accepted:`}),` PDF, DOC, DOCX, JPG, JPEG, PNG`,(0,H.jsx)(`br`,{}),(0,H.jsx)(`strong`,{children:`Max size:`}),` 5MB per file`,(0,H.jsx)(`br`,{}),(0,H.jsx)(`strong`,{children:`Required:`}),` Both documents must be uploaded for RCY registration`]})]}),(0,H.jsxs)(`div`,{className:`form-group captcha-group`,children:[(0,H.jsxs)(`label`,{children:[(0,H.jsx)(`i`,{className:`fas fa-shield-alt`}),` Verification`,` `,(0,H.jsx)(`span`,{className:`required`,children:`*`})]}),(0,H.jsx)(Ia,{onVerify:E,onExpired:D},b),a.captcha&&(0,H.jsx)(`small`,{className:`error-message`,children:a.captcha}),d&&(0,H.jsxs)(`small`,{className:`success-message`,children:[(0,H.jsx)(`i`,{className:`fas fa-check-circle`}),` reCAPTCHA verified`]})]}),(0,H.jsx)(`button`,{type:`submit`,className:`btn-register`,disabled:s,children:s?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fas fa-spinner fa-spin`}),` Creating Account...`]}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fas fa-user-plus`}),` Register`]})})]}),(0,H.jsxs)(`div`,{className:`register-footer`,children:[(0,H.jsxs)(`button`,{type:`button`,className:`btn-back`,onClick:()=>n(1),children:[(0,H.jsx)(`i`,{className:`fas fa-arrow-left`}),` Back to Selection`]}),(0,H.jsx)(V,{to:`/login`,children:`Already have an account? Sign in`})]}),(0,H.jsxs)(`div`,{className:`support-info`,children:[(0,H.jsx)(`i`,{className:`fas fa-question-circle`}),`Need help? Contact us at`,` `,(0,H.jsx)(`a`,{href:`mailto:support@prc-system.com`,children:`support@prc-system.com`}),` or call `,(0,H.jsx)(`strong`,{children:`(02) 8527-0864`})]})]}),_&&(0,H.jsx)(Na,{message:_.message,type:_.type,onClose:()=>y(null)}),l&&(0,H.jsx)(`div`,{className:`modal-overlay`,onClick:te,children:(0,H.jsxs)(`div`,{className:`success-modal`,onClick:e=>e.stopPropagation(),children:[(0,H.jsx)(`div`,{className:`modal-icon`,children:(0,H.jsx)(`i`,{className:`fas fa-check-circle`})}),(0,H.jsx)(`h2`,{children:`Registration Successful!`}),(0,H.jsx)(`p`,{children:`Your account has been created successfully.`}),(0,H.jsxs)(`div`,{className:`modal-message`,children:[(0,H.jsx)(`i`,{className:`fas fa-envelope`}),(0,H.jsxs)(`p`,{children:[`A verification email has been sent to`,` `,(0,H.jsx)(`strong`,{children:r.email}),`. Please check your inbox and verify your email address to activate your account.`]})]}),(0,H.jsxs)(`div`,{className:`modal-actions`,children:[(0,H.jsxs)(`button`,{className:`btn-modal`,onClick:te,children:[(0,H.jsx)(`i`,{className:`fas fa-sign-in-alt`}),` Go to Login`]}),(0,H.jsxs)(`button`,{className:`btn-modal btn-outline`,onClick:()=>window.open(`https://mail.google.com`,`_blank`),children:[(0,H.jsx)(`i`,{className:`fas fa-envelope`}),` Open Email`]})]})]})})]})}function Ra(){let[e]=Dn(),[t,n]=(0,v.useState)(`verifying`),[r,i]=(0,v.useState)(``),a=e.get(`token`),o=(0,v.useRef)(!1);return(0,v.useEffect)(()=>{if(!o.current){if(!a){n(`error`),i(`No verification token provided`);return}(async()=>{try{o.current=!0;let e=`http://localhost/prc-management-system/backend/api/verify-email.php?token=${a}`;console.log(`Calling API:`,e);let t=await(await fetch(e)).json();console.log(`Response:`,t),t.success?(n(`success`),i(t.message||`Email verified successfully!`)):(n(`error`),i(t.message||`Verification failed`))}catch(e){console.error(`Fetch error:`,e),n(`error`),i(`Connection error. Please try again.`)}})()}},[a]),(0,H.jsx)(`div`,{className:`verify-page`,children:(0,H.jsx)(`div`,{className:`verify-container`,children:(0,H.jsxs)(`div`,{className:`verify-card`,children:[t===`verifying`&&(0,H.jsxs)(`div`,{className:`verifying`,children:[(0,H.jsx)(`div`,{className:`spinner`}),(0,H.jsx)(`h2`,{children:`Verifying your email...`})]}),t===`success`&&(0,H.jsxs)(`div`,{className:`success`,children:[(0,H.jsx)(`div`,{className:`icon`,children:``}),(0,H.jsx)(`h2`,{children:`Email Verified!`}),(0,H.jsx)(`p`,{children:r}),(0,H.jsx)(V,{to:`/login`,className:`btn-login`,children:`Go to Login`})]}),t===`error`&&(0,H.jsxs)(`div`,{className:`error`,children:[(0,H.jsx)(`div`,{className:`icon`,children:``}),(0,H.jsx)(`h2`,{children:`Verification Failed`}),(0,H.jsx)(`p`,{children:r}),(0,H.jsxs)(`div`,{className:`actions`,children:[(0,H.jsx)(V,{to:`/login`,className:`btn-login`,children:`Go to Login`}),(0,H.jsx)(V,{to:`/register`,className:`btn-register`,children:`Register Again`})]})]})]})})})}var za=()=>JSON.parse(localStorage.getItem(`user`)||`{}`)?.user_id||null;const Ba=async()=>{if(!za())return null;try{let e=await K.get(`/api/registrations.php`,{params:{action:`my-registrations`}}),t=await K.get(`/api/session_registrations.php`,{params:{action:`my-registrations`}}),n=await K.get(`/api/training_requests.php`,{params:{action:`my-requests`}}),r=e.data?.registrations||[],i=t.data?.registrations||[],a=n.data?.requests||[];return{events:r.length,training:i.length,requests:a.length,pending:{events:r.filter(e=>e.status===`pending`).length,training:i.filter(e=>e.status===`pending`).length,requests:a.filter(e=>e.status===`pending`).length}}}catch(e){return console.error(`Error fetching user stats:`,e),{events:0,training:0,requests:0,pending:{events:0,training:0,requests:0}}}},Va=async(e=5)=>{if(!za())return[];try{let t=await K.get(`/api/registrations.php`,{params:{action:`my-registrations`}});if(!t.data?.success)return[];let n=t.data.registrations||[];return(await Promise.all(n.filter(e=>e.status===`approved`||e.status===`pending`).map(async e=>{try{let t=await K.get(`/api/events.php`,{params:{action:`details`,id:e.event_id}});if(t.data?.success){let n=t.data.event;return{id:n.event_id,title:n.title,date:n.event_date,time:`${n.start_time?.slice(0,5)} - ${n.end_time?.slice(0,5)}`,location:n.location?.split(`
`)[0]||n.location,description:n.description,status:e.status,service:n.major_service,registration_id:e.registration_id}}return null}catch(t){return console.error(`Error fetching event ${e.event_id}:`,t),null}}))).filter(e=>e!==null).sort((e,t)=>new Date(e.date)-new Date(t.date)).slice(0,e)}catch(e){return console.error(`Error fetching upcoming events:`,e),[]}},Ha=async(e=5)=>{if(!za())return[];try{let t=await K.get(`/api/session_registrations.php`,{params:{action:`my-registrations`}});if(!t.data?.success)return[];let n=t.data.registrations||[];return(await Promise.all(n.filter(e=>e.status===`approved`||e.status===`pending`).map(async e=>{try{let t=await K.get(`/api/training_sessions.php`,{params:{action:`details`,id:e.session_id}});if(t.data?.success){let n=t.data.session;return{id:n.session_id,title:n.title,date:n.session_date,time:`${n.start_time?.slice(0,5)} - ${n.end_time?.slice(0,5)}`,venue:n.venue,instructor:n.instructor,status:e.status,service:n.major_service,registration_id:e.registration_id}}return null}catch(t){return console.error(`Error fetching training ${e.session_id}:`,t),null}}))).filter(e=>e!==null).sort((e,t)=>new Date(e.date)-new Date(t.date)).slice(0,e)}catch(e){return console.error(`Error fetching upcoming training:`,e),[]}},Ua=async(e=5)=>{try{let t=await K.get(`/api/announcements.php`,{params:{status:`published`}});return t.data?.success?(t.data.data||[]).filter(e=>e.status===`published`).map(e=>({id:e.announcement_id,title:e.title,content:e.content,date:e.posted_at,category:e.category,target_role:e.target_role,image_path:e.image_path})).sort((e,t)=>new Date(t.date)-new Date(e.date)).slice(0,e):[]}catch(e){return console.error(`Error fetching announcements:`,e),[]}},Wa=async()=>{try{let[e,t]=await Promise.all([K.get(`/api/events.php`),K.get(`/api/training_sessions.php`)]),n=[];return e.data?.success&&(e.data.events||[]).forEach(e=>{n.push({id:`event-${e.event_id}`,title:e.title,start:e.event_date,end:e.event_end_date||e.event_date,time:`${e.start_time?.slice(0,5)} - ${e.end_time?.slice(0,5)}`,type:`event`,service:e.major_service,location:e.location})}),t.data?.success&&(t.data.sessions||[]).forEach(e=>{n.push({id:`training-${e.session_id}`,title:e.title,start:e.session_date,end:e.session_end_date||e.session_date,time:`${e.start_time?.slice(0,5)} - ${e.end_time?.slice(0,5)}`,type:`training`,service:e.major_service,location:e.venue,instructor:e.instructor})}),n}catch(e){return console.error(`Error fetching calendar events:`,e),[]}};function Ga({events:e,onDateClick:t}){let[n,r]=(0,v.useState)(new Date),[i,a]=(0,v.useState)(null),o=new Date(n.getFullYear(),n.getMonth()+1,0).getDate(),s=new Date(n.getFullYear(),n.getMonth(),1).getDay(),c=[`January`,`February`,`March`,`April`,`May`,`June`,`July`,`August`,`September`,`October`,`November`,`December`],l=[`Sun`,`Mon`,`Tue`,`Wed`,`Thu`,`Fri`,`Sat`],u=t=>{let r=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,`0`)}-${String(t).padStart(2,`0`)}`;return e.some(e=>e.start===r)},d=t=>{let r=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,`0`)}-${String(t).padStart(2,`0`)}`;return e.filter(e=>e.start===r)},f=()=>{r(new Date(n.getFullYear(),n.getMonth()-1,1))},p=()=>{r(new Date(n.getFullYear(),n.getMonth()+1,1))},m=()=>{r(new Date)},h=e=>{let t=new Date;return e===t.getDate()&&n.getMonth()===t.getMonth()&&n.getFullYear()===t.getFullYear()};return(0,H.jsxs)(`div`,{className:`user-dashboard__calendar`,children:[(0,H.jsxs)(`div`,{className:`user-dashboard__calendar-header`,children:[(0,H.jsxs)(`div`,{className:`calendar-nav`,children:[(0,H.jsx)(`button`,{onClick:f,className:`nav-btn`,title:`Previous month`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-left`})}),(0,H.jsxs)(`h4`,{className:`calendar-title`,children:[c[n.getMonth()],` `,n.getFullYear()]}),(0,H.jsx)(`button`,{onClick:p,className:`nav-btn`,title:`Next month`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-right`})})]}),(0,H.jsxs)(`button`,{onClick:m,className:`today-btn`,title:`Go to today`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-calendar-check`}),`Today`]})]}),(0,H.jsx)(`div`,{className:`user-dashboard__calendar-weekdays`,children:l.map(e=>(0,H.jsx)(`div`,{className:`user-dashboard__calendar-weekday`,children:e},e))}),(0,H.jsxs)(`div`,{className:`user-dashboard__calendar-days`,children:[Array.from({length:s}).map((e,t)=>(0,H.jsx)(`div`,{className:`user-dashboard__calendar-day empty`},`empty-${t}`)),Array.from({length:o},(e,t)=>t+1).map(e=>{let n=u(e),r=h(e),o=d(e),s=i===e;return(0,H.jsxs)(`button`,{className:`user-dashboard__calendar-day 
                ${n?`has-event`:``} 
                ${r?`today`:``}
                ${s?`hovered`:``}`,onClick:()=>t?.(e),onMouseEnter:()=>a(e),onMouseLeave:()=>a(null),children:[(0,H.jsx)(`span`,{className:`day-number`,children:e}),n&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`span`,{className:`event-dot`}),s&&(0,H.jsxs)(`div`,{className:`event-tooltip`,children:[(0,H.jsxs)(`strong`,{children:[o.length,` event`,o.length>1?`s`:``]}),o.slice(0,2).map((e,t)=>(0,H.jsx)(`span`,{children:e.title},t)),o.length>2&&(0,H.jsxs)(`span`,{children:[`+`,o.length-2,` more`]})]})]})]},e)})]}),(0,H.jsxs)(`div`,{className:`user-dashboard__calendar-legend`,children:[(0,H.jsxs)(`div`,{className:`legend-item`,children:[(0,H.jsx)(`span`,{className:`legend-dot event-dot`}),(0,H.jsxs)(`span`,{children:[`Events (`,e.length,`)`]})]}),(0,H.jsxs)(`div`,{className:`legend-item`,children:[(0,H.jsx)(`span`,{className:`legend-dot today-dot`}),(0,H.jsx)(`span`,{children:`Today`})]})]})]})}function Ka(){let e=Qe(),[t,n]=(0,v.useState)(!0),[r,i]=(0,v.useState)({events:0,training:0,requests:0,pending:{events:0,training:0,requests:0}}),[a,o]=(0,v.useState)([]),[s,c]=(0,v.useState)([]),[l,u]=(0,v.useState)([]),[d,f]=(0,v.useState)([]),[p,m]=(0,v.useState)({}),[h,g]=(0,v.useState)(``);(0,v.useEffect)(()=>{m(JSON.parse(localStorage.getItem(`user`)||`{}`));let e=new Date().getHours();g(e<12?`Good morning`:e<18?`Good afternoon`:`Good evening`),_()},[]);let _=async()=>{n(!0);try{let[e,t,n,r,a]=await Promise.all([Ba(),Va(5),Ha(5),Ua(5),Wa()]);e&&i(e),o(t),c(n),u(r),f(a)}catch(e){console.error(`Error fetching dashboard data:`,e)}finally{n(!1)}},y=e=>{if(!e)return{day:`?`,month:`?`,year:`?`};let t=new Date(e);return{day:t.getDate(),month:t.toLocaleDateString(`en-US`,{month:`short`}),year:t.getFullYear(),full:t.toLocaleDateString(`en-US`,{month:`long`,day:`numeric`,year:`numeric`})}},b=t=>{e(`/user/events/${t}`)},x=t=>{e(`/user/training/${t}`)},S=t=>{e(`/user/announcements/${t}`)},C=()=>{e(`/user/blood-map`)},w=t=>{let n=`${new Date().getFullYear()}-${String(new Date().getMonth()+1).padStart(2,`0`)}-${String(t).padStart(2,`0`)}`;d.filter(e=>e.start===n).length>0&&e(`/user/events`,{state:{date:n}})},T=e=>e?e.split(` `).map(e=>e[0]).join(``).toUpperCase().substring(0,2):`U`,E=()=>{let e=new Date().getHours();return e<12?`fa-regular fa-sun`:e<18?`fa-regular fa-cloud-sun`:`fa-regular fa-moon`};if(t)return(0,H.jsx)(`div`,{className:`user-dashboard`,children:(0,H.jsx)(`div`,{className:`user-dashboard__container`,children:(0,H.jsxs)(`div`,{className:`user-dashboard__loading`,children:[(0,H.jsx)(`div`,{className:`loading-spinner`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-spinner fa-spin`})}),(0,H.jsx)(`p`,{children:`Loading your dashboard...`}),(0,H.jsx)(`span`,{className:`loading-subtitle`,children:`Preparing your personalized experience`})]})})});let D=p?.full_name?.split(` `)[0]||p?.first_name||`User`,O=T(p?.full_name||p?.first_name),ee=r.pending.events+r.pending.training+r.pending.requests;return(0,H.jsx)(`div`,{className:`user-dashboard`,children:(0,H.jsxs)(`div`,{className:`user-dashboard__container`,children:[(0,H.jsxs)(`div`,{className:`user-dashboard__welcome`,children:[(0,H.jsxs)(`div`,{className:`welcome-left`,children:[(0,H.jsx)(`div`,{className:`user-avatar`,children:O}),(0,H.jsxs)(`div`,{className:`welcome-text`,children:[(0,H.jsxs)(`div`,{className:`greeting-badge`,children:[(0,H.jsx)(`i`,{className:E()}),(0,H.jsx)(`span`,{children:h})]}),(0,H.jsxs)(`h1`,{className:`user-dashboard__welcome-title`,children:[`Welcome back, `,(0,H.jsxs)(`span`,{className:`highlight`,children:[D,`!`]})]}),(0,H.jsxs)(`p`,{className:`user-dashboard__welcome-subtitle`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-dot`}),`Your volunteer journey with `,(0,H.jsx)(`strong`,{children:`PRC Iloilo Chapter`})]})]})]}),ee>0&&(0,H.jsxs)(`div`,{className:`welcome-alert`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-bell`}),(0,H.jsxs)(`div`,{className:`alert-content`,children:[(0,H.jsxs)(`strong`,{children:[ee,` pending `,ee===1?`item`:`items`]}),(0,H.jsx)(`span`,{children:`Requires your attention`})]})]})]}),(0,H.jsx)(`div`,{className:`user-dashboard__stats`,children:(0,H.jsxs)(`div`,{className:`stats-grid`,children:[(0,H.jsxs)(`div`,{className:`user-dashboard__stats-card`,children:[(0,H.jsxs)(`div`,{className:`stats-card-inner`,children:[(0,H.jsx)(`div`,{className:`stats-card-icon events`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-calendar-check`})}),(0,H.jsxs)(`div`,{className:`stats-card-content`,children:[(0,H.jsx)(`h3`,{children:`Events`}),(0,H.jsxs)(`div`,{className:`stats-numbers`,children:[(0,H.jsx)(`span`,{className:`stat-number`,children:r.events}),r.pending.events>0&&(0,H.jsxs)(`span`,{className:`pending-badge`,children:[r.pending.events,` pending`]})]}),(0,H.jsx)(`span`,{className:`stats-label`,children:`Registered events`})]})]}),(0,H.jsxs)(V,{to:`/user/events`,className:`stats-card-link`,children:[`View Events `,(0,H.jsx)(`i`,{className:`fa-solid fa-arrow-right`})]})]}),(0,H.jsxs)(`div`,{className:`user-dashboard__stats-card`,children:[(0,H.jsxs)(`div`,{className:`stats-card-inner`,children:[(0,H.jsx)(`div`,{className:`stats-card-icon training`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-graduation-cap`})}),(0,H.jsxs)(`div`,{className:`stats-card-content`,children:[(0,H.jsx)(`h3`,{children:`Training`}),(0,H.jsxs)(`div`,{className:`stats-numbers`,children:[(0,H.jsx)(`span`,{className:`stat-number`,children:r.training}),r.pending.training>0&&(0,H.jsxs)(`span`,{className:`pending-badge`,children:[r.pending.training,` pending`]})]}),(0,H.jsx)(`span`,{className:`stats-label`,children:`Enrolled courses`})]})]}),(0,H.jsxs)(V,{to:`/user/training`,className:`stats-card-link`,children:[`View Training `,(0,H.jsx)(`i`,{className:`fa-solid fa-arrow-right`})]})]}),(0,H.jsxs)(`div`,{className:`user-dashboard__stats-card`,children:[(0,H.jsxs)(`div`,{className:`stats-card-inner`,children:[(0,H.jsx)(`div`,{className:`stats-card-icon requests`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-file-pen`})}),(0,H.jsxs)(`div`,{className:`stats-card-content`,children:[(0,H.jsx)(`h3`,{children:`Requests`}),(0,H.jsxs)(`div`,{className:`stats-numbers`,children:[(0,H.jsx)(`span`,{className:`stat-number`,children:r.requests}),r.pending.requests>0&&(0,H.jsxs)(`span`,{className:`pending-badge`,children:[r.pending.requests,` pending`]})]}),(0,H.jsx)(`span`,{className:`stats-label`,children:`Active requests`})]})]}),(0,H.jsxs)(V,{to:`/user/requests`,className:`stats-card-link`,children:[`View Requests `,(0,H.jsx)(`i`,{className:`fa-solid fa-arrow-right`})]})]}),(0,H.jsxs)(`div`,{className:`user-dashboard__stats-card interactive`,onClick:C,children:[(0,H.jsxs)(`div`,{className:`stats-card-inner`,children:[(0,H.jsx)(`div`,{className:`stats-card-icon blood`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-droplet`})}),(0,H.jsxs)(`div`,{className:`stats-card-content`,children:[(0,H.jsx)(`h3`,{children:`Blood Map`}),(0,H.jsx)(`div`,{className:`stats-numbers`,children:(0,H.jsx)(`span`,{className:`stat-number`,children:`Find`})}),(0,H.jsx)(`span`,{className:`stats-label`,children:`Nearby blood banks`})]})]}),(0,H.jsxs)(`span`,{className:`stats-card-link`,children:[`View Map `,(0,H.jsx)(`i`,{className:`fa-solid fa-arrow-right`})]})]})]})}),(0,H.jsxs)(`div`,{className:`user-dashboard__two-column`,children:[(0,H.jsx)(`div`,{className:`user-dashboard__left-col`,children:(0,H.jsxs)(`div`,{className:`user-dashboard__section calendar-section`,children:[(0,H.jsxs)(`div`,{className:`user-dashboard__section-header`,children:[(0,H.jsxs)(`h2`,{children:[(0,H.jsx)(`i`,{className:`fa-regular fa-calendar`}),`Calendar Overview`]}),(0,H.jsxs)(V,{to:`/user/events`,className:`section-header-link`,children:[(0,H.jsx)(`span`,{children:`View All Events`}),(0,H.jsx)(`i`,{className:`fa-solid fa-arrow-right`})]})]}),(0,H.jsx)(Ga,{events:d,onDateClick:w}),d.length>0&&(0,H.jsxs)(`div`,{className:`upcoming-today`,children:[(0,H.jsxs)(`h4`,{children:[(0,H.jsx)(`i`,{className:`fa-regular fa-clock`}),`Today's Schedule`]}),(0,H.jsx)(`div`,{className:`today-events`,children:d.filter(e=>e.start===new Date().toISOString().split(`T`)[0]).slice(0,2).map((e,t)=>(0,H.jsxs)(`div`,{className:`today-event-item`,children:[(0,H.jsx)(`span`,{className:`event-time`,children:e.time||`All day`}),(0,H.jsx)(`span`,{className:`event-title`,children:e.title})]},t))})]})]})}),(0,H.jsx)(`div`,{className:`user-dashboard__right-col`,children:(0,H.jsxs)(`div`,{className:`user-dashboard__section announcements-section`,children:[(0,H.jsxs)(`div`,{className:`user-dashboard__section-header`,children:[(0,H.jsxs)(`h2`,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-bullhorn`}),`Latest Announcements`]}),(0,H.jsxs)(V,{to:`/user/announcements`,className:`section-header-link`,children:[(0,H.jsx)(`span`,{children:`View All`}),(0,H.jsx)(`i`,{className:`fa-solid fa-arrow-right`})]})]}),l.length>0?(0,H.jsx)(`div`,{className:`announcements-list`,children:l.map(e=>{let t=y(e.date),n=e.category===`urgent`;return(0,H.jsxs)(`div`,{className:`announcement-card ${n?`urgent`:``}`,onClick:()=>S(e.id),children:[(0,H.jsxs)(`div`,{className:`announcement-icon`,children:[e.category===`urgent`&&(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),e.category===`events`&&(0,H.jsx)(`i`,{className:`fa-regular fa-calendar`}),e.category===`training`&&(0,H.jsx)(`i`,{className:`fa-solid fa-graduation-cap`}),e.category===`general`&&(0,H.jsx)(`i`,{className:`fa-solid fa-bullhorn`})]}),(0,H.jsxs)(`div`,{className:`announcement-content`,children:[(0,H.jsxs)(`div`,{className:`announcement-header`,children:[(0,H.jsx)(`h4`,{children:e.title}),n&&(0,H.jsx)(`span`,{className:`urgent-badge`,children:`URGENT`})]}),(0,H.jsxs)(`p`,{className:`announcement-preview`,children:[e.content.substring(0,80),`...`]}),(0,H.jsx)(`div`,{className:`announcement-meta`,children:(0,H.jsxs)(`span`,{className:`date`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-clock`}),t.full]})})]})]},e.id)})}):(0,H.jsxs)(`div`,{className:`empty-state`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-bell-slash`}),(0,H.jsx)(`p`,{children:`No announcements`}),(0,H.jsx)(`span`,{className:`empty-sub`,children:`Check back later for updates`})]})]})})]}),(0,H.jsxs)(`div`,{className:`user-dashboard__section events-section`,children:[(0,H.jsxs)(`div`,{className:`user-dashboard__section-header`,children:[(0,H.jsxs)(`h2`,{children:[(0,H.jsx)(`i`,{className:`fa-regular fa-calendar-check`}),`Your Upcoming Events`]}),(0,H.jsxs)(V,{to:`/user/events`,className:`section-header-link`,children:[(0,H.jsx)(`span`,{children:`View All`}),(0,H.jsx)(`i`,{className:`fa-solid fa-arrow-right`})]})]}),a.length>0?(0,H.jsx)(`div`,{className:`events-grid`,children:a.map(e=>{let t=y(e.date);return(0,H.jsxs)(`div`,{className:`event-card`,onClick:()=>b(e.id),children:[(0,H.jsxs)(`div`,{className:`event-date-badge`,children:[(0,H.jsx)(`span`,{className:`day`,children:t.day}),(0,H.jsx)(`span`,{className:`month`,children:t.month})]}),(0,H.jsxs)(`div`,{className:`event-details`,children:[(0,H.jsx)(`h4`,{children:e.title}),(0,H.jsxs)(`div`,{className:`event-meta`,children:[(0,H.jsxs)(`span`,{className:`meta-item`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-clock`}),e.time]}),(0,H.jsxs)(`span`,{className:`meta-item`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-dot`}),e.location]})]}),(0,H.jsxs)(`div`,{className:`event-footer`,children:[(0,H.jsx)(`span`,{className:`status-badge status-${e.status}`,children:e.status}),e.status===`pending`&&(0,H.jsxs)(`span`,{className:`action-reminder`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-bell`}),`Awaiting approval`]})]})]})]},e.id)})}):(0,H.jsxs)(`div`,{className:`empty-state`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-calendar-xmark`}),(0,H.jsx)(`p`,{children:`No upcoming events`}),(0,H.jsx)(`span`,{className:`empty-sub`,children:`Browse and register for events`}),(0,H.jsxs)(V,{to:`/user/events`,className:`empty-action`,children:[`Browse Events `,(0,H.jsx)(`i`,{className:`fa-solid fa-arrow-right`})]})]})]}),(0,H.jsxs)(`div`,{className:`user-dashboard__section training-section`,children:[(0,H.jsxs)(`div`,{className:`user-dashboard__section-header`,children:[(0,H.jsxs)(`h2`,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-graduation-cap`}),`Your Upcoming Training`]}),(0,H.jsxs)(V,{to:`/user/training`,className:`section-header-link`,children:[(0,H.jsx)(`span`,{children:`View All`}),(0,H.jsx)(`i`,{className:`fa-solid fa-arrow-right`})]})]}),s.length>0?(0,H.jsx)(`div`,{className:`training-grid`,children:s.map(e=>{let t=y(e.date);return(0,H.jsxs)(`div`,{className:`training-card`,onClick:()=>x(e.id),children:[(0,H.jsxs)(`div`,{className:`training-header`,children:[(0,H.jsx)(`div`,{className:`training-icon`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-chalkboard-user`})}),(0,H.jsx)(`h4`,{children:e.title})]}),(0,H.jsxs)(`div`,{className:`training-details`,children:[(0,H.jsxs)(`div`,{className:`training-meta`,children:[(0,H.jsxs)(`span`,{className:`meta-item`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-calendar`}),t.full]}),(0,H.jsxs)(`span`,{className:`meta-item`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-clock`}),e.time]}),(0,H.jsxs)(`span`,{className:`meta-item`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-dot`}),e.venue]}),e.instructor&&(0,H.jsxs)(`span`,{className:`meta-item`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-user`}),e.instructor]})]}),(0,H.jsxs)(`div`,{className:`training-footer`,children:[(0,H.jsx)(`span`,{className:`status-badge status-${e.status}`,children:e.status}),(0,H.jsxs)(`span`,{className:`training-capacity`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-users`}),e.enrolled||0,`/`,e.capacity||`N/A`,` `,`enrolled`]})]})]})]},e.id)})}):(0,H.jsxs)(`div`,{className:`empty-state`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-book-open`}),(0,H.jsx)(`p`,{children:`No upcoming training`}),(0,H.jsx)(`span`,{className:`empty-sub`,children:`Explore available training programs`}),(0,H.jsxs)(V,{to:`/user/training`,className:`empty-action`,children:[`Browse Training `,(0,H.jsx)(`i`,{className:`fa-solid fa-arrow-right`})]})]})]})]})})}var qa=`/api/events.php`;const Ja=async({filter:e=`all`,search:t=``,service:n=null}={})=>{let r={action:`list`,filter:e};t.trim()&&(r.search=t.trim()),n&&n!==`All Services`&&(r.service=n);let{data:i}=await K.get(qa,{params:r});if(!i.success)throw Error(i.message||`Failed to fetch events`);return{success:!0,events:i.events??[],total:i.total??0}},Ya=async()=>{let{data:e}=await K.get(qa,{params:{action:`stats`}});if(!e.success)throw Error(e.message||`Failed to fetch stats`);return{success:!0,stats:e.stats}},Xa=async e=>{if(!e.title?.trim())throw Error(`Title is required`);if(!e.major_service)throw Error(`Service is required`);if(!e.event_date)throw Error(`Start date is required`);if(!e.location?.trim())throw Error(`Location is required`);let{data:t}=await K.post(qa,e,{params:{action:`create`}});if(!t.success)throw Error(t.message||`Failed to create event`);return{success:!0,message:t.message,event_id:t.event_id}},Za=async(e,t)=>{if(!e)throw Error(`Event ID is required`);let{data:n}=await K.put(qa,t,{params:{action:`update`,id:e}});if(!n.success)throw Error(n.message||`Failed to update event`);return{success:!0,message:n.message}},Qa=async e=>{if(!e)throw Error(`Event ID is required`);let{data:t}=await K.delete(qa,{params:{action:`delete`,id:e}});if(!t.success)throw Error(t.message||`Failed to delete event`);return{success:!0,message:t.message}};var $a=`/api/registrations.php`;const eo=async e=>{if(!e)throw Error(`Event ID is required`);let{data:t}=await K.get($a,{params:{action:`list`,event_id:e}});if(!t.success)throw Error(t.message||`Failed to fetch registrations`);return{success:!0,registrations:t.registrations??[],total:t.total??0}},to=async()=>{let{data:e}=await K.get($a,{params:{action:`my-registrations`}});if(!e.success)throw Error(e.message||`Failed to fetch registrations`);return{success:!0,registrations:e.registrations??[],total:e.total??0}},no=async e=>{let{data:t}=await K.post($a,e,{params:{action:`register`},headers:{"Content-Type":`multipart/form-data`},transformRequest:[e=>e]});if(!t.success)throw Error(t.message||`Registration failed`);return{success:!0,message:t.message,registration_id:t.registration_id}},ro=async e=>{if(!e)throw Error(`Registration ID is required`);let{data:t}=await K.put($a,{},{params:{action:`approve`,id:e}});if(!t.success)throw Error(t.message||`Failed to approve`);return{success:!0,message:t.message}},io=async e=>{if(!e)throw Error(`Registration ID is required`);let{data:t}=await K.put($a,{},{params:{action:`reject`,id:e}});if(!t.success)throw Error(t.message||`Failed to reject`);return{success:!0,message:t.message}},ao=async e=>{if(!e)throw Error(`Registration ID is required`);let{data:t}=await K.delete($a,{params:{action:`delete`,id:e}});if(!t.success)throw Error(t.message||`Failed to delete`);return{success:!0,message:t.message}};var oo=[`JANUARY`,`FEBRUARY`,`MARCH`,`APRIL`,`MAY`,`JUNE`,`JULY`,`AUGUST`,`SEPTEMBER`,`OCTOBER`,`NOVEMBER`,`DECEMBER`],so=[`SUN`,`MON`,`TUE`,`WED`,`THU`,`FRI`,`SAT`],co={"Health Service":`#c41e3a`,"Safety Service":`#15803d`,"Welfare Service":`#7c3aed`,"Disaster Management Service":`#c2410c`,"Red Cross Youth":`#003d6b`};function lo({message:e,type:t,onClose:n}){return(0,v.useEffect)(()=>{let e=setTimeout(n,3500);return()=>clearTimeout(e)},[n]),(0,H.jsxs)(`div`,{className:`ue-toast ue-toast--${t}`,onClick:n,children:[(0,H.jsx)(`div`,{className:`ue-toast__icon`,children:(0,H.jsx)(`i`,{className:`fas ${t===`success`?`fa-circle-check`:`fa-circle-xmark`}`})}),(0,H.jsxs)(`div`,{className:`ue-toast__content`,children:[(0,H.jsx)(`div`,{className:`ue-toast__title`,children:t===`success`?`Success`:`Error`}),(0,H.jsx)(`div`,{className:`ue-toast__message`,children:e})]}),(0,H.jsx)(`button`,{className:`ue-toast__close`,onClick:n,children:(0,H.jsx)(`i`,{className:`fas fa-xmark`})})]})}function uo({events:e,selectedDate:t,onDateSelect:n}){let[r,i]=(0,v.useState)(new Date),[a,o]=(0,v.useState)(null),s=r.getFullYear(),c=r.getMonth(),l=new Date(s,c,1).getDay(),u=new Date(s,c+1,0).getDate(),d=[];for(let e=0;e<l;e++)d.push(null);for(let e=1;e<=u;e++)d.push(e);let f=t=>{if(!t)return!1;let n=`${s}-${String(c+1).padStart(2,`0`)}-${String(t).padStart(2,`0`)}`;return e.some(e=>e.event_date===n||e.event_end_date&&n>=e.event_date&&n<=e.event_end_date)},p=t=>{if(!t)return 0;let n=`${s}-${String(c+1).padStart(2,`0`)}-${String(t).padStart(2,`0`)}`;return e.filter(e=>e.event_date===n||e.event_end_date&&n>=e.event_date&&n<=e.event_end_date).length},m=e=>!e||!t?!1:`${s}-${String(c+1).padStart(2,`0`)}-${String(e).padStart(2,`0`)}`===t,h=e=>{let t=new Date;return e===t.getDate()&&c===t.getMonth()&&s===t.getFullYear()},g=()=>{i(new Date(s,c-1,1))},_=()=>{i(new Date(s,c+1,1))},y=e=>{e&&n(`${s}-${String(c+1).padStart(2,`0`)}-${String(e).padStart(2,`0`)}`)};return(0,H.jsxs)(`div`,{className:`ue-calendar`,children:[(0,H.jsxs)(`div`,{className:`ue-calendar__header`,children:[(0,H.jsxs)(`div`,{className:`ue-calendar__nav-group`,children:[(0,H.jsx)(`button`,{className:`ue-calendar__nav`,onClick:g,children:(0,H.jsx)(`i`,{className:`fas fa-chevron-left`})}),(0,H.jsxs)(`div`,{className:`ue-calendar__title`,children:[oo[c],` `,s]}),(0,H.jsx)(`button`,{className:`ue-calendar__nav`,onClick:_,children:(0,H.jsx)(`i`,{className:`fas fa-chevron-right`})})]}),(0,H.jsxs)(`button`,{className:`ue-calendar__today`,onClick:()=>{i(new Date)},children:[(0,H.jsx)(`i`,{className:`fas fa-calendar-day`}),`Today`]})]}),(0,H.jsx)(`div`,{className:`ue-calendar__weekdays`,children:so.map(e=>(0,H.jsx)(`div`,{className:`ue-calendar__weekday`,children:e},e))}),(0,H.jsx)(`div`,{className:`ue-calendar__grid`,children:d.map((e,t)=>{let n=p(e),r=a===e;return(0,H.jsxs)(`div`,{className:`ue-calendar__cell 
                ${e?``:`ue-calendar__cell--empty`} 
                ${f(e)?`ue-calendar__cell--event`:``} 
                ${m(e)?`ue-calendar__cell--selected`:``}
                ${h(e)?`ue-calendar__cell--today`:``}
                ${r?`ue-calendar__cell--hovered`:``}`,onClick:()=>y(e),onMouseEnter:()=>e&&o(e),onMouseLeave:()=>o(null),children:[(0,H.jsx)(`span`,{className:`ue-calendar__day-number`,children:e}),n>0&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`span`,{className:`ue-calendar__event-indicator`}),r&&(0,H.jsxs)(`div`,{className:`ue-calendar__tooltip`,children:[(0,H.jsxs)(`strong`,{children:[n,` event`,n>1?`s`:``]}),(0,H.jsx)(`span`,{children:`Click to view`})]})]})]},t)})})]})}function fo({event:e,onClose:t,onSuccess:n}){let[r,i]=(0,v.useState)(`individual`),[a,o]=(0,v.useState)(1),[s,c]=(0,v.useState)({full_name:``,email:``,age:``,location:``,organization_name:``,payment_mode:e.fee>0?`gcash`:`free`}),[l,u]=(0,v.useState)({valid_id:null,documents:null,payment_receipt:null}),[d,f]=(0,v.useState)(!1),[p,m]=(0,v.useState)({});function h(e,t){c(n=>({...n,[e]:t})),m(t=>({...t,[e]:void 0}))}function g(e,t){u(n=>({...n,[e]:t})),m(t=>({...t,[e]:void 0}))}function _(){let t={};return s.full_name.trim()||(t.full_name=`Full name is required`),s.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||(t.email=`Invalid email format`):t.email=`Email is required`,s.location.trim()||(t.location=`Location is required`),l.valid_id||(t.valid_id=`Valid ID is required`),e.fee>0&&s.payment_mode!==`free`&&!l.payment_receipt&&(t.payment_receipt=`Payment receipt is required for paid events`),t}let y=()=>{let e={};if(a===1&&(s.full_name.trim()||(e.full_name=`Full name is required`),s.email.trim()||(e.email=`Email is required`),s.location.trim()||(e.location=`Location is required`)),Object.keys(e).length){m(e);return}o(2),window.scrollTo({top:0,behavior:`smooth`})},b=()=>{o(1),window.scrollTo({top:0,behavior:`smooth`})};async function x(t){t.preventDefault();let i=_();if(Object.keys(i).length){m(i);return}f(!0);try{let t=new FormData;t.append(`event_id`,e.event_id),t.append(`registration_type`,r),t.append(`full_name`,s.full_name),t.append(`email`,s.email),s.age&&t.append(`age`,s.age),t.append(`location`,s.location),r===`organization`&&t.append(`organization_name`,s.organization_name),t.append(`payment_mode`,s.payment_mode),l.valid_id&&t.append(`valid_id`,l.valid_id),l.documents&&t.append(`documents`,l.documents),l.payment_receipt&&t.append(`payment_receipt`,l.payment_receipt),n((await no(t)).message)}catch(e){m({_global:e.message||`Registration failed`})}finally{f(!1)}}return(0,H.jsx)(`div`,{className:`ue-overlay`,onClick:t,children:(0,H.jsxs)(`div`,{className:`ue-modal ue-modal--lg`,onClick:e=>e.stopPropagation(),children:[(0,H.jsxs)(`div`,{className:`ue-modal__header`,children:[(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`div`,{className:`ue-modal__title`,children:e.title}),(0,H.jsxs)(`div`,{className:`ue-modal__meta`,children:[(0,H.jsxs)(`span`,{className:`ue-modal__meta-item`,children:[(0,H.jsx)(`i`,{className:`fas fa-calendar`}),` `,new Date(e.event_date).toLocaleDateString(`en-US`,{month:`long`,day:`numeric`,year:`numeric`})]}),e.fee>0&&(0,H.jsxs)(`span`,{className:`ue-modal__meta-item`,children:[(0,H.jsx)(`i`,{className:`fas fa-tag`}),` `,parseFloat(e.fee).toFixed(2)]}),e.fee===0&&(0,H.jsxs)(`span`,{className:`ue-modal__free-badge`,children:[(0,H.jsx)(`i`,{className:`fas fa-gift`}),` FREE EVENT`]})]})]}),(0,H.jsx)(`button`,{className:`ue-modal__close`,onClick:t,children:(0,H.jsx)(`i`,{className:`fas fa-xmark`})})]}),(0,H.jsxs)(`div`,{className:`ue-modal__progress`,children:[(0,H.jsxs)(`div`,{className:`ue-progress-step ${a>=1?`active`:``} ${a>1?`completed`:``}`,children:[(0,H.jsx)(`span`,{className:`ue-progress-step__number`,children:`1`}),(0,H.jsx)(`span`,{className:`ue-progress-step__label`,children:`Personal Info`})]}),(0,H.jsx)(`div`,{className:`ue-progress-line`}),(0,H.jsxs)(`div`,{className:`ue-progress-step ${a>=2?`active`:``}`,children:[(0,H.jsx)(`span`,{className:`ue-progress-step__number`,children:`2`}),(0,H.jsx)(`span`,{className:`ue-progress-step__label`,children:`Documents`})]}),e.fee>0&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`div`,{className:`ue-progress-line`}),(0,H.jsxs)(`div`,{className:`ue-progress-step ${a>=3?`active`:``}`,children:[(0,H.jsx)(`span`,{className:`ue-progress-step__number`,children:`3`}),(0,H.jsx)(`span`,{className:`ue-progress-step__label`,children:`Payment`})]})]})]}),(0,H.jsxs)(`form`,{className:`ue-modal__body`,onSubmit:x,children:[p._global&&(0,H.jsxs)(`div`,{className:`ue-form__error-banner`,children:[(0,H.jsx)(`i`,{className:`fas fa-circle-exclamation`}),` `,p._global]}),a===1&&(0,H.jsxs)(`div`,{className:`ue-step`,children:[(0,H.jsxs)(`h3`,{className:`ue-step__title`,children:[(0,H.jsx)(`i`,{className:`fas fa-user-circle`}),` Personal Information`]}),(0,H.jsxs)(`div`,{className:`ue-tabs`,children:[(0,H.jsxs)(`button`,{type:`button`,className:`ue-tab ${r===`individual`?`ue-tab--active`:``}`,onClick:()=>i(`individual`),children:[(0,H.jsx)(`i`,{className:`fas fa-user`}),` Individual`]}),(0,H.jsxs)(`button`,{type:`button`,className:`ue-tab ${r===`organization`?`ue-tab--active`:``}`,onClick:()=>i(`organization`),children:[(0,H.jsx)(`i`,{className:`fas fa-building`}),` Organization/Company`]})]}),(0,H.jsxs)(`div`,{className:`ue-form__row`,children:[(0,H.jsxs)(`div`,{className:`ue-form__field`,children:[(0,H.jsxs)(`label`,{className:`ue-form__label`,children:[`Full Name `,(0,H.jsx)(`span`,{className:`ue-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{className:`ue-form__input${p.full_name?` ue-form__input--error`:``}`,value:s.full_name,onChange:e=>h(`full_name`,e.target.value),placeholder:`Enter your full name`}),p.full_name&&(0,H.jsxs)(`span`,{className:`ue-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fas fa-exclamation-circle`}),` `,p.full_name]})]}),(0,H.jsxs)(`div`,{className:`ue-form__field`,children:[(0,H.jsxs)(`label`,{className:`ue-form__label`,children:[`Email Address `,(0,H.jsx)(`span`,{className:`ue-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`email`,className:`ue-form__input${p.email?` ue-form__input--error`:``}`,value:s.email,onChange:e=>h(`email`,e.target.value),placeholder:`Enter your email address`}),p.email&&(0,H.jsxs)(`span`,{className:`ue-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fas fa-exclamation-circle`}),` `,p.email]})]})]}),(0,H.jsxs)(`div`,{className:`ue-form__row`,children:[(0,H.jsxs)(`div`,{className:`ue-form__field`,children:[(0,H.jsx)(`label`,{className:`ue-form__label`,children:`Age`}),(0,H.jsx)(`input`,{type:`number`,className:`ue-form__input`,value:s.age,onChange:e=>h(`age`,e.target.value),placeholder:`Enter your age`})]}),(0,H.jsxs)(`div`,{className:`ue-form__field`,children:[(0,H.jsxs)(`label`,{className:`ue-form__label`,children:[`Location `,(0,H.jsx)(`span`,{className:`ue-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{className:`ue-form__input${p.location?` ue-form__input--error`:``}`,value:s.location,onChange:e=>h(`location`,e.target.value),placeholder:`Enter your location`}),p.location&&(0,H.jsxs)(`span`,{className:`ue-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fas fa-exclamation-circle`}),` `,p.location]})]})]}),r===`organization`&&(0,H.jsxs)(`div`,{className:`ue-form__field`,children:[(0,H.jsx)(`label`,{className:`ue-form__label`,children:`Organization Name`}),(0,H.jsx)(`input`,{className:`ue-form__input`,value:s.organization_name,onChange:e=>h(`organization_name`,e.target.value),placeholder:`Enter organization name`})]}),(0,H.jsx)(`div`,{className:`ue-form__actions`,children:(0,H.jsxs)(`button`,{type:`button`,className:`ue-form__next`,onClick:y,children:[`Next Step `,(0,H.jsx)(`i`,{className:`fas fa-arrow-right`})]})})]}),a===2&&(0,H.jsxs)(`div`,{className:`ue-step`,children:[(0,H.jsxs)(`h3`,{className:`ue-step__title`,children:[(0,H.jsx)(`i`,{className:`fas fa-file-upload`}),` Required Documents`]}),(0,H.jsxs)(`div`,{className:`ue-form__field`,children:[(0,H.jsxs)(`label`,{className:`ue-form__label`,children:[`Valid ID `,(0,H.jsx)(`span`,{className:`ue-form__required`,children:`*`})]}),(0,H.jsxs)(`div`,{className:`ue-file-upload`,children:[(0,H.jsx)(`input`,{type:`file`,id:`valid_id`,accept:`.pdf,.jpg,.jpeg,.png`,onChange:e=>g(`valid_id`,e.target.files[0]),className:`ue-file-upload__input`}),(0,H.jsxs)(`label`,{htmlFor:`valid_id`,className:`ue-file-upload__label`,children:[(0,H.jsx)(`i`,{className:`fas fa-id-card`}),(0,H.jsx)(`span`,{className:`ue-file-upload__text`,children:l.valid_id?l.valid_id.name:`Upload a clear photo of your valid ID`}),l.valid_id&&(0,H.jsx)(`span`,{className:`ue-file-upload__check`,children:(0,H.jsx)(`i`,{className:`fas fa-check-circle`})})]})]}),(0,H.jsxs)(`small`,{className:`ue-form__hint`,children:[(0,H.jsx)(`i`,{className:`fas fa-info-circle`}),` Accepted: JPG, PNG, PDF (Max 5MB)`]}),p.valid_id&&(0,H.jsxs)(`span`,{className:`ue-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fas fa-exclamation-circle`}),` `,p.valid_id]})]}),(0,H.jsxs)(`div`,{className:`ue-form__field`,children:[(0,H.jsx)(`label`,{className:`ue-form__label`,children:`Additional Documents (Optional)`}),(0,H.jsxs)(`div`,{className:`ue-file-upload`,children:[(0,H.jsx)(`input`,{type:`file`,id:`documents`,accept:`.pdf,.jpg,.jpeg,.png,.doc,.docx`,onChange:e=>g(`documents`,e.target.files[0]),className:`ue-file-upload__input`}),(0,H.jsxs)(`label`,{htmlFor:`documents`,className:`ue-file-upload__label`,children:[(0,H.jsx)(`i`,{className:`fas fa-folder-open`}),(0,H.jsx)(`span`,{className:`ue-file-upload__text`,children:l.documents?l.documents.name:`Upload supporting documents (optional)`}),l.documents&&(0,H.jsx)(`span`,{className:`ue-file-upload__check`,children:(0,H.jsx)(`i`,{className:`fas fa-check-circle`})})]})]}),(0,H.jsxs)(`small`,{className:`ue-form__hint`,children:[(0,H.jsx)(`i`,{className:`fas fa-info-circle`}),` Accepted: JPG, PNG, PDF, DOC, DOCX (Max 5MB)`]})]}),(0,H.jsxs)(`div`,{className:`ue-form__actions`,children:[(0,H.jsxs)(`button`,{type:`button`,className:`ue-form__prev`,onClick:b,children:[(0,H.jsx)(`i`,{className:`fas fa-arrow-left`}),` Previous`]}),e.fee>0?(0,H.jsxs)(`button`,{type:`button`,className:`ue-form__next`,onClick:()=>o(3),children:[`Next Step `,(0,H.jsx)(`i`,{className:`fas fa-arrow-right`})]}):(0,H.jsx)(`button`,{type:`submit`,className:`ue-form__submit`,disabled:d,children:d?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fas fa-spinner fa-spin`}),` Submitting`]}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fas fa-check-circle`}),` Complete Registration`]})})]})]}),a===3&&e.fee>0&&(0,H.jsxs)(`div`,{className:`ue-step`,children:[(0,H.jsxs)(`h3`,{className:`ue-step__title`,children:[(0,H.jsx)(`i`,{className:`fas fa-credit-card`}),` Payment Information`]}),(0,H.jsxs)(`div`,{className:`ue-payment-summary`,children:[(0,H.jsxs)(`div`,{className:`ue-payment-summary__item`,children:[(0,H.jsx)(`span`,{children:`Event Fee:`}),(0,H.jsxs)(`strong`,{children:[``,parseFloat(e.fee).toFixed(2)]})]}),(0,H.jsxs)(`div`,{className:`ue-payment-summary__item`,children:[(0,H.jsx)(`span`,{children:`Processing Fee:`}),(0,H.jsx)(`strong`,{children:`0.00`})]}),(0,H.jsxs)(`div`,{className:`ue-payment-summary__total`,children:[(0,H.jsx)(`span`,{children:`Total:`}),(0,H.jsxs)(`strong`,{children:[``,parseFloat(e.fee).toFixed(2)]})]})]}),(0,H.jsxs)(`div`,{className:`ue-form__field`,children:[(0,H.jsxs)(`label`,{className:`ue-form__label`,children:[`Payment Mode `,(0,H.jsx)(`span`,{className:`ue-form__required`,children:`*`})]}),(0,H.jsx)(`div`,{className:`ue-payment-options`,children:[{id:`gcash`,icon:`fa-mobile-alt`,label:`GCash`},{id:`bank`,icon:`fa-university`,label:`Bank Transfer`},{id:`paymaya`,icon:`fa-wallet`,label:`PayMaya`}].map(e=>(0,H.jsxs)(`label`,{className:`ue-payment-option`,children:[(0,H.jsx)(`input`,{type:`radio`,name:`payment_mode`,value:e.id,checked:s.payment_mode===e.id,onChange:e=>h(`payment_mode`,e.target.value)}),(0,H.jsxs)(`div`,{className:`ue-payment-option__box`,children:[(0,H.jsx)(`i`,{className:`fas ${e.icon}`}),(0,H.jsx)(`span`,{children:e.label})]})]},e.id))})]}),(0,H.jsxs)(`div`,{className:`ue-form__field`,children:[(0,H.jsxs)(`label`,{className:`ue-form__label`,children:[`Payment Receipt `,(0,H.jsx)(`span`,{className:`ue-form__required`,children:`*`})]}),(0,H.jsxs)(`div`,{className:`ue-file-upload`,children:[(0,H.jsx)(`input`,{type:`file`,id:`payment_receipt`,accept:`.pdf,.jpg,.jpeg,.png`,onChange:e=>g(`payment_receipt`,e.target.files[0]),className:`ue-file-upload__input`}),(0,H.jsxs)(`label`,{htmlFor:`payment_receipt`,className:`ue-file-upload__label`,children:[(0,H.jsx)(`i`,{className:`fas fa-receipt`}),(0,H.jsx)(`span`,{className:`ue-file-upload__text`,children:l.payment_receipt?l.payment_receipt.name:`Upload payment receipt`}),l.payment_receipt&&(0,H.jsx)(`span`,{className:`ue-file-upload__check`,children:(0,H.jsx)(`i`,{className:`fas fa-check-circle`})})]})]}),(0,H.jsxs)(`small`,{className:`ue-form__hint`,children:[(0,H.jsx)(`i`,{className:`fas fa-info-circle`}),` Upload proof of payment (screenshot or receipt)`]}),p.payment_receipt&&(0,H.jsxs)(`span`,{className:`ue-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fas fa-exclamation-circle`}),` `,p.payment_receipt]})]}),(0,H.jsxs)(`div`,{className:`ue-form__actions`,children:[(0,H.jsxs)(`button`,{type:`button`,className:`ue-form__prev`,onClick:()=>o(2),children:[(0,H.jsx)(`i`,{className:`fas fa-arrow-left`}),` Previous`]}),(0,H.jsx)(`button`,{type:`submit`,className:`ue-form__submit`,disabled:d,children:d?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fas fa-spinner fa-spin`}),` Processing Payment`]}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fas fa-lock`}),` Complete Payment & Register`]})})]})]}),(0,H.jsxs)(`div`,{className:`ue-info-notice`,children:[(0,H.jsx)(`i`,{className:`fas fa-shield-alt`}),(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`strong`,{children:`Secure Registration`}),(0,H.jsx)(`p`,{children:`Your information and documents are encrypted and securely stored. We only use this data for event registration purposes.`})]})]})]})]})})}function po(){let[e,t]=(0,v.useState)([]),[n,r]=(0,v.useState)([]),[i,a]=(0,v.useState)(!0),[o,s]=(0,v.useState)(`all`),[c,l]=(0,v.useState)(``),[u,d]=(0,v.useState)(null),[f,p]=(0,v.useState)(null),[m,h]=(0,v.useState)(null),[g,_]=(0,v.useState)(`available`),y=(e,t=`success`)=>h({msg:e,type:t}),b=(0,v.useCallback)(async()=>{a(!0);try{let{events:e}=await Ja({filter:`upcoming`,search:c});t(e)}catch(e){console.error(`Fetch events error:`,e),y(e.message||`Failed to load events`,`error`)}finally{a(!1)}},[c]);(0,v.useEffect)(()=>{b()},[b]);let x=(0,v.useCallback)(async()=>{try{let{registrations:e}=await to();r(e)}catch(e){console.error(`Fetch registrations error:`,e)}},[]);(0,v.useEffect)(()=>{x()},[x]);let S=u?e.filter(e=>e.event_date===u||e.event_end_date&&u>=e.event_date&&u<=e.event_end_date):e,C=n.filter(e=>e.is_upcoming).length,w=n.filter(e=>e.status===`approved`).length,T=n.filter(e=>e.status===`pending`).length,E=n.length;function D(e){y(e),p(null),x()}let O=e=>{switch(e){case`approved`:return`#10b981`;case`pending`:return`#f59e0b`;case`rejected`:return`#ef4444`;default:return`#6b7280`}};return(0,H.jsxs)(`div`,{className:`ue-root`,children:[(0,H.jsxs)(`div`,{className:`ue-header`,children:[(0,H.jsx)(`div`,{className:`ue-header__container`,children:(0,H.jsxs)(`div`,{className:`ue-header__content`,children:[(0,H.jsxs)(`div`,{className:`ue-header__left`,children:[(0,H.jsxs)(`div`,{className:`ue-header__badge`,children:[(0,H.jsx)(`i`,{className:`fas fa-calendar-alt`}),` Event Registration`]}),(0,H.jsx)(`h1`,{className:`ue-header__title`,children:`Browse & Register for Events`}),(0,H.jsx)(`p`,{className:`ue-header__subtitle`,children:`Discover and join upcoming PRC events, training sessions, and community activities`})]}),(0,H.jsxs)(`div`,{className:`ue-header__stats`,children:[(0,H.jsxs)(`div`,{className:`ue-header-stat`,children:[(0,H.jsx)(`span`,{className:`ue-header-stat__value`,children:E}),(0,H.jsx)(`span`,{className:`ue-header-stat__label`,children:`Total Registrations`})]}),(0,H.jsxs)(`div`,{className:`ue-header-stat`,children:[(0,H.jsx)(`span`,{className:`ue-header-stat__value`,children:w}),(0,H.jsx)(`span`,{className:`ue-header-stat__label`,children:`Approved`})]}),(0,H.jsxs)(`div`,{className:`ue-header-stat`,children:[(0,H.jsx)(`span`,{className:`ue-header-stat__value`,children:T}),(0,H.jsx)(`span`,{className:`ue-header-stat__label`,children:`Pending`})]})]})]})}),(0,H.jsx)(`div`,{className:`ue-header__wave`,children:(0,H.jsx)(`svg`,{viewBox:`0 0 1440 120`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`,children:(0,H.jsx)(`path`,{d:`M0 120L60 105C120 90 240 60 360 45C480 30 600 30 720 37.5C840 45 960 60 1080 67.5C1200 75 1320 75 1380 75L1440 75V120H1380C1320 120 1200 120 1080 120C960 120 840 120 720 120C600 120 480 120 360 120C240 120 120 120 60 120H0Z`,fill:`white`,fillOpacity:`0.1`})})})]}),(0,H.jsx)(`div`,{className:`ue-body`,children:(0,H.jsxs)(`div`,{className:`ue-layout`,children:[(0,H.jsxs)(`div`,{className:`ue-sidebar`,children:[(0,H.jsxs)(`div`,{className:`ue-card ue-card--calendar`,children:[(0,H.jsxs)(`div`,{className:`ue-card__header`,children:[(0,H.jsx)(`div`,{className:`ue-card__header-icon`,children:(0,H.jsx)(`i`,{className:`fas fa-calendar-alt`})}),(0,H.jsxs)(`div`,{className:`ue-card__header-title`,children:[(0,H.jsx)(`h3`,{children:`Events Calendar`}),(0,H.jsxs)(`span`,{children:[e.length,` events this month`]})]})]}),(0,H.jsxs)(`div`,{className:`ue-card__body`,children:[(0,H.jsx)(uo,{events:e,selectedDate:u,onDateSelect:d}),u&&(0,H.jsxs)(`button`,{className:`ue-btn-clear-date`,onClick:()=>d(null),children:[(0,H.jsx)(`i`,{className:`fas fa-times`}),` Clear Date Filter`]})]})]}),(0,H.jsxs)(`div`,{className:`ue-card ue-card--stats`,children:[(0,H.jsxs)(`div`,{className:`ue-card__header`,children:[(0,H.jsx)(`div`,{className:`ue-card__header-icon`,children:(0,H.jsx)(`i`,{className:`fas fa-user-check`})}),(0,H.jsxs)(`div`,{className:`ue-card__header-title`,children:[(0,H.jsx)(`h3`,{children:`My Registrations`}),(0,H.jsx)(`span`,{children:`Overview of your event participation`})]})]}),(0,H.jsx)(`div`,{className:`ue-card__body`,children:(0,H.jsxs)(`div`,{className:`ue-my-stats`,children:[(0,H.jsxs)(`div`,{className:`ue-my-stat ue-my-stat--total`,children:[(0,H.jsx)(`div`,{className:`ue-my-stat__icon`,children:(0,H.jsx)(`i`,{className:`fas fa-clipboard-list`})}),(0,H.jsxs)(`div`,{className:`ue-my-stat__content`,children:[(0,H.jsx)(`div`,{className:`ue-my-stat__num`,children:E}),(0,H.jsx)(`div`,{className:`ue-my-stat__label`,children:`Total`})]})]}),(0,H.jsxs)(`div`,{className:`ue-my-stat ue-my-stat--upcoming`,children:[(0,H.jsx)(`div`,{className:`ue-my-stat__icon`,children:(0,H.jsx)(`i`,{className:`fas fa-calendar-check`})}),(0,H.jsxs)(`div`,{className:`ue-my-stat__content`,children:[(0,H.jsx)(`div`,{className:`ue-my-stat__num`,children:C}),(0,H.jsx)(`div`,{className:`ue-my-stat__label`,children:`Upcoming`})]})]}),(0,H.jsxs)(`div`,{className:`ue-my-stat ue-my-stat--approved`,children:[(0,H.jsx)(`div`,{className:`ue-my-stat__icon`,children:(0,H.jsx)(`i`,{className:`fas fa-check-circle`})}),(0,H.jsxs)(`div`,{className:`ue-my-stat__content`,children:[(0,H.jsx)(`div`,{className:`ue-my-stat__num`,children:w}),(0,H.jsx)(`div`,{className:`ue-my-stat__label`,children:`Approved`})]})]}),(0,H.jsxs)(`div`,{className:`ue-my-stat ue-my-stat--pending`,children:[(0,H.jsx)(`div`,{className:`ue-my-stat__icon`,children:(0,H.jsx)(`i`,{className:`fas fa-clock`})}),(0,H.jsxs)(`div`,{className:`ue-my-stat__content`,children:[(0,H.jsx)(`div`,{className:`ue-my-stat__num`,children:T}),(0,H.jsx)(`div`,{className:`ue-my-stat__label`,children:`Pending`})]})]})]})})]})]}),(0,H.jsxs)(`div`,{className:`ue-main`,children:[(0,H.jsxs)(`div`,{className:`ue-main-tabs`,children:[(0,H.jsxs)(`button`,{className:`ue-main-tab ${g===`available`?`active`:``}`,onClick:()=>_(`available`),children:[(0,H.jsx)(`i`,{className:`fas fa-calendar-plus`}),`Available Events`,(0,H.jsx)(`span`,{className:`ue-main-tab__badge`,children:S.length})]}),(0,H.jsxs)(`button`,{className:`ue-main-tab ${g===`my`?`active`:``}`,onClick:()=>_(`my`),children:[(0,H.jsx)(`i`,{className:`fas fa-user-check`}),`My Registrations`,(0,H.jsx)(`span`,{className:`ue-main-tab__badge`,children:n.length})]})]}),g===`available`&&(0,H.jsxs)(`div`,{className:`ue-search`,children:[(0,H.jsx)(`i`,{className:`fas fa-search ue-search__icon`}),(0,H.jsx)(`input`,{className:`ue-search__input`,value:c,onChange:e=>l(e.target.value),placeholder:`Search events by title, location, or service...`}),c&&(0,H.jsx)(`button`,{className:`ue-search__clear`,onClick:()=>l(``),children:(0,H.jsx)(`i`,{className:`fas fa-times`})})]}),g===`available`&&(0,H.jsxs)(`div`,{className:`ue-section`,children:[(0,H.jsxs)(`div`,{className:`ue-section__header`,children:[(0,H.jsxs)(`div`,{className:`ue-section__title-wrapper`,children:[(0,H.jsx)(`h2`,{className:`ue-section__title`,children:u?`Events on ${new Date(u).toLocaleDateString(`en-US`,{month:`long`,day:`numeric`,year:`numeric`})}`:`Available Events`}),u&&(0,H.jsxs)(`button`,{className:`ue-section__clear`,onClick:()=>d(null),children:[(0,H.jsx)(`i`,{className:`fas fa-times`}),` Clear Filter`]})]}),(0,H.jsxs)(`span`,{className:`ue-section__count`,children:[S.length,` event`,S.length===1?``:`s`]})]}),i?(0,H.jsxs)(`div`,{className:`ue-loading`,children:[(0,H.jsx)(`div`,{className:`ue-loading__spinner`,children:(0,H.jsx)(`i`,{className:`fas fa-spinner fa-spin`})}),(0,H.jsx)(`p`,{children:`Loading events...`}),(0,H.jsx)(`span`,{className:`ue-loading__subtitle`,children:`Fetching latest events`})]}):S.length===0?(0,H.jsxs)(`div`,{className:`ue-empty`,children:[(0,H.jsx)(`div`,{className:`ue-empty__icon`,children:(0,H.jsx)(`i`,{className:`fas fa-calendar-xmark`})}),(0,H.jsx)(`h3`,{className:`ue-empty__title`,children:`No events found`}),(0,H.jsx)(`p`,{className:`ue-empty__message`,children:c?`Try adjusting your search or filters`:`Check back later for new events`}),c&&(0,H.jsxs)(`button`,{className:`ue-empty__action`,onClick:()=>l(``),children:[(0,H.jsx)(`i`,{className:`fas fa-times`}),` Clear Search`]})]}):(0,H.jsx)(`div`,{className:`ue-events-grid`,children:S.map(e=>{let t=n.some(t=>t.event_id===e.event_id),r=n.find(t=>t.event_id===e.event_id),i=co[e.major_service]||`#6b7280`;return(0,H.jsxs)(`div`,{className:`ue-event-card`,children:[(0,H.jsxs)(`div`,{className:`ue-event-card__header`,children:[(0,H.jsxs)(`span`,{className:`ue-event-card__service`,style:{background:`${i}15`,color:i,border:`1px solid ${i}30`},children:[(0,H.jsx)(`i`,{className:`fas fa-tag`}),` `,e.major_service]}),(0,H.jsx)(`div`,{className:`ue-event-card__badge`,children:e.fee>0?(0,H.jsxs)(`span`,{className:`ue-event-card__fee`,children:[``,parseFloat(e.fee).toFixed(2)]}):(0,H.jsxs)(`span`,{className:`ue-event-card__free`,children:[(0,H.jsx)(`i`,{className:`fas fa-gift`}),` FREE`]})})]}),(0,H.jsx)(`h3`,{className:`ue-event-card__title`,children:e.title}),(0,H.jsxs)(`div`,{className:`ue-event-card__meta`,children:[(0,H.jsxs)(`div`,{className:`ue-event-card__meta-item`,children:[(0,H.jsx)(`i`,{className:`fas fa-calendar`,style:{color:i}}),(0,H.jsxs)(`span`,{children:[new Date(e.event_date).toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,year:`numeric`}),e.event_end_date&&e.event_end_date!==e.event_date&&(0,H.jsxs)(H.Fragment,{children:[` - `,new Date(e.event_end_date).toLocaleDateString(`en-US`,{month:`short`,day:`numeric`})]})]})]}),(0,H.jsxs)(`div`,{className:`ue-event-card__meta-item`,children:[(0,H.jsx)(`i`,{className:`fas fa-clock`,style:{color:i}}),(0,H.jsxs)(`span`,{children:[e.start_time?.slice(0,5),` -`,` `,e.end_time?.slice(0,5)]})]}),(0,H.jsxs)(`div`,{className:`ue-event-card__meta-item`,children:[(0,H.jsx)(`i`,{className:`fas fa-map-marker-alt`,style:{color:i}}),(0,H.jsx)(`span`,{children:e.location?.split(`
`)[0]})]}),e.duration_days>1&&(0,H.jsxs)(`div`,{className:`ue-event-card__meta-item`,children:[(0,H.jsx)(`i`,{className:`fas fa-calendar-week`,style:{color:i}}),(0,H.jsxs)(`span`,{children:[e.duration_days,` days`]})]})]}),e.description&&(0,H.jsx)(`div`,{className:`ue-event-card__desc`,children:(0,H.jsxs)(`p`,{children:[e.description.substring(0,120),`...`]})}),(0,H.jsxs)(`div`,{className:`ue-event-card__footer`,children:[(0,H.jsxs)(`div`,{className:`ue-event-card__capacity`,children:[(0,H.jsx)(`i`,{className:`fas fa-users`,style:{color:i}}),(0,H.jsxs)(`span`,{children:[e.approved_count||0,` /`,` `,e.capacity>0?e.capacity:``]}),e.pending_count>0&&(0,H.jsxs)(`span`,{className:`ue-event-card__pending`,children:[`(`,e.pending_count,` pending)`]})]}),t?(0,H.jsxs)(`div`,{className:`ue-event-card__registered`,children:[(0,H.jsx)(`i`,{className:`fas fa-check-circle`,style:{color:`#10b981`}}),(0,H.jsx)(`span`,{style:{color:O(r?.status)},children:r?.status.toUpperCase()})]}):e.is_full?(0,H.jsxs)(`button`,{className:`ue-event-card__btn ue-event-card__btn--full`,disabled:!0,children:[(0,H.jsx)(`i`,{className:`fas fa-ban`}),` Event Full`]}):(0,H.jsxs)(`button`,{className:`ue-event-card__btn`,onClick:()=>p(e),style:{background:`linear-gradient(135deg, ${i}, ${i}dd)`},children:[(0,H.jsx)(`i`,{className:`fas fa-user-plus`}),` Register Now`]})]})]},e.event_id)})})]}),g===`my`&&(0,H.jsxs)(`div`,{className:`ue-section`,children:[(0,H.jsxs)(`div`,{className:`ue-section__header`,children:[(0,H.jsx)(`div`,{className:`ue-section__title-wrapper`,children:(0,H.jsxs)(`h2`,{className:`ue-section__title`,children:[(0,H.jsx)(`i`,{className:`fas fa-user-check`}),` My Registrations`]})}),(0,H.jsxs)(`span`,{className:`ue-section__count`,children:[n.length,` registration`,n.length===1?``:`s`]})]}),n.length===0?(0,H.jsxs)(`div`,{className:`ue-empty`,children:[(0,H.jsx)(`div`,{className:`ue-empty__icon`,children:(0,H.jsx)(`i`,{className:`fas fa-clipboard-list`})}),(0,H.jsx)(`h3`,{className:`ue-empty__title`,children:`No registrations yet`}),(0,H.jsx)(`p`,{className:`ue-empty__message`,children:`Browse available events and register to get started`}),(0,H.jsxs)(`button`,{className:`ue-empty__action`,onClick:()=>_(`available`),children:[(0,H.jsx)(`i`,{className:`fas fa-calendar-plus`}),` Browse Events`]})]}):(0,H.jsx)(`div`,{className:`ue-my-regs`,children:n.map(e=>{let t=co[e.major_service]||`#6b7280`;return(0,H.jsxs)(`div`,{className:`ue-my-reg`,children:[(0,H.jsxs)(`div`,{className:`ue-my-reg__header`,children:[(0,H.jsxs)(`div`,{className:`ue-my-reg__title-wrapper`,children:[(0,H.jsx)(`h4`,{className:`ue-my-reg__title`,children:e.title}),(0,H.jsx)(`span`,{className:`ue-my-reg__service`,style:{background:`${t}15`,color:t},children:e.major_service})]}),(0,H.jsx)(`span`,{className:`ue-my-reg__status ue-my-reg__status--${e.status}`,children:e.status.toUpperCase()})]}),(0,H.jsxs)(`div`,{className:`ue-my-reg__details`,children:[(0,H.jsxs)(`div`,{className:`ue-my-reg__meta`,children:[(0,H.jsxs)(`div`,{className:`ue-my-reg__meta-item`,children:[(0,H.jsx)(`i`,{className:`fas fa-calendar`}),new Date(e.event_date).toLocaleDateString(`en-US`,{month:`long`,day:`numeric`,year:`numeric`})]}),(0,H.jsxs)(`div`,{className:`ue-my-reg__meta-item`,children:[(0,H.jsx)(`i`,{className:`fas fa-map-marker-alt`}),e.location?.split(`
`)[0]||`TBA`]}),e.fee>0&&(0,H.jsxs)(`div`,{className:`ue-my-reg__meta-item`,children:[(0,H.jsx)(`i`,{className:`fas fa-money-bill`}),``,parseFloat(e.fee).toFixed(2),` `,` `,e.payment_mode?.toUpperCase()]})]}),(0,H.jsx)(`div`,{className:`ue-my-reg__footer`,children:(0,H.jsxs)(`div`,{className:`ue-my-reg__date`,children:[(0,H.jsx)(`i`,{className:`fas fa-clock`}),`Registered`,` `,new Date(e.registration_date).toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,year:`numeric`})]})})]})]},e.registration_id)})})]})]})]})}),f&&(0,H.jsx)(fo,{event:f,onClose:()=>p(null),onSuccess:D}),m&&(0,H.jsx)(lo,{message:m.msg,type:m.type,onClose:()=>h(null)})]})}function mo(){return(0,H.jsxs)(`div`,{className:`container`,children:[(0,H.jsx)(`h1`,{children:`Event Details`}),(0,H.jsx)(`p`,{children:`Event details page coming soon...`})]})}function ho(){return(0,H.jsxs)(`div`,{className:`container`,children:[(0,H.jsx)(`h1`,{children:`My Profile`}),(0,H.jsx)(`p`,{children:`Profile page coming soon...`})]})}var go=`/api/training_sessions.php`;const _o=async({filter:e=`all`,search:t=``,service:n=null,status:r=`active`,archived:i=!1}={})=>{let a={action:`list`,filter:e,status:r};t.trim()&&(a.search=t.trim()),n&&n!==`All Services`&&(a.service=n),i&&(a.archived=`true`);let{data:o}=await K.get(go,{params:a});if(!o.success)throw Error(o.message||`Failed to fetch training sessions`);return{success:!0,sessions:o.sessions??[],total:o.total??0}},vo=async()=>{let{data:e}=await K.get(go,{params:{action:`stats`}});if(!e.success)throw Error(e.message||`Failed to fetch stats`);return{success:!0,stats:e.stats}},yo=async e=>{if(!e.title?.trim())throw Error(`Session title is required`);if(!e.major_service)throw Error(`Major service is required`);if(!e.session_date)throw Error(`Session date is required`);if(!e.venue?.trim())throw Error(`Venue is required`);let{data:t}=await K.post(go,e,{params:{action:`create`}});if(!t.success)throw Error(t.message||`Failed to create session`);return{success:!0,message:t.message,session_id:t.session_id}},bo=async(e,t)=>{if(!e)throw Error(`Session ID is required`);let{data:n}=await K.put(go,t,{params:{action:`update`,id:e}});if(!n.success)throw Error(n.message||`Failed to update session`);return{success:!0,message:n.message}},xo=async e=>{if(!e)throw Error(`Session ID is required`);let{data:t}=await K.delete(go,{params:{action:`delete`,id:e}});if(!t.success)throw Error(t.message||`Failed to delete session`);return{success:!0,message:t.message}};var So=`/api/training_requests.php`;const Co=async e=>{let{data:t}=await K.post(So,e,{params:{action:`submit`},headers:{"Content-Type":`multipart/form-data`},transformRequest:[e=>e]});if(!t.success)throw Error(t.message||`Request submission failed`);return{success:!0,message:t.message,request_id:t.request_id}},wo=async({status:e=null,search:t=``}={})=>{let n={action:`list`};e&&e!==`all`&&(n.status=e),t.trim()&&(n.search=t.trim());let{data:r}=await K.get(So,{params:n});if(!r.success)throw Error(r.message||`Failed to fetch requests`);return{success:!0,requests:r.requests??[]}},To=async e=>{if(!e)throw Error(`Request ID is required`);let{data:t}=await K.get(So,{params:{action:`details`,id:e}});if(!t.success)throw Error(t.message||`Failed to fetch request details`);return{success:!0,request:t.request}},Eo=async(e,t,n=``)=>{if(!e)throw Error(`Request ID is required`);if(!t)throw Error(`Status is required`);let{data:r}=await K.put(So,{status:t,admin_notes:n},{params:{action:`update-status`,id:e}});if(!r.success)throw Error(r.message||`Failed to update status`);return{success:!0,message:r.message}},Do=async e=>{if(!e)throw Error(`Request ID is required`);let t=new FormData;t.append(`request_id`,e);let{data:n}=await K.post(So,t,{params:{action:`create-session`},headers:{"Content-Type":`multipart/form-data`}});if(!n.success)throw Error(n.message||`Failed to create session`);return{success:!0,message:n.message,session_id:n.session_id}},Oo=async()=>{let{data:e}=await K.get(So,{params:{action:`stats`}});if(!e.success)throw Error(e.message||`Failed to fetch stats`);return{success:!0,stats:e.stats??{}}};var ko=`/api/session_registrations.php`;const Ao=async e=>{let{data:t}=await K.post(ko,e,{params:{action:`register`},headers:{"Content-Type":`multipart/form-data`},transformRequest:[e=>e]});if(!t.success)throw Error(t.message||`Registration failed`);return{success:!0,message:t.message,registration_id:t.registration_id}},jo=async()=>{let{data:e}=await K.get(ko,{params:{action:`my-registrations`}});if(!e.success)throw Error(e.message||`Failed to fetch registrations`);return{success:!0,registrations:e.registrations??[]}},Mo=async e=>{if(!e)throw Error(`Session ID is required`);let{data:t}=await K.get(ko,{params:{action:`list`,session_id:e}});if(!t.success)throw Error(t.message||`Failed to fetch registrations`);return{success:!0,registrations:t.registrations??[]}},No=async e=>{if(!e)throw Error(`Registration ID is required`);let{data:t}=await K.put(ko,{},{params:{action:`approve`,id:e}});if(!t.success)throw Error(t.message||`Failed to approve registration`);return{success:!0,message:t.message}},Po=async e=>{if(!e)throw Error(`Registration ID is required`);let{data:t}=await K.put(ko,{},{params:{action:`reject`,id:e}});if(!t.success)throw Error(t.message||`Failed to reject registration`);return{success:!0,message:t.message}},Fo=async e=>{if(!e)throw Error(`Registration ID is required`);let{data:t}=await K.delete(ko,{params:{action:`delete`,id:e}});if(!t.success)throw Error(t.message||`Failed to delete registration`);return{success:!0,message:t.message}};var Io=[`JANUARY`,`FEBRUARY`,`MARCH`,`APRIL`,`MAY`,`JUNE`,`JULY`,`AUGUST`,`SEPTEMBER`,`OCTOBER`,`NOVEMBER`,`DECEMBER`],Lo=[`SUN`,`MON`,`TUE`,`WED`,`THU`,`FRI`,`SAT`],Ro=[`Health Service`,`Safety Service`,`Welfare Service`,`Disaster Management Service`,`Red Cross Youth`],zo=[`low`,`normal`,`high`,`urgent`],Bo=[`single_day`,`multi_day`,`workshop`,`certification`],Vo=[`email`,`sms`,`phone`],Ho={"Health Service":`#c41e3a`,"Safety Service":`#15803d`,"Welfare Service":`#7c3aed`,"Disaster Management Service":`#c2410c`,"Red Cross Youth":`#003d6b`};function Uo({message:e,type:t,onClose:n}){return(0,v.useEffect)(()=>{let e=setTimeout(n,3500);return()=>clearTimeout(e)},[n]),(0,H.jsxs)(`div`,{className:`ut-toast ut-toast--${t}`,onClick:n,children:[(0,H.jsx)(`div`,{className:`ut-toast__icon`,children:(0,H.jsx)(`i`,{className:`fas ${t===`success`?`fa-circle-check`:`fa-circle-xmark`}`})}),(0,H.jsxs)(`div`,{className:`ut-toast__content`,children:[(0,H.jsx)(`div`,{className:`ut-toast__title`,children:t===`success`?`Success`:`Error`}),(0,H.jsx)(`div`,{className:`ut-toast__message`,children:e})]}),(0,H.jsx)(`button`,{className:`ut-toast__close`,onClick:n,children:(0,H.jsx)(`i`,{className:`fas fa-xmark`})})]})}function Wo({sessions:e,selectedDate:t,onDateSelect:n}){let[r,i]=(0,v.useState)(new Date),[a,o]=(0,v.useState)(null),s=r.getFullYear(),c=r.getMonth(),l=new Date(s,c,1).getDay(),u=new Date(s,c+1,0).getDate(),d=[];for(let e=0;e<l;e++)d.push(null);for(let e=1;e<=u;e++)d.push(e);let f=t=>{if(!t)return!1;let n=`${s}-${String(c+1).padStart(2,`0`)}-${String(t).padStart(2,`0`)}`;return e.some(e=>e.session_date===n||e.session_end_date&&n>=e.session_date&&n<=e.session_end_date)},p=t=>{if(!t)return 0;let n=`${s}-${String(c+1).padStart(2,`0`)}-${String(t).padStart(2,`0`)}`;return e.filter(e=>e.session_date===n||e.session_end_date&&n>=e.session_date&&n<=e.session_end_date).length},m=e=>!e||!t?!1:`${s}-${String(c+1).padStart(2,`0`)}-${String(e).padStart(2,`0`)}`===t,h=e=>{let t=new Date;return e===t.getDate()&&c===t.getMonth()&&s===t.getFullYear()},g=()=>{i(new Date(s,c-1,1))},_=()=>{i(new Date(s,c+1,1))},y=e=>{e&&n(`${s}-${String(c+1).padStart(2,`0`)}-${String(e).padStart(2,`0`)}`)};return(0,H.jsxs)(`div`,{className:`ut-calendar`,children:[(0,H.jsxs)(`div`,{className:`ut-calendar__header`,children:[(0,H.jsxs)(`div`,{className:`ut-calendar__nav-group`,children:[(0,H.jsx)(`button`,{className:`ut-calendar__nav`,onClick:g,children:(0,H.jsx)(`i`,{className:`fas fa-chevron-left`})}),(0,H.jsxs)(`div`,{className:`ut-calendar__title`,children:[Io[c],` `,s]}),(0,H.jsx)(`button`,{className:`ut-calendar__nav`,onClick:_,children:(0,H.jsx)(`i`,{className:`fas fa-chevron-right`})})]}),(0,H.jsxs)(`button`,{className:`ut-calendar__today`,onClick:()=>{i(new Date)},children:[(0,H.jsx)(`i`,{className:`fas fa-calendar-day`}),`Today`]})]}),(0,H.jsx)(`div`,{className:`ut-calendar__weekdays`,children:Lo.map(e=>(0,H.jsx)(`div`,{className:`ut-calendar__weekday`,children:e},e))}),(0,H.jsx)(`div`,{className:`ut-calendar__grid`,children:d.map((e,t)=>{let n=p(e),r=a===e;return(0,H.jsxs)(`div`,{className:`ut-calendar__cell 
                ${e?``:`ut-calendar__cell--empty`} 
                ${f(e)?`ut-calendar__cell--session`:``} 
                ${m(e)?`ut-calendar__cell--selected`:``}
                ${h(e)?`ut-calendar__cell--today`:``}
                ${r?`ut-calendar__cell--hovered`:``}`,onClick:()=>y(e),onMouseEnter:()=>e&&o(e),onMouseLeave:()=>o(null),children:[(0,H.jsx)(`span`,{className:`ut-calendar__day-number`,children:e}),n>0&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`span`,{className:`ut-calendar__event-indicator`}),r&&(0,H.jsxs)(`div`,{className:`ut-calendar__tooltip`,children:[(0,H.jsxs)(`strong`,{children:[n,` session`,n>1?`s`:``]}),(0,H.jsx)(`span`,{children:`Click to view`})]})]})]},t)})})]})}function Go({onClose:e,onSuccess:t}){let[n,r]=(0,v.useState)(1),[i,a]=(0,v.useState)({service_type:``,training_program:``,training_type:`single_day`,urgency:`normal`,preferred_start_date:``,preferred_end_date:``,preferred_start_time:`09:00`,preferred_end_time:`17:00`,participant_count:1,organization_name:``,location_preference:``,venue_requirements:``,equipment_needed:``,contact_person:``,contact_number:``,email:``,notification_preferences:{email:!0,sms:!1,phone:!1},purpose:``,additional_requirements:``}),[o,s]=(0,v.useState)({valid_id:null,participant_list:null,additional_docs:[]}),[c,l]=(0,v.useState)(!1),[u,d]=(0,v.useState)({}),[f,p]=(0,v.useState)([]),[m,h]=(0,v.useState)(null),[g,_]=(0,v.useState)(!1),[y,b]=(0,v.useState)({status:`pending`,message:``}),[x,S]=(0,v.useState)(1),C={"Safety Service":[{id:`EFAT`,name:`Emergency First Aid Training (EFAT)`,description:`Basic emergency first aid response training for immediate response to common emergencies`},{id:`OFAT`,name:`Occupational First Aid Training (OFAT)`,description:`First aid training specifically designed for workplace settings and occupational safety`},{id:`BLS`,name:`Basic Life Support (BLS)`,description:`Learn essential life-saving techniques including CPR and AED operation`},{id:`WA`,name:`Water Safety`,description:`Comprehensive water safety training including swimming and rescue techniques`},{id:`FA`,name:`First Aid Training`,description:`Standard first aid training for emergency response`}],"Red Cross Youth":[{id:`YVFC`,name:`Youth Volunteer Formation Course (YVFC)`,description:`Develop leadership skills and Red Cross principles for youth volunteers`},{id:`PEER`,name:`Peer Education Program`,description:`Training on peer-to-peer education methodologies for youth development`},{id:`RCY_BASIC`,name:`RCY Basic Course`,description:`Introduction to Red Cross Youth principles, history, and programs`}],"Health Service":[{id:`BLS_H`,name:`Basic Life Support - Healthcare Provider`,description:`BLS training specifically designed for healthcare providers and medical personnel`},{id:`FA_H`,name:`First Aid Training - Healthcare`,description:`Advanced first aid training for medical professionals`}],"Welfare Service":[{id:`PSYCH`,name:`Psychological First Aid`,description:`Mental health support and crisis intervention training`},{id:`CHILD`,name:`Child Protection Training`,description:`Child safeguarding and protection protocols for welfare workers`}],"Disaster Management Service":[{id:`DRRM`,name:`Disaster Risk Reduction Management`,description:`Comprehensive training on disaster preparedness, response, and management`},{id:`CBT`,name:`Community-Based Training`,description:`Community disaster response and preparedness training`}]};function w(e,t){a(n=>({...n,[e]:t})),d(t=>({...t,[e]:void 0}))}function T(e,t){s(n=>({...n,[e]:t})),d(t=>({...t,[e]:void 0}))}function E(){i.service_type?(p(C[i.service_type]||[]),w(`training_program`,``),h(null)):p([])}function D(e){let t=e.target.value;w(`training_program`,t),h(f.find(e=>e.id===t))}function O(){if(_(!!(i.preferred_start_date||i.preferred_end_date)),i.preferred_start_date&&i.preferred_end_date){let e=new Date(i.preferred_start_date),t=new Date(i.preferred_end_date),n=Math.abs(t-e),r=Math.ceil(n/(1e3*60*60*24))+1;S(r),r>1?w(`training_type`,`multi_day`):w(`training_type`,`single_day`)}else S(1)}function ee(e){let t=/^(\+?63|0)[0-9\s\-\(\)]{10,14}$/,n=e.replace(/[\s\-\(\)]/g,``),r=t.test(n);return b({status:r?`valid`:`invalid`,message:r?``:`Please enter a valid Philippine contact number`}),r}function k(e){w(`notification_preferences`,{...i.notification_preferences,[e]:!i.notification_preferences[e]})}function te(e,t){let n=e.target.files[0];if(n)if(t===`additional_docs`){let t=Array.from(e.target.files);s(e=>({...e,additional_docs:[...e.additional_docs,...t]}))}else T(t,n)}function A(e){s(t=>({...t,additional_docs:t.additional_docs.filter((t,n)=>n!==e)}))}function ne(){if(i.preferred_start_date&&i.preferred_end_date){let e=new Date(i.preferred_start_date),t=new Date(i.preferred_end_date),n=Math.abs(t-e),r=Math.ceil(n/(1e3*60*60*24))+1;return`${r} day${r>1?`s`:``}`}return`1 day`}function j(){return parseInt(i.participant_count)>=5}function M(e){let t={};return e===1&&(i.service_type||(t.service_type=`Service type is required`),i.training_program||(t.training_program=`Training program is required`),i.preferred_start_time||(t.preferred_start_time=`Start time is required`),i.preferred_end_time||(t.preferred_end_time=`End time is required`),i.preferred_start_time&&i.preferred_end_time&&i.preferred_end_time<=i.preferred_start_time&&(t.preferred_end_time=`End time must be after start time`)),e===2&&(i.participant_count||(t.participant_count=`Number of participants is required`),parseInt(i.participant_count)<1&&(t.participant_count=`Minimum 1 participant`),parseInt(i.participant_count)>100&&(t.participant_count=`Maximum 100 participants`),j()&&!i.organization_name&&(t.organization_name=`Organization name is required for groups of 5 or more`)),e===3&&(i.contact_person||(t.contact_person=`Contact person is required`),i.contact_number||(t.contact_number=`Contact number is required`),ee(i.contact_number)||(t.contact_number=`Please enter a valid Philippine contact number`),i.email||(t.email=`Email address is required`),/\S+@\S+\.\S+/.test(i.email)||(t.email=`Please enter a valid email address`)),e===4&&(o.valid_id||(t.valid_id=`Valid ID is required`),j()&&!o.participant_list&&(t.participant_list=`Participant list is required for groups of 5 or more`)),t}function N(){let e=M(n);if(Object.keys(e).length){d(e);return}r(n+1),d({})}function P(){r(n-1),d({})}async function re(n){n.preventDefault();let r=M(4);if(Object.keys(r).length){d(r);return}l(!0);try{let n=new FormData;n.append(`service_type`,i.service_type),n.append(`training_program`,i.training_program),n.append(`training_type`,i.training_type),n.append(`urgency`,i.urgency),i.preferred_start_date&&n.append(`preferred_start_date`,i.preferred_start_date),i.preferred_end_date&&n.append(`preferred_end_date`,i.preferred_end_date),n.append(`duration_days`,x.toString()),i.preferred_start_time&&n.append(`preferred_start_time`,i.preferred_start_time),i.preferred_end_time&&n.append(`preferred_end_time`,i.preferred_end_time),n.append(`participant_count`,i.participant_count.toString()),i.organization_name&&n.append(`organization_name`,i.organization_name),n.append(`contact_person`,i.contact_person),n.append(`contact_number`,i.contact_number),n.append(`email`,i.email),n.append(`notification_preferences`,JSON.stringify(i.notification_preferences)),i.location_preference&&n.append(`location_preference`,i.location_preference),i.venue_requirements&&n.append(`venue_requirements`,i.venue_requirements),i.equipment_needed&&n.append(`equipment_needed`,i.equipment_needed),i.purpose&&n.append(`purpose`,i.purpose),i.additional_requirements&&n.append(`additional_requirements`,i.additional_requirements),o.valid_id&&n.append(`valid_id_request`,o.valid_id),o.participant_list&&n.append(`participant_list`,o.participant_list),o.additional_docs.forEach((e,t)=>{n.append(`additional_docs[${t}]`,e)}),t((await Co(n)).message),e()}catch(e){d({_global:e.message||`Training request submission failed`})}finally{l(!1)}}let F=new Date(Date.now()+10080*60*1e3).toISOString().split(`T`)[0];return(0,H.jsx)(`div`,{className:`ut-overlay`,onClick:e,children:(0,H.jsxs)(`div`,{className:`ut-modal ut-modal--lg`,onClick:e=>e.stopPropagation(),children:[(0,H.jsxs)(`div`,{className:`ut-modal__header`,children:[(0,H.jsxs)(`div`,{children:[(0,H.jsxs)(`div`,{className:`ut-modal__title`,children:[(0,H.jsx)(`i`,{className:`fas fa-graduation-cap`,style:{marginRight:`0.5rem`}}),`Request Training Program`]}),(0,H.jsxs)(`div`,{className:`ut-modal__meta`,children:[(0,H.jsx)(`i`,{className:`fas fa-info-circle`}),` Step `,n,` of 4`]})]}),(0,H.jsx)(`button`,{className:`ut-modal__close`,onClick:e,children:(0,H.jsx)(`i`,{className:`fas fa-xmark`})})]}),(0,H.jsxs)(`form`,{className:`ut-modal__body`,onSubmit:re,children:[u._global&&(0,H.jsxs)(`div`,{className:`ut-form__error-banner`,children:[(0,H.jsx)(`i`,{className:`fas fa-circle-exclamation`}),` `,u._global]}),(0,H.jsx)(`div`,{className:`ut-tabs`,style:{marginBottom:`2rem`},children:[1,2,3,4].map(e=>(0,H.jsxs)(`button`,{type:`button`,className:`ut-tab ${n===e?`ut-tab--active`:``} ${n>e?`ut-tab--completed`:``}`,onClick:()=>e<n&&r(e),disabled:e>n,children:[e===1&&(0,H.jsx)(`i`,{className:`fas fa-calendar`}),e===2&&(0,H.jsx)(`i`,{className:`fas fa-users`}),e===3&&(0,H.jsx)(`i`,{className:`fas fa-address-book`}),e===4&&(0,H.jsx)(`i`,{className:`fas fa-file-upload`}),`Step `,e]},e))}),n===1&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(`div`,{className:`ut-divider`,children:[(0,H.jsx)(`i`,{className:`fas fa-graduation-cap`}),` Training Program Details`]}),(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsxs)(`label`,{className:`ut-form__label`,children:[`Service Type `,(0,H.jsx)(`span`,{className:`ut-form__required`,children:`*`})]}),(0,H.jsxs)(`select`,{className:`ut-form__select ${u.service_type?`ut-form__input--error`:``}`,value:i.service_type,onChange:e=>{w(`service_type`,e.target.value),E()},children:[(0,H.jsx)(`option`,{value:``,children:`Select Service Type`}),Ro.map(e=>(0,H.jsx)(`option`,{value:e,children:e},e))]}),u.service_type&&(0,H.jsx)(`span`,{className:`ut-form__error-text`,children:u.service_type})]}),(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsxs)(`label`,{className:`ut-form__label`,children:[`Training Program `,(0,H.jsx)(`span`,{className:`ut-form__required`,children:`*`})]}),(0,H.jsxs)(`select`,{className:`ut-form__select ${u.training_program?`ut-form__input--error`:``}`,value:i.training_program,onChange:D,disabled:!i.service_type,children:[(0,H.jsx)(`option`,{value:``,children:i.service_type?`Select Training Program`:`Select service type first`}),f.map(e=>(0,H.jsx)(`option`,{value:e.id,children:e.name},e.id))]}),u.training_program&&(0,H.jsx)(`span`,{className:`ut-form__error-text`,children:u.training_program})]}),m&&(0,H.jsxs)(`div`,{className:`ut-info-notice`,style:{marginTop:`-0.5rem`,marginBottom:`1.5rem`},children:[(0,H.jsx)(`i`,{className:`fas fa-info-circle`}),(0,H.jsx)(`div`,{children:m.description})]}),(0,H.jsxs)(`div`,{className:`ut-form__row`,children:[(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsx)(`label`,{className:`ut-form__label`,children:`Training Type`}),(0,H.jsx)(`select`,{className:`ut-form__select`,value:i.training_type,onChange:e=>w(`training_type`,e.target.value),children:Bo.map(e=>(0,H.jsx)(`option`,{value:e,children:e.split(`_`).map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(` `)},e))})]}),(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsx)(`label`,{className:`ut-form__label`,children:`Urgency Level`}),(0,H.jsx)(`select`,{className:`ut-form__select`,value:i.urgency,onChange:e=>w(`urgency`,e.target.value),children:zo.map(e=>(0,H.jsx)(`option`,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})]}),(0,H.jsxs)(`div`,{className:`ut-form__row`,children:[(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsx)(`label`,{className:`ut-form__label`,children:`Preferred Start Date`}),(0,H.jsx)(`input`,{type:`date`,className:`ut-form__input`,min:F,value:i.preferred_start_date,onChange:e=>{w(`preferred_start_date`,e.target.value),O()}}),(0,H.jsx)(`small`,{className:`ut-form__hint`,children:`Leave blank if flexible`})]}),(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsx)(`label`,{className:`ut-form__label`,children:`Preferred End Date`}),(0,H.jsx)(`input`,{type:`date`,className:`ut-form__input`,min:i.preferred_start_date||F,value:i.preferred_end_date,onChange:e=>{w(`preferred_end_date`,e.target.value),O()}}),(0,H.jsx)(`small`,{className:`ut-form__hint`,children:`Same as start date for single-day training`})]})]}),g&&(0,H.jsxs)(`div`,{className:`ut-info-notice`,style:{marginTop:`-0.5rem`},children:[(0,H.jsx)(`i`,{className:`fas fa-calendar-check`}),(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`strong`,{children:`Requested Training Period:`}),(0,H.jsx)(`br`,{}),i.preferred_start_date||`Flexible start`,i.preferred_end_date&&i.preferred_end_date!==i.preferred_start_date?` to ${i.preferred_end_date}`:``,(0,H.jsx)(`br`,{}),(0,H.jsxs)(`small`,{children:[`Duration: `,ne()]})]})]}),(0,H.jsxs)(`div`,{className:`ut-form__row`,children:[(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsxs)(`label`,{className:`ut-form__label`,children:[`Preferred Start Time`,` `,(0,H.jsx)(`span`,{className:`ut-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`time`,className:`ut-form__input ${u.preferred_start_time?`ut-form__input--error`:``}`,value:i.preferred_start_time,onChange:e=>w(`preferred_start_time`,e.target.value)}),u.preferred_start_time&&(0,H.jsx)(`span`,{className:`ut-form__error-text`,children:u.preferred_start_time})]}),(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsxs)(`label`,{className:`ut-form__label`,children:[`Preferred End Time`,` `,(0,H.jsx)(`span`,{className:`ut-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`time`,className:`ut-form__input ${u.preferred_end_time?`ut-form__input--error`:``}`,value:i.preferred_end_time,onChange:e=>w(`preferred_end_time`,e.target.value)}),u.preferred_end_time&&(0,H.jsx)(`span`,{className:`ut-form__error-text`,children:u.preferred_end_time})]})]})]}),n===2&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(`div`,{className:`ut-divider`,children:[(0,H.jsx)(`i`,{className:`fas fa-users`}),` Participant Information`]}),(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsxs)(`label`,{className:`ut-form__label`,children:[`Number of Participants`,` `,(0,H.jsx)(`span`,{className:`ut-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`number`,min:`1`,max:`100`,className:`ut-form__input ${u.participant_count?`ut-form__input--error`:``}`,value:i.participant_count,onChange:e=>w(`participant_count`,e.target.value),placeholder:`How many participants?`}),(0,H.jsx)(`small`,{className:`ut-form__hint`,children:`Minimum 1, maximum 100 participants`}),u.participant_count&&(0,H.jsx)(`span`,{className:`ut-form__error-text`,children:u.participant_count})]}),(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsx)(`label`,{className:`ut-form__label`,children:`Location Preference`}),(0,H.jsx)(`input`,{type:`text`,className:`ut-form__input`,value:i.location_preference,onChange:e=>w(`location_preference`,e.target.value),placeholder:`City or specific venue preference`})]}),(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsx)(`label`,{className:`ut-form__label`,children:`Venue Requirements`}),(0,H.jsx)(`textarea`,{className:`ut-form__textarea`,rows:`2`,value:i.venue_requirements,onChange:e=>w(`venue_requirements`,e.target.value),placeholder:`Specific venue requirements (projector, parking, accessibility, etc.)`})]}),(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsx)(`label`,{className:`ut-form__label`,children:`Equipment Needed`}),(0,H.jsx)(`textarea`,{className:`ut-form__textarea`,rows:`2`,value:i.equipment_needed,onChange:e=>w(`equipment_needed`,e.target.value),placeholder:`Training equipment requirements`})]}),j()&&(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsxs)(`label`,{className:`ut-form__label`,children:[`Organization/Company Name`,` `,j()&&(0,H.jsx)(`span`,{className:`ut-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`text`,className:`ut-form__input ${u.organization_name?`ut-form__input--error`:``}`,value:i.organization_name,onChange:e=>w(`organization_name`,e.target.value),placeholder:`Organization name if applicable`}),(0,H.jsx)(`small`,{className:`ut-form__hint`,children:`Required for groups of 5 or more participants`}),u.organization_name&&(0,H.jsx)(`span`,{className:`ut-form__error-text`,children:u.organization_name})]})]}),n===3&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(`div`,{className:`ut-divider`,children:[(0,H.jsx)(`i`,{className:`fas fa-address-book`}),` Contact Information`]}),(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsxs)(`label`,{className:`ut-form__label`,children:[`Contact Person `,(0,H.jsx)(`span`,{className:`ut-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`text`,className:`ut-form__input ${u.contact_person?`ut-form__input--error`:``}`,value:i.contact_person,onChange:e=>w(`contact_person`,e.target.value),placeholder:`Primary contact person`}),u.contact_person&&(0,H.jsx)(`span`,{className:`ut-form__error-text`,children:u.contact_person})]}),(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsxs)(`label`,{className:`ut-form__label`,children:[`Philippine Contact Number`,` `,(0,H.jsx)(`span`,{className:`ut-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`tel`,className:`ut-form__input ${u.contact_number?`ut-form__input--error`:``}`,value:i.contact_number,onChange:e=>w(`contact_number`,e.target.value),onBlur:e=>ee(e.target.value),placeholder:`09XX XXX XXXX or 032 XXX XXXX`}),y.status===`invalid`&&(0,H.jsx)(`span`,{className:`ut-form__error-text`,children:y.message}),u.contact_number&&(0,H.jsx)(`span`,{className:`ut-form__error-text`,children:u.contact_number}),(0,H.jsx)(`small`,{className:`ut-form__hint`,children:`Accepted formats: 09XX XXX XXXX (mobile), 032 XXX XXXX (landline), +63 9XX XXX XXXX`})]}),(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsxs)(`label`,{className:`ut-form__label`,children:[`Email Address `,(0,H.jsx)(`span`,{className:`ut-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`email`,className:`ut-form__input ${u.email?`ut-form__input--error`:``}`,value:i.email,onChange:e=>w(`email`,e.target.value),placeholder:`contact@example.com`}),u.email&&(0,H.jsx)(`span`,{className:`ut-form__error-text`,children:u.email})]}),(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsx)(`label`,{className:`ut-form__label`,children:`Notification Preferences`}),(0,H.jsx)(`div`,{style:{display:`flex`,gap:`1.5rem`,flexWrap:`wrap`},children:Vo.map(e=>(0,H.jsxs)(`label`,{style:{display:`flex`,alignItems:`center`,gap:`0.5rem`},children:[(0,H.jsx)(`input`,{type:`checkbox`,checked:i.notification_preferences[e],onChange:()=>k(e)}),(0,H.jsx)(`span`,{style:{textTransform:`capitalize`},children:e})]},e))}),(0,H.jsx)(`small`,{className:`ut-form__hint`,children:`Select preferred contact methods`})]}),(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsx)(`label`,{className:`ut-form__label`,children:`Purpose/Objective`}),(0,H.jsx)(`textarea`,{className:`ut-form__textarea`,rows:`3`,value:i.purpose,onChange:e=>w(`purpose`,e.target.value),placeholder:`Brief description of why you need this training...`})]}),(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsx)(`label`,{className:`ut-form__label`,children:`Additional Requirements`}),(0,H.jsx)(`textarea`,{className:`ut-form__textarea`,rows:`2`,value:i.additional_requirements,onChange:e=>w(`additional_requirements`,e.target.value),placeholder:`Any special requirements, equipment needs, or accessibility considerations...`})]})]}),n===4&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(`div`,{className:`ut-divider`,children:[(0,H.jsx)(`i`,{className:`fas fa-file-upload`}),` Required Documents`]}),(0,H.jsxs)(`div`,{className:`ut-info-notice`,children:[(0,H.jsx)(`i`,{className:`fas fa-info-circle`}),(0,H.jsx)(`div`,{children:(0,H.jsx)(`strong`,{children:`Please upload the following documents to process your training request:`})})]}),(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsxs)(`label`,{className:`ut-form__label`,children:[`Valid ID `,(0,H.jsx)(`span`,{className:`ut-form__required`,children:`*`})]}),(0,H.jsxs)(`div`,{className:`ut-file-upload`,children:[(0,H.jsx)(`input`,{type:`file`,id:`valid_id_request`,accept:`.jpg,.jpeg,.png,.pdf`,onChange:e=>te(e,`valid_id`),className:`ut-file-upload__input`}),(0,H.jsxs)(`label`,{htmlFor:`valid_id_request`,className:`ut-file-upload__label`,children:[(0,H.jsx)(`i`,{className:`fas fa-id-card`}),o.valid_id?o.valid_id.name:`Upload a clear photo of your valid ID`]})]}),(0,H.jsx)(`small`,{className:`ut-form__hint`,children:`Accepted formats: JPG, PNG, PDF (Max 5MB)`}),u.valid_id&&(0,H.jsx)(`span`,{className:`ut-form__error-text`,children:u.valid_id})]}),j()&&(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsxs)(`label`,{className:`ut-form__label`,children:[`Participant List`,` `,j()&&(0,H.jsx)(`span`,{className:`ut-form__required`,children:`*`})]}),(0,H.jsxs)(`div`,{className:`ut-file-upload`,children:[(0,H.jsx)(`input`,{type:`file`,id:`participant_list`,accept:`.pdf,.doc,.docx,.csv,.xls,.xlsx`,onChange:e=>te(e,`participant_list`),className:`ut-file-upload__input`}),(0,H.jsxs)(`label`,{htmlFor:`participant_list`,className:`ut-file-upload__label`,children:[(0,H.jsx)(`i`,{className:`fas fa-users`}),o.participant_list?o.participant_list.name:`Upload list of participants (for groups of 5 or more)`]})]}),(0,H.jsx)(`small`,{className:`ut-form__hint`,children:`Accepted formats: PDF, DOC, DOCX, CSV, Excel (Max 10MB)`}),u.participant_list&&(0,H.jsx)(`span`,{className:`ut-form__error-text`,children:u.participant_list})]}),(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsx)(`label`,{className:`ut-form__label`,children:`Additional Documents (Optional)`}),(0,H.jsxs)(`div`,{className:`ut-file-upload`,children:[(0,H.jsx)(`input`,{type:`file`,id:`additional_docs`,multiple:!0,accept:`.jpg,.jpeg,.png,.pdf,.doc,.docx`,onChange:e=>te(e,`additional_docs`),className:`ut-file-upload__input`}),(0,H.jsxs)(`label`,{htmlFor:`additional_docs`,className:`ut-file-upload__label`,children:[(0,H.jsx)(`i`,{className:`fas fa-file-alt`}),o.additional_docs.length>0?`${o.additional_docs.length} file(s) selected`:`Upload supporting documents (certificates, authorization letters, etc.)`]})]}),(0,H.jsx)(`small`,{className:`ut-form__hint`,children:`Accepted formats: JPG, PNG, PDF, DOC, DOCX (Max 5MB each)`})]}),o.additional_docs.length>0&&(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsx)(`label`,{className:`ut-form__label`,children:`Selected Files:`}),(0,H.jsx)(`div`,{className:`ut-file-list`,children:o.additional_docs.map((e,t)=>(0,H.jsxs)(`div`,{className:`ut-file-list__item`,children:[(0,H.jsx)(`span`,{className:`ut-file-list__item-name`,children:e.name}),(0,H.jsx)(`button`,{type:`button`,className:`ut-file-list__item-remove`,onClick:()=>A(t),children:(0,H.jsx)(`i`,{className:`fas fa-times`})})]},t))})]}),(0,H.jsxs)(`div`,{className:`ut-info-notice`,style:{marginTop:`1rem`},children:[(0,H.jsx)(`i`,{className:`fas fa-info-circle`}),(0,H.jsx)(`div`,{children:`Your training request will be reviewed by our training coordinators. We will contact you within 3-5 business days to discuss scheduling and requirements. All uploaded documents are securely stored and used only for training request processing.`})]})]}),(0,H.jsxs)(`div`,{style:{display:`flex`,gap:`1rem`,marginTop:`2rem`},children:[n>1&&(0,H.jsxs)(`button`,{type:`button`,onClick:P,className:`ut-form__submit`,style:{background:`#e5e7eb`,color:`#374151`},children:[(0,H.jsx)(`i`,{className:`fas fa-arrow-left`}),` Previous`]}),n<4?(0,H.jsxs)(`button`,{type:`button`,onClick:N,className:`ut-form__submit`,style:{flex:1},children:[`Next `,(0,H.jsx)(`i`,{className:`fas fa-arrow-right`})]}):(0,H.jsx)(`button`,{type:`submit`,disabled:c,className:`ut-form__submit`,style:{flex:1},children:c?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fas fa-spinner fa-spin`}),` Submitting`]}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fas fa-paper-plane`}),` Submit Training Request`]})})]})]})]})})}function Ko({session:e,onClose:t,onSuccess:n}){let[r,i]=(0,v.useState)(1),[a,o]=(0,v.useState)(`individual`),[s,c]=(0,v.useState)({full_name:``,email:``,age:``,location:``,rcy_status:`Non-RCY`,organization_name:``,payment_mode:e.fee>0?`gcash`:`free`}),[l,u]=(0,v.useState)({valid_id:null,requirements:null,payment_receipt:null}),[d,f]=(0,v.useState)(!1),[p,m]=(0,v.useState)({});function h(e,t){c(n=>({...n,[e]:t})),m(t=>({...t,[e]:void 0}))}function g(e,t){u(n=>({...n,[e]:t})),m(t=>({...t,[e]:void 0}))}function _(){let t={};return s.full_name.trim()||(t.full_name=`Full name is required`),s.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||(t.email=`Invalid email format`):t.email=`Email is required`,s.location.trim()||(t.location=`Location is required`),l.valid_id||(t.valid_id=`Valid ID is required`),e.fee>0&&s.payment_mode!==`free`&&!l.payment_receipt&&(t.payment_receipt=`Payment receipt is required for paid sessions`),t}let y=()=>{let e={};if(r===1&&(s.full_name.trim()||(e.full_name=`Full name is required`),s.email.trim()||(e.email=`Email is required`),s.location.trim()||(e.location=`Location is required`)),Object.keys(e).length){m(e);return}i(2)},b=()=>{i(1)};async function x(t){t.preventDefault();let r=_();if(Object.keys(r).length){m(r);return}f(!0);try{let t=new FormData;t.append(`session_id`,e.session_id),t.append(`registration_type`,a),t.append(`full_name`,s.full_name),t.append(`email`,s.email),s.age&&t.append(`age`,s.age),t.append(`location`,s.location),t.append(`rcy_status`,s.rcy_status),a===`organization`&&t.append(`organization_name`,s.organization_name),t.append(`payment_mode`,s.payment_mode),l.valid_id&&t.append(`valid_id`,l.valid_id),l.requirements&&t.append(`requirements`,l.requirements),l.payment_receipt&&t.append(`payment_receipt`,l.payment_receipt),n((await Ao(t)).message)}catch(e){m({_global:e.message||`Registration failed`})}finally{f(!1)}}return Ho[e.major_service],(0,H.jsx)(`div`,{className:`ut-overlay`,onClick:t,children:(0,H.jsxs)(`div`,{className:`ut-modal ut-modal--lg`,onClick:e=>e.stopPropagation(),children:[(0,H.jsxs)(`div`,{className:`ut-modal__header`,children:[(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`div`,{className:`ut-modal__title`,children:e.title}),(0,H.jsxs)(`div`,{className:`ut-modal__meta`,children:[(0,H.jsxs)(`span`,{className:`ut-modal__meta-item`,children:[(0,H.jsx)(`i`,{className:`fas fa-calendar`}),` `,new Date(e.session_date).toLocaleDateString(`en-US`,{month:`long`,day:`numeric`,year:`numeric`})]}),e.fee>0&&(0,H.jsxs)(`span`,{className:`ut-modal__meta-item`,children:[(0,H.jsx)(`i`,{className:`fas fa-tag`}),` `,parseFloat(e.fee).toFixed(2)]}),e.fee===0&&(0,H.jsxs)(`span`,{className:`ut-modal__free-badge`,children:[(0,H.jsx)(`i`,{className:`fas fa-gift`}),` FREE`]})]})]}),(0,H.jsx)(`button`,{className:`ut-modal__close`,onClick:t,children:(0,H.jsx)(`i`,{className:`fas fa-xmark`})})]}),(0,H.jsxs)(`div`,{className:`ut-modal__progress`,children:[(0,H.jsxs)(`div`,{className:`ut-progress-step ${r>=1?`active`:``} ${r>1?`completed`:``}`,children:[(0,H.jsx)(`span`,{className:`ut-progress-step__number`,children:`1`}),(0,H.jsx)(`span`,{className:`ut-progress-step__label`,children:`Personal Info`})]}),(0,H.jsx)(`div`,{className:`ut-progress-line`}),(0,H.jsxs)(`div`,{className:`ut-progress-step ${r>=2?`active`:``}`,children:[(0,H.jsx)(`span`,{className:`ut-progress-step__number`,children:`2`}),(0,H.jsx)(`span`,{className:`ut-progress-step__label`,children:`Documents`})]}),e.fee>0&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`div`,{className:`ut-progress-line`}),(0,H.jsxs)(`div`,{className:`ut-progress-step ${r>=3?`active`:``}`,children:[(0,H.jsx)(`span`,{className:`ut-progress-step__number`,children:`3`}),(0,H.jsx)(`span`,{className:`ut-progress-step__label`,children:`Payment`})]})]})]}),(0,H.jsxs)(`form`,{className:`ut-modal__body`,onSubmit:x,children:[p._global&&(0,H.jsxs)(`div`,{className:`ut-form__error-banner`,children:[(0,H.jsx)(`i`,{className:`fas fa-circle-exclamation`}),` `,p._global]}),r===1&&(0,H.jsxs)(`div`,{className:`ut-step`,children:[(0,H.jsxs)(`h3`,{className:`ut-step__title`,children:[(0,H.jsx)(`i`,{className:`fas fa-user-circle`}),` Personal Information`]}),(0,H.jsxs)(`div`,{className:`ut-tabs`,children:[(0,H.jsxs)(`button`,{type:`button`,className:`ut-tab ${a===`individual`?`ut-tab--active`:``}`,onClick:()=>o(`individual`),children:[(0,H.jsx)(`i`,{className:`fas fa-user`}),` Individual`]}),(0,H.jsxs)(`button`,{type:`button`,className:`ut-tab ${a===`organization`?`ut-tab--active`:``}`,onClick:()=>o(`organization`),children:[(0,H.jsx)(`i`,{className:`fas fa-building`}),` Organization`]})]}),(0,H.jsxs)(`div`,{className:`ut-form__row`,children:[(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsxs)(`label`,{className:`ut-form__label`,children:[`Full Name `,(0,H.jsx)(`span`,{className:`ut-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{className:`ut-form__input${p.full_name?` ut-form__input--error`:``}`,value:s.full_name,onChange:e=>h(`full_name`,e.target.value),placeholder:`Enter your full name`}),p.full_name&&(0,H.jsxs)(`span`,{className:`ut-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fas fa-exclamation-circle`}),` `,p.full_name]})]}),(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsxs)(`label`,{className:`ut-form__label`,children:[`Email Address `,(0,H.jsx)(`span`,{className:`ut-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`email`,className:`ut-form__input${p.email?` ut-form__input--error`:``}`,value:s.email,onChange:e=>h(`email`,e.target.value),placeholder:`Enter your email address`}),p.email&&(0,H.jsxs)(`span`,{className:`ut-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fas fa-exclamation-circle`}),` `,p.email]})]})]}),(0,H.jsxs)(`div`,{className:`ut-form__row`,children:[(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsx)(`label`,{className:`ut-form__label`,children:`Age`}),(0,H.jsx)(`input`,{type:`number`,className:`ut-form__input`,value:s.age,onChange:e=>h(`age`,e.target.value),placeholder:`Enter your age`})]}),(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsxs)(`label`,{className:`ut-form__label`,children:[`Location `,(0,H.jsx)(`span`,{className:`ut-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{className:`ut-form__input${p.location?` ut-form__input--error`:``}`,value:s.location,onChange:e=>h(`location`,e.target.value),placeholder:`Enter your location`}),p.location&&(0,H.jsxs)(`span`,{className:`ut-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fas fa-exclamation-circle`}),` `,p.location]})]})]}),a===`organization`&&(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsx)(`label`,{className:`ut-form__label`,children:`Organization Name`}),(0,H.jsx)(`input`,{className:`ut-form__input`,value:s.organization_name,onChange:e=>h(`organization_name`,e.target.value),placeholder:`Enter organization name`})]}),(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsxs)(`label`,{className:`ut-form__label`,children:[`RCY Status `,(0,H.jsx)(`span`,{className:`ut-form__required`,children:`*`})]}),(0,H.jsxs)(`select`,{className:`ut-form__select`,value:s.rcy_status,onChange:e=>h(`rcy_status`,e.target.value),children:[(0,H.jsx)(`option`,{value:`Non-RCY`,children:`Non-RCY`}),(0,H.jsx)(`option`,{value:`RCY Member`,children:`RCY Member`}),(0,H.jsx)(`option`,{value:`RCY Volunteer`,children:`RCY Volunteer`}),(0,H.jsx)(`option`,{value:`RCY Officer`,children:`RCY Officer`})]}),(0,H.jsxs)(`small`,{className:`ut-form__hint`,children:[(0,H.jsx)(`i`,{className:`fas fa-info-circle`}),` Select your Red Cross Youth affiliation status`]})]})]}),r===2&&(0,H.jsxs)(`div`,{className:`ut-step`,children:[(0,H.jsxs)(`h3`,{className:`ut-step__title`,children:[(0,H.jsx)(`i`,{className:`fas fa-file-upload`}),` Required Documents`]}),(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsxs)(`label`,{className:`ut-form__label`,children:[`Valid ID `,(0,H.jsx)(`span`,{className:`ut-form__required`,children:`*`})]}),(0,H.jsxs)(`div`,{className:`ut-file-upload`,children:[(0,H.jsx)(`input`,{type:`file`,id:`valid_id`,accept:`.pdf,.jpg,.jpeg,.png`,onChange:e=>g(`valid_id`,e.target.files[0]),className:`ut-file-upload__input`}),(0,H.jsxs)(`label`,{htmlFor:`valid_id`,className:`ut-file-upload__label`,children:[(0,H.jsx)(`i`,{className:`fas fa-id-card`}),(0,H.jsx)(`span`,{className:`ut-file-upload__text`,children:l.valid_id?l.valid_id.name:`Upload a clear photo of your valid ID`}),l.valid_id&&(0,H.jsx)(`span`,{className:`ut-file-upload__check`,children:(0,H.jsx)(`i`,{className:`fas fa-check-circle`})})]})]}),(0,H.jsxs)(`small`,{className:`ut-form__hint`,children:[(0,H.jsx)(`i`,{className:`fas fa-info-circle`}),` Accepted: JPG, PNG, PDF (Max 5MB)`]}),p.valid_id&&(0,H.jsxs)(`span`,{className:`ut-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fas fa-exclamation-circle`}),` `,p.valid_id]})]}),(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsx)(`label`,{className:`ut-form__label`,children:`Training Requirements (Optional)`}),(0,H.jsxs)(`div`,{className:`ut-file-upload`,children:[(0,H.jsx)(`input`,{type:`file`,id:`requirements`,accept:`.pdf,.jpg,.jpeg,.png,.doc,.docx`,onChange:e=>g(`requirements`,e.target.files[0]),className:`ut-file-upload__input`}),(0,H.jsxs)(`label`,{htmlFor:`requirements`,className:`ut-file-upload__label`,children:[(0,H.jsx)(`i`,{className:`fas fa-file`}),(0,H.jsx)(`span`,{className:`ut-file-upload__text`,children:l.requirements?l.requirements.name:`Upload training requirements (optional)`}),l.requirements&&(0,H.jsx)(`span`,{className:`ut-file-upload__check`,children:(0,H.jsx)(`i`,{className:`fas fa-check-circle`})})]})]}),(0,H.jsxs)(`small`,{className:`ut-form__hint`,children:[(0,H.jsx)(`i`,{className:`fas fa-info-circle`}),` Upload any required certificates, documents, or prerequisites`]})]})]}),r===3&&e.fee>0&&(0,H.jsxs)(`div`,{className:`ut-step`,children:[(0,H.jsxs)(`h3`,{className:`ut-step__title`,children:[(0,H.jsx)(`i`,{className:`fas fa-credit-card`}),` Payment Information`]}),(0,H.jsxs)(`div`,{className:`ut-payment-summary`,children:[(0,H.jsxs)(`div`,{className:`ut-payment-summary__item`,children:[(0,H.jsx)(`span`,{children:`Session Fee:`}),(0,H.jsxs)(`strong`,{children:[``,parseFloat(e.fee).toFixed(2)]})]}),(0,H.jsxs)(`div`,{className:`ut-payment-summary__item`,children:[(0,H.jsx)(`span`,{children:`Processing Fee:`}),(0,H.jsx)(`strong`,{children:`0.00`})]}),(0,H.jsxs)(`div`,{className:`ut-payment-summary__total`,children:[(0,H.jsx)(`span`,{children:`Total:`}),(0,H.jsxs)(`strong`,{children:[``,parseFloat(e.fee).toFixed(2)]})]})]}),(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsxs)(`label`,{className:`ut-form__label`,children:[`Payment Mode `,(0,H.jsx)(`span`,{className:`ut-form__required`,children:`*`})]}),(0,H.jsx)(`div`,{className:`ut-payment-options`,children:[{id:`gcash`,icon:`fa-mobile-alt`,label:`GCash`},{id:`bank`,icon:`fa-university`,label:`Bank Transfer`},{id:`paymaya`,icon:`fa-wallet`,label:`PayMaya`}].map(e=>(0,H.jsxs)(`label`,{className:`ut-payment-option`,children:[(0,H.jsx)(`input`,{type:`radio`,name:`payment_mode`,value:e.id,checked:s.payment_mode===e.id,onChange:e=>h(`payment_mode`,e.target.value)}),(0,H.jsxs)(`div`,{className:`ut-payment-option__box`,children:[(0,H.jsx)(`i`,{className:`fas ${e.icon}`}),(0,H.jsx)(`span`,{children:e.label})]})]},e.id))})]}),(0,H.jsxs)(`div`,{className:`ut-form__field`,children:[(0,H.jsxs)(`label`,{className:`ut-form__label`,children:[`Payment Receipt `,(0,H.jsx)(`span`,{className:`ut-form__required`,children:`*`})]}),(0,H.jsxs)(`div`,{className:`ut-file-upload`,children:[(0,H.jsx)(`input`,{type:`file`,id:`payment_receipt`,accept:`.pdf,.jpg,.jpeg,.png`,onChange:e=>g(`payment_receipt`,e.target.files[0]),className:`ut-file-upload__input`}),(0,H.jsxs)(`label`,{htmlFor:`payment_receipt`,className:`ut-file-upload__label`,children:[(0,H.jsx)(`i`,{className:`fas fa-receipt`}),(0,H.jsx)(`span`,{className:`ut-file-upload__text`,children:l.payment_receipt?l.payment_receipt.name:`Upload payment receipt`}),l.payment_receipt&&(0,H.jsx)(`span`,{className:`ut-file-upload__check`,children:(0,H.jsx)(`i`,{className:`fas fa-check-circle`})})]})]}),(0,H.jsxs)(`small`,{className:`ut-form__hint`,children:[(0,H.jsx)(`i`,{className:`fas fa-info-circle`}),` Upload proof of payment (screenshot or receipt)`]}),p.payment_receipt&&(0,H.jsxs)(`span`,{className:`ut-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fas fa-exclamation-circle`}),` `,p.payment_receipt]})]})]}),(0,H.jsxs)(`div`,{className:`ut-info-notice`,children:[(0,H.jsx)(`i`,{className:`fas fa-shield-alt`}),(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`strong`,{children:`Secure Registration`}),(0,H.jsx)(`p`,{children:`Your information and documents are encrypted and securely stored. We only use this data for training registration purposes.`})]})]}),(0,H.jsxs)(`div`,{className:`ut-form__actions`,children:[r>1?(0,H.jsxs)(`button`,{type:`button`,onClick:b,className:`ut-form__prev`,children:[(0,H.jsx)(`i`,{className:`fas fa-arrow-left`}),` Previous`]}):(0,H.jsx)(`div`,{}),r<(e.fee>0?3:2)?(0,H.jsxs)(`button`,{type:`button`,onClick:y,className:`ut-form__next`,children:[`Next Step `,(0,H.jsx)(`i`,{className:`fas fa-arrow-right`})]}):(0,H.jsx)(`button`,{type:`submit`,disabled:d,className:`ut-form__submit`,children:d?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fas fa-spinner fa-spin`}),` Registering...`]}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fas fa-user-plus`}),` Register for Training`]})})]})]})]})})}function qo(){let[e,t]=(0,v.useState)([]),[n,r]=(0,v.useState)([]),[i,a]=(0,v.useState)(!0),[o,s]=(0,v.useState)(``),[c,l]=(0,v.useState)(null),[u,d]=(0,v.useState)(null),[f,p]=(0,v.useState)(!1),[m,h]=(0,v.useState)(null),[g,_]=(0,v.useState)(`available`),y=(e,t=`success`)=>h({msg:e,type:t}),b=(0,v.useCallback)(async()=>{a(!0);try{let{sessions:e}=await _o({filter:`upcoming`,search:o});t(e)}catch(e){console.error(`Fetch sessions error:`,e),y(e.message||`Failed to load sessions`,`error`)}finally{a(!1)}},[o]);(0,v.useEffect)(()=>{b()},[b]);let x=(0,v.useCallback)(async()=>{try{let{registrations:e}=await jo();r(e)}catch(e){console.error(`Fetch registrations error:`,e)}},[]);(0,v.useEffect)(()=>{x()},[x]);let S=c?e.filter(e=>e.session_date===c||e.session_end_date&&c>=e.session_date&&c<=e.session_end_date):e,C=n.filter(e=>e.is_upcoming).length,w=n.filter(e=>e.status===`approved`).length,T=n.filter(e=>e.status===`pending`).length,E=n.length;function D(e){y(e),d(null),x()}function O(e){y(e),p(!1)}let ee=e=>{switch(e){case`approved`:return`#10b981`;case`pending`:return`#f59e0b`;case`rejected`:return`#ef4444`;default:return`#6b7280`}};return(0,H.jsxs)(`div`,{className:`ut-root`,children:[(0,H.jsxs)(`div`,{className:`ut-header`,children:[(0,H.jsxs)(`div`,{className:`ut-header__container`,children:[(0,H.jsxs)(`div`,{className:`ut-header__content`,children:[(0,H.jsxs)(`div`,{className:`ut-header__left`,children:[(0,H.jsxs)(`div`,{className:`ut-header__badge`,children:[(0,H.jsx)(`i`,{className:`fas fa-graduation-cap`}),` Training Programs`]}),(0,H.jsx)(`h1`,{className:`ut-header__title`,children:`Training & Development`}),(0,H.jsx)(`p`,{className:`ut-header__subtitle`,children:`Enhance your skills with our comprehensive training programs and certification courses`})]}),(0,H.jsxs)(`div`,{className:`ut-header__stats`,children:[(0,H.jsxs)(`div`,{className:`ut-header-stat`,children:[(0,H.jsx)(`span`,{className:`ut-header-stat__value`,children:E}),(0,H.jsx)(`span`,{className:`ut-header-stat__label`,children:`Total Registrations`})]}),(0,H.jsxs)(`div`,{className:`ut-header-stat`,children:[(0,H.jsx)(`span`,{className:`ut-header-stat__value`,children:w}),(0,H.jsx)(`span`,{className:`ut-header-stat__label`,children:`Approved`})]}),(0,H.jsxs)(`div`,{className:`ut-header-stat`,children:[(0,H.jsx)(`span`,{className:`ut-header-stat__value`,children:T}),(0,H.jsx)(`span`,{className:`ut-header-stat__label`,children:`Pending`})]})]})]}),(0,H.jsxs)(`button`,{className:`ut-header__request-btn`,onClick:()=>p(!0),children:[(0,H.jsx)(`i`,{className:`fas fa-plus-circle`}),`Request Training Program`]})]}),(0,H.jsx)(`div`,{className:`ut-header__wave`,children:(0,H.jsx)(`svg`,{viewBox:`0 0 1440 120`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`,children:(0,H.jsx)(`path`,{d:`M0 120L60 105C120 90 240 60 360 45C480 30 600 30 720 37.5C840 45 960 60 1080 67.5C1200 75 1320 75 1380 75L1440 75V120H1380C1320 120 1200 120 1080 120C960 120 840 120 720 120C600 120 480 120 360 120C240 120 120 120 60 120H0Z`,fill:`white`,fillOpacity:`0.1`})})})]}),(0,H.jsx)(`div`,{className:`ut-body`,children:(0,H.jsxs)(`div`,{className:`ut-layout`,children:[(0,H.jsxs)(`div`,{className:`ut-sidebar`,children:[(0,H.jsxs)(`div`,{className:`ut-card ut-card--calendar`,children:[(0,H.jsxs)(`div`,{className:`ut-card__header`,children:[(0,H.jsx)(`div`,{className:`ut-card__header-icon`,children:(0,H.jsx)(`i`,{className:`fas fa-calendar-alt`})}),(0,H.jsxs)(`div`,{className:`ut-card__header-title`,children:[(0,H.jsx)(`h3`,{children:`Training Calendar`}),(0,H.jsxs)(`span`,{children:[e.length,` sessions this month`]})]})]}),(0,H.jsxs)(`div`,{className:`ut-card__body`,children:[(0,H.jsx)(Wo,{sessions:e,selectedDate:c,onDateSelect:l}),c&&(0,H.jsxs)(`button`,{className:`ut-btn-clear-date`,onClick:()=>l(null),children:[(0,H.jsx)(`i`,{className:`fas fa-times`}),` Clear Date Filter`]})]})]}),(0,H.jsxs)(`div`,{className:`ut-card ut-card--stats`,children:[(0,H.jsxs)(`div`,{className:`ut-card__header`,children:[(0,H.jsx)(`div`,{className:`ut-card__header-icon`,children:(0,H.jsx)(`i`,{className:`fas fa-user-check`})}),(0,H.jsxs)(`div`,{className:`ut-card__header-title`,children:[(0,H.jsx)(`h3`,{children:`My Registrations`}),(0,H.jsx)(`span`,{children:`Overview of your training participation`})]})]}),(0,H.jsx)(`div`,{className:`ut-card__body`,children:(0,H.jsxs)(`div`,{className:`ut-my-stats`,children:[(0,H.jsxs)(`div`,{className:`ut-my-stat ut-my-stat--total`,children:[(0,H.jsx)(`div`,{className:`ut-my-stat__icon`,children:(0,H.jsx)(`i`,{className:`fas fa-clipboard-list`})}),(0,H.jsxs)(`div`,{className:`ut-my-stat__content`,children:[(0,H.jsx)(`div`,{className:`ut-my-stat__num`,children:E}),(0,H.jsx)(`div`,{className:`ut-my-stat__label`,children:`Total`})]})]}),(0,H.jsxs)(`div`,{className:`ut-my-stat ut-my-stat--upcoming`,children:[(0,H.jsx)(`div`,{className:`ut-my-stat__icon`,children:(0,H.jsx)(`i`,{className:`fas fa-calendar-check`})}),(0,H.jsxs)(`div`,{className:`ut-my-stat__content`,children:[(0,H.jsx)(`div`,{className:`ut-my-stat__num`,children:C}),(0,H.jsx)(`div`,{className:`ut-my-stat__label`,children:`Upcoming`})]})]}),(0,H.jsxs)(`div`,{className:`ut-my-stat ut-my-stat--approved`,children:[(0,H.jsx)(`div`,{className:`ut-my-stat__icon`,children:(0,H.jsx)(`i`,{className:`fas fa-check-circle`})}),(0,H.jsxs)(`div`,{className:`ut-my-stat__content`,children:[(0,H.jsx)(`div`,{className:`ut-my-stat__num`,children:w}),(0,H.jsx)(`div`,{className:`ut-my-stat__label`,children:`Approved`})]})]}),(0,H.jsxs)(`div`,{className:`ut-my-stat ut-my-stat--pending`,children:[(0,H.jsx)(`div`,{className:`ut-my-stat__icon`,children:(0,H.jsx)(`i`,{className:`fas fa-clock`})}),(0,H.jsxs)(`div`,{className:`ut-my-stat__content`,children:[(0,H.jsx)(`div`,{className:`ut-my-stat__num`,children:T}),(0,H.jsx)(`div`,{className:`ut-my-stat__label`,children:`Pending`})]})]})]})})]})]}),(0,H.jsxs)(`div`,{className:`ut-main`,children:[(0,H.jsxs)(`div`,{className:`ut-main-tabs`,children:[(0,H.jsxs)(`button`,{className:`ut-main-tab ${g===`available`?`active`:``}`,onClick:()=>_(`available`),children:[(0,H.jsx)(`i`,{className:`fas fa-calendar-plus`}),`Available Sessions`,(0,H.jsx)(`span`,{className:`ut-main-tab__badge`,children:S.length})]}),(0,H.jsxs)(`button`,{className:`ut-main-tab ${g===`my`?`active`:``}`,onClick:()=>_(`my`),children:[(0,H.jsx)(`i`,{className:`fas fa-user-check`}),`My Registrations`,(0,H.jsx)(`span`,{className:`ut-main-tab__badge`,children:n.length})]})]}),g===`available`&&(0,H.jsxs)(`div`,{className:`ut-search`,children:[(0,H.jsx)(`i`,{className:`fas fa-search ut-search__icon`}),(0,H.jsx)(`input`,{className:`ut-search__input`,value:o,onChange:e=>s(e.target.value),placeholder:`Search training sessions by title, service, or instructor...`}),o&&(0,H.jsx)(`button`,{className:`ut-search__clear`,onClick:()=>s(``),children:(0,H.jsx)(`i`,{className:`fas fa-times`})})]}),g===`available`&&(0,H.jsxs)(`div`,{className:`ut-section`,children:[(0,H.jsxs)(`div`,{className:`ut-section__header`,children:[(0,H.jsxs)(`div`,{className:`ut-section__title-wrapper`,children:[(0,H.jsx)(`h2`,{className:`ut-section__title`,children:c?`Sessions on ${new Date(c).toLocaleDateString(`en-US`,{month:`long`,day:`numeric`,year:`numeric`})}`:`Available Training Sessions`}),c&&(0,H.jsxs)(`button`,{className:`ut-section__clear`,onClick:()=>l(null),children:[(0,H.jsx)(`i`,{className:`fas fa-times`}),` Clear Filter`]})]}),(0,H.jsxs)(`span`,{className:`ut-section__count`,children:[S.length,` session`,S.length===1?``:`s`]})]}),i?(0,H.jsxs)(`div`,{className:`ut-loading`,children:[(0,H.jsx)(`div`,{className:`ut-loading__spinner`,children:(0,H.jsx)(`i`,{className:`fas fa-spinner fa-spin`})}),(0,H.jsx)(`p`,{children:`Loading training sessions...`}),(0,H.jsx)(`span`,{className:`ut-loading__subtitle`,children:`Fetching available programs`})]}):S.length===0?(0,H.jsxs)(`div`,{className:`ut-empty`,children:[(0,H.jsx)(`div`,{className:`ut-empty__icon`,children:(0,H.jsx)(`i`,{className:`fas fa-calendar-xmark`})}),(0,H.jsx)(`h3`,{className:`ut-empty__title`,children:`No sessions found`}),(0,H.jsx)(`p`,{className:`ut-empty__message`,children:o?`Try adjusting your search or filters`:`Check back later for new training opportunities`}),o&&(0,H.jsxs)(`button`,{className:`ut-empty__action`,onClick:()=>s(``),children:[(0,H.jsx)(`i`,{className:`fas fa-times`}),` Clear Search`]})]}):(0,H.jsx)(`div`,{className:`ut-sessions-grid`,children:S.map(e=>{let t=n.some(t=>t.session_id===e.session_id),r=n.find(t=>t.session_id===e.session_id),i=Ho[e.major_service]||`#6b7280`;return(0,H.jsxs)(`div`,{className:`ut-session-card`,children:[(0,H.jsxs)(`div`,{className:`ut-session-card__header`,children:[(0,H.jsxs)(`span`,{className:`ut-session-card__service`,style:{background:`${i}15`,color:i,border:`1px solid ${i}30`},children:[(0,H.jsx)(`i`,{className:`fas fa-tag`}),` `,e.major_service]}),(0,H.jsx)(`div`,{className:`ut-session-card__badge`,children:e.fee>0?(0,H.jsxs)(`span`,{className:`ut-session-card__fee`,children:[``,parseFloat(e.fee).toFixed(2)]}):(0,H.jsxs)(`span`,{className:`ut-session-card__free`,children:[(0,H.jsx)(`i`,{className:`fas fa-gift`}),` FREE`]})})]}),(0,H.jsx)(`h3`,{className:`ut-session-card__title`,children:e.title}),(0,H.jsxs)(`div`,{className:`ut-session-card__meta`,children:[(0,H.jsxs)(`div`,{className:`ut-session-card__meta-item`,children:[(0,H.jsx)(`i`,{className:`fas fa-calendar`,style:{color:i}}),(0,H.jsxs)(`span`,{children:[new Date(e.session_date).toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,year:`numeric`}),e.session_end_date&&e.session_end_date!==e.session_date&&(0,H.jsxs)(H.Fragment,{children:[` - `,new Date(e.session_end_date).toLocaleDateString(`en-US`,{month:`short`,day:`numeric`})]})]})]}),(0,H.jsxs)(`div`,{className:`ut-session-card__meta-item`,children:[(0,H.jsx)(`i`,{className:`fas fa-clock`,style:{color:i}}),(0,H.jsxs)(`span`,{children:[e.start_time?.slice(0,5),` -`,` `,e.end_time?.slice(0,5)]})]}),(0,H.jsxs)(`div`,{className:`ut-session-card__meta-item`,children:[(0,H.jsx)(`i`,{className:`fas fa-map-marker-alt`,style:{color:i}}),(0,H.jsx)(`span`,{children:e.venue?.split(`
`)[0]||e.location?.split(`
`)[0]})]}),e.instructor&&(0,H.jsxs)(`div`,{className:`ut-session-card__meta-item ut-session-card__instructor`,children:[(0,H.jsx)(`i`,{className:`fas fa-chalkboard-teacher`,style:{color:i}}),(0,H.jsxs)(`span`,{children:[(0,H.jsx)(`strong`,{children:`Instructor:`}),` `,e.instructor,e.instructor_credentials&&(0,H.jsxs)(`small`,{children:[` `,` `,e.instructor_credentials]})]})]}),e.duration_days>1&&(0,H.jsxs)(`div`,{className:`ut-session-card__meta-item`,children:[(0,H.jsx)(`i`,{className:`fas fa-calendar-week`,style:{color:i}}),(0,H.jsxs)(`span`,{children:[e.duration_days,` days`]})]})]}),e.description&&(0,H.jsx)(`div`,{className:`ut-session-card__desc`,children:(0,H.jsxs)(`p`,{children:[e.description.substring(0,120),`...`]})}),e.requirements&&(0,H.jsxs)(`div`,{className:`ut-session-card__requirements`,children:[(0,H.jsx)(`i`,{className:`fas fa-clipboard-list`,style:{color:i}}),(0,H.jsx)(`small`,{children:e.requirements})]}),(0,H.jsxs)(`div`,{className:`ut-session-card__footer`,children:[(0,H.jsxs)(`div`,{className:`ut-session-card__capacity`,children:[(0,H.jsx)(`i`,{className:`fas fa-users`,style:{color:i}}),(0,H.jsxs)(`span`,{children:[e.approved_count||0,` /`,` `,e.capacity>0?e.capacity:``]}),e.pending_count>0&&(0,H.jsxs)(`span`,{className:`ut-session-card__pending`,children:[`(`,e.pending_count,` pending)`]})]}),t?(0,H.jsxs)(`div`,{className:`ut-session-card__registered`,children:[(0,H.jsx)(`i`,{className:`fas fa-check-circle`,style:{color:`#10b981`}}),(0,H.jsx)(`span`,{style:{color:ee(r?.status)},children:r?.status.toUpperCase()})]}):e.is_full?(0,H.jsxs)(`button`,{className:`ut-session-card__btn ut-session-card__btn--full`,disabled:!0,children:[(0,H.jsx)(`i`,{className:`fas fa-ban`}),` Session Full`]}):(0,H.jsxs)(`button`,{className:`ut-session-card__btn`,onClick:()=>d(e),style:{background:`linear-gradient(135deg, ${i}, ${i}dd)`},children:[(0,H.jsx)(`i`,{className:`fas fa-user-plus`}),` Register Now`]})]})]},e.session_id)})})]}),g===`my`&&(0,H.jsxs)(`div`,{className:`ut-section`,children:[(0,H.jsxs)(`div`,{className:`ut-section__header`,children:[(0,H.jsx)(`div`,{className:`ut-section__title-wrapper`,children:(0,H.jsxs)(`h2`,{className:`ut-section__title`,children:[(0,H.jsx)(`i`,{className:`fas fa-user-check`}),` My Training Registrations`]})}),(0,H.jsxs)(`span`,{className:`ut-section__count`,children:[n.length,` registration`,n.length===1?``:`s`]})]}),n.length===0?(0,H.jsxs)(`div`,{className:`ut-empty`,children:[(0,H.jsx)(`div`,{className:`ut-empty__icon`,children:(0,H.jsx)(`i`,{className:`fas fa-clipboard-list`})}),(0,H.jsx)(`h3`,{className:`ut-empty__title`,children:`No registrations yet`}),(0,H.jsx)(`p`,{className:`ut-empty__message`,children:`Browse available training sessions and register to get started`}),(0,H.jsxs)(`button`,{className:`ut-empty__action`,onClick:()=>_(`available`),children:[(0,H.jsx)(`i`,{className:`fas fa-calendar-plus`}),` Browse Sessions`]})]}):(0,H.jsx)(`div`,{className:`ut-my-regs`,children:n.map(e=>{let t=Ho[e.major_service]||`#6b7280`;return(0,H.jsxs)(`div`,{className:`ut-my-reg`,children:[(0,H.jsxs)(`div`,{className:`ut-my-reg__header`,children:[(0,H.jsxs)(`div`,{className:`ut-my-reg__title-wrapper`,children:[(0,H.jsx)(`h4`,{className:`ut-my-reg__title`,children:e.title}),(0,H.jsx)(`span`,{className:`ut-my-reg__service`,style:{background:`${t}15`,color:t},children:e.major_service})]}),(0,H.jsx)(`span`,{className:`ut-my-reg__status ut-my-reg__status--${e.status}`,children:e.status.toUpperCase()})]}),(0,H.jsxs)(`div`,{className:`ut-my-reg__details`,children:[(0,H.jsxs)(`div`,{className:`ut-my-reg__meta`,children:[(0,H.jsxs)(`div`,{className:`ut-my-reg__meta-item`,children:[(0,H.jsx)(`i`,{className:`fas fa-calendar`}),new Date(e.session_date).toLocaleDateString(`en-US`,{month:`long`,day:`numeric`,year:`numeric`})]}),(0,H.jsxs)(`div`,{className:`ut-my-reg__meta-item`,children:[(0,H.jsx)(`i`,{className:`fas fa-map-marker-alt`}),e.location?.split(`
`)[0]||e.venue?.split(`
`)[0]||`TBA`]}),e.fee>0&&(0,H.jsxs)(`div`,{className:`ut-my-reg__meta-item`,children:[(0,H.jsx)(`i`,{className:`fas fa-money-bill`}),``,parseFloat(e.fee).toFixed(2),` `,` `,e.payment_mode?.toUpperCase()]})]}),(0,H.jsx)(`div`,{className:`ut-my-reg__footer`,children:(0,H.jsxs)(`div`,{className:`ut-my-reg__date`,children:[(0,H.jsx)(`i`,{className:`fas fa-clock`}),`Registered`,` `,new Date(e.registration_date).toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,year:`numeric`})]})})]})]},e.registration_id)})})]})]})]})}),u&&(0,H.jsx)(Ko,{session:u,onClose:()=>d(null),onSuccess:D}),f&&(0,H.jsx)(Go,{onClose:()=>p(!1),onSuccess:O}),m&&(0,H.jsx)(Uo,{message:m.msg,type:m.type,onClose:()=>h(null)})]})}var Jo=`/api/merchandise.php`;const Yo=[{value:`clothing`,label:`Clothing`,icon:`fa-solid fa-shirt`,color:`#c41e3a`},{value:`accessories`,label:`Accessories`,icon:`fa-solid fa-hat-cowboy`,color:`#15803d`},{value:`supplies`,label:`Supplies`,icon:`fa-solid fa-kit-medical`,color:`#7c3aed`},{value:`books`,label:`Books`,icon:`fa-solid fa-book`,color:`#c2410c`},{value:`collectibles`,label:`Collectibles`,icon:`fa-solid fa-star`,color:`#003d6b`},{value:`other`,label:`Other`,icon:`fa-solid fa-box`,color:`#6b7280`}],Xo=async(e={})=>{let t={};e.search&&(t.search=e.search),e.category&&(t.category=e.category),e.show_unavailable&&(t.show_unavailable=e.show_unavailable);let{data:n}=await K.get(Jo,{params:t});if(!n.success)throw Error(n.message||`Failed to fetch merchandise`);return{success:!0,data:n.data??[],stats:n.stats??{total:0,available:0,unavailable:0,total_stock:0,total_value:0,by_category:{}}}},Zo=async e=>{if(!e.get(`name`)?.trim())throw Error(`Item name is required`);let{data:t}=await K.post(Jo,e,{headers:{"Content-Type":`multipart/form-data`}});if(!t.success)throw Error(t.message||`Failed to create merchandise item`);return{success:!0,message:t.message,id:t.id,image_url:t.image_url}},Qo=async(e,t)=>{if(!e)throw Error(`Merchandise ID is required`);let{data:n}=await K.put(Jo,t,{params:{id:e},headers:{"Content-Type":`multipart/form-data`}});if(!n.success)throw Error(n.message||`Failed to update merchandise item`);return{success:!0,message:n.message,image_url:n.image_url}},$o=async(e,t)=>{if(!e)throw Error(`Merchandise ID is required`);let{data:n}=await K.put(Jo,t,{params:{id:e}});if(!n.success)throw Error(n.message||`Failed to update merchandise item`);return{success:!0,message:n.message}},es=async e=>{if(!e)throw Error(`Merchandise ID is required`);let{data:t}=await K.delete(Jo,{params:{id:e}});if(!t.success)throw Error(t.message||`Failed to delete merchandise item`);return{success:!0,message:t.message}},ts=e=>{let t=Yo.find(t=>t.value===e);return t?t.label:e.charAt(0).toUpperCase()+e.slice(1)},ns=e=>new Intl.NumberFormat(`en-PH`,{style:`currency`,currency:`PHP`,minimumFractionDigits:2}).format(e),rs=e=>{let t=Yo.find(t=>t.value===e);return t?t.color:`#6b7280`},is=e=>{let t=Yo.find(t=>t.value===e);return t?t.icon:`fa-solid fa-box`},as=e=>e.image_url?e.image_url.startsWith(`http`)?e.image_url:`http://localhost/prc-management-system/${e.image_url}`:null;function os({message:e,type:t,onClose:n}){return(0,v.useEffect)(()=>{let e=setTimeout(n,3500);return()=>clearTimeout(e)},[n]),(0,H.jsxs)(`div`,{className:`um-toast um-toast--${t}`,onClick:n,children:[(0,H.jsx)(`div`,{className:`um-toast__icon`,children:(0,H.jsx)(`i`,{className:`fa-solid ${t===`success`?`fa-circle-check`:`fa-circle-exclamation`}`})}),(0,H.jsxs)(`div`,{className:`um-toast__content`,children:[(0,H.jsx)(`div`,{className:`um-toast__title`,children:t===`success`?`Success`:`Error`}),(0,H.jsx)(`div`,{className:`um-toast__message`,children:e})]}),(0,H.jsx)(`button`,{className:`um-toast__close`,onClick:n,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]})}function ss({item:e,onViewDetails:t}){let n=rs(e.category),r=is(e.category),i=as(e),[a,o]=(0,v.useState)(!1);return(0,H.jsxs)(`div`,{className:`um-card`,children:[(0,H.jsxs)(`div`,{className:`um-card__image`,children:[i&&!a?(0,H.jsx)(`img`,{src:i,alt:e.name,onError:()=>o(!0)}):(0,H.jsx)(`div`,{className:`um-card__image-placeholder`,style:{background:`linear-gradient(135deg, ${n}, ${n}dd)`},children:(0,H.jsx)(`i`,{className:r})}),e.stock_quantity===0&&(0,H.jsxs)(`div`,{className:`um-card__out-of-stock`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-ban`}),(0,H.jsx)(`span`,{children:`Out of Stock`})]})]}),(0,H.jsxs)(`div`,{className:`um-card__content`,children:[(0,H.jsxs)(`div`,{className:`um-card__header`,children:[(0,H.jsxs)(`span`,{className:`um-card__category`,style:{background:`${n}15`,color:n,border:`1px solid ${n}33`},children:[(0,H.jsx)(`i`,{className:r}),ts(e.category)]}),(0,H.jsxs)(`span`,{className:`um-card__stock`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-boxes-stacked`}),e.stock_quantity,` left`]})]}),(0,H.jsx)(`h3`,{className:`um-card__title`,children:e.name}),e.description&&(0,H.jsx)(`p`,{className:`um-card__description`,children:e.description.length>100?e.description.substring(0,100)+`...`:e.description}),(0,H.jsxs)(`div`,{className:`um-card__footer`,children:[(0,H.jsxs)(`div`,{className:`um-card__price-wrapper`,children:[(0,H.jsx)(`span`,{className:`um-card__price-label`,children:`Price`}),(0,H.jsx)(`span`,{className:`um-card__price`,children:ns(e.price)})]}),(0,H.jsxs)(`button`,{className:`um-card__btn`,onClick:()=>t(e),disabled:e.stock_quantity===0,children:[(0,H.jsx)(`span`,{children:`View Details`}),(0,H.jsx)(`i`,{className:`fa-solid fa-arrow-right`})]})]})]})]})}function cs({item:e,onClose:t}){if(!e)return null;let n=rs(e.category),r=is(e.category),i=as(e),[a,o]=(0,v.useState)(!1),[s,c]=(0,v.useState)(null),l=(e,t)=>{navigator.clipboard.writeText(e).then(()=>{c(t),setTimeout(()=>c(null),2e3)},()=>{})},u=e=>{window.location.href=`tel:${e.replace(/\s/g,``)}`},d=e=>{window.location.href=`mailto:${e}`};return(0,H.jsx)(`div`,{className:`um-overlay`,onClick:t,children:(0,H.jsxs)(`div`,{className:`um-modal`,onClick:e=>e.stopPropagation(),children:[(0,H.jsxs)(`div`,{className:`um-modal__header`,children:[(0,H.jsxs)(`h2`,{className:`um-modal__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-info`}),`Item Details`]}),(0,H.jsx)(`button`,{className:`um-modal__close`,onClick:t,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]}),(0,H.jsxs)(`div`,{className:`um-modal__body`,children:[(0,H.jsx)(`div`,{className:`um-modal__image`,children:i&&!a?(0,H.jsx)(`img`,{src:i,alt:e.name,onError:()=>o(!0)}):(0,H.jsx)(`div`,{className:`um-modal__image-placeholder`,style:{background:`linear-gradient(135deg, ${n}, ${n}dd)`},children:(0,H.jsx)(`i`,{className:r})})}),(0,H.jsxs)(`div`,{className:`um-modal__info`,children:[(0,H.jsxs)(`div`,{className:`um-modal__badges`,children:[(0,H.jsxs)(`span`,{className:`um-modal__badge`,style:{background:`${n}15`,color:n,border:`1px solid ${n}33`},children:[(0,H.jsx)(`i`,{className:r}),ts(e.category)]}),(0,H.jsxs)(`span`,{className:`um-modal__badge`,style:{background:e.stock_quantity>0?`#10b98115`:`#ef444415`,color:e.stock_quantity>0?`#10b981`:`#ef4444`,border:e.stock_quantity>0?`1px solid #10b98133`:`1px solid #ef444433`},children:[(0,H.jsx)(`i`,{className:e.stock_quantity>0?`fa-solid fa-check-circle`:`fa-solid fa-exclamation-circle`}),e.stock_quantity>0?`${e.stock_quantity} in stock`:`Out of Stock`]})]}),(0,H.jsx)(`h1`,{className:`um-modal__title-text`,children:e.name}),(0,H.jsxs)(`div`,{className:`um-modal__price-wrapper`,children:[(0,H.jsx)(`span`,{className:`um-modal__price-label`,children:`Price`}),(0,H.jsx)(`div`,{className:`um-modal__price`,children:ns(e.price)})]}),e.description&&(0,H.jsxs)(`div`,{className:`um-modal__description`,children:[(0,H.jsxs)(`h3`,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-align-left`}),`Description`]}),(0,H.jsx)(`p`,{children:e.description})]}),(0,H.jsxs)(`div`,{className:`um-modal__notice`,children:[(0,H.jsxs)(`h4`,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-info`}),`Important Purchase Information`]}),(0,H.jsxs)(`p`,{children:[(0,H.jsx)(`strong`,{children:`Please Note:`}),` The Philippine Red Cross merchandise store currently operates as a display-only catalog. We do not offer online purchasing or delivery services at this time.`]})]}),(0,H.jsxs)(`div`,{className:`um-modal__chapter`,children:[(0,H.jsxs)(`h4`,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-dot`}),`Visit Your Nearest Chapter`]}),(0,H.jsxs)(`div`,{className:`um-modal__contact`,children:[(0,H.jsxs)(`button`,{className:`um-modal__contact-item um-modal__contact-item--clickable`,onClick:()=>u(`(033) 503-3393`),children:[(0,H.jsx)(`i`,{className:`fa-solid fa-phone`}),(0,H.jsx)(`span`,{children:`(033) 503-3393`}),(0,H.jsx)(`button`,{className:`um-copy-btn ${s===`landline`?`um-copy-btn--copied`:``}`,onClick:e=>{e.stopPropagation(),l(`(033) 503-3393`,`landline`)},children:(0,H.jsx)(`i`,{className:`fa-solid ${s===`landline`?`fa-check`:`fa-copy`}`})})]}),(0,H.jsxs)(`button`,{className:`um-modal__contact-item um-modal__contact-item--clickable`,onClick:()=>u(`09171170066`),children:[(0,H.jsx)(`i`,{className:`fa-solid fa-mobile`}),(0,H.jsx)(`span`,{children:`0917 117 0066`}),(0,H.jsx)(`button`,{className:`um-copy-btn ${s===`mobile`?`um-copy-btn--copied`:``}`,onClick:e=>{e.stopPropagation(),l(`09171170066`,`mobile`)},children:(0,H.jsx)(`i`,{className:`fa-solid ${s===`mobile`?`fa-check`:`fa-copy`}`})})]}),(0,H.jsxs)(`button`,{className:`um-modal__contact-item um-modal__contact-item--clickable`,onClick:()=>d(`iloilo@redcross.org.ph`),children:[(0,H.jsx)(`i`,{className:`fa-regular fa-envelope`}),(0,H.jsx)(`span`,{children:`iloilo@redcross.org.ph`}),(0,H.jsx)(`button`,{className:`um-copy-btn ${s===`email`?`um-copy-btn--copied`:``}`,onClick:e=>{e.stopPropagation(),l(`iloilo@redcross.org.ph`,`email`)},children:(0,H.jsx)(`i`,{className:`fa-solid ${s===`email`?`fa-check`:`fa-copy`}`})})]}),(0,H.jsxs)(`div`,{className:`um-modal__contact-item`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-dot`}),(0,H.jsx)(`span`,{children:`Brgy. Danao, Bonifacio Drive, Iloilo City, 5000`}),(0,H.jsx)(`button`,{className:`um-copy-btn ${s===`address`?`um-copy-btn--copied`:``}`,onClick:()=>l(`Brgy. Danao, Bonifacio Drive, Iloilo City, 5000`,`address`),children:(0,H.jsx)(`i`,{className:`fa-solid ${s===`address`?`fa-check`:`fa-copy`}`})})]})]}),(0,H.jsxs)(`button`,{className:`um-modal__directions-btn`,onClick:()=>{window.open(`https://www.google.com/maps/search/?api=1&query=Brgy.%20Danao%2C%20Bonifacio%20Drive%2C%20Iloilo%20City%2C%205000`,`_blank`)},children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-arrow`}),`Get Directions`]})]}),(0,H.jsxs)(`div`,{className:`um-modal__disclaimer`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-clock`}),(0,H.jsx)(`p`,{children:`Stock levels shown are for reference only and may not reflect real-time availability. Please confirm product availability when visiting in person.`})]})]})]})]})})}function ls(){let[e,t]=(0,v.useState)([]),[n,r]=(0,v.useState)([]),[i,a]=(0,v.useState)(!0),[o,s]=(0,v.useState)(``),[c,l]=(0,v.useState)(`all`),[u,d]=(0,v.useState)(null),[f,p]=(0,v.useState)(null),[m,h]=(0,v.useState)(null),g=(e,t=`success`)=>{p({message:e,type:t})};(0,v.useEffect)(()=>{_()},[]),(0,v.useEffect)(()=>{y()},[o,c,e]);let _=async()=>{try{t((await Xo()).data.filter(e=>e.is_available))}catch(e){console.error(`Error fetching merchandise:`,e),g(`Failed to load merchandise`,`error`)}finally{a(!1)}},y=()=>{let t=[...e];if(o){let e=o.toLowerCase();t=t.filter(t=>t.name.toLowerCase().includes(e)||t.description&&t.description.toLowerCase().includes(e))}c!==`all`&&(t=t.filter(e=>e.category===c)),r(t)},b=e=>{d(e)},x=()=>{d(null)},S=()=>{s(``)},C=e.reduce((e,t)=>e+t.stock_quantity,0);return(0,H.jsxs)(`div`,{className:`um-root`,children:[(0,H.jsxs)(`div`,{className:`um-header`,children:[(0,H.jsx)(`div`,{className:`um-header__container`,children:(0,H.jsxs)(`div`,{className:`um-header__content`,children:[(0,H.jsxs)(`div`,{className:`um-header__left`,children:[(0,H.jsxs)(`div`,{className:`um-header__badge`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-store`}),`PRC Merchandise Store`]}),(0,H.jsx)(`h1`,{className:`um-header__title`,children:`Support the Cause`}),(0,H.jsx)(`p`,{className:`um-header__subtitle`,children:`Browse our collection of official Philippine Red Cross merchandise`})]}),(0,H.jsxs)(`div`,{className:`um-header__stats`,children:[(0,H.jsxs)(`div`,{className:`um-header-stat`,children:[(0,H.jsx)(`span`,{className:`um-header-stat__value`,children:e.length}),(0,H.jsx)(`span`,{className:`um-header-stat__label`,children:`Available Items`})]}),(0,H.jsxs)(`div`,{className:`um-header-stat`,children:[(0,H.jsx)(`span`,{className:`um-header-stat__value`,children:C}),(0,H.jsx)(`span`,{className:`um-header-stat__label`,children:`Total Stock`})]})]})]})}),(0,H.jsx)(`div`,{className:`um-header__wave`,children:(0,H.jsx)(`svg`,{viewBox:`0 0 1440 120`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`,children:(0,H.jsx)(`path`,{d:`M0 120L60 105C120 90 240 60 360 45C480 30 600 30 720 37.5C840 45 960 60 1080 67.5C1200 75 1320 75 1380 75L1440 75V120H1380C1320 120 1200 120 1080 120C960 120 840 120 720 120C600 120 480 120 360 120C240 120 120 120 60 120H0Z`,fill:`white`,fillOpacity:`0.1`})})})]}),(0,H.jsxs)(`div`,{className:`um-body`,children:[(0,H.jsxs)(`div`,{className:`um-notice-banner`,children:[(0,H.jsx)(`div`,{className:`um-notice-banner__icon`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-circle-info`})}),(0,H.jsxs)(`div`,{className:`um-notice-banner__content`,children:[(0,H.jsx)(`strong`,{children:`Display-Only Catalog:`}),` The Philippine Red Cross merchandise store currently operates as a display-only catalog. We do not offer online purchasing or delivery services at this time. Please visit our chapter to purchase items.`]})]}),(0,H.jsxs)(`div`,{className:`um-filters`,children:[(0,H.jsxs)(`div`,{className:`um-filters__search`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-magnifying-glass um-filters__search-icon`}),(0,H.jsx)(`input`,{type:`text`,className:`um-filters__search-input`,placeholder:`Search merchandise by name or description...`,value:o,onChange:e=>s(e.target.value)}),o&&(0,H.jsx)(`button`,{className:`um-filters__search-clear`,onClick:S,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]}),(0,H.jsxs)(`div`,{className:`um-filters__categories`,children:[(0,H.jsxs)(`button`,{className:`um-filters__category-btn ${c===`all`?`um-filters__category-btn--active`:``}`,onClick:()=>l(`all`),onMouseEnter:()=>h(`all`),onMouseLeave:()=>h(null),children:[(0,H.jsx)(`i`,{className:`fa-solid fa-grid-2`}),`All Items`,c===`all`&&(0,H.jsx)(`span`,{className:`um-filters__category-count`,children:e.length})]}),Yo.map(t=>(0,H.jsxs)(`button`,{className:`um-filters__category-btn ${c===t.value?`um-filters__category-btn--active`:``}`,onClick:()=>l(t.value),onMouseEnter:()=>h(t.value),onMouseLeave:()=>h(null),style:{borderColor:c===t.value||m===t.value?t.color:void 0,background:c===t.value?`${t.color}15`:m===t.value?`${t.color}08`:void 0,color:c===t.value||m===t.value?t.color:void 0},children:[(0,H.jsx)(`i`,{className:t.icon}),t.label,c===t.value&&(0,H.jsx)(`span`,{className:`um-filters__category-count`,children:e.filter(e=>e.category===t.value).length})]},t.value))]})]}),i?(0,H.jsxs)(`div`,{className:`um-loading`,children:[(0,H.jsx)(`div`,{className:`um-loading__spinner`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-spinner fa-spin`})}),(0,H.jsx)(`p`,{children:`Loading merchandise...`}),(0,H.jsx)(`span`,{className:`um-loading__subtitle`,children:`Fetching available items`})]}):n.length===0?(0,H.jsxs)(`div`,{className:`um-empty`,children:[(0,H.jsx)(`div`,{className:`um-empty__icon`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-store-slash`})}),(0,H.jsx)(`h3`,{className:`um-empty__title`,children:`No Items Found`}),(0,H.jsx)(`p`,{className:`um-empty__message`,children:o||c!==`all`?`Try adjusting your search or filter criteria`:`There are no merchandise items available at the moment.`}),(o||c!==`all`)&&(0,H.jsxs)(`button`,{className:`um-empty__action`,onClick:()=>{s(``),l(`all`)},children:[(0,H.jsx)(`i`,{className:`fa-solid fa-times`}),`Clear All Filters`]})]}):(0,H.jsx)(`div`,{className:`um-grid`,children:n.map((e,t)=>(0,H.jsx)(ss,{item:e,onViewDetails:b},e.merch_id))}),(0,H.jsxs)(`div`,{className:`um-chapter-card`,children:[(0,H.jsxs)(`div`,{className:`um-chapter-card__header`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-building`}),(0,H.jsx)(`h3`,{children:`Iloilo Chapter`})]}),(0,H.jsxs)(`div`,{className:`um-chapter-card__contact`,children:[(0,H.jsxs)(`div`,{className:`um-chapter-card__item`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-phone`}),(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`span`,{className:`um-chapter-card__label`,children:`Landline:`}),(0,H.jsx)(`button`,{className:`um-chapter-card__value um-chapter-card__value--clickable`,onClick:()=>window.location.href=`tel:0335033393`,children:`(033) 503-3393`})]})]}),(0,H.jsxs)(`div`,{className:`um-chapter-card__item`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-mobile-screen`}),(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`span`,{className:`um-chapter-card__label`,children:`Mobile:`}),(0,H.jsx)(`button`,{className:`um-chapter-card__value um-chapter-card__value--clickable`,onClick:()=>window.location.href=`tel:09171170066`,children:`0917 117 0066`})]})]}),(0,H.jsxs)(`div`,{className:`um-chapter-card__item`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-envelope`}),(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`span`,{className:`um-chapter-card__label`,children:`Email:`}),(0,H.jsx)(`button`,{className:`um-chapter-card__value um-chapter-card__value--clickable`,onClick:()=>window.location.href=`mailto:iloilo@redcross.org.ph`,children:`iloilo@redcross.org.ph`})]})]}),(0,H.jsxs)(`div`,{className:`um-chapter-card__item`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-dot`}),(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`span`,{className:`um-chapter-card__label`,children:`Address:`}),(0,H.jsx)(`span`,{className:`um-chapter-card__value`,children:`Brgy. Danao, Bonifacio Drive, Iloilo City, 5000`})]})]})]}),(0,H.jsxs)(`button`,{className:`um-chapter-card__directions`,onClick:()=>{window.open(`https://www.google.com/maps/search/?api=1&query=Brgy.%20Danao%2C%20Bonifacio%20Drive%2C%20Iloilo%20City%2C%205000`,`_blank`)},children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-arrow`}),`Get Directions`]}),(0,H.jsxs)(`p`,{className:`um-chapter-card__disclaimer`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-clock`}),`Stock levels shown are for reference only and may not reflect real-time availability. Please confirm product availability when visiting in person.`]})]})]}),u&&(0,H.jsx)(cs,{item:u,onClose:x}),f&&(0,H.jsx)(os,{message:f.message,type:f.type,onClose:()=>p(null)})]})}function us({message:e,type:t,onClose:n}){return(0,v.useEffect)(()=>{let e=setTimeout(n,3500);return()=>clearTimeout(e)},[n]),(0,H.jsxs)(`div`,{className:`ua-toast ua-toast--${t}`,onClick:n,children:[(0,H.jsx)(`div`,{className:`ua-toast__icon`,children:(0,H.jsx)(`i`,{className:`fa-solid ${t===`success`?`fa-circle-check`:`fa-circle-exclamation`}`})}),(0,H.jsxs)(`div`,{className:`ua-toast__content`,children:[(0,H.jsx)(`div`,{className:`ua-toast__title`,children:t===`success`?`Success`:`Error`}),(0,H.jsx)(`div`,{className:`ua-toast__message`,children:e})]}),(0,H.jsx)(`button`,{className:`ua-toast__close`,onClick:n,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]})}function ds({announcement:e,onClick:t,isNew:n}){let r=e=>({general:`fa-solid fa-megaphone`,urgent:`fa-solid fa-exclamation-triangle`,events:`fa-solid fa-calendar-alt`,training:`fa-solid fa-graduation-cap`})[e]||`fa-solid fa-bullhorn`,i=e=>({general:`#6b7280`,urgent:`#ef4444`,events:`#3b82f6`,training:`#10b981`})[e]||`#6b7280`,a=e=>({general:`General`,urgent:`Urgent`,events:`Event`,training:`Training`})[e]||e,o=(e=>{let t=e.image_path||e.image_url;return t?`http://localhost/prc-management-system/${t}`:null})(e),s=i(e.category),c=r(e.category),l=new Date(e.posted_at);return(0,H.jsxs)(`div`,{className:`ua-card ${e.category===`urgent`?`ua-card--urgent`:``}`,onClick:()=>t(e),children:[n&&(0,H.jsx)(`span`,{className:`ua-card__new-badge`,children:`NEW`}),(0,H.jsx)(`div`,{className:`ua-card__image`,children:o?(0,H.jsx)(`img`,{src:o,alt:e.title,onError:e=>{e.target.onerror=null,e.target.style.display=`none`,e.target.parentElement.classList.add(`ua-card__image--fallback`)}}):(0,H.jsx)(`div`,{className:`ua-card__image-placeholder`,style:{background:`linear-gradient(135deg, ${s}, ${s}dd)`},children:(0,H.jsx)(`i`,{className:c})})}),(0,H.jsxs)(`div`,{className:`ua-card__content`,children:[(0,H.jsxs)(`div`,{className:`ua-card__header`,children:[(0,H.jsxs)(`span`,{className:`ua-card__category`,style:{background:`${s}15`,color:s,border:`1px solid ${s}30`},children:[(0,H.jsx)(`i`,{className:c}),a(e.category)]}),(0,H.jsxs)(`span`,{className:`ua-card__date`,title:l.toLocaleString(),children:[(0,H.jsx)(`i`,{className:`fa-regular fa-calendar`}),l.toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,year:`numeric`})]})]}),(0,H.jsx)(`h3`,{className:`ua-card__title`,children:e.title}),(0,H.jsx)(`p`,{className:`ua-card__excerpt`,children:e.content.length>150?e.content.substring(0,150)+`...`:e.content}),(0,H.jsxs)(`div`,{className:`ua-card__footer`,children:[(0,H.jsxs)(`span`,{className:`ua-card__target`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-users`}),e.target_role===`all`?`All Users`:e.target_role.split(`_`).map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(` `)]}),(0,H.jsxs)(`button`,{className:`ua-card__read-more`,children:[(0,H.jsx)(`span`,{children:`Read More`}),(0,H.jsx)(`i`,{className:`fa-solid fa-arrow-right`})]})]})]})]})}function fs({announcement:e,onClose:t}){if(!e)return null;let n=e=>({general:`fa-solid fa-megaphone`,urgent:`fa-solid fa-exclamation-triangle`,events:`fa-solid fa-calendar-alt`,training:`fa-solid fa-graduation-cap`})[e]||`fa-solid fa-bullhorn`,r=e=>({general:`#6b7280`,urgent:`#ef4444`,events:`#3b82f6`,training:`#10b981`})[e]||`#6b7280`,i=e=>({general:`General`,urgent:`Urgent`,events:`Event`,training:`Training`})[e]||e,a=e=>e===`all`?`All Users`:e.split(`_`).map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(` `),o=e=>{let t=e.image_path||e.image_url;return t?`http://localhost/prc-management-system/${t}`:null},s=r(e.category),c=n(e.category),l=o(e),u=new Date(e.posted_at),d=e.updated_at?new Date(e.updated_at):null,f=e.category===`urgent`;return(0,H.jsx)(`div`,{className:`ua-overlay`,onClick:t,children:(0,H.jsxs)(`div`,{className:`ua-modal`,onClick:e=>e.stopPropagation(),children:[(0,H.jsxs)(`div`,{className:`ua-modal__header`,children:[(0,H.jsxs)(`h2`,{className:`ua-modal__title`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-newspaper`}),`Announcement Details`]}),(0,H.jsx)(`button`,{className:`ua-modal__close`,onClick:t,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]}),(0,H.jsxs)(`div`,{className:`ua-modal__body`,children:[l&&(0,H.jsx)(`div`,{className:`ua-modal__image`,children:(0,H.jsx)(`img`,{src:l,alt:e.title,onError:e=>{e.target.onerror=null,e.target.style.display=`none`}})}),(0,H.jsxs)(`div`,{className:`ua-modal__meta`,children:[(0,H.jsxs)(`span`,{className:`ua-modal__badge`,style:{background:`${s}15`,color:s,border:`1px solid ${s}30`},children:[(0,H.jsx)(`i`,{className:c}),i(e.category)]}),(0,H.jsxs)(`span`,{className:`ua-modal__badge ua-modal__badge--target`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-users`}),a(e.target_role)]}),(0,H.jsxs)(`span`,{className:`ua-modal__badge ua-modal__badge--date`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-calendar`}),u.toLocaleDateString(`en-US`,{month:`long`,day:`numeric`,year:`numeric`})]}),f&&(0,H.jsxs)(`span`,{className:`ua-modal__badge ua-modal__badge--urgent`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-exclamation-triangle`}),`URGENT`]})]}),(0,H.jsx)(`h1`,{className:`ua-modal__title-text`,children:e.title}),(0,H.jsx)(`div`,{className:`ua-modal__content`,children:e.content.split(`
`).map((e,t)=>(0,H.jsx)(`p`,{children:e},t))}),e.created_by_name&&(0,H.jsxs)(`div`,{className:`ua-modal__footer`,children:[(0,H.jsxs)(`div`,{className:`ua-modal__footer-left`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-circle-user`}),(0,H.jsxs)(`span`,{children:[`Posted by `,(0,H.jsx)(`strong`,{children:e.created_by_name})]})]}),d&&d>u&&(0,H.jsxs)(`div`,{className:`ua-modal__footer-right`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-pen-to-square`}),(0,H.jsxs)(`span`,{children:[`Updated `,d.toLocaleDateString()]})]})]})]})]})})}function ps(){let{id:e}=nt(),[t,n]=(0,v.useState)([]),[r,i]=(0,v.useState)([]),[a,o]=(0,v.useState)(!0),[s,c]=(0,v.useState)(``),[l,u]=(0,v.useState)(`all`),[d,f]=(0,v.useState)(null),[p,m]=(0,v.useState)(null),[h,g]=(0,v.useState)(null),_=(e,t=`success`)=>{m({message:e,type:t})};(0,v.useEffect)(()=>{y()},[]),(0,v.useEffect)(()=>{b()},[s,l,t]);let y=async()=>{try{let t=await(await fetch(`http://localhost/prc-management-system/backend/api/announcements.php`)).json();if(t.success){let r=t.data.filter(e=>e.status===`published`);if(n(r),e){let t=r.find(t=>t.announcement_id===parseInt(e));t&&f(t)}}}catch(e){console.error(`Error fetching announcements:`,e),_(`Failed to load announcements`,`error`)}finally{o(!1)}},b=()=>{let e=[...t];if(s){let t=s.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(t)||e.content.toLowerCase().includes(t))}l!==`all`&&(e=e.filter(e=>e.category===l)),e.sort((e,t)=>new Date(t.posted_at)-new Date(e.posted_at)),i(e)},x=e=>{f(e),window.history.pushState({},``,`/announcements/${e.announcement_id}`)},S=()=>{f(null),window.history.pushState({},``,`/announcements`)},C=()=>{c(``)},w=[{value:`all`,label:`All Categories`,icon:`fa-solid fa-newspaper`,color:`#6b7280`},{value:`general`,label:`General`,icon:`fa-solid fa-megaphone`,color:`#6b7280`},{value:`urgent`,label:`Urgent`,icon:`fa-solid fa-exclamation-triangle`,color:`#ef4444`},{value:`events`,label:`Events`,icon:`fa-solid fa-calendar-alt`,color:`#3b82f6`},{value:`training`,label:`Training`,icon:`fa-solid fa-graduation-cap`,color:`#10b981`}],T=e=>e===`all`?t.length:t.filter(t=>t.category===e).length,E=e=>{let t=new Date;return t.setDate(t.getDate()-7),new Date(e)>t};return(0,H.jsxs)(`div`,{className:`ua-root`,children:[(0,H.jsxs)(`div`,{className:`ua-header`,children:[(0,H.jsx)(`div`,{className:`ua-header__container`,children:(0,H.jsxs)(`div`,{className:`ua-header__content`,children:[(0,H.jsxs)(`div`,{className:`ua-header__left`,children:[(0,H.jsxs)(`div`,{className:`ua-header__badge`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-newspaper`}),`Announcements`]}),(0,H.jsx)(`h1`,{className:`ua-header__title`,children:`Latest News & Updates`}),(0,H.jsx)(`p`,{className:`ua-header__subtitle`,children:`Stay informed with the latest announcements from Philippine Red Cross`})]}),(0,H.jsxs)(`div`,{className:`ua-header__stats`,children:[(0,H.jsxs)(`div`,{className:`ua-header-stat`,children:[(0,H.jsx)(`span`,{className:`ua-header-stat__value`,children:t.length}),(0,H.jsx)(`span`,{className:`ua-header-stat__label`,children:`Total Announcements`})]}),(0,H.jsxs)(`div`,{className:`ua-header-stat`,children:[(0,H.jsx)(`span`,{className:`ua-header-stat__value`,children:t.filter(e=>e.category===`urgent`).length}),(0,H.jsx)(`span`,{className:`ua-header-stat__label`,children:`Urgent`})]})]})]})}),(0,H.jsx)(`div`,{className:`ua-header__wave`,children:(0,H.jsx)(`svg`,{viewBox:`0 0 1440 120`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`,children:(0,H.jsx)(`path`,{d:`M0 120L60 105C120 90 240 60 360 45C480 30 600 30 720 37.5C840 45 960 60 1080 67.5C1200 75 1320 75 1380 75L1440 75V120H1380C1320 120 1200 120 1080 120C960 120 840 120 720 120C600 120 480 120 360 120C240 120 120 120 60 120H0Z`,fill:`white`,fillOpacity:`0.1`})})})]}),(0,H.jsxs)(`div`,{className:`ua-body`,children:[(0,H.jsxs)(`div`,{className:`ua-filters`,children:[(0,H.jsxs)(`div`,{className:`ua-filters__search`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-magnifying-glass ua-filters__search-icon`}),(0,H.jsx)(`input`,{type:`text`,className:`ua-filters__search-input`,placeholder:`Search announcements by title or content...`,value:s,onChange:e=>c(e.target.value)}),s&&(0,H.jsx)(`button`,{className:`ua-filters__search-clear`,onClick:C,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]}),(0,H.jsx)(`div`,{className:`ua-filters__categories`,children:w.map(e=>(0,H.jsxs)(`button`,{className:`ua-filters__category-btn ${l===e.value?`ua-filters__category-btn--active`:``}`,onClick:()=>u(e.value),onMouseEnter:()=>g(e.value),onMouseLeave:()=>g(null),style:{borderColor:l===e.value||h===e.value?e.color:void 0,background:l===e.value?`${e.color}15`:h===e.value?`${e.color}08`:void 0,color:l===e.value||h===e.value?e.color:void 0},children:[(0,H.jsx)(`i`,{className:e.icon}),e.label,(0,H.jsx)(`span`,{className:`ua-filters__category-count`,style:{backgroundColor:l===e.value?`${e.color}30`:void 0},children:T(e.value)})]},e.value))})]}),a?(0,H.jsxs)(`div`,{className:`ua-loading`,children:[(0,H.jsx)(`div`,{className:`ua-loading__spinner`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-spinner fa-spin`})}),(0,H.jsx)(`p`,{children:`Loading announcements...`}),(0,H.jsx)(`span`,{className:`ua-loading__subtitle`,children:`Fetching latest updates`})]}):r.length===0?(0,H.jsxs)(`div`,{className:`ua-empty`,children:[(0,H.jsx)(`div`,{className:`ua-empty__icon`,children:(0,H.jsx)(`i`,{className:`fa-regular fa-newspaper`})}),(0,H.jsx)(`h3`,{className:`ua-empty__title`,children:`No Announcements Found`}),(0,H.jsx)(`p`,{className:`ua-empty__message`,children:s||l!==`all`?`Try adjusting your search or filter criteria`:`There are no announcements available at the moment.`}),(s||l!==`all`)&&(0,H.jsxs)(`button`,{className:`ua-empty__action`,onClick:()=>{c(``),u(`all`)},children:[(0,H.jsx)(`i`,{className:`fa-solid fa-times`}),`Clear All Filters`]})]}):(0,H.jsx)(`div`,{className:`ua-grid`,children:r.map(e=>(0,H.jsx)(ds,{announcement:e,onClick:x,isNew:E(e.posted_at)},e.announcement_id))}),!a&&r.length>0&&(0,H.jsxs)(`div`,{className:`ua-count`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-eye`}),`Showing `,(0,H.jsx)(`strong`,{children:r.length}),` of`,` `,(0,H.jsx)(`strong`,{children:t.length}),` announcements`]})]}),d&&(0,H.jsx)(fs,{announcement:d,onClose:S}),p&&(0,H.jsx)(us,{message:p.message,type:p.type,onClose:()=>m(null)})]})}function ms({message:e,type:t,onClose:n}){return(0,v.useEffect)(()=>{let e=setTimeout(n,3500);return()=>clearTimeout(e)},[n]),(0,H.jsxs)(`div`,{className:`ud-toast ud-toast--${t}`,onClick:n,children:[(0,H.jsx)(`div`,{className:`ud-toast__icon`,children:(0,H.jsx)(`i`,{className:`fa-solid ${t===`success`?`fa-circle-check`:`fa-circle-exclamation`}`})}),(0,H.jsxs)(`div`,{className:`ud-toast__content`,children:[(0,H.jsx)(`div`,{className:`ud-toast__title`,children:t===`success`?`Success`:`Error`}),(0,H.jsx)(`div`,{className:`ud-toast__message`,children:e})]}),(0,H.jsx)(`button`,{className:`ud-toast__close`,onClick:n,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]})}function hs(){let[e,t]=(0,v.useState)(`blood`),[n,r]=(0,v.useState)(null),[i,a]=(0,v.useState)(null),[o,s]=(0,v.useState)(null),c=(e,t=`success`)=>{a({message:e,type:t})},l=(e,t)=>{navigator.clipboard.writeText(e).then(()=>{r(t),c(`${t} copied to clipboard!`),setTimeout(()=>r(null),2e3)},()=>{c(`Failed to copy`,`error`)})},u=()=>{window.open(`https://www.google.com/maps/search/?api=1&query=Brgy.%20Danao%2C%20Bonifacio%20Drive%2C%20Iloilo%20City%2C%205000`,`_blank`)},d=e=>{window.location.href=`tel:${e.replace(/\s/g,``)}`},f=e=>{window.location.href=`mailto:${e}`},p=[{type:`A+`,description:`Can donate to A+, AB+`,bg:`#c41e3a15`,color:`#c41e3a`},{type:`A-`,description:`Can donate to A-, A+, AB-, AB+`,bg:`#c41e3a15`,color:`#c41e3a`},{type:`B+`,description:`Can donate to B+, AB+`,bg:`#15803d15`,color:`#15803d`},{type:`B-`,description:`Can donate to B-, B+, AB-, AB+`,bg:`#15803d15`,color:`#15803d`},{type:`AB+`,description:`Universal recipient`,bg:`#7c3aed15`,color:`#7c3aed`},{type:`AB-`,description:`Can donate to AB-, AB+`,bg:`#7c3aed15`,color:`#7c3aed`},{type:`O+`,description:`Can donate to O+, A+, B+, AB+`,bg:`#c2410c15`,color:`#c2410c`},{type:`O-`,description:`Universal donor`,bg:`#c2410c15`,color:`#c2410c`}],m=[{icon:`fa-solid fa-cake-candles`,text:`At least 16 years old (with parental consent if 16-17)`},{icon:`fa-solid fa-weight-scale`,text:`Weighs at least 50 kg (110 lbs)`},{icon:`fa-solid fa-heart-pulse`,text:`In good health and feeling well`},{icon:`fa-solid fa-syringe`,text:`No recent tattoos or piercings (within 6 months)`},{icon:`fa-solid fa-pills`,text:`Not taking certain medications (consult with staff)`},{icon:`fa-regular fa-clock`,text:`At least 3 months since last blood donation`}],h=[{category:`Food Items`,icon:`fa-solid fa-bowl-food`,items:[`Canned goods (sardines, corned beef, tuna)`,`Rice (5-10 kg packs)`,`Noodles (instant noodles, pasta)`,`Cooking oil`,`Canned milk`,`Coffee, sugar, and biscuits`]},{category:`Hygiene Kits`,icon:`fa-solid fa-soap`,items:[`Soap (bath and laundry)`,`Toothpaste and toothbrushes`,`Shampoo and conditioner`,`Sanitary napkins`,`Diapers (baby and adult)`,`Tissue paper and wet wipes`]},{category:`Clothing & Linens`,icon:`fa-solid fa-shirt`,items:[`Blankets and sleeping mats`,`T-shirts and shorts`,`Underwear and socks`,`Towels`,`Jackets and raincoats`]},{category:`Medical Supplies`,icon:`fa-solid fa-kit-medical`,items:[`First aid kits`,`Bandages and gauze`,`Face masks and gloves`,`Alcohol and disinfectants`,`Vitamins and supplements`]},{category:`Other Essentials`,icon:`fa-solid fa-box`,items:[`Water bottles or jugs`,`Flashlights and batteries`,`Mosquito nets and repellent`,`School supplies for children`,`Kitchen utensils`]}],g=[`All items must be new or in good condition`,`Food items should have at least 3 months before expiry`,`Pack items in sealed bags or boxes`,`Label boxes with contents and quantity`,`Drop off during business hours (8:00 AM - 5:00 PM, Monday to Friday)`],_=[{method:`Bank Transfer`,icon:`fa-solid fa-building-columns`,details:[{label:`Bank`,value:`Bank of the Philippine Islands (BPI)`},{label:`Account Name`,value:`Philippine Red Cross - Iloilo Chapter`},{label:`Account Number`,value:`1234-5678-90`},{label:`Branch`,value:`Iloilo City Main`}]},{method:`GCash`,icon:`fa-solid fa-mobile-screen`,details:[{label:`Mobile Number`,value:`0917 117 0066`},{label:`Account Name`,value:`PRC Iloilo Chapter`}]},{method:`PayMaya`,icon:`fa-solid fa-wallet`,details:[{label:`Mobile Number`,value:`0917 117 0066`},{label:`Account Name`,value:`PRC Iloilo Chapter`}]},{method:`Over-the-Counter`,icon:`fa-solid fa-hand-holding-dollar`,details:[{label:`Location`,value:`PRC Iloilo Chapter Office`},{label:`Address`,value:`Brgy. Danao, Bonifacio Drive, Iloilo City`},{label:`Receipt`,value:`Official receipt provided upon donation`}]}];return(0,H.jsxs)(`div`,{className:`ud-root`,children:[(0,H.jsxs)(`div`,{className:`ud-header`,children:[(0,H.jsx)(`div`,{className:`ud-header__container`,children:(0,H.jsxs)(`div`,{className:`ud-header__content`,children:[(0,H.jsxs)(`div`,{className:`ud-header__left`,children:[(0,H.jsxs)(`div`,{className:`ud-header__badge`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-hand-holding-heart`}),`Support Our Cause`]}),(0,H.jsx)(`h1`,{className:`ud-header__title`,children:`Make a Donation`}),(0,H.jsx)(`p`,{className:`ud-header__subtitle`,children:`Your generosity helps us serve communities in need. Choose how you'd like to contribute.`})]}),(0,H.jsxs)(`div`,{className:`ud-header__stats`,children:[(0,H.jsxs)(`div`,{className:`ud-header-stat`,children:[(0,H.jsx)(`span`,{className:`ud-header-stat__value`,children:`1M+`}),(0,H.jsx)(`span`,{className:`ud-header-stat__label`,children:`Lives Touched`})]}),(0,H.jsxs)(`div`,{className:`ud-header-stat`,children:[(0,H.jsx)(`span`,{className:`ud-header-stat__value`,children:`500+`}),(0,H.jsx)(`span`,{className:`ud-header-stat__label`,children:`Communities Served`})]}),(0,H.jsxs)(`div`,{className:`ud-header-stat`,children:[(0,H.jsx)(`span`,{className:`ud-header-stat__value`,children:`24/7`}),(0,H.jsx)(`span`,{className:`ud-header-stat__label`,children:`Emergency Response`})]})]})]})}),(0,H.jsx)(`div`,{className:`ud-header__wave`,children:(0,H.jsx)(`svg`,{viewBox:`0 0 1440 120`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`,children:(0,H.jsx)(`path`,{d:`M0 120L60 105C120 90 240 60 360 45C480 30 600 30 720 37.5C840 45 960 60 1080 67.5C1200 75 1320 75 1380 75L1440 75V120H1380C1320 120 1200 120 1080 120C960 120 840 120 720 120C600 120 480 120 360 120C240 120 120 120 60 120H0Z`,fill:`white`,fillOpacity:`0.1`})})})]}),(0,H.jsxs)(`div`,{className:`ud-body`,children:[(0,H.jsxs)(`div`,{className:`ud-notice`,children:[(0,H.jsx)(`div`,{className:`ud-notice__icon`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-circle-info`})}),(0,H.jsxs)(`div`,{className:`ud-notice__content`,children:[(0,H.jsx)(`h3`,{children:`Important Information`}),(0,H.jsx)(`p`,{children:`The Philippine Red Cross welcomes all forms of donations. For blood donations, please visit our chapter directly. For goods and cash donations, you may drop them off at our office or use the bank details provided below.`})]})]}),(0,H.jsxs)(`div`,{className:`ud-tabs`,children:[(0,H.jsxs)(`button`,{className:`ud-tab ${e===`blood`?`ud-tab--active`:``}`,onClick:()=>t(`blood`),children:[(0,H.jsx)(`i`,{className:`fa-solid fa-droplet`}),(0,H.jsx)(`span`,{children:`Blood Donation`})]}),(0,H.jsxs)(`button`,{className:`ud-tab ${e===`goods`?`ud-tab--active`:``}`,onClick:()=>t(`goods`),children:[(0,H.jsx)(`i`,{className:`fa-solid fa-box`}),(0,H.jsx)(`span`,{children:`Goods Donation`})]}),(0,H.jsxs)(`button`,{className:`ud-tab ${e===`cash`?`ud-tab--active`:``}`,onClick:()=>t(`cash`),children:[(0,H.jsx)(`i`,{className:`fa-solid fa-money-bill`}),(0,H.jsx)(`span`,{children:`Cash Donation`})]})]}),e===`blood`&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(`div`,{className:`ud-section`,children:[(0,H.jsx)(`div`,{className:`ud-section__header`,children:(0,H.jsxs)(`h2`,{className:`ud-section__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-dot`}),`Visit Your Nearest Philippine Red Cross Chapter`]})}),(0,H.jsxs)(`div`,{className:`ud-chapter-card`,children:[(0,H.jsxs)(`div`,{className:`ud-chapter-card__header`,children:[(0,H.jsxs)(`h3`,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-building`}),`Iloilo Chapter`]}),(0,H.jsx)(`span`,{className:`ud-chapter-card__badge`,children:`Main Office`})]}),(0,H.jsxs)(`div`,{className:`ud-chapter-card__content`,children:[(0,H.jsxs)(`div`,{className:`ud-hours-badge`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-clock`}),(0,H.jsx)(`span`,{children:`Open Today  8:00 AM - 5:00 PM`})]}),(0,H.jsxs)(`div`,{className:`ud-contact-group`,children:[(0,H.jsxs)(`h4`,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-phone`}),`Contact Numbers`]}),(0,H.jsxs)(`div`,{className:`ud-contact-list`,children:[(0,H.jsxs)(`div`,{className:`ud-contact-item`,children:[(0,H.jsx)(`span`,{className:`ud-contact-item__label`,children:`Landline:`}),(0,H.jsxs)(`button`,{className:`ud-contact-item__value ud-contact-item__value--clickable`,onClick:()=>d(`(033) 503-3393`),title:`Click to call`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-phone`}),`(033) 503-3393`]}),(0,H.jsx)(`button`,{className:`ud-copy-btn ${n===`landline`?`ud-copy-btn--copied`:``}`,onClick:()=>l(`(033) 503-3393`,`landline`),title:`Copy to clipboard`,children:(0,H.jsx)(`i`,{className:`fa-solid ${n===`landline`?`fa-check`:`fa-copy`}`})})]}),(0,H.jsxs)(`div`,{className:`ud-contact-item`,children:[(0,H.jsx)(`span`,{className:`ud-contact-item__label`,children:`Mobile:`}),(0,H.jsxs)(`button`,{className:`ud-contact-item__value ud-contact-item__value--clickable`,onClick:()=>d(`09171170066`),title:`Click to call`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-mobile`}),`0917 117 0066`]}),(0,H.jsx)(`button`,{className:`ud-copy-btn ${n===`mobile`?`ud-copy-btn--copied`:``}`,onClick:()=>l(`09171170066`,`mobile`),title:`Copy to clipboard`,children:(0,H.jsx)(`i`,{className:`fa-solid ${n===`mobile`?`fa-check`:`fa-copy`}`})})]})]})]}),(0,H.jsxs)(`div`,{className:`ud-contact-group`,children:[(0,H.jsxs)(`h4`,{children:[(0,H.jsx)(`i`,{className:`fa-regular fa-envelope`}),`Email Address`]}),(0,H.jsxs)(`div`,{className:`ud-contact-item`,children:[(0,H.jsxs)(`button`,{className:`ud-contact-item__value ud-contact-item__value--clickable`,onClick:()=>f(`iloilo@redcross.org.ph`),title:`Click to send email`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-envelope`}),`iloilo@redcross.org.ph`]}),(0,H.jsx)(`button`,{className:`ud-copy-btn ${n===`email`?`ud-copy-btn--copied`:``}`,onClick:()=>l(`iloilo@redcross.org.ph`,`email`),title:`Copy to clipboard`,children:(0,H.jsx)(`i`,{className:`fa-solid ${n===`email`?`fa-check`:`fa-copy`}`})})]})]}),(0,H.jsxs)(`div`,{className:`ud-contact-group`,children:[(0,H.jsxs)(`h4`,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-map-pin`}),`Address`]}),(0,H.jsxs)(`div`,{className:`ud-contact-item ud-contact-item--address`,children:[(0,H.jsxs)(`span`,{className:`ud-contact-item__value`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-dot`}),`Brgy. Danao, Bonifacio Drive, Iloilo City, 5000`]}),(0,H.jsx)(`button`,{className:`ud-copy-btn`,onClick:()=>l(`Brgy. Danao, Bonifacio Drive, Iloilo City, 5000`,`address`),title:`Copy to clipboard`,children:(0,H.jsx)(`i`,{className:`fa-solid ${n===`address`?`fa-check`:`fa-copy`}`})})]})]}),(0,H.jsxs)(`div`,{className:`ud-action-buttons`,children:[(0,H.jsxs)(`button`,{className:`ud-btn ud-btn--primary`,onClick:u,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-arrow`}),`Get Directions`]}),(0,H.jsxs)(`button`,{className:`ud-btn ud-btn--secondary`,onClick:()=>d(`09171170066`),children:[(0,H.jsx)(`i`,{className:`fa-solid fa-phone`}),`Call Now`]})]})]})]})]}),(0,H.jsxs)(`div`,{className:`ud-section`,children:[(0,H.jsxs)(`div`,{className:`ud-section__header`,children:[(0,H.jsxs)(`h2`,{className:`ud-section__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-droplet`}),`Blood Type Compatibility`]}),(0,H.jsx)(`span`,{className:`ud-section__badge`,children:`8 Types`})]}),(0,H.jsx)(`div`,{className:`ud-blood-types`,children:p.map(e=>(0,H.jsxs)(`div`,{className:`ud-blood-type`,children:[(0,H.jsx)(`div`,{className:`ud-blood-type__badge`,style:{background:e.bg,color:e.color,border:`2px solid ${e.color}30`},children:e.type}),(0,H.jsx)(`p`,{className:`ud-blood-type__description`,children:e.description})]},e.type))})]}),(0,H.jsxs)(`div`,{className:`ud-section`,children:[(0,H.jsx)(`div`,{className:`ud-section__header`,children:(0,H.jsxs)(`h2`,{className:`ud-section__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-clipboard-check`}),`Donor Eligibility Requirements`]})}),(0,H.jsx)(`div`,{className:`ud-requirements`,children:m.map((e,t)=>(0,H.jsxs)(`div`,{className:`ud-requirement`,children:[(0,H.jsx)(`div`,{className:`ud-requirement__icon`,children:(0,H.jsx)(`i`,{className:e.icon})}),(0,H.jsx)(`p`,{className:`ud-requirement__text`,children:e.text})]},t))})]})]}),e===`goods`&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(`div`,{className:`ud-section`,children:[(0,H.jsx)(`div`,{className:`ud-section__header`,children:(0,H.jsxs)(`h2`,{className:`ud-section__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-check`}),`Donation Guidelines`]})}),(0,H.jsx)(`div`,{className:`ud-guidelines`,children:g.map((e,t)=>(0,H.jsxs)(`div`,{className:`ud-guideline`,children:[(0,H.jsx)(`div`,{className:`ud-guideline__icon`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-check-circle`})}),(0,H.jsx)(`p`,{children:e})]},t))})]}),(0,H.jsxs)(`div`,{className:`ud-section`,children:[(0,H.jsxs)(`div`,{className:`ud-section__header`,children:[(0,H.jsxs)(`h2`,{className:`ud-section__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-box-open`}),`Accepted Items`]}),(0,H.jsxs)(`span`,{className:`ud-section__badge`,children:[h.length,` Categories`]})]}),(0,H.jsx)(`div`,{className:`ud-categories`,children:h.map((e,t)=>(0,H.jsxs)(`div`,{className:`ud-category`,children:[(0,H.jsxs)(`div`,{className:`ud-category__header`,children:[(0,H.jsx)(`div`,{className:`ud-category__icon`,children:(0,H.jsx)(`i`,{className:e.icon})}),(0,H.jsx)(`h3`,{children:e.category})]}),(0,H.jsx)(`ul`,{className:`ud-category__list`,children:e.items.map((e,t)=>(0,H.jsxs)(`li`,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-check`}),e]},t))})]},t))})]}),(0,H.jsxs)(`div`,{className:`ud-section`,children:[(0,H.jsx)(`div`,{className:`ud-section__header`,children:(0,H.jsxs)(`h2`,{className:`ud-section__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-dot`}),`Drop-off Location`]})}),(0,H.jsx)(`div`,{className:`ud-dropoff`,children:(0,H.jsxs)(`div`,{className:`ud-dropoff__card`,children:[(0,H.jsxs)(`div`,{className:`ud-dropoff__header`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-building`}),(0,H.jsx)(`h4`,{children:`Iloilo Chapter`})]}),(0,H.jsxs)(`div`,{className:`ud-dropoff__details`,children:[(0,H.jsxs)(`div`,{className:`ud-dropoff__detail`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-dot`}),(0,H.jsx)(`span`,{children:`Brgy. Danao, Bonifacio Drive, Iloilo City, 5000`})]}),(0,H.jsxs)(`div`,{className:`ud-dropoff__detail`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-clock`}),(0,H.jsx)(`span`,{children:`Monday - Friday, 8:00 AM - 5:00 PM`})]}),(0,H.jsxs)(`div`,{className:`ud-dropoff__detail`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-phone`}),(0,H.jsx)(`span`,{children:`(033) 503-3393`})]})]}),(0,H.jsx)(`div`,{className:`ud-action-buttons`,children:(0,H.jsxs)(`button`,{className:`ud-btn ud-btn--primary`,onClick:u,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-arrow`}),`Get Directions`]})})]})})]})]}),e===`cash`&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(`div`,{className:`ud-section`,children:[(0,H.jsxs)(`div`,{className:`ud-section__header`,children:[(0,H.jsxs)(`h2`,{className:`ud-section__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-credit-card`}),`Donation Options`]}),(0,H.jsxs)(`span`,{className:`ud-section__badge`,children:[_.length,` Methods`]})]}),(0,H.jsx)(`div`,{className:`ud-cash-options`,children:_.map((e,t)=>(0,H.jsxs)(`div`,{className:`ud-cash-option`,children:[(0,H.jsxs)(`div`,{className:`ud-cash-option__header`,children:[(0,H.jsx)(`i`,{className:e.icon}),(0,H.jsx)(`h3`,{children:e.method})]}),(0,H.jsx)(`div`,{className:`ud-cash-option__details`,children:e.details.map((e,r)=>(0,H.jsxs)(`div`,{className:`ud-cash-option__detail`,children:[(0,H.jsx)(`span`,{className:`ud-cash-option__label`,children:e.label}),(0,H.jsxs)(`div`,{className:`ud-cash-option__value-group`,children:[(0,H.jsx)(`span`,{className:`ud-cash-option__value`,children:e.value}),e.value.includes(`0917`)&&(0,H.jsx)(`button`,{className:`ud-copy-btn ${n===`cash-${t}-${r}`?`ud-copy-btn--copied`:``}`,onClick:()=>l(e.value,`cash-${t}-${r}`),title:`Copy to clipboard`,children:(0,H.jsx)(`i`,{className:`fa-solid ${n===`cash-${t}-${r}`?`fa-check`:`fa-copy`}`})})]})]},r))})]},t))})]}),(0,H.jsxs)(`div`,{className:`ud-section`,children:[(0,H.jsx)(`div`,{className:`ud-section__header`,children:(0,H.jsxs)(`h2`,{className:`ud-section__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-info`}),`Important Information`]})}),(0,H.jsx)(`div`,{className:`ud-guidelines`,children:[`All cash donations are tax-deductible`,`Official receipts will be issued for all donations`,`Specify your donation purpose (e.g., disaster response, blood services, general fund)`,`For bank transfers, email the deposit slip to iloilo@redcross.org.ph`,`For large donations, please contact us in advance`].map((e,t)=>(0,H.jsxs)(`div`,{className:`ud-guideline`,children:[(0,H.jsx)(`div`,{className:`ud-guideline__icon`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-info-circle`})}),(0,H.jsx)(`p`,{children:e})]},t))})]}),(0,H.jsxs)(`div`,{className:`ud-section`,children:[(0,H.jsx)(`div`,{className:`ud-section__header`,children:(0,H.jsxs)(`h2`,{className:`ud-section__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-handshake`}),`For Large Donations`]})}),(0,H.jsxs)(`div`,{className:`ud-contact-card`,children:[(0,H.jsx)(`p`,{children:`For corporate partnerships, large donations, or sponsorship inquiries, please contact our Donor Relations Team:`}),(0,H.jsxs)(`div`,{className:`ud-contact-info`,children:[(0,H.jsxs)(`div`,{className:`ud-contact-info-item`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-phone`}),(0,H.jsx)(`span`,{children:`(033) 503-3393 local 123`})]}),(0,H.jsxs)(`div`,{className:`ud-contact-info-item`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-envelope`}),(0,H.jsx)(`span`,{children:`donors@redcross.org.ph`})]})]})]})]})]}),(0,H.jsxs)(`div`,{className:`ud-section`,children:[(0,H.jsx)(`div`,{className:`ud-section__header`,children:(0,H.jsxs)(`h2`,{className:`ud-section__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-clock`}),`What to Expect When You Donate`]})}),(0,H.jsxs)(`div`,{className:`ud-steps`,children:[(0,H.jsxs)(`div`,{className:`ud-step`,children:[(0,H.jsx)(`div`,{className:`ud-step__number`,children:`1`}),(0,H.jsxs)(`div`,{className:`ud-step__content`,children:[(0,H.jsx)(`h4`,{children:`Registration`}),(0,H.jsx)(`p`,{children:`Fill out a donor form and present a valid ID`})]})]}),(0,H.jsxs)(`div`,{className:`ud-step`,children:[(0,H.jsx)(`div`,{className:`ud-step__number`,children:`2`}),(0,H.jsxs)(`div`,{className:`ud-step__content`,children:[(0,H.jsx)(`h4`,{children:`Consultation`}),(0,H.jsx)(`p`,{children:`Speak with our staff about your donation`})]})]}),(0,H.jsxs)(`div`,{className:`ud-step`,children:[(0,H.jsx)(`div`,{className:`ud-step__number`,children:`3`}),(0,H.jsxs)(`div`,{className:`ud-step__content`,children:[(0,H.jsx)(`h4`,{children:`Donation`}),(0,H.jsx)(`p`,{children:`Complete your donation (blood, goods, or cash)`})]})]}),(0,H.jsxs)(`div`,{className:`ud-step`,children:[(0,H.jsx)(`div`,{className:`ud-step__number`,children:`4`}),(0,H.jsxs)(`div`,{className:`ud-step__content`,children:[(0,H.jsx)(`h4`,{children:`Acknowledgement`}),(0,H.jsx)(`p`,{children:`Receive your official receipt and thank you letter`})]})]})]})]}),(0,H.jsxs)(`div`,{className:`ud-section`,children:[(0,H.jsx)(`div`,{className:`ud-section__header`,children:(0,H.jsxs)(`h2`,{className:`ud-section__title`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-circle-question`}),`Frequently Asked Questions`]})}),(0,H.jsx)(`div`,{className:`ud-faq`,children:[{question:`Are my donations tax-deductible?`,answer:`Yes, all donations to the Philippine Red Cross are tax-deductible. You will receive an official receipt for your donation.`},{question:`Can I specify where my donation goes?`,answer:`Yes, you can specify your donation purpose (e.g., disaster response, blood services, specific programs) when you donate.`},{question:`How do I get an official receipt?`,answer:`Official receipts are issued at the time of donation for cash and goods. For bank transfers, please email the deposit slip to receive your receipt.`},{question:`Can I donate in kind instead of cash?`,answer:`Absolutely! We welcome goods donations. Please check our accepted items list and guidelines above.`}].map((e,t)=>(0,H.jsxs)(`div`,{className:`ud-faq-item ${o===t?`ud-faq-item--expanded`:``}`,onClick:()=>s(o===t?null:t),children:[(0,H.jsxs)(`div`,{className:`ud-faq-item__question`,children:[(0,H.jsx)(`span`,{children:e.question}),(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-${o===t?`up`:`down`}`})]}),(0,H.jsx)(`div`,{className:`ud-faq-item__answer`,children:(0,H.jsx)(`p`,{children:e.answer})})]},t))})]}),(0,H.jsxs)(`div`,{className:`ud-reminder`,children:[(0,H.jsx)(`div`,{className:`ud-reminder__icon`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-heart`})}),(0,H.jsx)(`p`,{children:`Every donation, whether blood, goods, or cash, makes a difference. Thank you for your generosity and support.`})]})]}),i&&(0,H.jsx)(ms,{message:i.message,type:i.type,onClose:()=>a(null)})]})}function gs(e,t){let n=(0,v.useRef)(t);(0,v.useEffect)(function(){t!==n.current&&e.attributionControl!=null&&(n.current!=null&&e.attributionControl.removeAttribution(n.current),t!=null&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function _s(e){return Object.freeze({__version:1,map:e})}function vs(e,t){return Object.freeze({...e,...t})}const ys=(0,v.createContext)(null);function bs(){let e=(0,v.use)(ys);if(e==null)throw Error(`No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>`);return e}var xs=l(h(),1);function Ss(e){function t(t,n){let{instance:r,context:i}=e(t).current;(0,v.useImperativeHandle)(n,()=>r);let{children:a}=t;return a==null?null:v.createElement(ys,{value:i},a)}return(0,v.forwardRef)(t)}function Cs(e){function t(t,n){let[r,i]=(0,v.useState)(!1),{instance:a}=e(t,i).current;(0,v.useImperativeHandle)(n,()=>a),(0,v.useEffect)(function(){r&&a.update()},[a,r,t.children]);let o=a._contentNode;return o?(0,xs.createPortal)(t.children,o):null}return(0,v.forwardRef)(t)}function ws(e){function t(t,n){let{instance:r}=e(t).current;return(0,v.useImperativeHandle)(n,()=>r),null}return(0,v.forwardRef)(t)}function Ts(e,t){let n=(0,v.useRef)(void 0);(0,v.useEffect)(function(){return t!=null&&e.instance.on(t),n.current=t,function(){n.current!=null&&e.instance.off(n.current),n.current=null}},[e,t])}function Es(e,t){let n=e.pane??t.pane;return n?{...e,pane:n}:e}function Ds(e,t){return function(n,r){let i=bs(),a=e(Es(n,i),i);return gs(i.map,n.attribution),Ts(a.current,n.eventHandlers),t(a.current,i,n,r),a}}var Os=o(((e,t)=>{(function(n,r){typeof e==`object`&&t!==void 0?r(e):typeof define==`function`&&define.amd?define([`exports`],r):(n=typeof globalThis<`u`?globalThis:n||self,r(n.leaflet={}))})(e,(function(e){var t=`1.9.4`;function n(e){var t,n,r,i;for(n=1,r=arguments.length;n<r;n++)for(t in i=arguments[n],i)e[t]=i[t];return e}var r=Object.create||(function(){function e(){}return function(t){return e.prototype=t,new e}})();function i(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var r=n.call(arguments,2);return function(){return e.apply(t,r.length?r.concat(n.call(arguments)):arguments)}}var a=0;function o(e){return`_leaflet_id`in e||(e._leaflet_id=++a),e._leaflet_id}function s(e,t,n){var r,i,a,o=function(){r=!1,i&&=(a.apply(n,i),!1)};return a=function(){r?i=arguments:(e.apply(n,arguments),setTimeout(o,t),r=!0)},a}function c(e,t,n){var r=t[1],i=t[0],a=r-i;return e===r&&n?e:((e-i)%a+a)%a+i}function l(){return!1}function u(e,t){if(t===!1)return e;var n=10**(t===void 0?6:t);return Math.round(e*n)/n}function d(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,``)}function f(e){return d(e).split(/\s+/)}function p(e,t){for(var n in Object.prototype.hasOwnProperty.call(e,`options`)||(e.options=e.options?r(e.options):{}),t)e.options[n]=t[n];return e.options}function m(e,t,n){var r=[];for(var i in e)r.push(encodeURIComponent(n?i.toUpperCase():i)+`=`+encodeURIComponent(e[i]));return(!t||t.indexOf(`?`)===-1?`?`:`&`)+r.join(`&`)}var h=/\{ *([\w_ -]+) *\}/g;function g(e,t){return e.replace(h,function(e,n){var r=t[n];if(r===void 0)throw Error(`No value provided for variable `+e);return typeof r==`function`&&(r=r(t)),r})}var _=Array.isArray||function(e){return Object.prototype.toString.call(e)===`[object Array]`};function v(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}var y=`data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=`;function b(e){return window[`webkit`+e]||window[`moz`+e]||window[`ms`+e]}var x=0;function S(e){var t=+new Date,n=Math.max(0,16-(t-x));return x=t+n,window.setTimeout(e,n)}var C=window.requestAnimationFrame||b(`RequestAnimationFrame`)||S,w=window.cancelAnimationFrame||b(`CancelAnimationFrame`)||b(`CancelRequestAnimationFrame`)||function(e){window.clearTimeout(e)};function T(e,t,n){if(n&&C===S)e.call(t);else return C.call(window,i(e,t))}function E(e){e&&w.call(window,e)}var D={__proto__:null,extend:n,create:r,bind:i,get lastId(){return a},stamp:o,throttle:s,wrapNum:c,falseFn:l,formatNum:u,trim:d,splitWords:f,setOptions:p,getParamString:m,template:g,isArray:_,indexOf:v,emptyImageUrl:y,requestFn:C,cancelFn:w,requestAnimFrame:T,cancelAnimFrame:E};function O(){}O.extend=function(e){var t=function(){p(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=t.__super__=this.prototype,a=r(i);for(var o in a.constructor=t,t.prototype=a,this)Object.prototype.hasOwnProperty.call(this,o)&&o!==`prototype`&&o!==`__super__`&&(t[o]=this[o]);return e.statics&&n(t,e.statics),e.includes&&(ee(e.includes),n.apply(null,[a].concat(e.includes))),n(a,e),delete a.statics,delete a.includes,a.options&&(a.options=i.options?r(i.options):{},n(a.options,e.options)),a._initHooks=[],a.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=a._initHooks.length;e<t;e++)a._initHooks[e].call(this)}},t},O.include=function(e){var t=this.prototype.options;return n(this.prototype,e),e.options&&(this.prototype.options=t,this.mergeOptions(e.options)),this},O.mergeOptions=function(e){return n(this.prototype.options,e),this},O.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n=typeof e==`function`?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};function ee(e){if(!(typeof L>`u`||!L||!L.Mixin)){e=_(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn(`Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.`,Error().stack)}}var k={on:function(e,t,n){if(typeof e==`object`)for(var r in e)this._on(r,e[r],t);else{e=f(e);for(var i=0,a=e.length;i<a;i++)this._on(e[i],t,n)}return this},off:function(e,t,n){if(!arguments.length)delete this._events;else if(typeof e==`object`)for(var r in e)this._off(r,e[r],t);else{e=f(e);for(var i=arguments.length===1,a=0,o=e.length;a<o;a++)i?this._off(e[a]):this._off(e[a],t,n)}return this},_on:function(e,t,n,r){if(typeof t!=`function`){console.warn(`wrong listener type: `+typeof t);return}if(this._listens(e,t,n)===!1){n===this&&(n=void 0);var i={fn:t,ctx:n};r&&(i.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(i)}},_off:function(e,t,n){var r,i,a;if(this._events&&(r=this._events[e],r)){if(arguments.length===1){if(this._firingCount)for(i=0,a=r.length;i<a;i++)r[i].fn=l;delete this._events[e];return}if(typeof t!=`function`){console.warn(`wrong listener type: `+typeof t);return}var o=this._listens(e,t,n);if(o!==!1){var s=r[o];this._firingCount&&(s.fn=l,this._events[e]=r=r.slice()),r.splice(o,1)}}},fire:function(e,t,r){if(!this.listens(e,r))return this;var i=n({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var a=this._events[e];if(a){this._firingCount=this._firingCount+1||1;for(var o=0,s=a.length;o<s;o++){var c=a[o],l=c.fn;c.once&&this.off(e,l,c.ctx),l.call(c.ctx||this,i)}this._firingCount--}}return r&&this._propagateEvent(i),this},listens:function(e,t,n,r){typeof e!=`string`&&console.warn(`"string" type argument expected`);var i=t;typeof t!=`function`&&(r=!!t,i=void 0,n=void 0);var a=this._events&&this._events[e];if(a&&a.length&&this._listens(e,i,n)!==!1)return!0;if(r){for(var o in this._eventParents)if(this._eventParents[o].listens(e,t,n,r))return!0}return!1},_listens:function(e,t,n){if(!this._events)return!1;var r=this._events[e]||[];if(!t)return!!r.length;n===this&&(n=void 0);for(var i=0,a=r.length;i<a;i++)if(r[i].fn===t&&r[i].ctx===n)return i;return!1},once:function(e,t,n){if(typeof e==`object`)for(var r in e)this._on(r,e[r],t,!0);else{e=f(e);for(var i=0,a=e.length;i<a;i++)this._on(e[i],t,n,!0)}return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[o(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[o(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,n({layer:e.target,propagatedFrom:e.target},e),!0)}};k.addEventListener=k.on,k.removeEventListener=k.clearAllEventListeners=k.off,k.addOneTimeEventListener=k.once,k.fireEvent=k.fire,k.hasEventListeners=k.listens;var te=O.extend(k);function A(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t}var ne=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};A.prototype={clone:function(){return new A(this.x,this.y)},add:function(e){return this.clone()._add(j(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(j(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new A(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new A(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ne(this.x),this.y=ne(this.y),this},distanceTo:function(e){e=j(e);var t=e.x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},equals:function(e){return e=j(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=j(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return`Point(`+u(this.x)+`, `+u(this.y)+`)`}};function j(e,t,n){return e instanceof A?e:_(e)?new A(e[0],e[1]):e==null?e:typeof e==`object`&&`x`in e&&`y`in e?new A(e.x,e.y):new A(e,t,n)}function M(e,t){if(e)for(var n=t?[e,t]:e,r=0,i=n.length;r<i;r++)this.extend(n[r])}M.prototype={extend:function(e){var t,n;if(!e)return this;if(e instanceof A||typeof e[0]==`number`||`x`in e)t=n=j(e);else if(e=N(e),t=e.min,n=e.max,!t||!n)return this;return!this.min&&!this.max?(this.min=t.clone(),this.max=n.clone()):(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)),this},getCenter:function(e){return j((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return j(this.min.x,this.max.y)},getTopRight:function(){return j(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return e=typeof e[0]==`number`||e instanceof A?j(e):N(e),e instanceof M?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=N(e);var t=this.min,n=this.max,r=e.min,i=e.max,a=i.x>=t.x&&r.x<=n.x,o=i.y>=t.y&&r.y<=n.y;return a&&o},overlaps:function(e){e=N(e);var t=this.min,n=this.max,r=e.min,i=e.max,a=i.x>t.x&&r.x<n.x,o=i.y>t.y&&r.y<n.y;return a&&o},isValid:function(){return!!(this.min&&this.max)},pad:function(e){var t=this.min,n=this.max,r=Math.abs(t.x-n.x)*e,i=Math.abs(t.y-n.y)*e;return N(j(t.x-r,t.y-i),j(n.x+r,n.y+i))},equals:function(e){return e?(e=N(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight())):!1}};function N(e,t){return!e||e instanceof M?e:new M(e,t)}function P(e,t){if(e)for(var n=t?[e,t]:e,r=0,i=n.length;r<i;r++)this.extend(n[r])}P.prototype={extend:function(e){var t=this._southWest,n=this._northEast,r,i;if(e instanceof F)r=e,i=e;else if(e instanceof P){if(r=e._southWest,i=e._northEast,!r||!i)return this}else return e?this.extend(I(e)||re(e)):this;return!t&&!n?(this._southWest=new F(r.lat,r.lng),this._northEast=new F(i.lat,i.lng)):(t.lat=Math.min(r.lat,t.lat),t.lng=Math.min(r.lng,t.lng),n.lat=Math.max(i.lat,n.lat),n.lng=Math.max(i.lng,n.lng)),this},pad:function(e){var t=this._southWest,n=this._northEast,r=Math.abs(t.lat-n.lat)*e,i=Math.abs(t.lng-n.lng)*e;return new P(new F(t.lat-r,t.lng-i),new F(n.lat+r,n.lng+i))},getCenter:function(){return new F((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new F(this.getNorth(),this.getWest())},getSouthEast:function(){return new F(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e=typeof e[0]==`number`||e instanceof F||`lat`in e?I(e):re(e);var t=this._southWest,n=this._northEast,r,i;return e instanceof P?(r=e.getSouthWest(),i=e.getNorthEast()):r=i=e,r.lat>=t.lat&&i.lat<=n.lat&&r.lng>=t.lng&&i.lng<=n.lng},intersects:function(e){e=re(e);var t=this._southWest,n=this._northEast,r=e.getSouthWest(),i=e.getNorthEast(),a=i.lat>=t.lat&&r.lat<=n.lat,o=i.lng>=t.lng&&r.lng<=n.lng;return a&&o},overlaps:function(e){e=re(e);var t=this._southWest,n=this._northEast,r=e.getSouthWest(),i=e.getNorthEast(),a=i.lat>t.lat&&r.lat<n.lat,o=i.lng>t.lng&&r.lng<n.lng;return a&&o},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(`,`)},equals:function(e,t){return e?(e=re(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function re(e,t){return e instanceof P?e:new P(e,t)}function F(e,t,n){if(isNaN(e)||isNaN(t))throw Error(`Invalid LatLng object: (`+e+`, `+t+`)`);this.lat=+e,this.lng=+t,n!==void 0&&(this.alt=+n)}F.prototype={equals:function(e,t){return e?(e=I(e),Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng))<=(t===void 0?1e-9:t)):!1},toString:function(e){return`LatLng(`+u(this.lat,e)+`, `+u(this.lng,e)+`)`},distanceTo:function(e){return ae.distance(this,I(e))},wrap:function(){return ae.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return re([this.lat-t,this.lng-n],[this.lat+t,this.lng+n])},clone:function(){return new F(this.lat,this.lng,this.alt)}};function I(e,t,n){return e instanceof F?e:_(e)&&typeof e[0]!=`object`?e.length===3?new F(e[0],e[1],e[2]):e.length===2?new F(e[0],e[1]):null:e==null?e:typeof e==`object`&&`lat`in e?new F(e.lat,`lng`in e?e.lng:e.lon,e.alt):t===void 0?null:new F(e,t,n)}var ie={latLngToPoint:function(e,t){var n=this.projection.project(e),r=this.scale(t);return this.transformation._transform(n,r)},pointToLatLng:function(e,t){var n=this.scale(t),r=this.transformation.untransform(e,n);return this.projection.unproject(r)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*2**e},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,n=this.scale(e);return new M(this.transformation.transform(t.min,n),this.transformation.transform(t.max,n))},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?c(e.lng,this.wrapLng,!0):e.lng,n=this.wrapLat?c(e.lat,this.wrapLat,!0):e.lat,r=e.alt;return new F(n,t,r)},wrapLatLngBounds:function(e){var t=e.getCenter(),n=this.wrapLatLng(t),r=t.lat-n.lat,i=t.lng-n.lng;if(r===0&&i===0)return e;var a=e.getSouthWest(),o=e.getNorthEast();return new P(new F(a.lat-r,a.lng-i),new F(o.lat-r,o.lng-i))}},ae=n({},ie,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var n=Math.PI/180,r=e.lat*n,i=t.lat*n,a=Math.sin((t.lat-e.lat)*n/2),o=Math.sin((t.lng-e.lng)*n/2),s=a*a+Math.cos(r)*Math.cos(i)*o*o,c=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*c}}),oe=6378137,se={R:oe,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,e.lat),-n),i=Math.sin(r*t);return new A(this.R*e.lng*t,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(e){var t=180/Math.PI;return new F((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:(function(){var e=oe*Math.PI;return new M([-e,-e],[e,e])})()};function ce(e,t,n,r){if(_(e)){this._a=e[0],this._b=e[1],this._c=e[2],this._d=e[3];return}this._a=e,this._b=t,this._c=n,this._d=r}ce.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t||=1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t||=1,new A((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};function le(e,t,n,r){return new ce(e,t,n,r)}var ue=n({},ae,{code:`EPSG:3857`,projection:se,transformation:function(){var e=.5/(Math.PI*se.R);return le(e,.5,-e,.5)}()}),de=n({},ue,{code:`EPSG:900913`});function fe(e){return document.createElementNS(`http://www.w3.org/2000/svg`,e)}function pe(e,t){var n=``,r,i,a,o,s,c;for(r=0,a=e.length;r<a;r++){for(s=e[r],i=0,o=s.length;i<o;i++)c=s[i],n+=(i?`L`:`M`)+c.x+` `+c.y;n+=t?R.svg?`z`:`x`:``}return n||`M0 0`}var me=document.documentElement.style,he=`ActiveXObject`in window,ge=he&&!document.addEventListener,_e=`msLaunchUri`in navigator&&!(`documentMode`in document),ve=Ze(`webkit`),ye=Ze(`android`),be=Ze(`android 2`)||Ze(`android 3`),xe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Se=ye&&Ze(`Google`)&&xe<537&&!(`AudioNode`in window),Ce=!!window.opera,we=!_e&&Ze(`chrome`),Te=Ze(`gecko`)&&!ve&&!Ce&&!he,Ee=!we&&Ze(`safari`),De=Ze(`phantom`),Oe=`OTransition`in me,ke=navigator.platform.indexOf(`Win`)===0,Ae=he&&`transition`in me,je=`WebKitCSSMatrix`in window&&`m11`in new window.WebKitCSSMatrix&&!be,Me=`MozPerspective`in me,Ne=!window.L_DISABLE_3D&&(Ae||je||Me)&&!Oe&&!De,Pe=typeof orientation<`u`||Ze(`mobile`),Fe=Pe&&ve,Ie=Pe&&je,Le=!window.PointerEvent&&window.MSPointerEvent,Re=!!(window.PointerEvent||Le),ze=`ontouchstart`in window||!!window.TouchEvent,Be=!window.L_NO_TOUCH&&(ze||Re),Ve=Pe&&Ce,He=Pe&&Te,Ue=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,We=function(){var e=!1;try{var t=Object.defineProperty({},`passive`,{get:function(){e=!0}});window.addEventListener(`testPassiveEventSupport`,l,t),window.removeEventListener(`testPassiveEventSupport`,l,t)}catch{}return e}(),Ge=function(){return!!document.createElement(`canvas`).getContext}(),Ke=!!(document.createElementNS&&fe(`svg`).createSVGRect),qe=!!Ke&&(function(){var e=document.createElement(`div`);return e.innerHTML=`<svg/>`,(e.firstChild&&e.firstChild.namespaceURI)===`http://www.w3.org/2000/svg`})(),Je=!Ke&&function(){try{var e=document.createElement(`div`);e.innerHTML=`<v:shape adj="1"/>`;var t=e.firstChild;return t.style.behavior=`url(#default#VML)`,t&&typeof t.adj==`object`}catch{return!1}}(),Ye=navigator.platform.indexOf(`Mac`)===0,Xe=navigator.platform.indexOf(`Linux`)===0;function Ze(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var R={ie:he,ielt9:ge,edge:_e,webkit:ve,android:ye,android23:be,androidStock:Se,opera:Ce,chrome:we,gecko:Te,safari:Ee,phantom:De,opera12:Oe,win:ke,ie3d:Ae,webkit3d:je,gecko3d:Me,any3d:Ne,mobile:Pe,mobileWebkit:Fe,mobileWebkit3d:Ie,msPointer:Le,pointer:Re,touch:Be,touchNative:ze,mobileOpera:Ve,mobileGecko:He,retina:Ue,passiveEvents:We,canvas:Ge,svg:Ke,vml:Je,inlineSvg:qe,mac:Ye,linux:Xe},Qe=R.msPointer?`MSPointerDown`:`pointerdown`,$e=R.msPointer?`MSPointerMove`:`pointermove`,et=R.msPointer?`MSPointerUp`:`pointerup`,tt=R.msPointer?`MSPointerCancel`:`pointercancel`,nt={touchstart:Qe,touchmove:$e,touchend:et,touchcancel:tt},rt={touchstart:pt,touchmove:ft,touchend:ft,touchcancel:ft},it={},at=!1;function ot(e,t,n){return t===`touchstart`&&dt(),rt[t]?(n=rt[t].bind(this,n),e.addEventListener(nt[t],n,!1),n):(console.warn(`wrong event specified:`,t),l)}function st(e,t,n){if(!nt[t]){console.warn(`wrong event specified:`,t);return}e.removeEventListener(nt[t],n,!1)}function ct(e){it[e.pointerId]=e}function lt(e){it[e.pointerId]&&(it[e.pointerId]=e)}function ut(e){delete it[e.pointerId]}function dt(){at||=(document.addEventListener(Qe,ct,!0),document.addEventListener($e,lt,!0),document.addEventListener(et,ut,!0),document.addEventListener(tt,ut,!0),!0)}function ft(e,t){if(t.pointerType!==(t.MSPOINTER_TYPE_MOUSE||`mouse`)){for(var n in t.touches=[],it)t.touches.push(it[n]);t.changedTouches=[t],e(t)}}function pt(e,t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&sn(t),ft(e,t)}function mt(e){var t={},n,r;for(r in e)n=e[r],t[r]=n&&n.bind?n.bind(e):n;return e=t,t.type=`dblclick`,t.detail=2,t.isTrusted=!1,t._simulated=!0,t}var ht=200;function gt(e,t){e.addEventListener(`dblclick`,t);var n=0,r;function i(e){if(e.detail!==1){r=e.detail;return}if(!(e.pointerType===`mouse`||e.sourceCapabilities&&!e.sourceCapabilities.firesTouchEvents)){var i=ln(e);if(!(i.some(function(e){return e instanceof HTMLLabelElement&&e.attributes.for})&&!i.some(function(e){return e instanceof HTMLInputElement||e instanceof HTMLSelectElement}))){var a=Date.now();a-n<=ht?(r++,r===2&&t(mt(e))):r=1,n=a}}}return e.addEventListener(`click`,i),{dblclick:t,simDblclick:i}}function _t(e,t){e.removeEventListener(`dblclick`,t.dblclick),e.removeEventListener(`click`,t.simDblclick)}var vt=Nt([`transform`,`webkitTransform`,`OTransform`,`MozTransform`,`msTransform`]),yt=Nt([`webkitTransition`,`transition`,`OTransition`,`MozTransition`,`msTransition`]),bt=yt===`webkitTransition`||yt===`OTransition`?yt+`End`:`transitionend`;function xt(e){return typeof e==`string`?document.getElementById(e):e}function St(e,t){var n=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!n||n===`auto`)&&document.defaultView){var r=document.defaultView.getComputedStyle(e,null);n=r?r[t]:null}return n===`auto`?null:n}function Ct(e,t,n){var r=document.createElement(e);return r.className=t||``,n&&n.appendChild(r),r}function wt(e){var t=e.parentNode;t&&t.removeChild(e)}function Tt(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Et(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function Dt(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function z(e,t){if(e.classList!==void 0)return e.classList.contains(t);var n=At(e);return n.length>0&&RegExp(`(^|\\s)`+t+`(\\s|$)`).test(n)}function B(e,t){if(e.classList!==void 0)for(var n=f(t),r=0,i=n.length;r<i;r++)e.classList.add(n[r]);else if(!z(e,t)){var a=At(e);kt(e,(a?a+` `:``)+t)}}function Ot(e,t){e.classList===void 0?kt(e,d((` `+At(e)+` `).replace(` `+t+` `,` `))):e.classList.remove(t)}function kt(e,t){e.className.baseVal===void 0?e.className=t:e.className.baseVal=t}function At(e){return e.correspondingElement&&(e=e.correspondingElement),e.className.baseVal===void 0?e.className:e.className.baseVal}function jt(e,t){`opacity`in e.style?e.style.opacity=t:`filter`in e.style&&Mt(e,t)}function Mt(e,t){var n=!1,r=`DXImageTransform.Microsoft.Alpha`;try{n=e.filters.item(r)}catch{if(t===1)return}t=Math.round(t*100),n?(n.Enabled=t!==100,n.Opacity=t):e.style.filter+=` progid:`+r+`(opacity=`+t+`)`}function Nt(e){for(var t=document.documentElement.style,n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1}function Pt(e,t,n){var r=t||new A(0,0);e.style[vt]=(R.ie3d?`translate(`+r.x+`px,`+r.y+`px)`:`translate3d(`+r.x+`px,`+r.y+`px,0)`)+(n?` scale(`+n+`)`:``)}function Ft(e,t){e._leaflet_pos=t,R.any3d?Pt(e,t):(e.style.left=t.x+`px`,e.style.top=t.y+`px`)}function It(e){return e._leaflet_pos||new A(0,0)}var Lt,Rt,zt;if(`onselectstart`in document)Lt=function(){Xt(window,`selectstart`,sn)},Rt=function(){Qt(window,`selectstart`,sn)};else{var Bt=Nt([`userSelect`,`WebkitUserSelect`,`OUserSelect`,`MozUserSelect`,`msUserSelect`]);Lt=function(){if(Bt){var e=document.documentElement.style;zt=e[Bt],e[Bt]=`none`}},Rt=function(){Bt&&(document.documentElement.style[Bt]=zt,zt=void 0)}}function Vt(){Xt(window,`dragstart`,sn)}function Ht(){Qt(window,`dragstart`,sn)}var Ut,Wt;function Gt(e){for(;e.tabIndex===-1;)e=e.parentNode;e.style&&(Kt(),Ut=e,Wt=e.style.outlineStyle,e.style.outlineStyle=`none`,Xt(window,`keydown`,Kt))}function Kt(){Ut&&(Ut.style.outlineStyle=Wt,Ut=void 0,Wt=void 0,Qt(window,`keydown`,Kt))}function qt(e){do e=e.parentNode;while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function Jt(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var Yt={__proto__:null,TRANSFORM:vt,TRANSITION:yt,TRANSITION_END:bt,get:xt,getStyle:St,create:Ct,remove:wt,empty:Tt,toFront:Et,toBack:Dt,hasClass:z,addClass:B,removeClass:Ot,setClass:kt,getClass:At,setOpacity:jt,testProp:Nt,setTransform:Pt,setPosition:Ft,getPosition:It,get disableTextSelection(){return Lt},get enableTextSelection(){return Rt},disableImageDrag:Vt,enableImageDrag:Ht,preventOutline:Gt,restoreOutline:Kt,getSizedParentNode:qt,getScale:Jt};function Xt(e,t,n,r){if(t&&typeof t==`object`)for(var i in t)tn(e,i,t[i],n);else{t=f(t);for(var a=0,o=t.length;a<o;a++)tn(e,t[a],n,r)}return this}var Zt=`_leaflet_events`;function Qt(e,t,n,r){if(arguments.length===1)$t(e),delete e[Zt];else if(t&&typeof t==`object`)for(var i in t)nn(e,i,t[i],n);else if(t=f(t),arguments.length===2)$t(e,function(e){return v(t,e)!==-1});else for(var a=0,o=t.length;a<o;a++)nn(e,t[a],n,r);return this}function $t(e,t){for(var n in e[Zt]){var r=n.split(/\d/)[0];(!t||t(r))&&nn(e,r,null,null,n)}}var en={mouseenter:`mouseover`,mouseleave:`mouseout`,wheel:!(`onwheel`in window)&&`mousewheel`};function tn(e,t,n,r){var i=t+o(n)+(r?`_`+o(r):``);if(e[Zt]&&e[Zt][i])return this;var a=function(t){return n.call(r||e,t||window.event)},s=a;!R.touchNative&&R.pointer&&t.indexOf(`touch`)===0?a=ot(e,t,a):R.touch&&t===`dblclick`?a=gt(e,a):`addEventListener`in e?t===`touchstart`||t===`touchmove`||t===`wheel`||t===`mousewheel`?e.addEventListener(en[t]||t,a,R.passiveEvents?{passive:!1}:!1):t===`mouseenter`||t===`mouseleave`?(a=function(t){t||=window.event,pn(e,t)&&s(t)},e.addEventListener(en[t],a,!1)):e.addEventListener(t,s,!1):e.attachEvent(`on`+t,a),e[Zt]=e[Zt]||{},e[Zt][i]=a}function nn(e,t,n,r,i){i||=t+o(n)+(r?`_`+o(r):``);var a=e[Zt]&&e[Zt][i];if(!a)return this;!R.touchNative&&R.pointer&&t.indexOf(`touch`)===0?st(e,t,a):R.touch&&t===`dblclick`?_t(e,a):`removeEventListener`in e?e.removeEventListener(en[t]||t,a,!1):e.detachEvent(`on`+t,a),e[Zt][i]=null}function rn(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function an(e){return tn(e,`wheel`,rn),this}function on(e){return Xt(e,`mousedown touchstart dblclick contextmenu`,rn),e._leaflet_disable_click=!0,this}function sn(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function cn(e){return sn(e),rn(e),this}function ln(e){if(e.composedPath)return e.composedPath();for(var t=[],n=e.target;n;)t.push(n),n=n.parentNode;return t}function un(e,t){if(!t)return new A(e.clientX,e.clientY);var n=Jt(t),r=n.boundingClientRect;return new A((e.clientX-r.left)/n.x-t.clientLeft,(e.clientY-r.top)/n.y-t.clientTop)}var dn=R.linux&&R.chrome?window.devicePixelRatio:R.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function fn(e){return R.edge?e.wheelDeltaY/2:e.deltaY&&e.deltaMode===0?-e.deltaY/dn:e.deltaY&&e.deltaMode===1?-e.deltaY*20:e.deltaY&&e.deltaMode===2?-e.deltaY*60:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?-e.detail*20:e.detail?e.detail/-32765*60:0}function pn(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch{return!1}return n!==e}var mn={__proto__:null,on:Xt,off:Qt,stopPropagation:rn,disableScrollPropagation:an,disableClickPropagation:on,preventDefault:sn,stop:cn,getPropagationPath:ln,getMousePosition:un,getWheelDelta:fn,isExternalTarget:pn,addListener:Xt,removeListener:Qt},hn=te.extend({run:function(e,t,n,r){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=It(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire(`start`),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=T(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,n=this._duration*1e3;t<n?this._runFrame(this._easeOut(t/n),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var n=this._startPos.add(this._offset.multiplyBy(e));t&&n._round(),Ft(this._el,n),this.fire(`step`)},_complete:function(){E(this._animId),this._inProgress=!1,this.fire(`end`)},_easeOut:function(e){return 1-(1-e)**this._easeOutPower}}),gn=te.extend({options:{crs:ue,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=p(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),t.zoom!==void 0&&(this._zoom=this._limitZoom(t.zoom)),t.center&&t.zoom!==void 0&&this.setView(I(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=yt&&R.any3d&&!R.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Xt(this._proxy,bt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,r){return t=t===void 0?this._zoom:this._limitZoom(t),e=this._limitCenter(I(e),t,this.options.maxBounds),r||={},this._stop(),this._loaded&&!r.reset&&r!==!0&&(r.animate!==void 0&&(r.zoom=n({animate:r.animate},r.zoom),r.pan=n({animate:r.animate,duration:r.duration},r.pan)),this._zoom===t?this._tryAnimatedPan(e,r.pan):this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,r.zoom))?(clearTimeout(this._sizeTimer),this):(this._resetView(e,t,r.pan&&r.pan.noMoveStart),this)},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e||=R.any3d?this.options.zoomDelta:1,this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e||=R.any3d?this.options.zoomDelta:1,this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,n){var r=this.getZoomScale(t),i=this.getSize().divideBy(2),a=(e instanceof A?e:this.latLngToContainerPoint(e)).subtract(i).multiplyBy(1-1/r),o=this.containerPointToLatLng(i.add(a));return this.setView(o,t,{zoom:n})},_getBoundsCenterZoom:function(e,t){t||={},e=e.getBounds?e.getBounds():re(e);var n=j(t.paddingTopLeft||t.padding||[0,0]),r=j(t.paddingBottomRight||t.padding||[0,0]),i=this.getBoundsZoom(e,!1,n.add(r));if(i=typeof t.maxZoom==`number`?Math.min(t.maxZoom,i):i,i===1/0)return{center:e.getCenter(),zoom:i};var a=r.subtract(n).divideBy(2),o=this.project(e.getSouthWest(),i),s=this.project(e.getNorthEast(),i);return{center:this.unproject(o.add(s).divideBy(2).add(a),i),zoom:i}},fitBounds:function(e,t){if(e=re(e),!e.isValid())throw Error(`Bounds are not valid.`);var n=this._getBoundsCenterZoom(e,t);return this.setView(n.center,n.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(e=j(e).round(),t||={},!e.x&&!e.y)return this.fire(`moveend`);if(t.animate!==!0&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new hn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire(`movestart`),t.animate!==!1){B(this._mapPane,`leaflet-pan-anim`);var n=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire(`move`).fire(`moveend`);return this},flyTo:function(e,t,n){if(n||={},n.animate===!1||!R.any3d)return this.setView(e,t,n);this._stop();var r=this.project(this.getCenter()),i=this.project(e),a=this.getSize(),o=this._zoom;e=I(e),t=t===void 0?o:t;var s=Math.max(a.x,a.y),c=s*this.getZoomScale(o,t),l=i.distanceTo(r)||1,u=1.42,d=u*u;function f(e){var t=e?-1:1,n=e?c:s,r=(c*c-s*s+t*d*d*l*l)/(2*n*d*l),i=Math.sqrt(r*r+1)-r;return i<1e-9?-18:Math.log(i)}function p(e){return(Math.exp(e)-Math.exp(-e))/2}function m(e){return(Math.exp(e)+Math.exp(-e))/2}function h(e){return p(e)/m(e)}var g=f(0);function _(e){return s*(m(g)/m(g+u*e))}function v(e){return s*(m(g)*h(g+u*e)-p(g))/d}function y(e){return 1-(1-e)**1.5}var b=Date.now(),x=(f(1)-g)/u,S=n.duration?1e3*n.duration:1e3*x*.8;function C(){var n=(Date.now()-b)/S,a=y(n)*x;n<=1?(this._flyToFrame=T(C,this),this._move(this.unproject(r.add(i.subtract(r).multiplyBy(v(a)/l)),o),this.getScaleZoom(s/_(a),o),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),C.call(this),this},flyToBounds:function(e,t){var n=this._getBoundsCenterZoom(e,t);return this.flyTo(n.center,n.zoom,t)},setMaxBounds:function(e){return e=re(e),this.listens(`moveend`,this._panInsideMaxBounds)&&this.off(`moveend`,this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on(`moveend`,this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire(`zoomlevelschange`),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire(`zoomlevelschange`),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,re(e));return n.equals(r)||this.panTo(r,t),this._enforcingBounds=!1,this},panInside:function(e,t){t||={};var n=j(t.paddingTopLeft||t.padding||[0,0]),r=j(t.paddingBottomRight||t.padding||[0,0]),i=this.project(this.getCenter()),a=this.project(e),o=this.getPixelBounds(),s=N([o.min.add(n),o.max.subtract(r)]),c=s.getSize();if(!s.contains(a)){this._enforcingBounds=!0;var l=a.subtract(s.getCenter()),u=s.extend(a).getSize().subtract(c);i.x+=l.x<0?-u.x:u.x,i.y+=l.y<0?-u.y:u.y,this.panTo(this.unproject(i),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=n({animate:!1,pan:!0},e===!0?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),a=t.divideBy(2).round(),o=r.divideBy(2).round(),s=a.subtract(o);return!s.x&&!s.y?this:(e.animate&&e.pan?this.panBy(s):(e.pan&&this._rawPanBy(s),this.fire(`move`),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,`moveend`),200)):this.fire(`moveend`)),this.fire(`resize`,{oldSize:t,newSize:r}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire(`viewreset`),this._stop()},locate:function(e){if(e=this._locateOptions=n({timeout:1e4,watch:!1},e),!(`geolocation`in navigator))return this._handleGeolocationError({code:0,message:`Geolocation not supported.`}),this;var t=i(this._handleGeolocationResponse,this),r=i(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,r,e):navigator.geolocation.getCurrentPosition(t,r,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var t=e.code,n=e.message||(t===1?`permission denied`:t===2?`position unavailable`:`timeout`);this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire(`locationerror`,{code:t,message:`Geolocation error: `+n+`.`})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var t=e.coords.latitude,n=e.coords.longitude,r=new F(t,n),i=r.toBounds(e.coords.accuracy*2),a=this._locateOptions;if(a.setView){var o=this.getBoundsZoom(i);this.setView(r,a.maxZoom?Math.min(o,a.maxZoom):o)}var s={latlng:r,bounds:i,timestamp:e.timestamp};for(var c in e.coords)typeof e.coords[c]==`number`&&(s[c]=e.coords[c]);this.fire(`locationfound`,s)}},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off(`moveend`,this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw Error(`Map container is being reused by another instance`);try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}for(var e in this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),wt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&=(E(this._resizeRequest),null),this._clearHandlers(),this._loaded&&this.fire(`unload`),this._layers)this._layers[e].remove();for(e in this._panes)wt(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var n=Ct(`div`,`leaflet-pane`+(e?` leaflet-`+e.replace(`Pane`,``)+`-pane`:``),t||this._mapPane);return e&&(this._panes[e]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds();return new P(this.unproject(e.getBottomLeft()),this.unproject(e.getTopRight()))},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=re(e),n=j(n||[0,0]);var r=this.getZoom()||0,i=this.getMinZoom(),a=this.getMaxZoom(),o=e.getNorthWest(),s=e.getSouthEast(),c=this.getSize().subtract(n),l=N(this.project(s,r),this.project(o,r)).getSize(),u=R.any3d?this.options.zoomSnap:1,d=c.x/l.x,f=c.y/l.y,p=t?Math.max(d,f):Math.min(d,f);return r=this.getScaleZoom(p,r),u&&(r=Math.round(r/(u/100))*(u/100),r=t?Math.ceil(r/u)*u:Math.floor(r/u)*u),Math.max(i,Math.min(a,r))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new A(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var n=this._getTopLeftPoint(e,t);return new M(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(e===void 0?this.getZoom():e)},getPane:function(e){return typeof e==`string`?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var n=this.options.crs;return t=t===void 0?this._zoom:t,n.scale(e)/n.scale(t)},getScaleZoom:function(e,t){var n=this.options.crs;t=t===void 0?this._zoom:t;var r=n.zoom(e*n.scale(t));return isNaN(r)?1/0:r},project:function(e,t){return t=t===void 0?this._zoom:t,this.options.crs.latLngToPoint(I(e),t)},unproject:function(e,t){return t=t===void 0?this._zoom:t,this.options.crs.pointToLatLng(j(e),t)},layerPointToLatLng:function(e){var t=j(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){return this.project(I(e))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(I(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(re(e))},distance:function(e,t){return this.options.crs.distance(I(e),I(t))},containerPointToLayerPoint:function(e){return j(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return j(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(j(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(I(e)))},mouseEventToContainerPoint:function(e){return un(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=xt(e);if(!t)throw Error(`Map container not found.`);if(t._leaflet_id)throw Error(`Map container is already initialized.`);Xt(t,`scroll`,this._onScroll,this),this._containerId=o(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&R.any3d,B(e,`leaflet-container`+(R.touch?` leaflet-touch`:``)+(R.retina?` leaflet-retina`:``)+(R.ielt9?` leaflet-oldie`:``)+(R.safari?` leaflet-safari`:``)+(this._fadeAnimated?` leaflet-fade-anim`:``));var t=St(e,`position`);t!==`absolute`&&t!==`relative`&&t!==`fixed`&&t!==`sticky`&&(e.style.position=`relative`),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane(`mapPane`,this._container),Ft(this._mapPane,new A(0,0)),this.createPane(`tilePane`),this.createPane(`overlayPane`),this.createPane(`shadowPane`),this.createPane(`markerPane`),this.createPane(`tooltipPane`),this.createPane(`popupPane`),this.options.markerZoomAnimation||(B(e.markerPane,`leaflet-zoom-hide`),B(e.shadowPane,`leaflet-zoom-hide`))},_resetView:function(e,t,n){Ft(this._mapPane,new A(0,0));var r=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire(`viewprereset`);var i=this._zoom!==t;this._moveStart(i,n)._move(e,t)._moveEnd(i),this.fire(`viewreset`),r&&this.fire(`load`)},_moveStart:function(e,t){return e&&this.fire(`zoomstart`),t||this.fire(`movestart`),this},_move:function(e,t,n,r){t===void 0&&(t=this._zoom);var i=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),r?n&&n.pinch&&this.fire(`zoom`,n):((i||n&&n.pinch)&&this.fire(`zoom`,n),this.fire(`move`,n)),this},_moveEnd:function(e){return e&&this.fire(`zoomend`),this.fire(`moveend`)},_stop:function(){return E(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){Ft(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw Error(`Set map center and zoom first.`)},_initEvents:function(e){this._targets={},this._targets[o(this._container)]=this;var t=e?Qt:Xt;t(this._container,`click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup`,this._handleDOMEvent,this),this.options.trackResize&&t(window,`resize`,this._onResize,this),R.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,`moveend`,this._onMoveEnd)},_onResize:function(){E(this._resizeRequest),this._resizeRequest=T(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var n=[],r,i=t===`mouseout`||t===`mouseover`,a=e.target||e.srcElement,s=!1;a;){if(r=this._targets[o(a)],r&&(t===`click`||t===`preclick`)&&this._draggableMoved(r)){s=!0;break}if(r&&r.listens(t,!0)&&(i&&!pn(a,e)||(n.push(r),i))||a===this._container)break;a=a.parentNode}return!n.length&&!s&&!i&&this.listens(t,!0)&&(n=[this]),n},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var t=e.target||e.srcElement;if(!(!this._loaded||t._leaflet_disable_events||e.type===`click`&&this._isClickDisabled(t))){var n=e.type;n===`mousedown`&&Gt(t),this._fireDOMEvent(e,n)}},_mouseEvents:[`click`,`dblclick`,`mouseover`,`mouseout`,`contextmenu`],_fireDOMEvent:function(e,t,r){if(e.type===`click`){var i=n({},e);i.type=`preclick`,this._fireDOMEvent(i,i.type,r)}var a=this._findEventTargets(e,t);if(r){for(var o=[],s=0;s<r.length;s++)r[s].listens(t,!0)&&o.push(r[s]);a=o.concat(a)}if(a.length){t===`contextmenu`&&sn(e);var c=a[0],l={originalEvent:e};if(e.type!==`keypress`&&e.type!==`keydown`&&e.type!==`keyup`){var u=c.getLatLng&&(!c._radius||c._radius<=10);l.containerPoint=u?this.latLngToContainerPoint(c.getLatLng()):this.mouseEventToContainerPoint(e),l.layerPoint=this.containerPointToLayerPoint(l.containerPoint),l.latlng=u?c.getLatLng():this.layerPointToLatLng(l.layerPoint)}for(s=0;s<a.length;s++)if(a[s].fire(t,l,!0),l.originalEvent._stopped||a[s].options.bubblingMouseEvents===!1&&v(this._mouseEvents,t)!==-1)return}},_draggableMoved:function(e){return e=e.dragging&&e.dragging.enabled()?e:this,e.dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on(`load`,e,t),this},_getMapPanePos:function(){return It(this._mapPane)||new A(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){return(e&&t!==void 0?this._getNewPixelOrigin(e,t):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,n){var r=this._getNewPixelOrigin(n,t);return this.project(e,t)._subtract(r)},_latLngBoundsToNewLayerBounds:function(e,t,n){var r=this._getNewPixelOrigin(n,t);return N([this.project(e.getSouthWest(),t)._subtract(r),this.project(e.getNorthWest(),t)._subtract(r),this.project(e.getSouthEast(),t)._subtract(r),this.project(e.getNorthEast(),t)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var r=this.project(e,t),i=this.getSize().divideBy(2),a=new M(r.subtract(i),r.add(i)),o=this._getBoundsOffset(a,n,t);return Math.abs(o.x)<=1&&Math.abs(o.y)<=1?e:this.unproject(r.add(o),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),r=new M(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(r,t))},_getBoundsOffset:function(e,t,n){var r=N(this.project(t.getNorthEast(),n),this.project(t.getSouthWest(),n)),i=r.min.subtract(e.min),a=r.max.subtract(e.max);return new A(this._rebound(i.x,-a.x),this._rebound(i.y,-a.y))},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom(),r=R.any3d?this.options.zoomSnap:1;return r&&(e=Math.round(e/r)*r),Math.max(t,Math.min(n,e))},_onPanTransitionStep:function(){this.fire(`move`)},_onPanTransitionEnd:function(){Ot(this._mapPane,`leaflet-pan-anim`),this.fire(`moveend`)},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._trunc();return(t&&t.animate)!==!0&&!this.getSize().contains(n)?!1:(this.panBy(n,t),!0)},_createAnimProxy:function(){var e=this._proxy=Ct(`div`,`leaflet-proxy leaflet-zoom-animated`);this._panes.mapPane.appendChild(e),this.on(`zoomanim`,function(e){var t=vt,n=this._proxy.style[t];Pt(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),n===this._proxy.style[t]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on(`load moveend`,this._animMoveEnd,this),this._on(`unload`,this._destroyAnimProxy,this)},_destroyAnimProxy:function(){wt(this._proxy),this.off(`load moveend`,this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),t=this.getZoom();Pt(this._proxy,this.project(e,t),this.getZoomScale(t,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf(`transform`)>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName(`leaflet-zoom-animated`).length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n||={},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(t),i=this._getCenterOffset(e)._divideBy(1-1/r);return n.animate!==!0&&!this.getSize().contains(i)?!1:(T(function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(e,t,!0)},this),!0)},_animateZoom:function(e,t,n,r){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,B(this._mapPane,`leaflet-zoom-anim`)),this.fire(`zoomanim`,{center:e,zoom:t,noUpdate:r}),this._tempFireZoomEvent||=this._zoom!==this._animateToZoom,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ot(this._mapPane,`leaflet-zoom-anim`),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire(`zoom`),delete this._tempFireZoomEvent,this.fire(`move`),this._moveEnd(!0))}});function _n(e,t){return new gn(e,t)}var vn=O.extend({options:{position:`topright`},initialize:function(e){p(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),r=e._controlCorners[n];return B(t,`leaflet-control`),n.indexOf(`bottom`)===-1?r.appendChild(t):r.insertBefore(t,r.firstChild),this._map.on(`unload`,this.remove,this),this},remove:function(){return this._map?(wt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off(`unload`,this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),yn=function(e){return new vn(e)};gn.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},t=`leaflet-`,n=this._controlContainer=Ct(`div`,t+`control-container`,this._container);function r(r,i){var a=t+r+` `+t+i;e[r+i]=Ct(`div`,a,n)}r(`top`,`left`),r(`top`,`right`),r(`bottom`,`left`),r(`bottom`,`right`)},_clearControlPos:function(){for(var e in this._controlCorners)wt(this._controlCorners[e]);wt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var V=vn.extend({options:{collapsed:!0,position:`topright`,autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,n,r){return n<r?-1:r<n?1:0}},initialize:function(e,t,n){for(var r in p(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,e)this._addLayer(e[r],r);for(r in t)this._addLayer(t[r],r,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on(`zoomend`,this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on(`add remove`,this._onLayerChange,this);return this._container},addTo:function(e){return vn.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off(`zoomend`,this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off(`add remove`,this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off(`add remove`,this._onLayerChange,this);var t=this._getLayer(o(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){B(this._container,`leaflet-control-layers-expanded`),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(B(this._section,`leaflet-control-layers-scrollbar`),this._section.style.height=e+`px`):Ot(this._section,`leaflet-control-layers-scrollbar`),this._checkDisabledLayers(),this},collapse:function(){return Ot(this._container,`leaflet-control-layers-expanded`),this},_initLayout:function(){var e=`leaflet-control-layers`,t=this._container=Ct(`div`,e),n=this.options.collapsed;t.setAttribute(`aria-haspopup`,!0),on(t),an(t);var r=this._section=Ct(`section`,e+`-list`);n&&(this._map.on(`click`,this.collapse,this),Xt(t,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var i=this._layersLink=Ct(`a`,e+`-toggle`,t);i.href=`#`,i.title=`Layers`,i.setAttribute(`role`,`button`),Xt(i,{keydown:function(e){e.keyCode===13&&this._expandSafely()},click:function(e){sn(e),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=Ct(`div`,e+`-base`,r),this._separator=Ct(`div`,e+`-separator`,r),this._overlaysList=Ct(`div`,e+`-overlays`,r),t.appendChild(r)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&o(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,n){this._map&&e.on(`add remove`,this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:n}),this.options.sortLayers&&this._layers.sort(i(function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Tt(this._baseLayersList),Tt(this._overlaysList),this._layerControlInputs=[];var e,t,n,r,i=0;for(n=0;n<this._layers.length;n++)r=this._layers[n],this._addItem(r),t||=r.overlay,e||=!r.overlay,i+=r.overlay?0:1;return this.options.hideSingleBase&&(e&&=i>1,this._baseLayersList.style.display=e?``:`none`),this._separator.style.display=t&&e?``:`none`,this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(o(e.target)),n=t.overlay?e.type===`add`?`overlayadd`:`overlayremove`:e.type===`add`?`baselayerchange`:null;n&&this._map.fire(n,t)},_createRadioElement:function(e,t){var n=`<input type="radio" class="leaflet-control-layers-selector" name="`+e+`"`+(t?` checked="checked"`:``)+`/>`,r=document.createElement(`div`);return r.innerHTML=n,r.firstChild},_addItem:function(e){var t=document.createElement(`label`),n=this._map.hasLayer(e.layer),r;e.overlay?(r=document.createElement(`input`),r.type=`checkbox`,r.className=`leaflet-control-layers-selector`,r.defaultChecked=n):r=this._createRadioElement(`leaflet-base-layers_`+o(this),n),this._layerControlInputs.push(r),r.layerId=o(e.layer),Xt(r,`click`,this._onInputClick,this);var i=document.createElement(`span`);i.innerHTML=` `+e.name;var a=document.createElement(`span`);return t.appendChild(a),a.appendChild(r),a.appendChild(i),(e.overlay?this._overlaysList:this._baseLayersList).appendChild(t),this._checkDisabledLayers(),t},_onInputClick:function(){if(!this._preventClick){var e=this._layerControlInputs,t,n,r=[],i=[];this._handlingClick=!0;for(var a=e.length-1;a>=0;a--)t=e[a],n=this._getLayer(t.layerId).layer,t.checked?r.push(n):t.checked||i.push(n);for(a=0;a<i.length;a++)this._map.hasLayer(i[a])&&this._map.removeLayer(i[a]);for(a=0;a<r.length;a++)this._map.hasLayer(r[a])||this._map.addLayer(r[a]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e=this._layerControlInputs,t,n,r=this._map.getZoom(),i=e.length-1;i>=0;i--)t=e[i],n=this._getLayer(t.layerId).layer,t.disabled=n.options.minZoom!==void 0&&r<n.options.minZoom||n.options.maxZoom!==void 0&&r>n.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,Xt(e,`click`,sn),this.expand();var t=this;setTimeout(function(){Qt(e,`click`,sn),t._preventClick=!1})}}),bn=function(e,t,n){return new V(e,t,n)},xn=vn.extend({options:{position:`topleft`,zoomInText:`<span aria-hidden="true">+</span>`,zoomInTitle:`Zoom in`,zoomOutText:`<span aria-hidden="true">&#x2212;</span>`,zoomOutTitle:`Zoom out`},onAdd:function(e){var t=`leaflet-control-zoom`,n=Ct(`div`,t+` leaflet-bar`),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,t+`-in`,n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,t+`-out`,n,this._zoomOut),this._updateDisabled(),e.on(`zoomend zoomlevelschange`,this._updateDisabled,this),n},onRemove:function(e){e.off(`zoomend zoomlevelschange`,this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,n,r,i){var a=Ct(`a`,n,r);return a.innerHTML=e,a.href=`#`,a.title=t,a.setAttribute(`role`,`button`),a.setAttribute(`aria-label`,t),on(a),Xt(a,`click`,cn),Xt(a,`click`,i,this),Xt(a,`click`,this._refocusOnMap,this),a},_updateDisabled:function(){var e=this._map,t=`leaflet-disabled`;Ot(this._zoomInButton,t),Ot(this._zoomOutButton,t),this._zoomInButton.setAttribute(`aria-disabled`,`false`),this._zoomOutButton.setAttribute(`aria-disabled`,`false`),(this._disabled||e._zoom===e.getMinZoom())&&(B(this._zoomOutButton,t),this._zoomOutButton.setAttribute(`aria-disabled`,`true`)),(this._disabled||e._zoom===e.getMaxZoom())&&(B(this._zoomInButton,t),this._zoomInButton.setAttribute(`aria-disabled`,`true`))}});gn.mergeOptions({zoomControl:!0}),gn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new xn,this.addControl(this.zoomControl))});var Sn=function(e){return new xn(e)},Cn=vn.extend({options:{position:`bottomleft`,maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t=`leaflet-control-scale`,n=Ct(`div`,t),r=this.options;return this._addScales(r,t+`-line`,n),e.on(r.updateWhenIdle?`moveend`:`move`,this._update,this),e.whenReady(this._update,this),n},onRemove:function(e){e.off(this.options.updateWhenIdle?`moveend`:`move`,this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=Ct(`div`,t,n)),e.imperial&&(this._iScale=Ct(`div`,t,n))},_update:function(){var e=this._map,t=e.getSize().y/2,n=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(n)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),n=t<1e3?t+` m`:t/1e3+` km`;this._updateScale(this._mScale,n,t/e)},_updateImperial:function(e){var t=e*3.2808399,n,r,i;t>5280?(n=t/5280,r=this._getRoundNum(n),this._updateScale(this._iScale,r+` mi`,r/n)):(i=this._getRoundNum(t),this._updateScale(this._iScale,i+` ft`,i/t))},_updateScale:function(e,t,n){e.style.width=Math.round(this.options.maxWidth*n)+`px`,e.innerHTML=t},_getRoundNum:function(e){var t=10**((Math.floor(e)+``).length-1),n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,t*n}}),wn=function(e){return new Cn(e)},Tn=vn.extend({options:{position:`bottomright`,prefix:`<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">`+(R.inlineSvg?`<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg> `:``)+`Leaflet</a>`},initialize:function(e){p(this,e),this._attributions={}},onAdd:function(e){for(var t in e.attributionControl=this,this._container=Ct(`div`,`leaflet-control-attribution`),on(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),e.on(`layeradd`,this._addAttribution,this),this._container},onRemove:function(e){e.off(`layeradd`,this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once(`remove`,function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e&&this._attributions[e]&&(this._attributions[e]--,this._update()),this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(`, `)),this._container.innerHTML=n.join(` <span aria-hidden="true">|</span> `)}}});gn.mergeOptions({attributionControl:!0}),gn.addInitHook(function(){this.options.attributionControl&&new Tn().addTo(this)}),vn.Layers=V,vn.Zoom=xn,vn.Scale=Cn,vn.Attribution=Tn,yn.layers=bn,yn.zoom=Sn,yn.scale=wn,yn.attribution=function(e){return new Tn(e)};var En=O.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});En.addTo=function(e,t){return e.addHandler(t,this),this};var Dn={Events:k},On=R.touch?`touchstart mousedown`:`mousedown`,kn=te.extend({options:{clickTolerance:3},initialize:function(e,t,n,r){p(this,r),this._element=e,this._dragStartTarget=t||e,this._preventOutline=n},enable:function(){this._enabled||=(Xt(this._dragStartTarget,On,this._onDown,this),!0)},disable:function(){this._enabled&&(kn._dragging===this&&this.finishDrag(!0),Qt(this._dragStartTarget,On,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!z(this._element,`leaflet-zoom-anim`))){if(e.touches&&e.touches.length!==1){kn._dragging===this&&this.finishDrag();return}if(!(kn._dragging||e.shiftKey||e.which!==1&&e.button!==1&&!e.touches)&&(kn._dragging=this,this._preventOutline&&Gt(this._element),Vt(),Lt(),!this._moving)){this.fire(`down`);var t=e.touches?e.touches[0]:e,n=qt(this._element);this._startPoint=new A(t.clientX,t.clientY),this._startPos=It(this._element),this._parentScale=Jt(n);var r=e.type===`mousedown`;Xt(document,r?`mousemove`:`touchmove`,this._onMove,this),Xt(document,r?`mouseup`:`touchend touchcancel`,this._onUp,this)}}},_onMove:function(e){if(this._enabled){if(e.touches&&e.touches.length>1){this._moved=!0;return}var t=e.touches&&e.touches.length===1?e.touches[0]:e,n=new A(t.clientX,t.clientY)._subtract(this._startPoint);!n.x&&!n.y||Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,sn(e),this._moved||(this.fire(`dragstart`),this._moved=!0,B(document.body,`leaflet-dragging`),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),B(this._lastTarget,`leaflet-drag-target`)),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=e,this._updatePosition())}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire(`predrag`,e),Ft(this._element,this._newPos),this.fire(`drag`,e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){Ot(document.body,`leaflet-dragging`),this._lastTarget&&=(Ot(this._lastTarget,`leaflet-drag-target`),null),Qt(document,`mousemove touchmove`,this._onMove,this),Qt(document,`mouseup touchend touchcancel`,this._onUp,this),Ht(),Rt();var t=this._moved&&this._moving;this._moving=!1,kn._dragging=!1,t&&this.fire(`dragend`,{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function An(e,t,n){var r,i=[1,4,2,8],a,o,s,c,l,u,d,f;for(a=0,u=e.length;a<u;a++)e[a]._code=Hn(e[a],t);for(s=0;s<4;s++){for(d=i[s],r=[],a=0,u=e.length,o=u-1;a<u;o=a++)c=e[a],l=e[o],c._code&d?l._code&d||(f=Vn(l,c,d,t,n),f._code=Hn(f,t),r.push(f)):(l._code&d&&(f=Vn(l,c,d,t,n),f._code=Hn(f,t),r.push(f)),r.push(c));e=r}return e}function jn(e,t){var n,r,i,a,o,s,c,l,u;if(!e||e.length===0)throw Error(`latlngs not passed`);Gn(e)||(console.warn(`latlngs are not flat! Only the first ring will be used`),e=e[0]);var d=I([0,0]),f=re(e);f.getNorthWest().distanceTo(f.getSouthWest())*f.getNorthEast().distanceTo(f.getNorthWest())<1700&&(d=Mn(e));var p=e.length,m=[];for(n=0;n<p;n++){var h=I(e[n]);m.push(t.project(I([h.lat-d.lat,h.lng-d.lng])))}for(s=c=l=0,n=0,r=p-1;n<p;r=n++)i=m[n],a=m[r],o=i.y*a.x-a.y*i.x,c+=(i.x+a.x)*o,l+=(i.y+a.y)*o,s+=o*3;u=s===0?m[0]:[c/s,l/s];var g=t.unproject(j(u));return I([g.lat+d.lat,g.lng+d.lng])}function Mn(e){for(var t=0,n=0,r=0,i=0;i<e.length;i++){var a=I(e[i]);t+=a.lat,n+=a.lng,r++}return I([t/r,n/r])}var Nn={__proto__:null,clipPolygon:An,polygonCenter:jn,centroid:Mn};function Pn(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=zn(e,n),e=Ln(e,n),e}function Fn(e,t,n){return Math.sqrt(Wn(e,t,n,!0))}function In(e,t,n){return Wn(e,t,n)}function Ln(e,t){var n=e.length,r=new(typeof Uint8Array<`u`?Uint8Array:Array)(n);r[0]=r[n-1]=1,Rn(e,r,t,0,n-1);var i,a=[];for(i=0;i<n;i++)r[i]&&a.push(e[i]);return a}function Rn(e,t,n,r,i){var a=0,o,s,c;for(s=r+1;s<=i-1;s++)c=Wn(e[s],e[r],e[i],!0),c>a&&(o=s,a=c);a>n&&(t[o]=1,Rn(e,t,n,r,o),Rn(e,t,n,o,i))}function zn(e,t){for(var n=[e[0]],r=1,i=0,a=e.length;r<a;r++)Un(e[r],e[i])>t&&(n.push(e[r]),i=r);return i<a-1&&n.push(e[a-1]),n}var H;function Bn(e,t,n,r,i){var a=r?H:Hn(e,n),o=Hn(t,n),s,c,l;for(H=o;;){if(!(a|o))return[e,t];if(a&o)return!1;s=a||o,c=Vn(e,t,s,n,i),l=Hn(c,n),s===a?(e=c,a=l):(t=c,o=l)}}function Vn(e,t,n,r,i){var a=t.x-e.x,o=t.y-e.y,s=r.min,c=r.max,l,u;return n&8?(l=e.x+a*(c.y-e.y)/o,u=c.y):n&4?(l=e.x+a*(s.y-e.y)/o,u=s.y):n&2?(l=c.x,u=e.y+o*(c.x-e.x)/a):n&1&&(l=s.x,u=e.y+o*(s.x-e.x)/a),new A(l,u,i)}function Hn(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n}function Un(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}function Wn(e,t,n,r){var i=t.x,a=t.y,o=n.x-i,s=n.y-a,c=o*o+s*s,l;return c>0&&(l=((e.x-i)*o+(e.y-a)*s)/c,l>1?(i=n.x,a=n.y):l>0&&(i+=o*l,a+=s*l)),o=e.x-i,s=e.y-a,r?o*o+s*s:new A(i,a)}function Gn(e){return!_(e[0])||typeof e[0][0]!=`object`&&e[0][0]!==void 0}function Kn(e){return console.warn(`Deprecated use of _flat, please use L.LineUtil.isFlat instead.`),Gn(e)}function qn(e,t){var n,r,i,a,o,s,c,l;if(!e||e.length===0)throw Error(`latlngs not passed`);Gn(e)||(console.warn(`latlngs are not flat! Only the first ring will be used`),e=e[0]);var u=I([0,0]),d=re(e);d.getNorthWest().distanceTo(d.getSouthWest())*d.getNorthEast().distanceTo(d.getNorthWest())<1700&&(u=Mn(e));var f=e.length,p=[];for(n=0;n<f;n++){var m=I(e[n]);p.push(t.project(I([m.lat-u.lat,m.lng-u.lng])))}for(n=0,r=0;n<f-1;n++)r+=p[n].distanceTo(p[n+1])/2;if(r===0)l=p[0];else for(n=0,a=0;n<f-1;n++)if(o=p[n],s=p[n+1],i=o.distanceTo(s),a+=i,a>r){c=(a-r)/i,l=[s.x-c*(s.x-o.x),s.y-c*(s.y-o.y)];break}var h=t.unproject(j(l));return I([h.lat+u.lat,h.lng+u.lng])}var Jn={__proto__:null,simplify:Pn,pointToSegmentDistance:Fn,closestPointOnSegment:In,clipSegment:Bn,_getEdgeIntersection:Vn,_getBitCode:Hn,_sqClosestPointOnSegment:Wn,isFlat:Gn,_flat:Kn,polylineCenter:qn},Yn={project:function(e){return new A(e.lng,e.lat)},unproject:function(e){return new F(e.y,e.x)},bounds:new M([-180,-90],[180,90])},Xn={R:6378137,R_MINOR:6356752.314245179,bounds:new M([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(e){var t=Math.PI/180,n=this.R,r=e.lat*t,i=this.R_MINOR/n,a=Math.sqrt(1-i*i),o=a*Math.sin(r),s=Math.tan(Math.PI/4-r/2)/((1-o)/(1+o))**(a/2);return r=-n*Math.log(Math.max(s,1e-10)),new A(e.lng*t*n,r)},unproject:function(e){for(var t=180/Math.PI,n=this.R,r=this.R_MINOR/n,i=Math.sqrt(1-r*r),a=Math.exp(-e.y/n),o=Math.PI/2-2*Math.atan(a),s=0,c=.1,l;s<15&&Math.abs(c)>1e-7;s++)l=i*Math.sin(o),l=((1-l)/(1+l))**(i/2),c=Math.PI/2-2*Math.atan(a*l)-o,o+=c;return new F(o*t,e.x*t/n)}},Zn={__proto__:null,LonLat:Yn,Mercator:Xn,SphericalMercator:se},Qn=n({},ae,{code:`EPSG:3395`,projection:Xn,transformation:function(){var e=.5/(Math.PI*Xn.R);return le(e,.5,-e,.5)}()}),$n=n({},ae,{code:`EPSG:4326`,projection:Yn,transformation:le(1/180,1,-1/180,.5)}),er=n({},ie,{projection:Yn,transformation:le(1,0,-1,0),scale:function(e){return 2**e},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var n=t.lng-e.lng,r=t.lat-e.lat;return Math.sqrt(n*n+r*r)},infinite:!0});ie.Earth=ae,ie.EPSG3395=Qn,ie.EPSG3857=ue,ie.EPSG900913=de,ie.EPSG4326=$n,ie.Simple=er;var tr=te.extend({options:{pane:`overlayPane`,attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[o(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[o(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var n=this.getEvents();t.on(n,this),this.once(`remove`,function(){t.off(n,this)},this)}this.onAdd(t),this.fire(`add`),t.fire(`layeradd`,{layer:this})}}});gn.include({addLayer:function(e){if(!e._layerAdd)throw Error(`The provided object is not a Layer.`);var t=o(e);return this._layers[t]?this:(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e),this)},removeLayer:function(e){var t=o(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&(this.fire(`layerremove`,{layer:e}),e.fire(`remove`)),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return o(e)in this._layers},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},_addLayers:function(e){e=e?_(e)?e:[e]:[];for(var t=0,n=e.length;t<n;t++)this.addLayer(e[t])},_addZoomLimit:function(e){(!isNaN(e.options.maxZoom)||!isNaN(e.options.minZoom))&&(this._zoomBoundLayers[o(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=o(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var i=this._zoomBoundLayers[r].options;e=i.minZoom===void 0?e:Math.min(e,i.minZoom),t=i.maxZoom===void 0?t:Math.max(t,i.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,n!==this._getZoomSpan()&&this.fire(`zoomlevelschange`),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var nr=tr.extend({initialize:function(e,t){p(this,t),this._layers={};var n,r;if(e)for(n=0,r=e.length;n<r;n++)this.addLayer(e[n])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return(typeof e==`number`?e:this.getLayerId(e))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t=Array.prototype.slice.call(arguments,1),n,r;for(n in this._layers)r=this._layers[n],r[e]&&r[e].apply(r,t);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke(`setZIndex`,e)},getLayerId:function(e){return o(e)}}),rr=function(e,t){return new nr(e,t)},ir=nr.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),nr.prototype.addLayer.call(this,e),this.fire(`layeradd`,{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),nr.prototype.removeLayer.call(this,e),this.fire(`layerremove`,{layer:e})):this},setStyle:function(e){return this.invoke(`setStyle`,e)},bringToFront:function(){return this.invoke(`bringToFront`)},bringToBack:function(){return this.invoke(`bringToBack`)},getBounds:function(){var e=new P;for(var t in this._layers){var n=this._layers[t];e.extend(n.getBounds?n.getBounds():n.getLatLng())}return e}}),ar=function(e,t){return new ir(e,t)},or=O.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){p(this,e)},createIcon:function(e){return this._createIcon(`icon`,e)},createShadow:function(e){return this._createIcon(`shadow`,e)},_createIcon:function(e,t){var n=this._getIconUrl(e);if(!n){if(e===`icon`)throw Error(`iconUrl not set in Icon options (see the docs).`);return null}var r=this._createImg(n,t&&t.tagName===`IMG`?t:null);return this._setIconStyles(r,e),(this.options.crossOrigin||this.options.crossOrigin===``)&&(r.crossOrigin=this.options.crossOrigin===!0?``:this.options.crossOrigin),r},_setIconStyles:function(e,t){var n=this.options,r=n[t+`Size`];typeof r==`number`&&(r=[r,r]);var i=j(r),a=j(t===`shadow`&&n.shadowAnchor||n.iconAnchor||i&&i.divideBy(2,!0));e.className=`leaflet-marker-`+t+` `+(n.className||``),a&&(e.style.marginLeft=-a.x+`px`,e.style.marginTop=-a.y+`px`),i&&(e.style.width=i.x+`px`,e.style.height=i.y+`px`)},_createImg:function(e,t){return t||=document.createElement(`img`),t.src=e,t},_getIconUrl:function(e){return R.retina&&this.options[e+`RetinaUrl`]||this.options[e+`Url`]}});function sr(e){return new or(e)}var cr=or.extend({options:{iconUrl:`marker-icon.png`,iconRetinaUrl:`marker-icon-2x.png`,shadowUrl:`marker-shadow.png`,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return typeof cr.imagePath!=`string`&&(cr.imagePath=this._detectIconPath()),(this.options.imagePath||cr.imagePath)+or.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var t=function(e,t,n){var r=t.exec(e);return r&&r[n]};return e=t(e,/^url\((['"])?(.+)\1\)$/,2),e&&t(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=Ct(`div`,`leaflet-default-icon-path`,document.body),t=St(e,`background-image`)||St(e,`backgroundImage`);if(document.body.removeChild(e),t=this._stripUrl(t),t)return t;var n=document.querySelector(`link[href$="leaflet.css"]`);return n?n.href.substring(0,n.href.length-11-1):``}}),lr=En.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||=new kn(e,e,!0),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),B(e,`leaflet-marker-draggable`)},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ot(this._marker._icon,`leaflet-marker-draggable`)},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,n=t._map,r=this._marker.options.autoPanSpeed,i=this._marker.options.autoPanPadding,a=It(t._icon),o=n.getPixelBounds(),s=n.getPixelOrigin(),c=N(o.min._subtract(s).add(i),o.max._subtract(s).subtract(i));if(!c.contains(a)){var l=j((Math.max(c.max.x,a.x)-c.max.x)/(o.max.x-c.max.x)-(Math.min(c.min.x,a.x)-c.min.x)/(o.min.x-c.min.x),(Math.max(c.max.y,a.y)-c.max.y)/(o.max.y-c.max.y)-(Math.min(c.min.y,a.y)-c.min.y)/(o.min.y-c.min.y)).multiplyBy(r);n.panBy(l,{animate:!1}),this._draggable._newPos._add(l),this._draggable._startPos._add(l),Ft(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=T(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire(`movestart`).fire(`dragstart`)},_onPreDrag:function(e){this._marker.options.autoPan&&(E(this._panRequest),this._panRequest=T(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,n=t._shadow,r=It(t._icon),i=t._map.layerPointToLatLng(r);n&&Ft(n,r),t._latlng=i,e.latlng=i,e.oldLatLng=this._oldLatLng,t.fire(`move`,e).fire(`drag`,e)},_onDragEnd:function(e){E(this._panRequest),delete this._oldLatLng,this._marker.fire(`moveend`).fire(`dragend`,e)}}),ur=tr.extend({options:{icon:new cr,interactive:!0,keyboard:!0,title:``,alt:`Marker`,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:`markerPane`,shadowPane:`shadowPane`,bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){p(this,t),this._latlng=I(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on(`zoomanim`,this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off(`zoomanim`,this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=I(e),this.update(),this.fire(`move`,{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t=`leaflet-zoom-`+(this._zoomAnimated?`animated`:`hide`),n=e.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,e.title&&(n.title=e.title),n.tagName===`IMG`&&(n.alt=e.alt||``)),B(n,t),e.keyboard&&(n.tabIndex=`0`,n.setAttribute(`role`,`button`)),this._icon=n,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Xt(n,`focus`,this._panOnFocus,this);var i=e.icon.createShadow(this._shadow),a=!1;i!==this._shadow&&(this._removeShadow(),a=!0),i&&(B(i,t),i.alt=``),this._shadow=i,e.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&a&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Qt(this._icon,`focus`,this._panOnFocus,this),wt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&wt(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&Ft(this._icon,e),this._shadow&&Ft(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(B(this._icon,`leaflet-interactive`),this.addInteractiveTarget(this._icon),lr)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new lr(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&jt(this._icon,e),this._shadow&&jt(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var t=this.options.icon.options,n=t.iconSize?j(t.iconSize):j(0,0),r=t.iconAnchor?j(t.iconAnchor):j(0,0);e.panInside(this._latlng,{paddingTopLeft:r,paddingBottomRight:n.subtract(r)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function dr(e,t){return new ur(e,t)}var fr=tr.extend({options:{stroke:!0,color:`#3388ff`,weight:3,opacity:1,lineCap:`round`,lineJoin:`round`,dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:`evenodd`,interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return p(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,`weight`)&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),pr=fr.extend({options:{fill:!0,radius:10},initialize:function(e,t){p(this,t),this._latlng=I(e),this._radius=this.options.radius},setLatLng:function(e){var t=this._latlng;return this._latlng=I(e),this.redraw(),this.fire(`move`,{oldLatLng:t,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return fr.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,n=this._clickTolerance(),r=[e+n,t+n];this._pxBounds=new M(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function mr(e,t){return new pr(e,t)}var hr=pr.extend({initialize:function(e,t,r){if(typeof t==`number`&&(t=n({},r,{radius:t})),p(this,t),this._latlng=I(e),isNaN(this.options.radius))throw Error(`Circle radius cannot be NaN`);this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new P(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:fr.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===ae.distance){var i=Math.PI/180,a=this._mRadius/ae.R/i,o=n.project([t+a,e]),s=n.project([t-a,e]),c=o.add(s).divideBy(2),l=n.unproject(c).lat,u=Math.acos((Math.cos(a*i)-Math.sin(t*i)*Math.sin(l*i))/(Math.cos(t*i)*Math.cos(l*i)))/i;(isNaN(u)||u===0)&&(u=a/Math.cos(Math.PI/180*t)),this._point=c.subtract(n.getPixelOrigin()),this._radius=isNaN(u)?0:c.x-n.project([l,e-u]).x,this._radiusY=c.y-o.y}else{var d=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(d).x}this._updateBounds()}});function gr(e,t,n){return new hr(e,t,n)}var _r=fr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){p(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t=1/0,n=null,r=Wn,i,a,o=0,s=this._parts.length;o<s;o++)for(var c=this._parts[o],l=1,u=c.length;l<u;l++){i=c[l-1],a=c[l];var d=r(e,i,a,!0);d<t&&(t=d,n=r(e,i,a))}return n&&(n.distance=Math.sqrt(t)),n},getCenter:function(){if(!this._map)throw Error(`Must add layer to map before using getCenter()`);return qn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t||=this._defaultShape(),e=I(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new P,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return Gn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],n=Gn(e),r=0,i=e.length;r<i;r++)n?(t[r]=I(e[r]),this._bounds.extend(t[r])):t[r]=this._convertLatLngs(e[r]);return t},_project:function(){var e=new M;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),t=new A(e,e);this._rawPxBounds&&(this._pxBounds=new M([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)]))},_projectLatlngs:function(e,t,n){var r=e[0]instanceof F,i=e.length,a,o;if(r){for(o=[],a=0;a<i;a++)o[a]=this._map.latLngToLayerPoint(e[a]),n.extend(o[a]);t.push(o)}else for(a=0;a<i;a++)this._projectLatlngs(e[a],t,n)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}var t=this._parts,n,r,i,a,o,s,c;for(n=0,i=0,a=this._rings.length;n<a;n++)for(c=this._rings[n],r=0,o=c.length;r<o-1;r++)s=Bn(c[r],c[r+1],e,r,!0),s&&(t[i]=t[i]||[],t[i].push(s[0]),(s[1]!==c[r+1]||r===o-2)&&(t[i].push(s[1]),i++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,n=0,r=e.length;n<r;n++)e[n]=Pn(e[n],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var n,r,i,a,o,s,c=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(n=0,a=this._parts.length;n<a;n++)for(s=this._parts[n],r=0,o=s.length,i=o-1;r<o;i=r++)if(!(!t&&r===0)&&Fn(e,s[i],s[r])<=c)return!0;return!1}});function vr(e,t){return new _r(e,t)}_r._flat=Kn;var yr=_r.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw Error(`Must add layer to map before using getCenter()`);return jn(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var t=_r.prototype._convertLatLngs.call(this,e),n=t.length;return n>=2&&t[0]instanceof F&&t[0].equals(t[n-1])&&t.pop(),t},_setLatLngs:function(e){_r.prototype._setLatLngs.call(this,e),Gn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Gn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,n=new A(t,t);if(e=new M(e.min.subtract(n),e.max.add(n)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}for(var r=0,i=this._rings.length,a;r<i;r++)a=An(this._rings[r],e,!0),a.length&&this._parts.push(a)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t=!1,n,r,i,a,o,s,c,l;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(a=0,c=this._parts.length;a<c;a++)for(n=this._parts[a],o=0,l=n.length,s=l-1;o<l;s=o++)r=n[o],i=n[s],r.y>e.y!=i.y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(t=!t);return t||_r.prototype._containsPoint.call(this,e,!0)}});function br(e,t){return new yr(e,t)}var xr=ir.extend({initialize:function(e,t){p(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t=_(e)?e:e.features,n,r,i;if(t){for(n=0,r=t.length;n<r;n++)i=t[n],(i.geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var a=this.options;if(a.filter&&!a.filter(e))return this;var o=Sr(e,a);return o?(o.feature=kr(e),o.defaultOptions=o.options,this.resetStyle(o),a.onEachFeature&&a.onEachFeature(e,o),this.addLayer(o)):this},resetStyle:function(e){return e===void 0?this.eachLayer(this.resetStyle,this):(e.options=n({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){e.setStyle&&(typeof t==`function`&&(t=t(e.feature)),e.setStyle(t))}});function Sr(e,t){var n=e.type===`Feature`?e.geometry:e,r=n?n.coordinates:null,i=[],a=t&&t.pointToLayer,o=t&&t.coordsToLatLng||wr,s,c,l,u;if(!r&&!n)return null;switch(n.type){case`Point`:return s=o(r),Cr(a,e,s,t);case`MultiPoint`:for(l=0,u=r.length;l<u;l++)s=o(r[l]),i.push(Cr(a,e,s,t));return new ir(i);case`LineString`:case`MultiLineString`:return c=Tr(r,n.type===`LineString`?0:1,o),new _r(c,t);case`Polygon`:case`MultiPolygon`:return c=Tr(r,n.type===`Polygon`?1:2,o),new yr(c,t);case`GeometryCollection`:for(l=0,u=n.geometries.length;l<u;l++){var d=Sr({geometry:n.geometries[l],type:`Feature`,properties:e.properties},t);d&&i.push(d)}return new ir(i);case`FeatureCollection`:for(l=0,u=n.features.length;l<u;l++){var f=Sr(n.features[l],t);f&&i.push(f)}return new ir(i);default:throw Error(`Invalid GeoJSON object.`)}}function Cr(e,t,n,r){return e?e(t,n):new ur(n,r&&r.markersInheritOptions&&r)}function wr(e){return new F(e[1],e[0],e[2])}function Tr(e,t,n){for(var r=[],i=0,a=e.length,o;i<a;i++)o=t?Tr(e[i],t-1,n):(n||wr)(e[i]),r.push(o);return r}function Er(e,t){return e=I(e),e.alt===void 0?[u(e.lng,t),u(e.lat,t)]:[u(e.lng,t),u(e.lat,t),u(e.alt,t)]}function Dr(e,t,n,r){for(var i=[],a=0,o=e.length;a<o;a++)i.push(t?Dr(e[a],Gn(e[a])?0:t-1,n,r):Er(e[a],r));return!t&&n&&i.length>0&&i.push(i[0].slice()),i}function Or(e,t){return e.feature?n({},e.feature,{geometry:t}):kr(t)}function kr(e){return e.type===`Feature`||e.type===`FeatureCollection`?e:{type:`Feature`,properties:{},geometry:e}}var Ar={toGeoJSON:function(e){return Or(this,{type:`Point`,coordinates:Er(this.getLatLng(),e)})}};ur.include(Ar),hr.include(Ar),pr.include(Ar),_r.include({toGeoJSON:function(e){var t=!Gn(this._latlngs),n=Dr(this._latlngs,t?1:0,!1,e);return Or(this,{type:(t?`Multi`:``)+`LineString`,coordinates:n})}}),yr.include({toGeoJSON:function(e){var t=!Gn(this._latlngs),n=t&&!Gn(this._latlngs[0]),r=Dr(this._latlngs,n?2:t?1:0,!0,e);return t||(r=[r]),Or(this,{type:(n?`Multi`:``)+`Polygon`,coordinates:r})}}),nr.include({toMultiPoint:function(e){var t=[];return this.eachLayer(function(n){t.push(n.toGeoJSON(e).geometry.coordinates)}),Or(this,{type:`MultiPoint`,coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(t===`MultiPoint`)return this.toMultiPoint(e);var n=t===`GeometryCollection`,r=[];return this.eachLayer(function(t){if(t.toGeoJSON){var i=t.toGeoJSON(e);if(n)r.push(i.geometry);else{var a=kr(i);a.type===`FeatureCollection`?r.push.apply(r,a.features):r.push(a)}}}),n?Or(this,{geometries:r,type:`GeometryCollection`}):{type:`FeatureCollection`,features:r}}});function jr(e,t){return new xr(e,t)}var Mr=jr,Nr=tr.extend({options:{opacity:1,alt:``,interactive:!1,crossOrigin:!1,errorOverlayUrl:``,zIndex:1,className:``},initialize:function(e,t,n){this._url=e,this._bounds=re(t),p(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(B(this._image,`leaflet-interactive`),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){wt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&Et(this._image),this},bringToBack:function(){return this._map&&Dt(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=re(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e=this._url.tagName===`IMG`,t=this._image=e?this._url:Ct(`img`);if(B(t,`leaflet-image-layer`),this._zoomAnimated&&B(t,`leaflet-zoom-animated`),this.options.className&&B(t,this.options.className),t.onselectstart=l,t.onmousemove=l,t.onload=i(this.fire,this,`load`),t.onerror=i(this._overlayOnError,this,`error`),(this.options.crossOrigin||this.options.crossOrigin===``)&&(t.crossOrigin=this.options.crossOrigin===!0?``:this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e){this._url=t.src;return}t.src=this._url,t.alt=this.options.alt},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;Pt(this._image,n,t)},_reset:function(){var e=this._image,t=new M(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=t.getSize();Ft(e,t.min),e.style.width=n.x+`px`,e.style.height=n.y+`px`},_updateOpacity:function(){jt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire(`error`);var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),Pr=function(e,t,n){return new Nr(e,t,n)},Fr=Nr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e=this._url.tagName===`VIDEO`,t=this._image=e?this._url:Ct(`video`);if(B(t,`leaflet-image-layer`),this._zoomAnimated&&B(t,`leaflet-zoom-animated`),this.options.className&&B(t,this.options.className),t.onselectstart=l,t.onmousemove=l,t.onloadeddata=i(this.fire,this,`load`),e){for(var n=t.getElementsByTagName(`source`),r=[],a=0;a<n.length;a++)r.push(n[a].src);this._url=n.length>0?r:[t.src];return}_(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(t.style,`objectFit`)&&(t.style.objectFit=`fill`),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop,t.muted=!!this.options.muted,t.playsInline=!!this.options.playsInline;for(var o=0;o<this._url.length;o++){var s=Ct(`source`);s.src=this._url[o],t.appendChild(s)}}});function Ir(e,t,n){return new Fr(e,t,n)}var Lr=Nr.extend({_initImage:function(){var e=this._image=this._url;B(e,`leaflet-image-layer`),this._zoomAnimated&&B(e,`leaflet-zoom-animated`),this.options.className&&B(e,this.options.className),e.onselectstart=l,e.onmousemove=l}});function Rr(e,t,n){return new Lr(e,t,n)}var zr=tr.extend({options:{interactive:!1,offset:[0,0],className:``,pane:void 0,content:``},initialize:function(e,t){e&&(e instanceof F||_(e))?(this._latlng=I(e),p(this,t)):(p(this,e),this._source=t),this.options.content&&(this._content=this.options.content)},openOn:function(e){return e=arguments.length?e:this._source._map,e.hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&jt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&jt(this._container,1),this.bringToFront(),this.options.interactive&&(B(this._container,`leaflet-interactive`),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(jt(this._container,0),this._removeTimeout=setTimeout(i(wt,void 0,this._container),200)):wt(this._container),this.options.interactive&&(Ot(this._container,`leaflet-interactive`),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=I(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility=`hidden`,this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility=``,this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Et(this._container),this},bringToBack:function(){return this._map&&Dt(this._container),this},_prepareOpen:function(e){var t=this._source;if(!t._map)return!1;if(t instanceof ir){t=null;var n=this._source._layers;for(var r in n)if(n[r]._map){t=n[r];break}if(!t)return!1;this._source=t}if(!e)if(t.getCenter)e=t.getCenter();else if(t.getLatLng)e=t.getLatLng();else if(t.getBounds)e=t.getBounds().getCenter();else throw Error(`Unable to get source layer LatLng.`);return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,t=typeof this._content==`function`?this._content(this._source||this):this._content;if(typeof t==`string`)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire(`contentupdate`)}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=j(this.options.offset),n=this._getAnchor();this._zoomAnimated?Ft(this._container,e.add(n)):t=t.add(e).add(n);var r=this._containerBottom=-t.y,i=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=r+`px`,this._container.style.left=i+`px`}},_getAnchor:function(){return[0,0]}});gn.include({_initOverlay:function(e,t,n,r){var i=t;return i instanceof e||(i=new e(r).setContent(t)),n&&i.setLatLng(n),i}}),tr.include({_initOverlay:function(e,t,n,r){var i=n;return i instanceof e?(p(i,r),i._source=this):(i=t&&!r?t:new e(r,this),i.setContent(n)),i}});var Br=zr.extend({options:{pane:`popupPane`,offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:``},openOn:function(e){return e=arguments.length?e:this._source._map,!e.hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,zr.prototype.openOn.call(this,e)},onAdd:function(e){zr.prototype.onAdd.call(this,e),e.fire(`popupopen`,{popup:this}),this._source&&(this._source.fire(`popupopen`,{popup:this},!0),this._source instanceof fr||this._source.on(`preclick`,rn))},onRemove:function(e){zr.prototype.onRemove.call(this,e),e.fire(`popupclose`,{popup:this}),this._source&&(this._source.fire(`popupclose`,{popup:this},!0),this._source instanceof fr||this._source.off(`preclick`,rn))},getEvents:function(){var e=zr.prototype.getEvents.call(this);return(this.options.closeOnClick===void 0?this._map.options.closePopupOnClick:this.options.closeOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e=`leaflet-popup`,t=this._container=Ct(`div`,e+` `+(this.options.className||``)+` leaflet-zoom-animated`),n=this._wrapper=Ct(`div`,e+`-content-wrapper`,t);if(this._contentNode=Ct(`div`,e+`-content`,n),on(t),an(this._contentNode),Xt(t,`contextmenu`,rn),this._tipContainer=Ct(`div`,e+`-tip-container`,t),this._tip=Ct(`div`,e+`-tip`,this._tipContainer),this.options.closeButton){var r=this._closeButton=Ct(`a`,e+`-close-button`,t);r.setAttribute(`role`,`button`),r.setAttribute(`aria-label`,`Close popup`),r.href=`#close`,r.innerHTML=`<span aria-hidden="true">&#215;</span>`,Xt(r,`click`,function(e){sn(e),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width=``,t.whiteSpace=`nowrap`;var n=e.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),t.width=n+1+`px`,t.whiteSpace=``,t.height=``;var r=e.offsetHeight,i=this.options.maxHeight,a=`leaflet-popup-scrolled`;i&&r>i?(t.height=i+`px`,B(e,a)):Ot(e,a),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),n=this._getAnchor();Ft(this._container,t.add(n))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var e=this._map,t=parseInt(St(this._container,`marginBottom`),10)||0,n=this._container.offsetHeight+t,r=this._containerWidth,i=new A(this._containerLeft,-n-this._containerBottom);i._add(It(this._container));var a=e.layerPointToContainerPoint(i),o=j(this.options.autoPanPadding),s=j(this.options.autoPanPaddingTopLeft||o),c=j(this.options.autoPanPaddingBottomRight||o),l=e.getSize(),u=0,d=0;a.x+r+c.x>l.x&&(u=a.x+r-l.x+c.x),a.x-u-s.x<0&&(u=a.x-s.x),a.y+n+c.y>l.y&&(d=a.y+n-l.y+c.y),a.y-d-s.y<0&&(d=a.y-s.y),(u||d)&&(this.options.keepInView&&(this._autopanning=!0),e.fire(`autopanstart`).panBy([u,d]))}},_getAnchor:function(){return j(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Vr=function(e,t){return new Br(e,t)};gn.mergeOptions({closePopupOnClick:!0}),gn.include({openPopup:function(e,t,n){return this._initOverlay(Br,e,t,n).openOn(this),this},closePopup:function(e){return e=arguments.length?e:this._popup,e&&e.close(),this}}),tr.include({bindPopup:function(e,t){return this._popup=this._initOverlay(Br,this._popup,e,t),this._popupHandlersAdded||=(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),!0),this},unbindPopup:function(){return this._popup&&=(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,null),this},openPopup:function(e){return this._popup&&(this instanceof ir||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(!(!this._popup||!this._map)){cn(e);var t=e.layer||e.target;if(this._popup._source===t&&!(t instanceof fr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng);return}this._popup._source=t,this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){e.originalEvent.keyCode===13&&this._openPopup(e)}});var Hr=zr.extend({options:{pane:`tooltipPane`,offset:[0,0],direction:`auto`,permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){zr.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire(`tooltipopen`,{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire(`tooltipopen`,{tooltip:this},!0))},onRemove:function(e){zr.prototype.onRemove.call(this,e),e.fire(`tooltipclose`,{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire(`tooltipclose`,{tooltip:this},!0))},getEvents:function(){var e=zr.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){this._contentNode=this._container=Ct(`div`,`leaflet-tooltip `+(this.options.className||``)+` leaflet-zoom-`+(this._zoomAnimated?`animated`:`hide`)),this._container.setAttribute(`role`,`tooltip`),this._container.setAttribute(`id`,`leaflet-tooltip-`+o(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t,n,r=this._map,i=this._container,a=r.latLngToContainerPoint(r.getCenter()),o=r.layerPointToContainerPoint(e),s=this.options.direction,c=i.offsetWidth,l=i.offsetHeight,u=j(this.options.offset),d=this._getAnchor();s===`top`?(t=c/2,n=l):s===`bottom`?(t=c/2,n=0):s===`center`?(t=c/2,n=l/2):s===`right`?(t=0,n=l/2):s===`left`?(t=c,n=l/2):o.x<a.x?(s=`right`,t=0,n=l/2):(s=`left`,t=c+(u.x+d.x)*2,n=l/2),e=e.subtract(j(t,n,!0)).add(u).add(d),Ot(i,`leaflet-tooltip-right`),Ot(i,`leaflet-tooltip-left`),Ot(i,`leaflet-tooltip-top`),Ot(i,`leaflet-tooltip-bottom`),B(i,`leaflet-tooltip-`+s),Ft(i,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&jt(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return j(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ur=function(e,t){return new Hr(e,t)};gn.include({openTooltip:function(e,t,n){return this._initOverlay(Hr,e,t,n).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),tr.include({bindTooltip:function(e,t){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Hr,this._tooltip,e,t),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&=(this._initTooltipInteractions(!0),this.closeTooltip(),null),this},_initTooltipInteractions:function(e){if(!(!e&&this._tooltipHandlersAdded)){var t=e?`off`:`on`,n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[t](n),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof ir||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var t=typeof e.getElement==`function`&&e.getElement();t&&(Xt(t,`focus`,function(){this._tooltip._source=e,this.openTooltip()},this),Xt(t,`blur`,this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var t=typeof e.getElement==`function`&&e.getElement();t&&t.setAttribute(`aria-describedby`,this._tooltip._container.id)},_openTooltip:function(e){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var t=this;this._map.once(`moveend`,function(){t._openOnceFlag=!1,t._openTooltip(e)});return}this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)}},_moveTooltip:function(e){var t=e.latlng,n,r;this._tooltip.options.sticky&&e.originalEvent&&(n=this._map.mouseEventToContainerPoint(e.originalEvent),r=this._map.containerPointToLayerPoint(n),t=this._map.layerPointToLatLng(r)),this._tooltip.setLatLng(t)}});var Wr=or.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:`leaflet-div-icon`},createIcon:function(e){var t=e&&e.tagName===`DIV`?e:document.createElement(`div`),n=this.options;if(n.html instanceof Element?(Tt(t),t.appendChild(n.html)):t.innerHTML=n.html===!1?``:n.html,n.bgPos){var r=j(n.bgPos);t.style.backgroundPosition=-r.x+`px `+-r.y+`px`}return this._setIconStyles(t,`icon`),t},createShadow:function(){return null}});function Gr(e){return new Wr(e)}or.Default=cr;var Kr=tr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:R.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:`tilePane`,className:``,keepBuffer:2},initialize:function(e){p(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),wt(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Et(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Dt(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||=s(this._onMoveEnd,this.options.updateInterval,this),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement(`div`)},getTileSize:function(){var e=this.options.tileSize;return e instanceof A?e:new A(e,e)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t=this.getPane().children,n=-e(-1/0,1/0),r=0,i=t.length,a;r<i;r++)a=t[r].style.zIndex,t[r]!==this._container&&a&&(n=e(n,+a));isFinite(n)&&(this.options.zIndex=n+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!R.ielt9){jt(this._container,this.options.opacity);var e=+new Date,t=!1,n=!1;for(var r in this._tiles){var i=this._tiles[r];if(!(!i.current||!i.loaded)){var a=Math.min(1,(e-i.loaded)/200);jt(i.el,a),a<1?t=!0:(i.active?n=!0:this._onOpaqueTile(i),i.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),t&&(E(this._fadeFrame),this._fadeFrame=T(this._updateOpacity,this))}},_onOpaqueTile:l,_initContainer:function(){this._container||(this._container=Ct(`div`,`leaflet-layer `+(this.options.className||``)),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(e!==void 0){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===e?(this._levels[n].el.style.zIndex=t-Math.abs(e-n),this._onUpdateLevel(n)):(wt(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var r=this._levels[e],i=this._map;return r||(r=this._levels[e]={},r.el=Ct(`div`,`leaflet-tile-container leaflet-zoom-animated`,this._container),r.el.style.zIndex=t,r.origin=i.project(i.unproject(i.getPixelOrigin()),e).round(),r.zoom=e,this._setZoomTransform(r,i.getCenter(),i.getZoom()),r.el.offsetWidth,this._onCreateLevel(r)),this._level=r,r}},_onUpdateLevel:l,_onRemoveLevel:l,_onCreateLevel:l,_pruneTiles:function(){if(this._map){var e,t,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom){this._removeAllTiles();return}for(e in this._tiles)t=this._tiles[e],t.retain=t.current;for(e in this._tiles)if(t=this._tiles[e],t.current&&!t.active){var r=t.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)wt(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,n,r){var i=Math.floor(e/2),a=Math.floor(t/2),o=n-1,s=new A(+i,+a);s.z=+o;var c=this._tileCoordsToKey(s),l=this._tiles[c];return l&&l.active?(l.retain=!0,!0):(l&&l.loaded&&(l.retain=!0),o>r?this._retainParent(i,a,o,r):!1)},_retainChildren:function(e,t,n,r){for(var i=2*e;i<2*e+2;i++)for(var a=2*t;a<2*t+2;a++){var o=new A(i,a);o.z=n+1;var s=this._tileCoordsToKey(o),c=this._tiles[s];if(c&&c.active){c.retain=!0;continue}else c&&c.loaded&&(c.retain=!0);n+1<r&&this._retainChildren(i,a,n+1,r)}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return t.minNativeZoom!==void 0&&e<t.minNativeZoom?t.minNativeZoom:t.maxNativeZoom!==void 0&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,n,r){var i=Math.round(t);i=this.options.maxZoom!==void 0&&i>this.options.maxZoom||this.options.minZoom!==void 0&&i<this.options.minZoom?void 0:this._clampZoom(i);var a=this.options.updateWhenZooming&&i!==this._tileZoom;(!r||a)&&(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),i!==void 0&&this._update(e),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var n in this._levels)this._setZoomTransform(this._levels[n],e,t)},_setZoomTransform:function(e,t,n){var r=this._map.getZoomScale(n,e.zoom),i=e.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(t,n)).round();R.any3d?Pt(e.el,i,r):Ft(e.el,i)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],r).x/n.x),Math.ceil(e.project([0,t.wrapLng[1]],r).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],r).y/n.x),Math.ceil(e.project([t.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(e){var t=this._map,n=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),r=t.getZoomScale(n,this._tileZoom),i=t.project(e,this._tileZoom).floor(),a=t.getSize().divideBy(r*2);return new M(i.subtract(a),i.add(a))},_update:function(e){var t=this._map;if(t){var n=this._clampZoom(t.getZoom());if(e===void 0&&(e=t.getCenter()),this._tileZoom!==void 0){var r=this._getTiledPixelBounds(e),i=this._pxBoundsToTileRange(r),a=i.getCenter(),o=[],s=this.options.keepBuffer,c=new M(i.getBottomLeft().subtract([s,-s]),i.getTopRight().add([s,-s]));if(!(isFinite(i.min.x)&&isFinite(i.min.y)&&isFinite(i.max.x)&&isFinite(i.max.y)))throw Error(`Attempted to load an infinite number of tiles`);for(var l in this._tiles){var u=this._tiles[l].coords;(u.z!==this._tileZoom||!c.contains(new A(u.x,u.y)))&&(this._tiles[l].current=!1)}if(Math.abs(n-this._tileZoom)>1){this._setView(e,n);return}for(var d=i.min.y;d<=i.max.y;d++)for(var f=i.min.x;f<=i.max.x;f++){var p=new A(f,d);if(p.z=this._tileZoom,this._isValidTile(p)){var m=this._tiles[this._tileCoordsToKey(p)];m?m.current=!0:o.push(p)}}if(o.sort(function(e,t){return e.distanceTo(a)-t.distanceTo(a)}),o.length!==0){this._loading||(this._loading=!0,this.fire(`loading`));var h=document.createDocumentFragment();for(f=0;f<o.length;f++)this._addTile(o[f],h);this._level.el.appendChild(h)}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalTileRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(e);return re(this.options.bounds).overlaps(r)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,n=this.getTileSize(),r=e.scaleBy(n),i=r.add(n);return[t.unproject(r,e.z),t.unproject(i,e.z)]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),n=new P(t[0],t[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(e){return e.x+`:`+e.y+`:`+e.z},_keyToTileCoords:function(e){var t=e.split(`:`),n=new A(+t[0],+t[1]);return n.z=+t[2],n},_removeTile:function(e){var t=this._tiles[e];t&&(wt(t.el),delete this._tiles[e],this.fire(`tileunload`,{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){B(e,`leaflet-tile`);var t=this.getTileSize();e.style.width=t.x+`px`,e.style.height=t.y+`px`,e.onselectstart=l,e.onmousemove=l,R.ielt9&&this.options.opacity<1&&jt(e,this.options.opacity)},_addTile:function(e,t){var n=this._getTilePos(e),r=this._tileCoordsToKey(e),a=this.createTile(this._wrapCoords(e),i(this._tileReady,this,e));this._initTile(a),this.createTile.length<2&&T(i(this._tileReady,this,e,null,a)),Ft(a,n),this._tiles[r]={el:a,coords:e,current:!0},t.appendChild(a),this.fire(`tileloadstart`,{tile:a,coords:e})},_tileReady:function(e,t,n){t&&this.fire(`tileerror`,{error:t,tile:n,coords:e});var r=this._tileCoordsToKey(e);n=this._tiles[r],n&&(n.loaded=+new Date,this._map._fadeAnimated?(jt(n.el,0),E(this._fadeFrame),this._fadeFrame=T(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),t||(B(n.el,`leaflet-tile-loaded`),this.fire(`tileload`,{tile:n.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire(`load`),R.ielt9||!this._map._fadeAnimated?T(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new A(this._wrapX?c(e.x,this._wrapX):e.x,this._wrapY?c(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new M(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function U(e){return new Kr(e)}var W=Kr.extend({options:{minZoom:0,maxZoom:18,subdomains:`abc`,errorTileUrl:``,zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,t){this._url=e,t=p(this,t),t.detectRetina&&R.retina&&t.maxZoom>0?(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom=Math.min(t.maxZoom,t.minZoom+1)):(t.zoomOffset++,t.maxZoom=Math.max(t.minZoom,t.maxZoom-1)),t.minZoom=Math.max(0,t.minZoom)):t.zoomReverse?t.minZoom=Math.min(t.maxZoom,t.minZoom):t.maxZoom=Math.max(t.minZoom,t.maxZoom),typeof t.subdomains==`string`&&(t.subdomains=t.subdomains.split(``)),this.on(`tileunload`,this._onTileRemove)},setUrl:function(e,t){return this._url===e&&t===void 0&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var n=document.createElement(`img`);return Xt(n,`load`,i(this._tileOnLoad,this,t,n)),Xt(n,`error`,i(this._tileOnError,this,t,n)),(this.options.crossOrigin||this.options.crossOrigin===``)&&(n.crossOrigin=this.options.crossOrigin===!0?``:this.options.crossOrigin),typeof this.options.referrerPolicy==`string`&&(n.referrerPolicy=this.options.referrerPolicy),n.alt=``,n.src=this.getTileUrl(e),n},getTileUrl:function(e){var t={r:R.retina?`@2x`:``,s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=r),t[`-y`]=r}return g(this._url,n(t,this.options))},_tileOnLoad:function(e,t){R.ielt9?setTimeout(i(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,n){var r=this.options.errorTileUrl;r&&t.getAttribute(`src`)!==r&&(t.src=r),e(n,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom,n=this.options.zoomReverse,r=this.options.zoomOffset;return n&&(e=t-e),e+r},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&(t=this._tiles[e].el,t.onload=l,t.onerror=l,!t.complete)){t.src=y;var n=this._tiles[e].coords;wt(t),delete this._tiles[e],this.fire(`tileabort`,{tile:t,coords:n})}},_removeTile:function(e){var t=this._tiles[e];if(t)return t.el.setAttribute(`src`,y),Kr.prototype._removeTile.call(this,e)},_tileReady:function(e,t,n){if(!(!this._map||n&&n.getAttribute(`src`)===y))return Kr.prototype._tileReady.call(this,e,t,n)}});function qr(e,t){return new W(e,t)}var Jr=W.extend({defaultWmsParams:{service:`WMS`,request:`GetMap`,layers:``,styles:``,format:`image/jpeg`,transparent:!1,version:`1.1.1`},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var r=n({},this.defaultWmsParams);for(var i in t)i in this.options||(r[i]=t[i]);t=p(this,t);var a=t.detectRetina&&R.retina?2:1,o=this.getTileSize();r.width=o.x*a,r.height=o.y*a,this.wmsParams=r},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?`crs`:`srs`;this.wmsParams[t]=this._crs.code,W.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),n=this._crs,r=N(n.project(t[0]),n.project(t[1])),i=r.min,a=r.max,o=(this._wmsVersion>=1.3&&this._crs===$n?[i.y,i.x,a.y,a.x]:[i.x,i.y,a.x,a.y]).join(`,`),s=W.prototype.getTileUrl.call(this,e);return s+m(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?`&BBOX=`:`&bbox=`)+o},setParams:function(e,t){return n(this.wmsParams,e),t||this.redraw(),this}});function Yr(e,t){return new Jr(e,t)}W.WMS=Jr,qr.wms=Yr;var Xr=tr.extend({options:{padding:.1},initialize:function(e){p(this,e),o(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),B(this._container,`leaflet-zoom-animated`)),this.getPane().appendChild(this._container),this._update(),this.on(`update`,this._updatePaths,this)},onRemove:function(){this.off(`update`,this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var n=this._map.getZoomScale(t,this._zoom),r=this._map.getSize().multiplyBy(.5+this.options.padding),i=this._map.project(this._center,t),a=r.multiplyBy(-n).add(i).subtract(this._map._getNewPixelOrigin(e,t));R.any3d?Pt(this._container,a,n):Ft(this._container,a)},_reset:function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),n=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new M(n,n.add(t.multiplyBy(1+e*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Zr=Xr.extend({options:{tolerance:0},getEvents:function(){var e=Xr.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Xr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement(`canvas`);Xt(e,`mousemove`,this._onMouseMove,this),Xt(e,`click dblclick mousedown mouseup contextmenu`,this._onClick,this),Xt(e,`mouseout`,this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext(`2d`)},_destroyContainer:function(){E(this._redrawRequest),delete this._ctx,wt(this._container),Qt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var e;for(var t in this._redrawBounds=null,this._layers)e=this._layers[t],e._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Xr.prototype._update.call(this);var e=this._bounds,t=this._container,n=e.getSize(),r=R.retina?2:1;Ft(t,e.min),t.width=r*n.x,t.height=r*n.y,t.style.width=n.x+`px`,t.style.height=n.y+`px`,R.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire(`update`)}},_reset:function(){Xr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[o(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,n=t.next,r=t.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete e._order,delete this._layers[o(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if(typeof e.options.dashArray==`string`){var t=e.options.dashArray.split(/[, ]+/),n=[],r,i;for(i=0;i<t.length;i++){if(r=Number(t[i]),isNaN(r))return;n.push(r)}e.options._dashArray=n}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||T(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new M,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var n=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)e=r.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var n,r,i,a,o=e._parts,s=o.length,c=this._ctx;if(s){for(c.beginPath(),n=0;n<s;n++){for(r=0,i=o[n].length;r<i;r++)a=o[n][r],c[r?`lineTo`:`moveTo`](a.x,a.y);t&&c.closePath()}this._fillStroke(c,e)}}},_updateCircle:function(e){if(!(!this._drawing||e._empty())){var t=e._point,n=this._ctx,r=Math.max(Math.round(e._radius),1),i=(Math.max(Math.round(e._radiusY),1)||r)/r;i!==1&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(t.x,t.y/i,r,0,Math.PI*2,!1),i!==1&&n.restore(),this._fillStroke(n,e)}},_fillStroke:function(e,t){var n=t.options;n.fill&&(e.globalAlpha=n.fillOpacity,e.fillStyle=n.fillColor||n.color,e.fill(n.fillRule||`evenodd`)),n.stroke&&n.weight!==0&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=n.opacity,e.lineWidth=n.weight,e.strokeStyle=n.color,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.stroke())},_onClick:function(e){for(var t=this._map.mouseEventToLayerPoint(e),n,r,i=this._drawFirst;i;i=i.next)n=i.layer,n.options.interactive&&n._containsPoint(t)&&(!(e.type===`click`||e.type===`preclick`)||!this._map._draggableMoved(n))&&(r=n);this._fireEvent(r?[r]:!1,e)},_onMouseMove:function(e){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(Ot(this._container,`leaflet-interactive`),this._fireEvent([t],e,`mouseout`),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,t){if(!this._mouseHoverThrottled){for(var n,r,a=this._drawFirst;a;a=a.next)n=a.layer,n.options.interactive&&n._containsPoint(t)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(e),r&&(B(this._container,`leaflet-interactive`),this._fireEvent([r],e,`mouseover`),this._hoveredLayer=r)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,e),this._mouseHoverThrottled=!0,setTimeout(i(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,t,n){this._map._fireDOMEvent(t,n||t.type,e)},_bringToFront:function(e){var t=e._order;if(t){var n=t.next,r=t.prev;if(n)n.prev=r;else return;r?r.next=n:n&&(this._drawFirst=n),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e)}},_bringToBack:function(e){var t=e._order;if(t){var n=t.next,r=t.prev;if(r)r.next=n;else return;n?n.prev=r:r&&(this._drawLast=r),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e)}}});function Qr(e){return R.canvas?new Zr(e):null}var $r=(function(){try{return document.namespaces.add(`lvml`,`urn:schemas-microsoft-com:vml`),function(e){return document.createElement(`<lvml:`+e+` class="lvml">`)}}catch{}return function(e){return document.createElement(`<`+e+` xmlns="urn:schemas-microsoft.com:vml" class="lvml">`)}})(),ei={_initContainer:function(){this._container=Ct(`div`,`leaflet-vml-container`)},_update:function(){this._map._animatingZoom||(Xr.prototype._update.call(this),this.fire(`update`))},_initPath:function(e){var t=e._container=$r(`shape`);B(t,`leaflet-vml-shape `+(this.options.className||``)),t.coordsize=`1 1`,e._path=$r(`path`),t.appendChild(e._path),this._updateStyle(e),this._layers[o(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;wt(t),e.removeInteractiveTarget(t),delete this._layers[o(e)]},_updateStyle:function(e){var t=e._stroke,n=e._fill,r=e.options,i=e._container;i.stroked=!!r.stroke,i.filled=!!r.fill,r.stroke?(t||=e._stroke=$r(`stroke`),i.appendChild(t),t.weight=r.weight+`px`,t.color=r.color,t.opacity=r.opacity,r.dashArray?t.dashStyle=_(r.dashArray)?r.dashArray.join(` `):r.dashArray.replace(/( *, *)/g,` `):t.dashStyle=``,t.endcap=r.lineCap.replace(`butt`,`flat`),t.joinstyle=r.lineJoin):t&&(i.removeChild(t),e._stroke=null),r.fill?(n||=e._fill=$r(`fill`),i.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(i.removeChild(n),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),n=Math.round(e._radius),r=Math.round(e._radiusY||n);this._setPath(e,e._empty()?`M0 0`:`AL `+t.x+`,`+t.y+` `+n+`,`+r+` 0,23592600`)},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){Et(e._container)},_bringToBack:function(e){Dt(e._container)}},ti=R.vml?$r:fe,ni=Xr.extend({_initContainer:function(){this._container=ti(`svg`),this._container.setAttribute(`pointer-events`,`none`),this._rootGroup=ti(`g`),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){wt(this._container),Qt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Xr.prototype._update.call(this);var e=this._bounds,t=e.getSize(),n=this._container;(!this._svgSize||!this._svgSize.equals(t))&&(this._svgSize=t,n.setAttribute(`width`,t.x),n.setAttribute(`height`,t.y)),Ft(n,e.min),n.setAttribute(`viewBox`,[e.min.x,e.min.y,t.x,t.y].join(` `)),this.fire(`update`)}},_initPath:function(e){var t=e._path=ti(`path`);e.options.className&&B(t,e.options.className),e.options.interactive&&B(t,`leaflet-interactive`),this._updateStyle(e),this._layers[o(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){wt(e._path),e.removeInteractiveTarget(e._path),delete this._layers[o(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,n=e.options;t&&(n.stroke?(t.setAttribute(`stroke`,n.color),t.setAttribute(`stroke-opacity`,n.opacity),t.setAttribute(`stroke-width`,n.weight),t.setAttribute(`stroke-linecap`,n.lineCap),t.setAttribute(`stroke-linejoin`,n.lineJoin),n.dashArray?t.setAttribute(`stroke-dasharray`,n.dashArray):t.removeAttribute(`stroke-dasharray`),n.dashOffset?t.setAttribute(`stroke-dashoffset`,n.dashOffset):t.removeAttribute(`stroke-dashoffset`)):t.setAttribute(`stroke`,`none`),n.fill?(t.setAttribute(`fill`,n.fillColor||n.color),t.setAttribute(`fill-opacity`,n.fillOpacity),t.setAttribute(`fill-rule`,n.fillRule||`evenodd`)):t.setAttribute(`fill`,`none`))},_updatePoly:function(e,t){this._setPath(e,pe(e._parts,t))},_updateCircle:function(e){var t=e._point,n=Math.max(Math.round(e._radius),1),r=Math.max(Math.round(e._radiusY),1)||n,i=`a`+n+`,`+r+` 0 1,0 `,a=e._empty()?`M0 0`:`M`+(t.x-n)+`,`+t.y+i+n*2+`,0 `+i+-n*2+`,0 `;this._setPath(e,a)},_setPath:function(e,t){e._path.setAttribute(`d`,t)},_bringToFront:function(e){Et(e._path)},_bringToBack:function(e){Dt(e._path)}});R.vml&&ni.include(ei);function ri(e){return R.svg||R.vml?new ni(e):null}gn.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||=this._renderer=this._createRenderer(),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if(e===`overlayPane`||e===void 0)return!1;var t=this._paneRenderers[e];return t===void 0&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&Qr(e)||ri(e)}});var ii=yr.extend({initialize:function(e,t){yr.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=re(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function ai(e,t){return new ii(e,t)}ni.create=ti,ni.pointsToPath=pe,xr.geometryToLayer=Sr,xr.coordsToLatLng=wr,xr.coordsToLatLngs=Tr,xr.latLngToCoords=Er,xr.latLngsToCoords=Dr,xr.getFeature=Or,xr.asFeature=kr,gn.mergeOptions({boxZoom:!0});var oi=En.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on(`unload`,this._destroy,this)},addHooks:function(){Xt(this._container,`mousedown`,this._onMouseDown,this)},removeHooks:function(){Qt(this._container,`mousedown`,this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){wt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||e.which!==1&&e.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Lt(),Vt(),this._startPoint=this._map.mouseEventToContainerPoint(e),Xt(document,{contextmenu:cn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=Ct(`div`,`leaflet-zoom-box`,this._container),B(this._container,`leaflet-crosshair`),this._map.fire(`boxzoomstart`)),this._point=this._map.mouseEventToContainerPoint(e);var t=new M(this._point,this._startPoint),n=t.getSize();Ft(this._box,t.min),this._box.style.width=n.x+`px`,this._box.style.height=n.y+`px`},_finish:function(){this._moved&&(wt(this._box),Ot(this._container,`leaflet-crosshair`)),Rt(),Ht(),Qt(document,{contextmenu:cn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if(!(e.which!==1&&e.button!==1)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var t=new P(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire(`boxzoomend`,{boxZoomBounds:t})}},_onKeyDown:function(e){e.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});gn.addInitHook(`addHandler`,`boxZoom`,oi),gn.mergeOptions({doubleClickZoom:!0});var si=En.extend({addHooks:function(){this._map.on(`dblclick`,this._onDoubleClick,this)},removeHooks:function(){this._map.off(`dblclick`,this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,n=t.getZoom(),r=t.options.zoomDelta,i=e.originalEvent.shiftKey?n-r:n+r;t.options.doubleClickZoom===`center`?t.setZoom(i):t.setZoomAround(e.containerPoint,i)}});gn.addInitHook(`addHandler`,`doubleClickZoom`,si),gn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ci=En.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new kn(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on(`predrag`,this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on(`predrag`,this._onPreDragWrap,this),e.on(`zoomend`,this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}B(this._map._container,`leaflet-grab leaflet-touch-drag`),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ot(this._map._container,`leaflet-grab`),Ot(this._map._container,`leaflet-touch-drag`),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=re(this._map.options.maxBounds);this._offsetLimit=N(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire(`movestart`).fire(`dragstart`),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(t),this._prunePositions(t)}this._map.fire(`move`,e).fire(`drag`,e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2);this._initialWorldOffset=this._map.latLngToLayerPoint([0,0]).subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,i=(r-t+n)%e+t-n,a=(r+t+n)%e-t-n,o=Math.abs(i+n)<Math.abs(a+n)?i:a;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=o},_onDragEnd:function(e){var t=this._map,n=t.options,r=!n.inertia||e.noInertia||this._times.length<2;if(t.fire(`dragend`,e),r)t.fire(`moveend`);else{this._prunePositions(+new Date);var i=this._lastPos.subtract(this._positions[0]),a=(this._lastTime-this._times[0])/1e3,o=n.easeLinearity,s=i.multiplyBy(o/a),c=s.distanceTo([0,0]),l=Math.min(n.inertiaMaxSpeed,c),u=s.multiplyBy(l/c),d=l/(n.inertiaDeceleration*o),f=u.multiplyBy(-d/2).round();!f.x&&!f.y?t.fire(`moveend`):(f=t._limitOffset(f,t.options.maxBounds),T(function(){t.panBy(f,{duration:d,easeLinearity:o,noMoveStart:!0,animate:!0})}))}}});gn.addInitHook(`addHandler`,`dragging`,ci),gn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var li=En.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex=`0`),Xt(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Qt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,n=e.scrollTop||t.scrollTop,r=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire(`focus`)},_onBlur:function(){this._focused=!1,this._map.fire(`blur`)},_setPanDelta:function(e){var t=this._panKeys={},n=this.keyCodes,r,i;for(r=0,i=n.left.length;r<i;r++)t[n.left[r]]=[-1*e,0];for(r=0,i=n.right.length;r<i;r++)t[n.right[r]]=[e,0];for(r=0,i=n.down.length;r<i;r++)t[n.down[r]]=[0,e];for(r=0,i=n.up.length;r<i;r++)t[n.up[r]]=[0,-1*e]},_setZoomDelta:function(e){var t=this._zoomKeys={},n=this.keyCodes,r,i;for(r=0,i=n.zoomIn.length;r<i;r++)t[n.zoomIn[r]]=e;for(r=0,i=n.zoomOut.length;r<i;r++)t[n.zoomOut[r]]=-e},_addHooks:function(){Xt(document,`keydown`,this._onKeyDown,this)},_removeHooks:function(){Qt(document,`keydown`,this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t=e.keyCode,n=this._map,r;if(t in this._panKeys){if(!n._panAnim||!n._panAnim._inProgress)if(r=this._panKeys[t],e.shiftKey&&(r=j(r).multiplyBy(3)),n.options.maxBounds&&(r=n._limitOffset(j(r),n.options.maxBounds)),n.options.worldCopyJump){var i=n.wrapLatLng(n.unproject(n.project(n.getCenter()).add(r)));n.panTo(i)}else n.panBy(r)}else if(t in this._zoomKeys)n.setZoom(n.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[t]);else if(t===27&&n._popup&&n._popup.options.closeOnEscapeKey)n.closePopup();else return;cn(e)}}});gn.addInitHook(`addHandler`,`keyboard`,li),gn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ui=En.extend({addHooks:function(){Xt(this._map._container,`wheel`,this._onWheelScroll,this),this._delta=0},removeHooks:function(){Qt(this._map._container,`wheel`,this._onWheelScroll,this)},_onWheelScroll:function(e){var t=fn(e),n=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||=+new Date;var r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),r),cn(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),n=this._map.options.zoomSnap||0;e._stop();var r=this._delta/(this._map.options.wheelPxPerZoomLevel*4),i=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,a=n?Math.ceil(i/n)*n:i,o=e._limitZoom(t+(this._delta>0?a:-a))-t;this._delta=0,this._startTime=null,o&&(e.options.scrollWheelZoom===`center`?e.setZoom(t+o):e.setZoomAround(this._lastMousePos,t+o))}});gn.addInitHook(`addHandler`,`scrollWheelZoom`,ui);var di=600;gn.mergeOptions({tapHold:R.touchNative&&R.safari&&R.mobile,tapTolerance:15});var fi=En.extend({addHooks:function(){Xt(this._map._container,`touchstart`,this._onDown,this)},removeHooks:function(){Qt(this._map._container,`touchstart`,this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),e.touches.length===1){var t=e.touches[0];this._startPos=this._newPos=new A(t.clientX,t.clientY),this._holdTimeout=setTimeout(i(function(){this._cancel(),this._isTapValid()&&(Xt(document,`touchend`,sn),Xt(document,`touchend touchcancel`,this._cancelClickPrevent),this._simulateEvent(`contextmenu`,t))},this),di),Xt(document,`touchend touchcancel contextmenu`,this._cancel,this),Xt(document,`touchmove`,this._onMove,this)}},_cancelClickPrevent:function e(){Qt(document,`touchend`,sn),Qt(document,`touchend touchcancel`,e)},_cancel:function(){clearTimeout(this._holdTimeout),Qt(document,`touchend touchcancel contextmenu`,this._cancel,this),Qt(document,`touchmove`,this._onMove,this)},_onMove:function(e){var t=e.touches[0];this._newPos=new A(t.clientX,t.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,t){var n=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY});n._simulated=!0,t.target.dispatchEvent(n)}});gn.addInitHook(`addHandler`,`tapHold`,fi),gn.mergeOptions({touchZoom:R.touch,bounceAtZoomLimits:!0});var pi=En.extend({addHooks:function(){B(this._map._container,`leaflet-touch-zoom`),Xt(this._map._container,`touchstart`,this._onTouchStart,this)},removeHooks:function(){Ot(this._map._container,`leaflet-touch-zoom`),Qt(this._map._container,`touchstart`,this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(!(!e.touches||e.touches.length!==2||t._animatingZoom||this._zooming)){var n=t.mouseEventToContainerPoint(e.touches[0]),r=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),t.options.touchZoom!==`center`&&(this._pinchStartLatLng=t.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),Xt(document,`touchmove`,this._onTouchMove,this),Xt(document,`touchend touchcancel`,this._onTouchEnd,this),sn(e)}},_onTouchMove:function(e){if(!(!e.touches||e.touches.length!==2||!this._zooming)){var t=this._map,n=t.mouseEventToContainerPoint(e.touches[0]),r=t.mouseEventToContainerPoint(e.touches[1]),a=n.distanceTo(r)/this._startDist;if(this._zoom=t.getScaleZoom(a,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&a<1||this._zoom>t.getMaxZoom()&&a>1)&&(this._zoom=t._limitZoom(this._zoom)),t.options.touchZoom===`center`){if(this._center=this._startLatLng,a===1)return}else{var o=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(a===1&&o.x===0&&o.y===0)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(o),this._zoom)}this._moved||=(t._moveStart(!0,!1),!0),E(this._animRequest),this._animRequest=T(i(t._move,t,this._center,this._zoom,{pinch:!0,round:!1},void 0),this,!0),sn(e)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,E(this._animRequest),Qt(document,`touchmove`,this._onTouchMove,this),Qt(document,`touchend touchcancel`,this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});gn.addInitHook(`addHandler`,`touchZoom`,pi),gn.BoxZoom=oi,gn.DoubleClickZoom=si,gn.Drag=ci,gn.Keyboard=li,gn.ScrollWheelZoom=ui,gn.TapHold=fi,gn.TouchZoom=pi,e.Bounds=M,e.Browser=R,e.CRS=ie,e.Canvas=Zr,e.Circle=hr,e.CircleMarker=pr,e.Class=O,e.Control=vn,e.DivIcon=Wr,e.DivOverlay=zr,e.DomEvent=mn,e.DomUtil=Yt,e.Draggable=kn,e.Evented=te,e.FeatureGroup=ir,e.GeoJSON=xr,e.GridLayer=Kr,e.Handler=En,e.Icon=or,e.ImageOverlay=Nr,e.LatLng=F,e.LatLngBounds=P,e.Layer=tr,e.LayerGroup=nr,e.LineUtil=Jn,e.Map=gn,e.Marker=ur,e.Mixin=Dn,e.Path=fr,e.Point=A,e.PolyUtil=Nn,e.Polygon=yr,e.Polyline=_r,e.Popup=Br,e.PosAnimation=hn,e.Projection=Zn,e.Rectangle=ii,e.Renderer=Xr,e.SVG=ni,e.SVGOverlay=Lr,e.TileLayer=W,e.Tooltip=Hr,e.Transformation=ce,e.Util=D,e.VideoOverlay=Fr,e.bind=i,e.bounds=N,e.canvas=Qr,e.circle=gr,e.circleMarker=mr,e.control=yn,e.divIcon=Gr,e.extend=n,e.featureGroup=ar,e.geoJSON=jr,e.geoJson=Mr,e.gridLayer=U,e.icon=sr,e.imageOverlay=Pr,e.latLng=I,e.latLngBounds=re,e.layerGroup=rr,e.map=_n,e.marker=dr,e.point=j,e.polygon=br,e.polyline=vr,e.popup=Vr,e.rectangle=ai,e.setOptions=p,e.stamp=o,e.svg=ri,e.svgOverlay=Rr,e.tileLayer=qr,e.tooltip=Ur,e.transformation=le,e.version=t,e.videoOverlay=Ir;var mi=window.L;e.noConflict=function(){return window.L=mi,this},window.L=e}))}));function ks(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function As(e,t){return t==null?function(t,n){let r=(0,v.useRef)(void 0);return r.current||=e(t,n),r}:function(n,r){let i=(0,v.useRef)(void 0);i.current||=e(n,r);let a=(0,v.useRef)(n),{instance:o}=i.current;return(0,v.useEffect)(function(){a.current!==n&&(t(o,n,a.current),a.current=n)},[o,n,t]),i}}function js(e,t){(0,v.useEffect)(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){t.layerContainer?.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function Ms(e){return function(t){let n=bs(),r=e(Es(t,n),n);return gs(n.map,t.attribution),Ts(r.current,t.eventHandlers),js(r.current,n),r}}function Ns(e,t){return Ss(Ms(As(e,t)))}function Ps(e,t){return Cs(Ds(As(e),t))}function Fs(e,t){return ws(Ms(As(e,t)))}function Is(e,t,n){let{opacity:r,zIndex:i}=t;r!=null&&r!==n.opacity&&e.setOpacity(r),i!=null&&i!==n.zIndex&&e.setZIndex(i)}var Ls=l(Os(),1);function Rs({bounds:e,boundsOptions:t,center:n,children:r,className:i,id:a,placeholder:o,style:s,whenReady:c,zoom:l,...u},d){let[f]=(0,v.useState)({className:i,id:a,style:s}),[p,m]=(0,v.useState)(null),h=(0,v.useRef)(void 0);(0,v.useImperativeHandle)(d,()=>p?.map??null,[p]);let g=(0,v.useCallback)(r=>{if(r!==null&&!h.current){let i=new Ls.Map(r,u);h.current=i,n!=null&&l!=null?i.setView(n,l):e!=null&&i.fitBounds(e,t),c!=null&&i.whenReady(c),m(_s(i))}},[]);(0,v.useEffect)(()=>()=>{p?.map.remove()},[p]);let _=p?v.createElement(ys,{value:p},r):o??null;return v.createElement(`div`,{...f,ref:g},_)}const zs=(0,v.forwardRef)(Rs),Bs=Ns(function({position:e,...t},n){let r=new Ls.Marker(e,t);return ks(r,vs(n,{overlayContainer:r}))},function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),t.icon!=null&&t.icon!==n.icon&&e.setIcon(t.icon),t.zIndexOffset!=null&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),t.opacity!=null&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),e.dragging!=null&&t.draggable!==n.draggable&&(t.draggable===!0?e.dragging.enable():e.dragging.disable())}),Vs=Ps(function(e,t){return ks(new Ls.Popup(e,t.overlayContainer),t)},function(e,t,{position:n},r){(0,v.useEffect)(function(){let{instance:i}=e;function a(e){e.popup===i&&(i.update(),r(!0))}function o(e){e.popup===i&&r(!1)}return t.map.on({popupopen:a,popupclose:o}),t.overlayContainer==null?(n!=null&&i.setLatLng(n),i.openOn(t.map)):t.overlayContainer.bindPopup(i),function(){t.map.off({popupopen:a,popupclose:o}),t.overlayContainer?.unbindPopup(),t.map.removeLayer(i)}},[e,t,r,n])}),Hs=Fs(function({url:e,...t},n){return ks(new Ls.TileLayer(e,Es(t,n)),n)},function(e,t,n){Is(e,t,n);let{url:r}=t;r!=null&&r!==n.url&&e.setUrl(r)});var Us=`/api/blood_bank.php`;const Ws=[{value:`A+`,label:`A+`,color:`#c41e3a`},{value:`A-`,label:`A-`,color:`#c41e3a`},{value:`B+`,label:`B+`,color:`#15803d`},{value:`B-`,label:`B-`,color:`#15803d`},{value:`AB+`,label:`AB+`,color:`#7c3aed`},{value:`AB-`,label:`AB-`,color:`#7c3aed`},{value:`O+`,label:`O+`,color:`#c2410c`},{value:`O-`,label:`O-`,color:`#c2410c`}],Gs={CRITICAL:{label:`Critical`,threshold:10,color:`#ef4444`},LOW:{label:`Low`,threshold:20,color:`#f59e0b`},NORMAL:{label:`Normal`,threshold:1/0,color:`#10b981`}},Ks=async(e={})=>{let t={};e.location&&(t.location=e.location),e.blood_type&&(t.blood_type=e.blood_type),e.min_units&&(t.min_units=e.min_units);let{data:n}=await K.get(Us,{params:t});if(!n.success)throw Error(n.message||`Failed to fetch blood inventory`);return{success:!0,data:n.data??[],stats:n.stats??{total_locations:0,total_units:0,by_blood_type:{},by_location:{},low_stock:0,critical_stock:0,out_of_stock:0}}},qs=async()=>{let{data:e}=await K.get(Us,{params:{action:`locations`}});if(!e.success)throw Error(e.message||`Failed to fetch locations`);return{success:!0,data:e.data}},Js=async e=>{for(let t of[`location_name`,`blood_type`,`units_available`,`contact_number`,`address`,`latitude`,`longitude`])if(!e[t]&&e[t]!==0)throw Error(`${t.replace(`_`,` `)} is required`);let{data:t}=await K.post(Us,e);if(!t.success)throw Error(t.message||`Failed to create inventory item`);return{success:!0,message:t.message,id:t.id}},Ys=async(e,t)=>{if(!e)throw Error(`Inventory ID is required`);let{data:n}=await K.put(Us,t,{params:{id:e}});if(!n.success)throw Error(n.message||`Failed to update inventory item`);return{success:!0,message:n.message}},Xs=async e=>{if(!e)throw Error(`Inventory ID is required`);let{data:t}=await K.delete(Us,{params:{id:e}});if(!t.success)throw Error(t.message||`Failed to delete inventory item`);return{success:!0,message:t.message}},Zs=e=>{let t=Ws.find(t=>t.value===e);return t?t.color:`#6b7280`},Qs=e=>e===0?{label:`Out of Stock`,color:`#6b7280`}:e<10?Gs.CRITICAL:e<20?Gs.LOW:Gs.NORMAL;delete Ls.default.Icon.Default.prototype._getIconUrl,Ls.default.Icon.Default.mergeOptions({iconRetinaUrl:`data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg==`,iconUrl:`data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=`,shadowUrl:`data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC`});var $s=e=>Ls.default.divIcon({className:`custom-marker`,html:`<div class="marker-pin" style="background-color: ${e};">
             <i class="fa-solid fa-droplet"></i>
           </div>`,iconSize:[30,30],iconAnchor:[15,30],popupAnchor:[0,-30]});function ec({message:e,type:t,onClose:n}){return(0,v.useEffect)(()=>{let e=setTimeout(n,3500);return()=>clearTimeout(e)},[n]),(0,H.jsxs)(`div`,{className:`ubm-toast ubm-toast--${t}`,onClick:n,children:[(0,H.jsx)(`div`,{className:`ubm-toast__icon`,children:(0,H.jsx)(`i`,{className:`fa-solid ${t===`success`?`fa-circle-check`:`fa-circle-exclamation`}`})}),(0,H.jsxs)(`div`,{className:`ubm-toast__content`,children:[(0,H.jsx)(`div`,{className:`ubm-toast__title`,children:t===`success`?`Success`:`Error`}),(0,H.jsx)(`div`,{className:`ubm-toast__message`,children:e})]}),(0,H.jsx)(`button`,{className:`ubm-toast__close`,onClick:n,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]})}function tc({type:e,selected:t,onClick:n,count:r}){let i=Zs(e.value);return(0,H.jsxs)(`button`,{className:`ubm-filter-btn ${t?`ubm-filter-btn--selected`:``}`,onClick:()=>n(e.value),style:{backgroundColor:t?i:`${i}08`,color:t?`#fff`:i,borderColor:t?i:`${i}40`},children:[(0,H.jsx)(`i`,{className:`fa-solid fa-droplet`}),e.value,r!==void 0&&(0,H.jsx)(`span`,{className:`ubm-filter-btn__count`,style:{backgroundColor:t?`rgba(255,255,255,0.2)`:`${i}20`},children:r})]})}function nc({location:e,bloodTypes:t,onViewLocation:n,onClick:r,isSelected:i}){let a=t.reduce((e,t)=>e+(Number(t.units_available)||0),0),o=t.length,s=(()=>{let e=t.some(e=>Number(e.units_available)<10&&Number(e.units_available)>0),n=t.some(e=>Number(e.units_available)<20&&Number(e.units_available)>=10),r=t.some(e=>Number(e.units_available)===0);return e?`#ef4444`:n?`#f59e0b`:r?`#6b7280`:`#10b981`})();return(0,H.jsxs)(`div`,{className:`ubm-location-card ${i?`ubm-location-card--selected`:``}`,onClick:()=>{n(e),r&&r()},children:[(0,H.jsxs)(`div`,{className:`ubm-location-card__header`,children:[(0,H.jsxs)(`h3`,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-hospital`}),e]}),(0,H.jsx)(`span`,{className:`ubm-location-card__status`,style:{backgroundColor:s},title:s===`#ef4444`?`Critical Stock`:s===`#f59e0b`?`Low Stock`:s===`#6b7280`?`Out of Stock`:`Normal Stock`})]}),(0,H.jsxs)(`div`,{className:`ubm-location-card__stats`,children:[(0,H.jsxs)(`div`,{className:`ubm-location-card__stat`,children:[(0,H.jsx)(`span`,{className:`ubm-location-card__stat-label`,children:`Total Units`}),(0,H.jsx)(`span`,{className:`ubm-location-card__stat-value`,children:a})]}),(0,H.jsxs)(`div`,{className:`ubm-location-card__stat`,children:[(0,H.jsx)(`span`,{className:`ubm-location-card__stat-label`,children:`Blood Types`}),(0,H.jsx)(`span`,{className:`ubm-location-card__stat-value`,children:o})]})]}),(0,H.jsxs)(`div`,{className:`ubm-location-card__blood-types`,children:[t.slice(0,4).map(e=>(0,H.jsxs)(`span`,{className:`ubm-location-card__blood-type`,style:{backgroundColor:`${Zs(e.blood_type)}12`,color:Zs(e.blood_type),border:`1px solid ${Zs(e.blood_type)}25`},children:[e.blood_type,(0,H.jsx)(`small`,{children:Number(e.units_available)})]},e.id)),t.length>4&&(0,H.jsxs)(`span`,{className:`ubm-location-card__blood-type-more`,children:[`+`,t.length-4]})]}),(0,H.jsxs)(`button`,{className:`ubm-location-card__btn`,children:[(0,H.jsx)(`span`,{children:`View Details`}),(0,H.jsx)(`i`,{className:`fa-solid fa-arrow-right`})]})]})}function rc({location:e,bloodTypes:t,onClose:n}){let[r,i]=(0,v.useState)(null),[a,o]=(0,v.useState)(null),s=e=>{window.location.href=`tel:${e.replace(/\D/g,``)}`},c=e=>{let t=encodeURIComponent(e);window.open(`https://www.google.com/maps/search/?api=1&query=${t}`,`_blank`)},l=(e,t)=>{navigator.clipboard.writeText(e),o(t),setTimeout(()=>o(null),2e3)},u=t.filter(t=>t.location_name===e),d=u[0];if(!d)return null;let f=u.reduce((e,t)=>e+(Number(t.units_available)||0),0);return(0,H.jsx)(`div`,{className:`ubm-overlay`,onClick:n,children:(0,H.jsxs)(`div`,{className:`ubm-modal`,onClick:e=>e.stopPropagation(),children:[(0,H.jsxs)(`div`,{className:`ubm-modal__header`,children:[(0,H.jsxs)(`h2`,{className:`ubm-modal__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-hospital`}),e]}),(0,H.jsx)(`button`,{className:`ubm-modal__close`,onClick:n,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]}),(0,H.jsxs)(`div`,{className:`ubm-modal__body`,children:[(0,H.jsxs)(`div`,{className:`ubm-modal__section`,children:[(0,H.jsxs)(`h3`,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-droplet`}),`Blood Inventory`]}),(0,H.jsx)(`div`,{className:`ubm-blood-grid`,children:u.map(e=>{let t=Zs(e.blood_type),n=Qs(Number(e.units_available));return(0,H.jsxs)(`div`,{className:`ubm-blood-card ${r===e.blood_type?`ubm-blood-card--selected`:``}`,onClick:()=>i(e.blood_type),style:{borderColor:t,backgroundColor:r===e.blood_type?`${t}08`:`#fff`,transform:r===e.blood_type?`translateY(-2px)`:`none`,boxShadow:r===e.blood_type?`0 4px 12px ${t}30`:`none`},children:[(0,H.jsx)(`div`,{className:`ubm-blood-card__type`,style:{color:t},children:e.blood_type}),(0,H.jsx)(`div`,{className:`ubm-blood-card__units`,children:Number(e.units_available)}),(0,H.jsx)(`div`,{className:`ubm-blood-card__status`,style:{backgroundColor:`${n.color}12`,color:n.color},children:Number(e.units_available)===0?`Out`:n.label})]},e.id)})}),(0,H.jsxs)(`div`,{className:`ubm-location-total`,children:[(0,H.jsx)(`strong`,{children:`Total Units:`}),(0,H.jsx)(`span`,{className:`ubm-location-total__value`,children:f})]})]}),(0,H.jsxs)(`div`,{className:`ubm-modal__section`,children:[(0,H.jsxs)(`h3`,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-address-book`}),`Contact Information`]}),(0,H.jsxs)(`div`,{className:`ubm-contact-info`,children:[(0,H.jsxs)(`div`,{className:`ubm-contact-item`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-phone`}),(0,H.jsxs)(`div`,{className:`ubm-contact-item__content`,children:[(0,H.jsx)(`span`,{className:`ubm-contact-item__label`,children:`Phone:`}),(0,H.jsx)(`button`,{className:`ubm-contact-item__value ubm-contact-item__value--clickable`,onClick:()=>s(d.contact_number),children:d.contact_number}),(0,H.jsx)(`button`,{className:`ubm-copy-btn ${a===`phone`?`ubm-copy-btn--copied`:``}`,onClick:()=>l(d.contact_number,`phone`),title:`Copy phone number`,children:(0,H.jsx)(`i`,{className:`fa-solid ${a===`phone`?`fa-check`:`fa-copy`}`})})]})]}),(0,H.jsxs)(`div`,{className:`ubm-contact-item`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-dot`}),(0,H.jsxs)(`div`,{className:`ubm-contact-item__content`,children:[(0,H.jsx)(`span`,{className:`ubm-contact-item__label`,children:`Address:`}),(0,H.jsx)(`span`,{className:`ubm-contact-item__value`,children:d.address}),(0,H.jsx)(`button`,{className:`ubm-copy-btn ${a===`address`?`ubm-copy-btn--copied`:``}`,onClick:()=>l(d.address,`address`),title:`Copy address`,children:(0,H.jsx)(`i`,{className:`fa-solid ${a===`address`?`fa-check`:`fa-copy`}`})})]})]}),(0,H.jsxs)(`div`,{className:`ubm-contact-item`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-map-pin`}),(0,H.jsxs)(`div`,{className:`ubm-contact-item__content`,children:[(0,H.jsx)(`span`,{className:`ubm-contact-item__label`,children:`Coordinates:`}),(0,H.jsxs)(`span`,{className:`ubm-contact-item__value`,children:[Number(d.latitude).toFixed(4),`,`,` `,Number(d.longitude).toFixed(4)]})]})]})]})]}),(0,H.jsxs)(`div`,{className:`ubm-modal__actions`,children:[(0,H.jsxs)(`button`,{className:`ubm-btn ubm-btn--primary`,onClick:()=>c(d.address),children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-arrow`}),`Get Directions`]}),(0,H.jsxs)(`button`,{className:`ubm-btn ubm-btn--secondary`,onClick:()=>s(d.contact_number),children:[(0,H.jsx)(`i`,{className:`fa-solid fa-phone`}),`Call Now`]})]}),(0,H.jsxs)(`div`,{className:`ubm-modal__footer`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-clock`}),(0,H.jsxs)(`span`,{children:[`Last updated: `,new Date(d.updated_at).toLocaleString()]})]})]})]})})}function ic(){let[e,t]=(0,v.useState)([]),[n,r]=(0,v.useState)(!0),[i,a]=(0,v.useState)(null),[o,s]=(0,v.useState)([]),[c,l]=(0,v.useState)(``),[u,d]=(0,v.useState)(null),[f,p]=(0,v.useState)(!1),[m,h]=(0,v.useState)(null),[g,_]=(0,v.useState)(null),y=(e,t=`success`)=>{_({message:e,type:t})};(0,v.useEffect)(()=>{b()},[]);let b=async()=>{try{t((await Ks()).data)}catch(e){console.error(`Error fetching blood inventory:`,e),y(`Failed to load blood inventory`,`error`)}finally{r(!1)}},x=e.reduce((e,t)=>(e[t.location_name]||(e[t.location_name]={location_name:t.location_name,address:t.address,contact_number:t.contact_number,latitude:parseFloat(t.latitude),longitude:parseFloat(t.longitude),bloodTypes:[],totalUnits:0}),e[t.location_name].bloodTypes.push({...t,units_available:Number(t.units_available)||0}),e[t.location_name].totalUnits+=Number(t.units_available)||0,e),{}),S=Ws.reduce((e,t)=>(e[t.value]=Object.values(x).reduce((e,n)=>e+(n.bloodTypes.some(e=>e.blood_type===t.value)?1:0),0),e),{}),C=Object.values(x).filter(e=>{if(o.length>0&&!e.bloodTypes.some(e=>o.includes(e.blood_type)))return!1;if(c){let t=c.toLowerCase();return e.location_name.toLowerCase().includes(t)||e.address.toLowerCase().includes(t)}return!0}),w=e=>{s(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},T=()=>{s([]),l(``)},E=e=>{let t=x[e];h(t),p(!0)},D=e=>{let t=e.bloodTypes.some(e=>e.units_available<10&&e.units_available>0),n=e.bloodTypes.some(e=>e.units_available<20&&e.units_available>=10),r=e.bloodTypes.some(e=>e.units_available===0);return t?`#ef4444`:n?`#f59e0b`:r?`#6b7280`:`#10b981`},O=()=>C.length>0?{lat:C[0].latitude,lng:C[0].longitude}:{lat:10.3157,lng:123.8854},ee=(e,t)=>{u&&u.flyTo([e,t],15,{duration:1.5})},k=Object.values(x).reduce((e,t)=>e+t.totalUnits,0);return(0,H.jsxs)(`div`,{className:`ubm-root`,children:[(0,H.jsxs)(`div`,{className:`ubm-header`,children:[(0,H.jsx)(`div`,{className:`ubm-header__container`,children:(0,H.jsxs)(`div`,{className:`ubm-header__content`,children:[(0,H.jsxs)(`div`,{className:`ubm-header__left`,children:[(0,H.jsxs)(`div`,{className:`ubm-header__badge`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-map-location-dot`}),`Blood Map`]}),(0,H.jsx)(`h1`,{className:`ubm-header__title`,children:`Find Blood Near You`}),(0,H.jsx)(`p`,{className:`ubm-header__subtitle`,children:`Locate blood banks and hospitals with available blood supplies in real-time`})]}),(0,H.jsxs)(`div`,{className:`ubm-header__stats`,children:[(0,H.jsxs)(`div`,{className:`ubm-header-stat`,children:[(0,H.jsx)(`span`,{className:`ubm-header-stat__value`,children:Object.keys(x).length}),(0,H.jsx)(`span`,{className:`ubm-header-stat__label`,children:`Locations`})]}),(0,H.jsxs)(`div`,{className:`ubm-header-stat`,children:[(0,H.jsx)(`span`,{className:`ubm-header-stat__value`,children:k}),(0,H.jsx)(`span`,{className:`ubm-header-stat__label`,children:`Total Units`})]})]})]})}),(0,H.jsx)(`div`,{className:`ubm-header__wave`,children:(0,H.jsx)(`svg`,{viewBox:`0 0 1440 120`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`,children:(0,H.jsx)(`path`,{d:`M0 120L60 105C120 90 240 60 360 45C480 30 600 30 720 37.5C840 45 960 60 1080 67.5C1200 75 1320 75 1380 75L1440 75V120H1380C1320 120 1200 120 1080 120C960 120 840 120 720 120C600 120 480 120 360 120C240 120 120 120 60 120H0Z`,fill:`white`,fillOpacity:`0.1`})})})]}),(0,H.jsxs)(`div`,{className:`ubm-main`,children:[(0,H.jsxs)(`div`,{className:`ubm-filters`,children:[(0,H.jsxs)(`div`,{className:`ubm-filters__search`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-magnifying-glass ubm-filters__search-icon`}),(0,H.jsx)(`input`,{type:`text`,className:`ubm-filters__search-input`,placeholder:`Search by location or address...`,value:c,onChange:e=>l(e.target.value)}),c&&(0,H.jsx)(`button`,{className:`ubm-filters__search-clear`,onClick:()=>l(``),children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]}),(0,H.jsxs)(`div`,{className:`ubm-filters__blood-types`,children:[(0,H.jsxs)(`span`,{className:`ubm-filters__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-droplet`}),`Filter by Blood Type:`]}),(0,H.jsx)(`div`,{className:`ubm-filters__buttons`,children:Ws.map(e=>(0,H.jsx)(tc,{type:e,selected:o.includes(e.value),onClick:w,count:S[e.value]},e.value))})]}),(o.length>0||c)&&(0,H.jsxs)(`button`,{className:`ubm-filters__clear`,onClick:T,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`}),`Clear Filters`]})]}),(0,H.jsxs)(`div`,{className:`ubm-content`,children:[(0,H.jsxs)(`div`,{className:`ubm-sidebar`,children:[(0,H.jsxs)(`div`,{className:`ubm-sidebar__header`,children:[(0,H.jsxs)(`h2`,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-dot`}),`Available Locations`]}),(0,H.jsxs)(`span`,{className:`ubm-sidebar__count`,children:[C.length,` location`,C.length===1?``:`s`]})]}),(0,H.jsx)(`div`,{className:`ubm-sidebar__list`,children:n?(0,H.jsxs)(`div`,{className:`ubm-loading`,children:[(0,H.jsx)(`div`,{className:`ubm-loading__spinner`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-spinner fa-spin`})}),(0,H.jsx)(`p`,{children:`Loading locations...`}),(0,H.jsx)(`span`,{className:`ubm-loading__subtitle`,children:`Fetching blood inventory data`})]}):C.length===0?(0,H.jsxs)(`div`,{className:`ubm-empty`,children:[(0,H.jsx)(`div`,{className:`ubm-empty__icon`,children:(0,H.jsx)(`i`,{className:`fa-regular fa-map`})}),(0,H.jsx)(`h3`,{className:`ubm-empty__title`,children:`No Locations Found`}),(0,H.jsx)(`p`,{className:`ubm-empty__message`,children:o.length>0||c?`Try adjusting your filters`:`No blood inventory locations available`}),(o.length>0||c)&&(0,H.jsxs)(`button`,{className:`ubm-empty__action`,onClick:T,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-times`}),`Clear Filters`]})]}):C.map(e=>(0,H.jsx)(nc,{location:e.location_name,bloodTypes:e.bloodTypes,onViewLocation:E,onClick:()=>ee(e.latitude,e.longitude),isSelected:i===e.location_name},e.location_name))})]}),(0,H.jsx)(`div`,{className:`ubm-map-container`,children:n?(0,H.jsxs)(`div`,{className:`ubm-map-loading`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-spinner fa-spin`}),(0,H.jsx)(`span`,{children:`Loading map...`})]}):(0,H.jsxs)(zs,{center:O(),zoom:12,scrollWheelZoom:!0,className:`ubm-leaflet-map`,whenCreated:d,children:[(0,H.jsx)(Hs,{attribution:` <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors`,url:`https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png`}),C.map(e=>{let t=$s(D(e));return(0,H.jsx)(Bs,{position:[e.latitude,e.longitude],icon:t,eventHandlers:{click:()=>{a(e.location_name),ee(e.latitude,e.longitude)}},children:(0,H.jsx)(Vs,{children:(0,H.jsxs)(`div`,{className:`ubm-popup`,children:[(0,H.jsx)(`h4`,{children:e.location_name}),(0,H.jsx)(`p`,{className:`ubm-popup__address`,children:e.address}),(0,H.jsxs)(`div`,{className:`ubm-popup__stats`,children:[(0,H.jsxs)(`div`,{className:`ubm-popup__stat`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-droplet`}),(0,H.jsxs)(`span`,{children:[e.bloodTypes.length,` types`]})]}),(0,H.jsxs)(`div`,{className:`ubm-popup__stat`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-boxes`}),(0,H.jsxs)(`span`,{children:[e.totalUnits,` units`]})]})]}),(0,H.jsx)(`div`,{className:`ubm-popup__blood-types`,children:e.bloodTypes.slice(0,4).map(e=>(0,H.jsxs)(`span`,{className:`ubm-popup__blood-type`,style:{backgroundColor:`${Zs(e.blood_type)}12`,color:Zs(e.blood_type)},children:[e.blood_type,`: `,e.units_available]},e.id))}),(0,H.jsx)(`button`,{className:`ubm-popup__btn`,onClick:()=>E(e.location_name),children:`View Details`})]})})},e.location_name)})]})})]}),(0,H.jsxs)(`div`,{className:`ubm-legend`,children:[(0,H.jsxs)(`div`,{className:`ubm-legend__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-info-circle`}),`Status Indicators`]}),(0,H.jsxs)(`div`,{className:`ubm-legend__items`,children:[(0,H.jsxs)(`div`,{className:`ubm-legend__item`,children:[(0,H.jsx)(`span`,{className:`ubm-legend__dot`,style:{backgroundColor:`#10b981`}}),(0,H.jsx)(`span`,{children:`Normal Stock (20 units)`})]}),(0,H.jsxs)(`div`,{className:`ubm-legend__item`,children:[(0,H.jsx)(`span`,{className:`ubm-legend__dot`,style:{backgroundColor:`#f59e0b`}}),(0,H.jsx)(`span`,{children:`Low Stock (10-19 units)`})]}),(0,H.jsxs)(`div`,{className:`ubm-legend__item`,children:[(0,H.jsx)(`span`,{className:`ubm-legend__dot`,style:{backgroundColor:`#ef4444`}}),(0,H.jsx)(`span`,{children:`Critical Stock (1-9 units)`})]}),(0,H.jsxs)(`div`,{className:`ubm-legend__item`,children:[(0,H.jsx)(`span`,{className:`ubm-legend__dot`,style:{backgroundColor:`#6b7280`}}),(0,H.jsx)(`span`,{children:`Out of Stock`})]})]})]})]}),f&&m&&(0,H.jsx)(rc,{location:m.location_name,bloodTypes:m.bloodTypes,onClose:()=>p(!1)}),g&&(0,H.jsx)(ec,{message:g.message,type:g.type,onClose:()=>_(null)})]})}function ac(){let[e,t]=(0,v.useState)([]),[n,r]=(0,v.useState)(null),[i,a]=(0,v.useState)(``);(0,v.useEffect)(()=>{o()},[]);let o=async()=>{try{t([{id:1,name:`Admin Support`,lastMessage:`How can I help you today?`,timestamp:`2026-02-17T10:30:00`,unread:2,avatar:`A`},{id:2,name:`Event Coordinator`,lastMessage:`Your registration has been confirmed`,timestamp:`2026-02-16T15:20:00`,unread:0,avatar:`E`}])}catch(e){console.error(`Error fetching conversations:`,e)}},s=e.filter(e=>e.name.toLowerCase().includes(i.toLowerCase())),c=e=>{let t=new Date(e),n=new Date;if(t.toDateString()===n.toDateString())return t.toLocaleTimeString(`en-US`,{hour:`numeric`,minute:`2-digit`,hour12:!0});{let e=new Date(n);return e.setDate(e.getDate()-1),t.toDateString()===e.toDateString()?`Yesterday`:t.toLocaleDateString(`en-US`,{month:`short`,day:`numeric`})}};return(0,H.jsx)(`div`,{className:`user-messages`,children:(0,H.jsxs)(`div`,{className:`container`,children:[(0,H.jsx)(`h1`,{children:`Messages`}),(0,H.jsxs)(`div`,{className:`messages-layout`,children:[(0,H.jsxs)(`div`,{className:`conversations-panel`,children:[(0,H.jsxs)(`div`,{className:`search-box`,children:[(0,H.jsx)(`input`,{type:`text`,placeholder:`Search conversations...`,value:i,onChange:e=>a(e.target.value)}),(0,H.jsx)(`span`,{className:`search-icon`,children:``})]}),(0,H.jsx)(`div`,{className:`conversations-list`,children:s.length===0?(0,H.jsx)(`div`,{className:`empty-state`,children:(0,H.jsx)(`p`,{children:`No conversations found`})}):s.map(e=>(0,H.jsxs)(`div`,{className:`conversation-item ${n?.id===e.id?`active`:``}`,onClick:()=>r(e),children:[(0,H.jsx)(`div`,{className:`avatar`,children:e.avatar}),(0,H.jsxs)(`div`,{className:`conversation-info`,children:[(0,H.jsxs)(`div`,{className:`header`,children:[(0,H.jsx)(`h4`,{children:e.name}),(0,H.jsx)(`span`,{className:`time`,children:c(e.timestamp)})]}),(0,H.jsxs)(`div`,{className:`preview`,children:[(0,H.jsx)(`p`,{children:e.lastMessage}),e.unread>0&&(0,H.jsx)(`span`,{className:`unread-badge`,children:e.unread})]})]})]},e.id))})]}),(0,H.jsx)(`div`,{className:`chat-panel`,children:n?(0,H.jsx)(ChatBox,{recipientId:n.id,recipientName:n.name}):(0,H.jsxs)(`div`,{className:`no-chat-selected`,children:[(0,H.jsx)(`div`,{className:`icon`,children:``}),(0,H.jsx)(`h3`,{children:`Select a conversation`}),(0,H.jsx)(`p`,{children:`Choose a conversation from the list to start messaging`})]})})]})]})})}const oc=async()=>{let e=await Promise.allSettled([K.get(`/api/users.php`,{params:{action:`stats`}}),K.get(`/api/events.php`,{params:{action:`stats`}}),K.get(`/api/training_sessions.php`,{params:{action:`stats`}}),K.get(`/api/training_requests.php`,{params:{action:`stats`}}),K.get(`/api/volunteers.php`),K.get(`/api/inventory.php`),K.get(`/api/merchandise.php`),K.get(`/api/blood_bank.php`),K.get(`/api/announcements.php`)]),t=(t,n,r)=>{if(e[t].status!==`fulfilled`)return r;let i=e[t].value.data;return i?.success?n.split(`.`).reduce((e,t)=>e?.[t],i)??r:r};return{users:{total:t(0,`stats.total`,0),admins:t(0,`stats.admins`,0),users:t(0,`stats.users`,0),rcy_members:t(0,`stats.rcy_members`,0),new_this_week:t(0,`stats.new_this_week`,0)},events:{total:t(1,`stats.total`,0),upcoming:t(1,`stats.upcoming`,0),completed:t(1,`stats.completed`,0),total_registrations:t(1,`stats.total_registrations`,0)},training:{total:t(2,`stats.total`,0),upcoming:t(2,`stats.upcoming`,0),completed:t(2,`stats.completed`,0),total_registrations:t(2,`stats.total_registrations`,0)},requests:{total:t(3,`stats.total`,0),by_status:t(3,`stats.by_status`,[])},volunteers:{total:t(4,`stats.total`,0),by_status:t(4,`stats.by_status`,{})},inventory:{total_items:t(5,`stats.total_items`,0),total_value:t(5,`stats.total_value`,0),low_stock:t(5,`stats.low_stock`,0),out_of_stock:t(5,`stats.out_of_stock`,0)},merchandise:{total:t(6,`stats.total`,0),available:t(6,`stats.available`,0),total_stock:t(6,`stats.total_stock`,0),total_value:t(6,`stats.total_value`,0)},blood_bank:{total_units:t(7,`stats.total_units`,0),total_locations:t(7,`stats.total_locations`,0),low_stock:t(7,`stats.low_stock`,0),critical_stock:t(7,`stats.critical_stock`,0),by_blood_type:t(7,`stats.by_blood_type`,{})},announcements:{total:t(8,`stats.total`,0),published:t(8,`stats.published`,0),draft:t(8,`stats.draft`,0),archived:t(8,`stats.archived`,0)}}},sc=async()=>{let e=await Promise.allSettled([K.get(`/api/registrations.php`),K.get(`/api/session_registrations.php`),K.get(`/api/training_requests.php`)]),t=e[0].status===`fulfilled`?e[0].value.data?.registrations??[]:[],n=e[1].status===`fulfilled`?e[1].value.data?.registrations??[]:[],r=e[2].status===`fulfilled`?e[2].value.data?.requests??[]:[];return{event_registrations:t.filter(e=>e.status===`pending`).length,training_registrations:n.filter(e=>e.status===`pending`).length,training_requests:r.filter(e=>e.status===`pending`).length}},cc=async(e=5)=>{try{let{data:t}=await K.get(`/api/events.php`,{params:{limit:e}});return t?.success?(t.events??[]).slice(0,e):[]}catch{return[]}},lc=async(e=3)=>{try{let{data:t}=await K.get(`/api/announcements.php`,{params:{status:`published`,limit:e}});return t?.success?(t.data??[]).slice(0,e):[]}catch{return[]}};var uc=e=>Number(e).toLocaleString(`en-PH`,{maximumFractionDigits:0}),dc=e=>``+Number(e).toLocaleString(`en-PH`,{minimumFractionDigits:2,maximumFractionDigits:2});function fc(e){let t=Date.now()-new Date(e),n=Math.floor(t/6e4),r=Math.floor(t/36e5),i=Math.floor(t/864e5);return n<1?`just now`:n<60?`${n}m ago`:r<24?`${r}h ago`:i<7?`${i}d ago`:new Date(e).toLocaleDateString(`en-US`,{month:`short`,day:`numeric`})}function pc({icon:e,label:t,value:n,sub:r,color:i,to:a,loading:o}){let s=(0,H.jsxs)(`div`,{className:`db-stat`,style:{"--card-color":i},children:[(0,H.jsx)(`div`,{className:`db-stat__icon`,children:(0,H.jsx)(`i`,{className:e})}),(0,H.jsxs)(`div`,{className:`db-stat__body`,children:[(0,H.jsx)(`div`,{className:`db-stat__value`,children:o?(0,H.jsx)(`span`,{className:`db-skeleton db-skeleton--val`}):n}),(0,H.jsx)(`div`,{className:`db-stat__label`,children:t}),r&&(0,H.jsx)(`div`,{className:`db-stat__sub`,children:o?(0,H.jsx)(`span`,{className:`db-skeleton db-skeleton--sub`}):r})]}),a&&(0,H.jsx)(`div`,{className:`db-stat__arrow`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-right`})})]});return a?(0,H.jsx)(V,{to:a,className:`db-stat-link`,children:s}):s}function mc({count:e}){return e?(0,H.jsx)(`span`,{className:`db-alert-badge`,children:e>99?`99+`:e}):null}function hc({icon:e,label:t,count:n,to:r,color:i}){return(0,H.jsxs)(V,{to:r,className:`db-pending`,style:{"--card-color":i},children:[(0,H.jsx)(`div`,{className:`db-pending__icon`,children:(0,H.jsx)(`i`,{className:e})}),(0,H.jsxs)(`div`,{className:`db-pending__body`,children:[(0,H.jsx)(`div`,{className:`db-pending__count`,children:uc(n)}),(0,H.jsx)(`div`,{className:`db-pending__label`,children:t})]}),n>0&&(0,H.jsx)(`span`,{className:`db-pending__dot`}),(0,H.jsx)(`i`,{className:`fa-solid fa-arrow-right db-pending__arrow`})]})}function gc({type:e,units:t,max:n}){let r=n>0?Math.round(t/n*100):0,i=t===0?`#ef4444`:t<5?`#f59e0b`:`#10b981`;return(0,H.jsxs)(`div`,{className:`db-blood-row`,children:[(0,H.jsx)(`span`,{className:`db-blood-row__type`,children:e}),(0,H.jsx)(`div`,{className:`db-blood-row__track`,children:(0,H.jsx)(`div`,{className:`db-blood-row__fill`,style:{width:`${r}%`,background:i}})}),(0,H.jsxs)(`span`,{className:`db-blood-row__units`,style:{color:i},children:[t,`u`]})]})}function _c(){let[e,t]=(0,v.useState)(null),[n,r]=(0,v.useState)(null),[i,a]=(0,v.useState)([]),[o,s]=(0,v.useState)([]),[c,l]=(0,v.useState)(!0),[u,d]=(0,v.useState)(new Date),[f,p]=(0,v.useState)(`week`),m=(0,v.useCallback)(async()=>{l(!0);let[e,n,i,o]=await Promise.all([oc(),sc(),cc(5),lc(3)]);t(e),r(n),a(i),s(o),d(new Date),l(!1)},[]);(0,v.useEffect)(()=>{m()},[m]),(0,v.useEffect)(()=>{let e=setInterval(m,12e4);return()=>clearInterval(e)},[m]);let h=n?n.event_registrations+n.training_registrations+n.training_requests:0,g=e?.blood_bank?.by_blood_type??{},_=[`A+`,`A-`,`B+`,`B-`,`AB+`,`AB-`,`O+`,`O-`],y=Math.max(...Object.values(g).map(e=>typeof e==`object`?e.total??e.units??0:Number(e)),1),b=_.filter(e=>{let t=g[e],n=typeof t==`object`?t.total??t.units??0:Number(t??0);return n>0&&n<5});return(0,H.jsxs)(`div`,{className:`db-root`,children:[(0,H.jsxs)(`div`,{className:`db-header`,children:[(0,H.jsxs)(`div`,{className:`db-header__container`,children:[(0,H.jsxs)(`div`,{className:`db-header__content`,children:[(0,H.jsxs)(`div`,{className:`db-header__left`,children:[(0,H.jsxs)(`div`,{className:`db-header__badge`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-gauge-high`}),`Admin Dashboard`]}),(0,H.jsx)(`h1`,{className:`db-header__title`,children:`Welcome back, Admin`}),(0,H.jsx)(`p`,{className:`db-header__subtitle`,children:`Here's what's happening across your system today`})]}),(0,H.jsx)(`div`,{className:`db-header__right`,children:(0,H.jsxs)(`div`,{className:`db-header__stats`,children:[(0,H.jsxs)(`div`,{className:`db-header-stat`,children:[(0,H.jsx)(`span`,{className:`db-header-stat__value`,children:uc(e?.users?.total??0)}),(0,H.jsx)(`span`,{className:`db-header-stat__label`,children:`Total Users`})]}),(0,H.jsxs)(`div`,{className:`db-header-stat`,children:[(0,H.jsx)(`span`,{className:`db-header-stat__value`,children:uc(e?.events?.total??0)}),(0,H.jsx)(`span`,{className:`db-header-stat__label`,children:`Total Events`})]}),(0,H.jsxs)(`div`,{className:`db-header-stat`,children:[(0,H.jsx)(`span`,{className:`db-header-stat__value`,children:uc(e?.inventory?.total_items??0)}),(0,H.jsx)(`span`,{className:`db-header-stat__label`,children:`Inventory Items`})]})]})})]}),(0,H.jsxs)(`div`,{className:`db-header__meta`,children:[(0,H.jsxs)(`div`,{className:`db-header__refresh-info`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-clock`}),`Last updated `,fc(u)]}),(0,H.jsxs)(`div`,{className:`db-header__actions`,children:[(0,H.jsxs)(`select`,{className:`db-header__time-range`,value:f,onChange:e=>p(e.target.value),children:[(0,H.jsx)(`option`,{value:`today`,children:`Today`}),(0,H.jsx)(`option`,{value:`week`,children:`This Week`}),(0,H.jsx)(`option`,{value:`month`,children:`This Month`}),(0,H.jsx)(`option`,{value:`year`,children:`This Year`})]}),(0,H.jsxs)(`button`,{className:`db-header__refresh-btn`,onClick:m,disabled:c,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-rotate-right ${c?`fa-spin`:``}`}),`Refresh`]})]})]}),!c&&h>0&&(0,H.jsxs)(`div`,{className:`db-header__alert`,children:[(0,H.jsx)(`div`,{className:`db-header__alert-icon`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-triangle-exclamation`})}),(0,H.jsxs)(`div`,{className:`db-header__alert-content`,children:[(0,H.jsxs)(`strong`,{children:[h,` item`,h===1?``:`s`,` need your attention`]}),(0,H.jsxs)(`div`,{className:`db-header__alert-links`,children:[n.event_registrations>0&&(0,H.jsxs)(V,{to:`/admin/registrations`,children:[n.event_registrations,` event registration`,n.event_registrations===1?``:`s`]}),n.training_registrations>0&&(0,H.jsxs)(V,{to:`/admin/session-registrations`,children:[n.training_registrations,` training registration`,n.training_registrations===1?``:`s`]}),n.training_requests>0&&(0,H.jsxs)(V,{to:`/admin/training-requests`,children:[n.training_requests,` training request`,n.training_requests===1?``:`s`]})]})]})]}),!c&&b.length>0&&(0,H.jsxs)(`div`,{className:`db-header__alert db-header__alert--critical`,children:[(0,H.jsx)(`div`,{className:`db-header__alert-icon`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-droplet`})}),(0,H.jsxs)(`div`,{className:`db-header__alert-content`,children:[(0,H.jsx)(`strong`,{children:`Critical Blood Supply`}),(0,H.jsxs)(`div`,{className:`db-header__alert-links`,children:[`Low stock for `,b.join(`, `)]})]})]})]}),(0,H.jsx)(`div`,{className:`db-header__wave`,children:(0,H.jsx)(`svg`,{viewBox:`0 0 1440 120`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`,children:(0,H.jsx)(`path`,{d:`M0 120L60 105C120 90 240 60 360 45C480 30 600 30 720 37.5C840 45 960 60 1080 67.5C1200 75 1320 75 1380 75L1440 75V120H1380C1320 120 1200 120 1080 120C960 120 840 120 720 120C600 120 480 120 360 120C240 120 120 120 60 120H0Z`,fill:`white`,fillOpacity:`0.1`})})})]}),(0,H.jsxs)(`div`,{className:`db-body`,children:[(0,H.jsxs)(`section`,{className:`db-section`,children:[(0,H.jsxs)(`div`,{className:`db-section__head`,children:[(0,H.jsx)(`div`,{className:`db-section__head-icon`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-users`})}),(0,H.jsx)(`span`,{children:`People`})]}),(0,H.jsxs)(`div`,{className:`db-grid db-grid--4`,children:[(0,H.jsx)(pc,{icon:`fa-solid fa-users`,label:`Total Users`,value:uc(e?.users?.total??0),color:`#cc0000`,to:`/admin/users`,loading:c}),(0,H.jsx)(pc,{icon:`fa-solid fa-user-shield`,label:`Admins`,value:uc(e?.users?.admins??0),color:`#7c3aed`,to:`/admin/users`,loading:c}),(0,H.jsx)(pc,{icon:`fa-solid fa-hand-holding-heart`,label:`Volunteers`,value:uc(e?.volunteers?.total??0),color:`#0891b2`,to:`/admin/volunteers`,loading:c,sub:e?.volunteers?.by_status?.active?`${e.volunteers.by_status.active} active`:null}),(0,H.jsx)(pc,{icon:`fa-solid fa-user-plus`,label:`New This Week`,value:uc(e?.users?.new_this_week??0),color:`#059669`,loading:c})]})]}),(0,H.jsxs)(`section`,{className:`db-section`,children:[(0,H.jsxs)(`div`,{className:`db-section__head`,children:[(0,H.jsx)(`div`,{className:`db-section__head-icon`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-calendar-days`})}),(0,H.jsx)(`span`,{children:`Events & Training`})]}),(0,H.jsxs)(`div`,{className:`db-grid db-grid--4`,children:[(0,H.jsx)(pc,{icon:`fa-solid fa-calendar-days`,label:`Total Events`,value:uc(e?.events?.total??0),color:`#cc0000`,to:`/admin/events`,loading:c,sub:e?.events?.upcoming?`${e.events.upcoming} upcoming`:null}),(0,H.jsx)(pc,{icon:`fa-solid fa-clipboard-list`,label:`Event Registrations`,value:uc(e?.events?.total_registrations??0),color:`#b45309`,to:`/admin/registrations`,loading:c}),(0,H.jsx)(pc,{icon:`fa-solid fa-graduation-cap`,label:`Training Sessions`,value:uc(e?.training?.total??0),color:`#7c3aed`,to:`/admin/training`,loading:c,sub:e?.training?.upcoming?`${e.training.upcoming} upcoming`:null}),(0,H.jsx)(pc,{icon:`fa-solid fa-file-pen`,label:`Training Requests`,value:uc(e?.requests?.total??0),color:`#0891b2`,to:`/admin/training-requests`,loading:c,sub:(()=>{let t=e?.requests?.by_status?.find?.(e=>e.status===`pending`)?.count??0;return t>0?`${t} pending`:null})()})]})]}),(0,H.jsxs)(`section`,{className:`db-section`,children:[(0,H.jsxs)(`div`,{className:`db-section__head`,children:[(0,H.jsx)(`div`,{className:`db-section__head-icon`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-boxes-stacked`})}),(0,H.jsx)(`span`,{children:`Inventory & Commerce`})]}),(0,H.jsxs)(`div`,{className:`db-grid db-grid--4`,children:[(0,H.jsx)(pc,{icon:`fa-solid fa-box-open`,label:`Inventory Items`,value:uc(e?.inventory?.total_items??0),color:`#0891b2`,to:`/admin/inventory`,loading:c,sub:e?.inventory?.low_stock?`${e.inventory.low_stock} low stock`:`All stocked`}),(0,H.jsx)(pc,{icon:`fa-solid fa-sack-dollar`,label:`Inventory Value`,value:dc(e?.inventory?.total_value??0),color:`#059669`,to:`/admin/inventory`,loading:c}),(0,H.jsx)(pc,{icon:`fa-solid fa-store`,label:`Merchandise Items`,value:uc(e?.merchandise?.total??0),color:`#c2410c`,to:`/admin/merchandise`,loading:c,sub:e?.merchandise?.total_stock?`${e.merchandise.total_stock} units`:null}),(0,H.jsx)(pc,{icon:`fa-solid fa-tags`,label:`Merch Value`,value:dc(e?.merchandise?.total_value??0),color:`#7c3aed`,to:`/admin/merchandise`,loading:c})]})]}),(0,H.jsxs)(`div`,{className:`db-lower`,children:[(0,H.jsxs)(`div`,{className:`db-lower__left`,children:[(0,H.jsxs)(`div`,{className:`db-panel db-panel--blood`,children:[(0,H.jsxs)(`div`,{className:`db-panel__head`,children:[(0,H.jsxs)(`div`,{className:`db-panel__title`,children:[(0,H.jsx)(`div`,{className:`db-panel__title-icon`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-droplet`})}),`Blood Bank Inventory`]}),(0,H.jsxs)(V,{to:`/admin/blood-bank`,className:`db-panel__link`,children:[(0,H.jsx)(`span`,{children:`View all`}),(0,H.jsx)(`i`,{className:`fa-solid fa-arrow-right`})]})]}),(0,H.jsxs)(`div`,{className:`db-panel__body`,children:[(0,H.jsxs)(`div`,{className:`db-blood-summary`,children:[(0,H.jsxs)(`div`,{className:`db-blood-summary__item`,children:[(0,H.jsx)(`span`,{className:`db-blood-summary__num`,children:uc(e?.blood_bank?.total_units??0)}),(0,H.jsx)(`span`,{className:`db-blood-summary__label`,children:`Total Units`})]}),(0,H.jsxs)(`div`,{className:`db-blood-summary__item`,children:[(0,H.jsx)(`span`,{className:`db-blood-summary__num`,children:uc(e?.blood_bank?.total_locations??0)}),(0,H.jsx)(`span`,{className:`db-blood-summary__label`,children:`Locations`})]}),(0,H.jsxs)(`div`,{className:`db-blood-summary__item db-blood-summary__item--critical`,style:{background:e?.blood_bank?.critical_stock>0?`rgba(239, 68, 68, 0.1)`:void 0,borderColor:e?.blood_bank?.critical_stock>0?`rgba(239, 68, 68, 0.2)`:void 0},children:[(0,H.jsx)(`span`,{className:`db-blood-summary__num`,style:{color:e?.blood_bank?.critical_stock>0?`#ef4444`:`#10b981`},children:uc(e?.blood_bank?.critical_stock??0)}),(0,H.jsx)(`span`,{className:`db-blood-summary__label`,children:`Critical`})]})]}),(0,H.jsx)(`div`,{className:`db-blood-bars`,children:c?Array.from({length:8}).map((e,t)=>(0,H.jsxs)(`div`,{className:`db-blood-row`,children:[(0,H.jsx)(`span`,{className:`db-skeleton db-skeleton--type`}),(0,H.jsx)(`div`,{className:`db-blood-row__track`,children:(0,H.jsx)(`div`,{className:`db-skeleton`,style:{height:`100%`,width:`${30+Math.random()*60}%`}})}),(0,H.jsx)(`span`,{className:`db-skeleton db-skeleton--sub`})]},t)):_.map(e=>{let t=g[e];return(0,H.jsx)(gc,{type:e,units:typeof t==`object`?t.total??t.units??0:Number(t??0),max:y},e)})})]})]}),(0,H.jsxs)(`div`,{className:`db-panel db-panel--pending`,children:[(0,H.jsx)(`div`,{className:`db-panel__head`,children:(0,H.jsxs)(`div`,{className:`db-panel__title`,children:[(0,H.jsx)(`div`,{className:`db-panel__title-icon`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-clock`})}),`Needs Attention`,h>0&&(0,H.jsx)(mc,{count:h})]})}),(0,H.jsxs)(`div`,{className:`db-panel__body db-panel__body--pending`,children:[(0,H.jsx)(hc,{icon:`fa-solid fa-clipboard-list`,label:`Pending Event Registrations`,count:n?.event_registrations??0,to:`/admin/registrations`,color:`#cc0000`}),(0,H.jsx)(hc,{icon:`fa-solid fa-graduation-cap`,label:`Pending Training Registrations`,count:n?.training_registrations??0,to:`/admin/session-registrations`,color:`#7c3aed`}),(0,H.jsx)(hc,{icon:`fa-solid fa-file-pen`,label:`Pending Training Requests`,count:n?.training_requests??0,to:`/admin/training-requests`,color:`#0891b2`})]})]})]}),(0,H.jsxs)(`div`,{className:`db-lower__right`,children:[(0,H.jsxs)(`div`,{className:`db-panel db-panel--events`,children:[(0,H.jsxs)(`div`,{className:`db-panel__head`,children:[(0,H.jsxs)(`div`,{className:`db-panel__title`,children:[(0,H.jsx)(`div`,{className:`db-panel__title-icon`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-calendar-days`})}),`Recent Events`]}),(0,H.jsxs)(V,{to:`/admin/events`,className:`db-panel__link`,children:[(0,H.jsx)(`span`,{children:`View all`}),(0,H.jsx)(`i`,{className:`fa-solid fa-arrow-right`})]})]}),(0,H.jsx)(`div`,{className:`db-panel__body`,children:c?Array.from({length:4}).map((e,t)=>(0,H.jsxs)(`div`,{className:`db-event-row`,children:[(0,H.jsx)(`span`,{className:`db-skeleton db-skeleton--dot`}),(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`span`,{className:`db-skeleton db-skeleton--line`}),(0,H.jsx)(`span`,{className:`db-skeleton db-skeleton--sub`,style:{marginTop:4}})]})]},t)):i.length===0?(0,H.jsxs)(`div`,{className:`db-empty`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-calendar-xmark`}),(0,H.jsx)(`p`,{children:`No events yet`})]}):i.map(e=>{let t=new Date(e.event_end_date??e.event_date)<new Date,n=new Date(e.event_date)>=new Date;return(0,H.jsxs)(`div`,{className:`db-event-row`,children:[(0,H.jsx)(`div`,{className:`db-event-row__dot`,style:{background:t?`#6b7280`:n?`#10b981`:`#f59e0b`}}),(0,H.jsxs)(`div`,{className:`db-event-row__info`,children:[(0,H.jsx)(`div`,{className:`db-event-row__title`,children:e.event_name}),(0,H.jsxs)(`div`,{className:`db-event-row__meta`,children:[(0,H.jsxs)(`span`,{children:[(0,H.jsx)(`i`,{className:`fa-regular fa-calendar`}),new Date(e.event_date).toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,year:`numeric`})]}),e.total_registrations>0&&(0,H.jsxs)(`span`,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-user-check`}),e.approved_count,`/`,e.total_registrations,` `,`registered`]}),(0,H.jsx)(`span`,{className:`db-event-row__status`,style:{color:t?`#6b7280`:n?`#10b981`:`#f59e0b`},children:t?`Completed`:n?`Upcoming`:`Ongoing`})]})]})]},e.event_id)})})]}),(0,H.jsxs)(`div`,{className:`db-panel db-panel--announcements`,children:[(0,H.jsxs)(`div`,{className:`db-panel__head`,children:[(0,H.jsxs)(`div`,{className:`db-panel__title`,children:[(0,H.jsx)(`div`,{className:`db-panel__title-icon`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-bullhorn`})}),`Recent Announcements`]}),(0,H.jsxs)(V,{to:`/admin/announcements`,className:`db-panel__link`,children:[(0,H.jsx)(`span`,{children:`View all`}),(0,H.jsx)(`i`,{className:`fa-solid fa-arrow-right`})]})]}),(0,H.jsx)(`div`,{className:`db-panel__body`,children:c?Array.from({length:3}).map((e,t)=>(0,H.jsxs)(`div`,{className:`db-ann-row`,children:[(0,H.jsx)(`span`,{className:`db-skeleton db-skeleton--icon`}),(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`span`,{className:`db-skeleton db-skeleton--line`}),(0,H.jsx)(`span`,{className:`db-skeleton db-skeleton--sub`,style:{marginTop:4}})]})]},t)):o.length===0?(0,H.jsxs)(`div`,{className:`db-empty`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-bell-slash`}),(0,H.jsx)(`p`,{children:`No announcements yet`})]}):o.map(e=>(0,H.jsxs)(`div`,{className:`db-ann-row`,children:[(0,H.jsx)(`div`,{className:`db-ann-row__icon`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-bullhorn`})}),(0,H.jsxs)(`div`,{className:`db-ann-row__info`,children:[(0,H.jsx)(`div`,{className:`db-ann-row__title`,children:e.title}),(0,H.jsxs)(`div`,{className:`db-ann-row__meta`,children:[(0,H.jsxs)(`span`,{children:[(0,H.jsx)(`i`,{className:`fa-regular fa-clock`}),fc(e.posted_at)]}),(0,H.jsx)(`span`,{className:`db-ann-row__target`,style:{color:e.target_role===`all`?`#cc0000`:`#7c3aed`},children:e.target_role===`all`?`All users`:e.target_role===`rcy_member`?`RCY Members`:e.target_role})]})]})]},e.announcement_id))})]}),(0,H.jsxs)(`div`,{className:`db-panel db-panel--quick`,children:[(0,H.jsx)(`div`,{className:`db-panel__head`,children:(0,H.jsxs)(`div`,{className:`db-panel__title`,children:[(0,H.jsx)(`div`,{className:`db-panel__title-icon`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-bolt`})}),`Quick Actions`]})}),(0,H.jsx)(`div`,{className:`db-panel__body db-quicklinks`,children:[{to:`/admin/events/new`,icon:`fa-solid fa-calendar-plus`,label:`New Event`,color:`#cc0000`},{to:`/admin/training/new`,icon:`fa-solid fa-chalkboard-user`,label:`New Training`,color:`#7c3aed`},{to:`/admin/announcements/new`,icon:`fa-solid fa-bullhorn`,label:`New Announcement`,color:`#f59e0b`},{to:`/admin/users`,icon:`fa-solid fa-user-plus`,label:`Manage Users`,color:`#0891b2`},{to:`/admin/inventory`,icon:`fa-solid fa-box-open`,label:`View Inventory`,color:`#059669`},{to:`/admin/blood-bank`,icon:`fa-solid fa-droplet`,label:`Blood Bank`,color:`#dc2626`}].map(({to:e,icon:t,label:n,color:r})=>(0,H.jsxs)(V,{to:e,className:`db-quicklink`,style:{"--ql-color":r},children:[(0,H.jsx)(`i`,{className:t}),(0,H.jsx)(`span`,{children:n})]},e))})]})]})]})]})]})}var vc=[{key:`All Services`,label:`All Services`,color:`#8b1e1e`,icon:`fa-calendar`},{key:`Health Service`,label:`Health Service`,color:`#c41e3a`,icon:`fa-heart-pulse`},{key:`Safety Service`,label:`Safety Service`,color:`#15803d`,icon:`fa-shield`},{key:`Welfare Service`,label:`Welfare Service`,color:`#7c3aed`,icon:`fa-hand-holding-heart`},{key:`Disaster Management Service`,label:`Disaster Management`,color:`#c2410c`,icon:`fa-triangle-exclamation`},{key:`Red Cross Youth`,label:`Red Cross Youth`,color:`#003d6b`,icon:`fa-people-group`}],yc={title:``,description:``,major_service:``,event_date:``,event_end_date:``,start_time:`09:00`,end_time:`17:00`,location:``,capacity:0,fee:0};function bc({service:e}){let t=vc.find(t=>t.key===e)||{label:e,color:`#6b7280`,icon:`fa-tag`};return(0,H.jsxs)(`span`,{className:`ae-badge ae-badge--service`,style:{background:`${t.color}12`,color:t.color,border:`1px solid ${t.color}25`},children:[(0,H.jsx)(`i`,{className:`fas ${t.icon}`}),t.label]})}function xc({isPast:e,isUpcoming:t}){let n=`Ongoing`,r=`#f59e0b`,i=`#fef3c7`,a=`fa-clock`;return e?(n=`Completed`,r=`#10b981`,i=`#d1fae5`,a=`fa-check-circle`):t&&(n=`Upcoming`,r=`#3b82f6`,i=`#dbeafe`,a=`fa-calendar`),(0,H.jsxs)(`span`,{className:`ae-badge`,style:{background:i,color:r,border:`1px solid ${r}33`},children:[(0,H.jsx)(`i`,{className:`fas ${a}`}),` `,n]})}function Sc({fee:e}){return e>0?(0,H.jsxs)(`span`,{className:`ae-fee`,children:[``,parseFloat(e).toFixed(2)]}):(0,H.jsxs)(`span`,{className:`ae-badge ae-badge--free`,style:{background:`#10b98112`,color:`#10b981`,border:`1px solid #10b98125`},children:[(0,H.jsx)(`i`,{className:`fas fa-gift`}),` FREE`]})}function Cc({message:e,type:t,onClose:n}){return(0,v.useEffect)(()=>{let e=setTimeout(n,3500);return()=>clearTimeout(e)},[n]),(0,H.jsxs)(`div`,{className:`ae-toast ae-toast--${t}`,onClick:n,children:[(0,H.jsx)(`div`,{className:`ae-toast__icon`,children:(0,H.jsx)(`i`,{className:`fas ${t===`success`?`fa-circle-check`:`fa-circle-xmark`}`})}),(0,H.jsxs)(`div`,{className:`ae-toast__content`,children:[(0,H.jsx)(`div`,{className:`ae-toast__title`,children:t===`success`?`Success`:`Error`}),(0,H.jsx)(`div`,{className:`ae-toast__message`,children:e})]}),(0,H.jsx)(`button`,{className:`ae-toast__close`,onClick:n,children:(0,H.jsx)(`i`,{className:`fas fa-xmark`})})]})}function wc({event:e,onClose:t,onSaved:n}){let[r,i]=(0,v.useState)(e||{...yc}),[a,o]=(0,v.useState)(!1),[s,c]=(0,v.useState)({}),l=!!e;function u(e,t){i(n=>({...n,[e]:t})),c(t=>({...t,[e]:void 0}))}function d(){let e={};return r.title?.trim()||(e.title=`Title is required`),r.major_service||(e.major_service=`Service is required`),r.event_date||(e.event_date=`Start date is required`),r.location?.trim()||(e.location=`Location is required`),e}async function f(t){t.preventDefault();let i=d();if(Object.keys(i).length){c(i);return}o(!0);try{let t={...r};t.event_end_date||=t.event_date,n((l?await Za(e.event_id,t):await Xa(t)).message||`Event saved successfully`)}catch(e){c({_global:e.message||`Failed to save event`})}finally{o(!1)}}return(0,H.jsx)(`div`,{className:`ae-overlay`,onClick:t,children:(0,H.jsxs)(`div`,{className:`ae-modal ae-modal--lg`,onClick:e=>e.stopPropagation(),children:[(0,H.jsxs)(`div`,{className:`ae-modal__header`,children:[(0,H.jsxs)(`div`,{className:`ae-modal__title`,children:[(0,H.jsx)(`i`,{className:`fas ${l?`fa-pen-to-square`:`fa-plus-circle`}`}),l?` Edit Event`:` Create New Event`]}),(0,H.jsx)(`button`,{className:`ae-modal__close`,onClick:t,children:(0,H.jsx)(`i`,{className:`fas fa-xmark`})})]}),(0,H.jsxs)(`form`,{className:`ae-modal__body`,onSubmit:f,children:[s._global&&(0,H.jsxs)(`div`,{className:`ae-form__error-banner`,children:[(0,H.jsx)(`i`,{className:`fas fa-circle-exclamation`}),` `,s._global]}),(0,H.jsxs)(`div`,{className:`ae-form__field`,children:[(0,H.jsxs)(`label`,{className:`ae-form__label`,children:[`Event Title `,(0,H.jsx)(`span`,{className:`ae-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{className:`ae-form__input${s.title?` ae-form__input--error`:``}`,value:r.title,onChange:e=>u(`title`,e.target.value),placeholder:`Enter event title`}),s.title&&(0,H.jsxs)(`span`,{className:`ae-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fas fa-circle-exclamation`}),` `,s.title]})]}),(0,H.jsxs)(`div`,{className:`ae-form__field`,children:[(0,H.jsx)(`label`,{className:`ae-form__label`,children:`Description`}),(0,H.jsx)(`textarea`,{className:`ae-form__textarea`,rows:4,value:r.description,onChange:e=>u(`description`,e.target.value),placeholder:`Enter event description, agenda, and important details`})]}),(0,H.jsxs)(`div`,{className:`ae-form__field`,children:[(0,H.jsxs)(`label`,{className:`ae-form__label`,children:[`Major Service `,(0,H.jsx)(`span`,{className:`ae-form__required`,children:`*`})]}),(0,H.jsxs)(`select`,{className:`ae-form__select${s.major_service?` ae-form__select--error`:``}`,value:r.major_service,onChange:e=>u(`major_service`,e.target.value),children:[(0,H.jsx)(`option`,{value:``,children:`Select a service`}),vc.filter(e=>e.key!==`All Services`).map(e=>(0,H.jsx)(`option`,{value:e.key,children:e.label},e.key))]}),s.major_service&&(0,H.jsxs)(`span`,{className:`ae-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fas fa-circle-exclamation`}),` `,s.major_service]})]}),(0,H.jsxs)(`div`,{className:`ae-form__row`,children:[(0,H.jsxs)(`div`,{className:`ae-form__field`,children:[(0,H.jsxs)(`label`,{className:`ae-form__label`,children:[`Start Date `,(0,H.jsx)(`span`,{className:`ae-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`date`,className:`ae-form__input${s.event_date?` ae-form__input--error`:``}`,value:r.event_date,onChange:e=>u(`event_date`,e.target.value)}),s.event_date&&(0,H.jsxs)(`span`,{className:`ae-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fas fa-circle-exclamation`}),` `,s.event_date]})]}),(0,H.jsxs)(`div`,{className:`ae-form__field`,children:[(0,H.jsx)(`label`,{className:`ae-form__label`,children:`End Date`}),(0,H.jsx)(`input`,{type:`date`,className:`ae-form__input`,value:r.event_end_date||r.event_date,onChange:e=>u(`event_end_date`,e.target.value)}),(0,H.jsxs)(`small`,{className:`ae-form__hint`,children:[(0,H.jsx)(`i`,{className:`fas fa-info-circle`}),` Leave blank for single day`]})]})]}),(0,H.jsxs)(`div`,{className:`ae-form__row`,children:[(0,H.jsxs)(`div`,{className:`ae-form__field`,children:[(0,H.jsx)(`label`,{className:`ae-form__label`,children:`Start Time`}),(0,H.jsx)(`input`,{type:`time`,className:`ae-form__input`,value:r.start_time,onChange:e=>u(`start_time`,e.target.value)})]}),(0,H.jsxs)(`div`,{className:`ae-form__field`,children:[(0,H.jsx)(`label`,{className:`ae-form__label`,children:`End Time`}),(0,H.jsx)(`input`,{type:`time`,className:`ae-form__input`,value:r.end_time,onChange:e=>u(`end_time`,e.target.value)})]})]}),(0,H.jsxs)(`div`,{className:`ae-form__field`,children:[(0,H.jsxs)(`label`,{className:`ae-form__label`,children:[`Event Location & Directions`,` `,(0,H.jsx)(`span`,{className:`ae-form__required`,children:`*`})]}),(0,H.jsx)(`textarea`,{className:`ae-form__textarea${s.location?` ae-form__textarea--error`:``}`,rows:3,value:r.location,onChange:e=>u(`location`,e.target.value),placeholder:`Full address, venue name, and travel instructions`}),s.location&&(0,H.jsxs)(`span`,{className:`ae-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fas fa-circle-exclamation`}),` `,s.location]})]}),(0,H.jsxs)(`div`,{className:`ae-form__row`,children:[(0,H.jsxs)(`div`,{className:`ae-form__field`,children:[(0,H.jsx)(`label`,{className:`ae-form__label`,children:`Capacity`}),(0,H.jsx)(`input`,{type:`number`,className:`ae-form__input`,value:r.capacity,onChange:e=>u(`capacity`,e.target.value),min:`0`,placeholder:`0 for unlimited`}),(0,H.jsxs)(`small`,{className:`ae-form__hint`,children:[(0,H.jsx)(`i`,{className:`fas fa-info-circle`}),` Maximum participants (0 = unlimited)`]})]}),(0,H.jsxs)(`div`,{className:`ae-form__field`,children:[(0,H.jsx)(`label`,{className:`ae-form__label`,children:`Fee ()`}),(0,H.jsx)(`input`,{type:`number`,step:`0.01`,className:`ae-form__input`,value:r.fee,onChange:e=>u(`fee`,e.target.value),min:`0`,placeholder:`0.00 for free`})]})]}),(0,H.jsx)(`button`,{type:`submit`,disabled:a,className:`ae-form__submit`,children:a?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fas fa-spinner fa-spin`}),` Saving Event...`]}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fas fa-save`}),` `,l?`Update Event`:`Create Event`]})})]})]})})}function Tc({event:e,onClose:t,onUpdate:n}){let[r,i]=(0,v.useState)([]),[a,o]=(0,v.useState)(!0),[s,c]=(0,v.useState)({total:0,approved:0,pending:0,rejected:0}),l=(0,v.useCallback)(async()=>{try{let{registrations:t}=await eo(e.event_id);i(t);let n=t.length,r=t.filter(e=>e.status===`approved`).length,a=t.filter(e=>e.status===`pending`).length,o=t.filter(e=>e.status===`rejected`).length;c({total:n,approved:r,pending:a,rejected:o})}catch(e){console.error(`Load registrations error:`,e)}finally{o(!1)}},[e.event_id]);(0,v.useEffect)(()=>{l()},[l]);async function u(e){try{await ro(e),l(),n?.()}catch(e){alert(e.message)}}async function d(e){try{await io(e),l(),n?.()}catch(e){alert(e.message)}}async function f(e){if(window.confirm(`Are you sure you want to delete this registration?`))try{await ao(e),l(),n?.()}catch(e){alert(e.message)}}function p(e){return e.split(` `).map(e=>e[0]).join(``).toUpperCase().slice(0,2)}return(0,H.jsx)(`div`,{className:`ae-overlay`,onClick:t,children:(0,H.jsxs)(`div`,{className:`ae-modal ae-modal--xl`,onClick:e=>e.stopPropagation(),children:[(0,H.jsxs)(`div`,{className:`ae-modal__header`,children:[(0,H.jsxs)(`div`,{className:`ae-modal__title`,children:[(0,H.jsx)(`i`,{className:`fas fa-users`}),` Registrations `,` `,(0,H.jsx)(`strong`,{children:e.title})]}),(0,H.jsx)(`button`,{className:`ae-modal__close`,onClick:t,children:(0,H.jsx)(`i`,{className:`fas fa-xmark`})})]}),(0,H.jsxs)(`div`,{className:`ae-modal__body ae-modal__body--regs`,children:[(0,H.jsxs)(`div`,{className:`ae-reg-stats`,children:[(0,H.jsxs)(`div`,{className:`ae-reg-stat`,children:[(0,H.jsx)(`div`,{className:`ae-reg-stat__num`,children:s.total}),(0,H.jsx)(`div`,{className:`ae-reg-stat__label`,children:`Total Registrations`})]}),(0,H.jsxs)(`div`,{className:`ae-reg-stat ae-reg-stat--approved`,children:[(0,H.jsx)(`div`,{className:`ae-reg-stat__num`,children:s.approved}),(0,H.jsx)(`div`,{className:`ae-reg-stat__label`,children:`Approved`})]}),(0,H.jsxs)(`div`,{className:`ae-reg-stat ae-reg-stat--pending`,children:[(0,H.jsx)(`div`,{className:`ae-reg-stat__num`,children:s.pending}),(0,H.jsx)(`div`,{className:`ae-reg-stat__label`,children:`Pending`})]}),(0,H.jsxs)(`div`,{className:`ae-reg-stat ae-reg-stat--rejected`,children:[(0,H.jsx)(`div`,{className:`ae-reg-stat__num`,children:s.rejected}),(0,H.jsx)(`div`,{className:`ae-reg-stat__label`,children:`Rejected`})]})]}),a?(0,H.jsxs)(`div`,{className:`ae-reg-loading`,children:[(0,H.jsx)(`div`,{className:`ae-reg-loading__spinner`,children:(0,H.jsx)(`i`,{className:`fas fa-spinner fa-spin`})}),(0,H.jsx)(`p`,{children:`Loading registrations...`}),(0,H.jsx)(`span`,{className:`ae-reg-loading__sub`,children:`Fetching participant data`})]}):r.length===0?(0,H.jsxs)(`div`,{className:`ae-reg-empty`,children:[(0,H.jsx)(`div`,{className:`ae-reg-empty__icon`,children:(0,H.jsx)(`i`,{className:`fas fa-inbox`})}),(0,H.jsx)(`h3`,{className:`ae-reg-empty__title`,children:`No Registrations Yet`}),(0,H.jsx)(`p`,{className:`ae-reg-empty__message`,children:`No participants have registered for this event`})]}):(0,H.jsx)(`div`,{className:`ae-reg-table-container`,children:(0,H.jsxs)(`table`,{className:`ae-reg-table`,children:[(0,H.jsx)(`thead`,{children:(0,H.jsxs)(`tr`,{children:[(0,H.jsx)(`th`,{children:`PARTICIPANT`}),(0,H.jsx)(`th`,{children:`REGISTRATION DATE`}),(0,H.jsx)(`th`,{children:`STATUS`}),(0,H.jsx)(`th`,{children:`DOCUMENTS`}),(0,H.jsx)(`th`,{children:`ACTIONS`})]})}),(0,H.jsx)(`tbody`,{children:r.map(e=>{let t=`#c41e3a`;return(0,H.jsxs)(`tr`,{className:`ae-reg-row`,children:[(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`ae-reg-user`,children:[(0,H.jsx)(`div`,{className:`ae-reg-user__avatar`,style:{background:`${t}12`,color:t,border:`2px solid ${t}25`},children:p(e.full_name)}),(0,H.jsxs)(`div`,{className:`ae-reg-user__info`,children:[(0,H.jsx)(`div`,{className:`ae-reg-user__name`,children:e.full_name}),(0,H.jsx)(`div`,{className:`ae-reg-user__email`,children:e.email}),e.age&&(0,H.jsxs)(`div`,{className:`ae-reg-user__meta`,children:[(0,H.jsx)(`i`,{className:`fas fa-cake-candles`}),` Age:`,` `,e.age]}),e.location&&(0,H.jsxs)(`div`,{className:`ae-reg-user__meta`,children:[(0,H.jsx)(`i`,{className:`fas fa-location-dot`}),` `,e.location]})]})]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`ae-reg-date`,children:[(0,H.jsx)(`div`,{className:`ae-reg-date__main`,children:new Date(e.registration_date).toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,year:`numeric`})}),(0,H.jsx)(`div`,{className:`ae-reg-date__time`,children:new Date(e.registration_date).toLocaleTimeString(`en-US`,{hour:`2-digit`,minute:`2-digit`})})]})}),(0,H.jsx)(`td`,{children:(0,H.jsx)(`span`,{className:`ae-status ae-status--${e.status}`,children:e.status.toUpperCase()})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`ae-reg-docs`,children:[e.valid_id_path&&(0,H.jsxs)(`a`,{href:`http://localhost/prc-management-system/${e.valid_id_path}`,target:`_blank`,rel:`noreferrer`,className:`ae-doc-link`,children:[(0,H.jsx)(`i`,{className:`fas fa-id-card`}),` Valid ID`]}),e.documents_path&&(0,H.jsxs)(`a`,{href:`http://localhost/prc-management-system/${e.documents_path}`,target:`_blank`,rel:`noreferrer`,className:`ae-doc-link`,children:[(0,H.jsx)(`i`,{className:`fas fa-file-alt`}),` Documents`]}),e.payment_receipt_path&&(0,H.jsxs)(`a`,{href:`http://localhost/prc-management-system/${e.payment_receipt_path}`,target:`_blank`,rel:`noreferrer`,className:`ae-doc-link`,children:[(0,H.jsx)(`i`,{className:`fas fa-receipt`}),` Receipt`]})]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`ae-reg-actions`,children:[e.status===`pending`&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`button`,{className:`ae-reg-btn ae-reg-btn--approve`,onClick:()=>u(e.registration_id),title:`Approve Registration`,children:(0,H.jsx)(`i`,{className:`fas fa-check`})}),(0,H.jsx)(`button`,{className:`ae-reg-btn ae-reg-btn--reject`,onClick:()=>d(e.registration_id),title:`Reject Registration`,children:(0,H.jsx)(`i`,{className:`fas fa-times`})})]}),(0,H.jsx)(`button`,{className:`ae-reg-btn ae-reg-btn--delete`,onClick:()=>f(e.registration_id),title:`Delete Registration`,children:(0,H.jsx)(`i`,{className:`fas fa-trash`})})]})})]},e.registration_id)})})]})})]})]})})}function Ec(){Qe();let[e,t]=(0,v.useState)([]),[n,r]=(0,v.useState)(null),[i,a]=(0,v.useState)(!0),[o,s]=(0,v.useState)(`all`),[c,l]=(0,v.useState)(``),[u,d]=(0,v.useState)(`All Services`),[f,p]=(0,v.useState)(null),[m,h]=(0,v.useState)(null),[g,_]=(0,v.useState)(!1),[y,b]=(0,v.useState)(null),[x,S]=(0,v.useState)(null),C=(e,t=`success`)=>b({msg:e,type:t}),w=(0,v.useCallback)(async()=>{try{let{stats:e}=await Ya();r(e)}catch(e){console.error(`Stats error:`,e)}},[]);(0,v.useEffect)(()=>{w()},[w]);let T=(0,v.useCallback)(async()=>{a(!0);try{let{events:e}=await Ja({filter:o,search:c,service:u});t(e)}catch(e){console.error(`Fetch events error:`,e),C(e.message||`Failed to load events`,`error`),t([])}finally{a(!1)}},[o,c,u]);(0,v.useEffect)(()=>{T()},[T]);async function E(e){if(window.confirm(`Are you sure you want to archive "${e.title}"?`))try{C((await Qa(e.event_id)).message||`Event archived successfully`),T(),w()}catch(e){C(e.message||`Failed to archive event`,`error`)}}function D(e){C(e),p(null),_(!1),T(),w()}let O=n?.total??e.length,ee=n?.upcoming??0,k=n?.completed??0,te=n?.services||[],A=()=>{let e=0;return o!==`all`&&e++,c&&e++,u!==`All Services`&&e++,e},ne=()=>{s(`all`),l(``),d(`All Services`)};return(0,H.jsxs)(`div`,{className:`ae-root`,children:[(0,H.jsxs)(`div`,{className:`ae-header`,children:[(0,H.jsx)(`div`,{className:`ae-header__container`,children:(0,H.jsxs)(`div`,{className:`ae-header__content`,children:[(0,H.jsxs)(`div`,{className:`ae-header__left`,children:[(0,H.jsxs)(`div`,{className:`ae-header__badge`,children:[(0,H.jsx)(`i`,{className:`fas fa-calendar-alt`}),` Event Management`]}),(0,H.jsx)(`h1`,{className:`ae-header__title`,children:`Events Administration`}),(0,H.jsx)(`p`,{className:`ae-header__subtitle`,children:`Create, manage, and track events and participant registrations`})]}),(0,H.jsxs)(`div`,{className:`ae-header__stats`,children:[(0,H.jsxs)(`div`,{className:`ae-header-stat`,children:[(0,H.jsx)(`span`,{className:`ae-header-stat__value`,children:O}),(0,H.jsx)(`span`,{className:`ae-header-stat__label`,children:`Total Events`})]}),(0,H.jsxs)(`div`,{className:`ae-header-stat`,children:[(0,H.jsx)(`span`,{className:`ae-header-stat__value`,children:ee}),(0,H.jsx)(`span`,{className:`ae-header-stat__label`,children:`Upcoming`})]}),(0,H.jsxs)(`div`,{className:`ae-header-stat`,children:[(0,H.jsx)(`span`,{className:`ae-header-stat__value`,children:k}),(0,H.jsx)(`span`,{className:`ae-header-stat__label`,children:`Completed`})]})]})]})}),(0,H.jsx)(`div`,{className:`ae-header__wave`,children:(0,H.jsx)(`svg`,{viewBox:`0 0 1440 120`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`,children:(0,H.jsx)(`path`,{d:`M0 120L60 105C120 90 240 60 360 45C480 30 600 30 720 37.5C840 45 960 60 1080 67.5C1200 75 1320 75 1380 75L1440 75V120H1380C1320 120 1200 120 1080 120C960 120 840 120 720 120C600 120 480 120 360 120C240 120 120 120 60 120H0Z`,fill:`white`,fillOpacity:`0.1`})})})]}),(0,H.jsxs)(`div`,{className:`ae-body`,children:[(0,H.jsx)(`div`,{className:`ae-services`,children:vc.map(e=>{let t=e.key===`All Services`?O:te.find(t=>t.major_service===e.key)?.count||0,n=u===e.key;return(0,H.jsxs)(`button`,{className:`ae-service-card ${n?`ae-service-card--active`:``}`,style:{borderColor:e.color,background:n?`${e.color}08`:`white`},onClick:()=>d(e.key),children:[(0,H.jsx)(`i`,{className:`fas ${e.icon}`,style:{color:e.color,fontSize:`1.5rem`,marginBottom:`0.5rem`}}),(0,H.jsx)(`div`,{className:`ae-service-card__count`,style:{color:e.color},children:t}),(0,H.jsx)(`div`,{className:`ae-service-card__label`,children:e.label})]},e.key)})}),(0,H.jsxs)(`div`,{className:`ae-toolbar`,children:[(0,H.jsxs)(`div`,{className:`ae-toolbar__search`,children:[(0,H.jsx)(`i`,{className:`fas fa-search ae-toolbar__search-icon`}),(0,H.jsx)(`input`,{className:`ae-toolbar__search-input`,value:c,onChange:e=>l(e.target.value),placeholder:`Search events by title or location...`}),c&&(0,H.jsx)(`button`,{className:`ae-toolbar__search-clear`,onClick:()=>l(``),children:(0,H.jsx)(`i`,{className:`fas fa-times`})})]}),(0,H.jsxs)(`div`,{className:`ae-toolbar__filters`,children:[[{key:`all`,label:`All Events`,color:`#6b7280`},{key:`upcoming`,label:`Upcoming`,color:`#3b82f6`},{key:`past`,label:`Past Events`,color:`#9ca3af`}].map(({key:e,label:t,color:n})=>(0,H.jsx)(`button`,{className:`ae-toolbar__filter-btn ${o===e?`ae-toolbar__filter-btn--active`:``}`,onClick:()=>s(e),style:o===e?{background:`${n}12`,color:n,borderColor:n}:{},children:t},e)),A()>0&&(0,H.jsxs)(`button`,{className:`ae-toolbar__filter-clear`,onClick:ne,children:[(0,H.jsx)(`i`,{className:`fas fa-times`}),`Clear Filters (`,A(),`)`]})]}),(0,H.jsxs)(`button`,{className:`ae-toolbar__create-btn`,onClick:()=>_(!0),children:[(0,H.jsx)(`i`,{className:`fas fa-plus`}),` Create Event`]})]}),(0,H.jsxs)(`div`,{className:`ae-table-panel`,children:[(0,H.jsxs)(`div`,{className:`ae-table-panel__head`,children:[(0,H.jsxs)(`div`,{className:`ae-table-panel__title`,children:[(0,H.jsx)(`i`,{className:`fas fa-calendar-alt`}),` Events`]}),(0,H.jsx)(`div`,{className:`ae-table-panel__info`,children:!i&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(`span`,{className:`ae-table-panel__count`,children:[e.length,` event`,e.length===1?``:`s`]}),(0,H.jsx)(`span`,{className:`ae-table-panel__divider`,children:``}),(0,H.jsxs)(`span`,{className:`ae-table-panel__sub`,children:[`Page 1 of `,Math.ceil(e.length/10)||1]})]})})]}),(0,H.jsx)(`div`,{className:`ae-table-panel__scroll`,children:(0,H.jsxs)(`table`,{className:`ae-table`,children:[(0,H.jsx)(`thead`,{children:(0,H.jsxs)(`tr`,{children:[(0,H.jsx)(`th`,{children:`EVENT DETAILS`}),(0,H.jsx)(`th`,{children:`SERVICE`}),(0,H.jsx)(`th`,{children:`DATE & TIME`}),(0,H.jsx)(`th`,{children:`LOCATION`}),(0,H.jsx)(`th`,{children:`FEE`}),(0,H.jsx)(`th`,{children:`REGISTRATIONS`}),(0,H.jsx)(`th`,{children:`STATUS`}),(0,H.jsx)(`th`,{children:`ACTIONS`})]})}),(0,H.jsx)(`tbody`,{children:i?(0,H.jsx)(`tr`,{children:(0,H.jsx)(`td`,{colSpan:8,children:(0,H.jsxs)(`div`,{className:`ae-table__loading`,children:[(0,H.jsx)(`div`,{className:`ae-table__loading-spinner`,children:(0,H.jsx)(`i`,{className:`fas fa-spinner fa-spin`})}),(0,H.jsx)(`p`,{children:`Loading events...`}),(0,H.jsx)(`span`,{className:`ae-table__loading-sub`,children:`Fetching event data`})]})})}):e.length===0?(0,H.jsx)(`tr`,{children:(0,H.jsx)(`td`,{colSpan:8,children:(0,H.jsxs)(`div`,{className:`ae-table__empty`,children:[(0,H.jsx)(`div`,{className:`ae-table__empty-icon`,children:(0,H.jsx)(`i`,{className:`fas fa-calendar-xmark`})}),(0,H.jsx)(`h3`,{className:`ae-table__empty-title`,children:`No Events Found`}),(0,H.jsx)(`p`,{className:`ae-table__empty-message`,children:c||o!==`all`||u!==`All Services`?`Try adjusting your search or filter criteria`:`Get started by creating your first event`}),(c||o!==`all`||u!==`All Services`)&&(0,H.jsxs)(`button`,{className:`ae-table__empty-action`,onClick:ne,children:[(0,H.jsx)(`i`,{className:`fas fa-times`}),` Clear Filters`]})]})})}):e.map(e=>{let t=vc.find(t=>t.key===e.major_service)?.color||`#6b7280`;return(0,H.jsxs)(`tr`,{onMouseEnter:()=>S(e.event_id),onMouseLeave:()=>S(null),className:x===e.event_id?`ae-table__row--hovered`:``,children:[(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`ae-event-cell`,children:[(0,H.jsx)(`div`,{className:`ae-event-cell__title`,children:e.title}),(0,H.jsxs)(`div`,{className:`ae-event-cell__id`,children:[(0,H.jsx)(`i`,{className:`fas fa-hashtag`}),` ID: #`,e.event_id]})]})}),(0,H.jsx)(`td`,{children:(0,H.jsx)(bc,{service:e.major_service})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`ae-date`,children:[(0,H.jsx)(`div`,{className:`ae-date__main`,children:new Date(e.event_date).toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,year:`numeric`})}),e.event_end_date&&e.event_end_date!==e.event_date&&(0,H.jsxs)(`div`,{className:`ae-date__end`,children:[(0,H.jsx)(`i`,{className:`fas fa-arrow-right`}),new Date(e.event_end_date).toLocaleDateString(`en-US`,{month:`short`,day:`numeric`})]}),(0,H.jsxs)(`div`,{className:`ae-date__time`,children:[(0,H.jsx)(`i`,{className:`fas fa-clock`}),e.start_time?.slice(0,5),` -`,` `,e.end_time?.slice(0,5)]})]})}),(0,H.jsx)(`td`,{style:{maxWidth:200},children:(0,H.jsxs)(`div`,{className:`ae-location`,title:e.location,children:[(0,H.jsx)(`i`,{className:`fas fa-map-marker-alt`,style:{color:t}}),e.location?.split(`
`)[0]]})}),(0,H.jsx)(`td`,{children:(0,H.jsx)(Sc,{fee:e.fee})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`ae-regs`,children:[(0,H.jsxs)(`span`,{className:`ae-regs__count`,children:[e.approved_count,`/`,e.capacity>0?e.capacity:``]}),e.pending_count>0&&(0,H.jsxs)(`span`,{className:`ae-regs__pending`,children:[(0,H.jsx)(`i`,{className:`fas fa-clock`}),e.pending_count,` pending`]})]})}),(0,H.jsx)(`td`,{children:(0,H.jsx)(xc,{isPast:e.is_past,isUpcoming:e.is_upcoming})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`ae-actions`,children:[(0,H.jsx)(`button`,{title:`View Registrations`,className:`ae-action-btn ae-action-btn--view`,onClick:()=>h(e),style:{background:`${t}12`,color:t,borderColor:`${t}25`},children:(0,H.jsx)(`i`,{className:`fas fa-users`})}),(0,H.jsx)(`button`,{title:`Edit Event`,className:`ae-action-btn ae-action-btn--edit`,onClick:()=>p(e),style:{background:`#3b82f612`,color:`#3b82f6`,borderColor:`#3b82f625`},children:(0,H.jsx)(`i`,{className:`fas fa-pen`})}),(0,H.jsx)(`button`,{title:`Archive Event`,className:`ae-action-btn ae-action-btn--delete`,onClick:()=>E(e),style:{background:`#6b728012`,color:`#6b7280`,borderColor:`#6b728025`},children:(0,H.jsx)(`i`,{className:`fas fa-archive`})})]})})]},e.event_id)})})]})})]})]}),(g||f)&&(0,H.jsx)(wc,{event:f||null,onClose:()=>{p(null),_(!1)},onSaved:D}),m&&(0,H.jsx)(Tc,{event:m,onClose:()=>h(null),onUpdate:()=>{T(),w()}}),y&&(0,H.jsx)(Cc,{message:y.msg,type:y.type,onClose:()=>b(null)})]})}var Dc=`/api/announcements.php`;const Oc=[{value:`general`,label:`General`,icon:`fa-solid fa-megaphone`,color:`#6b7280`},{value:`urgent`,label:`Urgent`,icon:`fa-solid fa-exclamation-triangle`,color:`#ef4444`},{value:`events`,label:`Events`,icon:`fa-solid fa-calendar-alt`,color:`#3b82f6`},{value:`training`,label:`Training`,icon:`fa-solid fa-graduation-cap`,color:`#10b981`}],kc=[{value:`all`,label:`All Users`,icon:`fa-solid fa-users`,color:`#6b7280`},{value:`super`,label:`Super Admin`,icon:`fa-solid fa-crown`,color:`#c41e3a`},{value:`safety`,label:`Safety Services`,icon:`fa-solid fa-shield-heart`,color:`#15803d`},{value:`welfare`,label:`Welfare Services`,icon:`fa-solid fa-hand-holding-heart`,color:`#7c3aed`},{value:`health`,label:`Health Services`,icon:`fa-solid fa-heart-pulse`,color:`#c41e3a`},{value:`disaster`,label:`Disaster Management`,icon:`fa-solid fa-triangle-exclamation`,color:`#c2410c`},{value:`youth`,label:`Red Cross Youth`,icon:`fa-solid fa-people-group`,color:`#003d6b`}],Ac=[{value:`published`,label:`Published`,icon:`fa-solid fa-globe`,color:`#10b981`},{value:`draft`,label:`Draft`,icon:`fa-solid fa-pen`,color:`#6b7280`}],jc=async(e={})=>{let t={};e.search&&(t.search=e.search),e.category&&(t.category=e.category),e.target_role&&(t.target_role=e.target_role),e.status&&(t.status=e.status),e.archived&&(t.archived=e.archived);let{data:n}=await K.get(Dc,{params:t});if(!n.success)throw Error(n.message||`Failed to fetch announcements`);return{success:!0,data:n.data??[],stats:n.stats??{total:0,published:0,draft:0,archived:0,by_category:{},by_target_role:{}}}},Mc=async(e,t)=>{if(!e)throw Error(`Announcement ID is required`);let{data:n}=await K.put(Dc,t,{params:{id:e},headers:{"Content-Type":`multipart/form-data`}});if(!n.success)throw Error(n.message||`Failed to update announcement`);return{success:!0,message:n.message,image_path:n.image_path}},Nc=async e=>{if(!e.get(`title`)?.trim())throw Error(`Title is required`);if(!e.get(`content`)?.trim())throw Error(`Content is required`);let{data:t}=await K.post(Dc,e,{headers:{"Content-Type":`multipart/form-data`}});if(!t.success)throw Error(t.message||`Failed to create announcement`);return{success:!0,message:t.message,id:t.id}},Pc=async(e,t)=>{if(!e)throw Error(`Announcement ID is required`);let{data:n}=await K.put(Dc,t,{params:{id:e}});if(!n.success)throw Error(n.message||`Failed to update announcement`);return{success:!0,message:n.message}},Fc=async e=>{if(!e)throw Error(`Announcement ID is required`);let{data:t}=await K.delete(Dc,{params:{id:e}});if(!t.success)throw Error(t.message||`Failed to archive announcement`);return{success:!0,message:t.message}},Ic=async e=>{if(!e)throw Error(`Announcement ID is required`);let{data:t}=await K.put(Dc,null,{params:{id:e,action:`restore`}});if(!t.success)throw Error(t.message||`Failed to restore announcement`);return{success:!0,message:t.message}},Lc=async e=>{if(!e)throw Error(`Announcement ID is required`);let{data:t}=await K.delete(Dc,{params:{id:e,permanent:`true`}});if(!t.success)throw Error(t.message||`Failed to delete announcement`);return{success:!0,message:t.message}},Rc=e=>{let t=Oc.find(t=>t.value===e);return t?t.label:e.charAt(0).toUpperCase()+e.slice(1)},zc=e=>{let t=kc.find(t=>t.value===e);return t?t.label:e.charAt(0).toUpperCase()+e.slice(1)},Bc=e=>{let t=Ac.find(t=>t.value===e);return t?t.label:e.charAt(0).toUpperCase()+e.slice(1)},Vc=e=>{let t=Oc.find(t=>t.value===e);return t?t.color:`#6b7280`},Hc=e=>{let t=kc.find(t=>t.value===e);return t?t.color:`#6b7280`};function Uc({message:e,type:t,onClose:n}){return(0,v.useEffect)(()=>{let e=setTimeout(n,3500);return()=>clearTimeout(e)},[n]),(0,H.jsxs)(`div`,{className:`aa-toast aa-toast--${t}`,onClick:n,children:[(0,H.jsx)(`div`,{className:`aa-toast__icon`,children:(0,H.jsx)(`i`,{className:`fa-solid ${t===`success`?`fa-circle-check`:`fa-circle-exclamation`}`})}),(0,H.jsxs)(`div`,{className:`aa-toast__content`,children:[(0,H.jsx)(`div`,{className:`aa-toast__title`,children:t===`success`?`Success`:`Error`}),(0,H.jsx)(`div`,{className:`aa-toast__message`,children:e})]}),(0,H.jsx)(`button`,{className:`aa-toast__close`,onClick:n,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]})}function Wc({announcement:e,onClose:t,onSuccess:n}){let[r,i]=(0,v.useState)({title:``,content:``,category:`general`,target_role:`all`,status:`published`,posted_at:new Date().toISOString().slice(0,16)}),[a,o]=(0,v.useState)(null),[s,c]=(0,v.useState)(null),[l,u]=(0,v.useState)(!0),[d,f]=(0,v.useState)({}),[p,m]=(0,v.useState)(!1);(0,v.useEffect)(()=>{e&&(i({title:e.title||``,content:e.content||``,category:e.category||`general`,target_role:e.target_role||`all`,status:e.status||`published`,posted_at:e.posted_at?new Date(e.posted_at).toISOString().slice(0,16):new Date().toISOString().slice(0,16)}),e.image_path&&c(`http://localhost/prc-management-system/${e.image_path}`))},[e]);let h=e=>{let{name:t,value:n}=e.target;i(e=>({...e,[t]:n})),d[t]&&f(e=>({...e,[t]:null}))},g=e=>{let t=e.target.files[0];t&&(o(t),c(URL.createObjectURL(t)),u(!1))},_=()=>{o(null),c(null),u(!1),document.getElementById(`announcement-image`).value=``},y=()=>{let e={};return r.title.trim()||(e.title=`Title is required`),r.content.trim()||(e.content=`Content is required`),e};return(0,H.jsx)(`div`,{className:`aa-overlay`,onClick:t,children:(0,H.jsxs)(`div`,{className:`aa-modal`,onClick:e=>e.stopPropagation(),children:[(0,H.jsxs)(`div`,{className:`aa-modal__header`,children:[(0,H.jsxs)(`div`,{className:`aa-modal__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid ${e?`fa-pen-to-square`:`fa-plus-circle`}`}),e?`Edit Announcement`:`Create New Announcement`]}),(0,H.jsx)(`button`,{className:`aa-modal__close`,onClick:t,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]}),(0,H.jsxs)(`form`,{className:`aa-modal__body`,onSubmit:async i=>{i.preventDefault();let o=y();if(Object.keys(o).length>0){f(o);return}m(!0);try{if(e){if(a){let t=new FormData;t.append(`title`,r.title),t.append(`content`,r.content),t.append(`category`,r.category),t.append(`target_role`,r.target_role),t.append(`status`,r.status),t.append(`posted_at`,r.posted_at),t.append(`image`,a),await Mc(e.announcement_id,t)}else await Pc(e.announcement_id,r);n(`Announcement updated successfully`)}else{let e=new FormData;e.append(`title`,r.title),e.append(`content`,r.content),e.append(`category`,r.category),e.append(`target_role`,r.target_role),e.append(`status`,r.status),e.append(`posted_at`,r.posted_at),a&&e.append(`image`,a),await Nc(e),n(`Announcement created successfully`)}t()}catch(e){f({submit:e.message})}finally{m(!1)}},children:[d.submit&&(0,H.jsxs)(`div`,{className:`aa-form__error-banner`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),d.submit]}),(0,H.jsxs)(`div`,{className:`aa-form__field`,children:[(0,H.jsxs)(`label`,{className:`aa-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-heading`}),`Title `,(0,H.jsx)(`span`,{className:`aa-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`text`,name:`title`,value:r.title,onChange:h,className:`aa-form__input ${d.title?`aa-form__input--error`:``}`,placeholder:`Enter announcement title`}),d.title&&(0,H.jsxs)(`span`,{className:`aa-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),d.title]})]}),(0,H.jsxs)(`div`,{className:`aa-form__field`,children:[(0,H.jsxs)(`label`,{className:`aa-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-file-lines`}),`Content `,(0,H.jsx)(`span`,{className:`aa-form__required`,children:`*`})]}),(0,H.jsx)(`textarea`,{name:`content`,value:r.content,onChange:h,className:`aa-form__textarea ${d.content?`aa-form__input--error`:``}`,placeholder:`Enter announcement content...`,rows:`6`}),d.content&&(0,H.jsxs)(`span`,{className:`aa-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),d.content]})]}),(0,H.jsxs)(`div`,{className:`aa-form__row`,children:[(0,H.jsxs)(`div`,{className:`aa-form__field`,children:[(0,H.jsxs)(`label`,{className:`aa-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-tag`}),`Category`]}),(0,H.jsx)(`select`,{name:`category`,value:r.category,onChange:h,className:`aa-form__select`,children:Oc.map(e=>(0,H.jsx)(`option`,{value:e.value,children:e.label},e.value))})]}),(0,H.jsxs)(`div`,{className:`aa-form__field`,children:[(0,H.jsxs)(`label`,{className:`aa-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-bullseye`}),`Target Audience`]}),(0,H.jsx)(`select`,{name:`target_role`,value:r.target_role,onChange:h,className:`aa-form__select`,children:kc.map(e=>(0,H.jsx)(`option`,{value:e.value,children:e.label},e.value))})]})]}),(0,H.jsxs)(`div`,{className:`aa-form__row`,children:[(0,H.jsxs)(`div`,{className:`aa-form__field`,children:[(0,H.jsxs)(`label`,{className:`aa-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-flag`}),`Status`]}),(0,H.jsx)(`select`,{name:`status`,value:r.status,onChange:h,className:`aa-form__select`,children:Ac.map(e=>(0,H.jsx)(`option`,{value:e.value,children:e.label},e.value))})]}),(0,H.jsxs)(`div`,{className:`aa-form__field`,children:[(0,H.jsxs)(`label`,{className:`aa-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-calendar`}),`Posted Date`]}),(0,H.jsx)(`input`,{type:`datetime-local`,name:`posted_at`,value:r.posted_at,onChange:h,className:`aa-form__input`})]})]}),(0,H.jsxs)(`div`,{className:`aa-form__field`,children:[(0,H.jsxs)(`label`,{className:`aa-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-image`}),e?`Image (Leave empty to keep current)`:`Image (Optional)`]}),(0,H.jsxs)(`div`,{className:`aa-file-upload`,children:[(0,H.jsx)(`input`,{type:`file`,id:`announcement-image`,accept:`image/*`,onChange:g,className:`aa-file-upload__input`}),(0,H.jsxs)(`label`,{htmlFor:`announcement-image`,className:`aa-file-upload__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-cloud-upload-alt`}),(0,H.jsx)(`span`,{className:`aa-file-upload__text`,children:a?a.name:e?.image_path?`Change image`:`Choose an image`}),a&&(0,H.jsx)(`span`,{className:`aa-file-upload__check`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-check-circle`})})]})]}),s&&(0,H.jsxs)(`div`,{className:`aa-image-preview`,children:[(0,H.jsx)(`img`,{src:s,alt:`Preview`}),(0,H.jsx)(`button`,{type:`button`,onClick:_,className:`aa-image-preview__remove`,title:`Remove image`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-times`})})]}),e?.image_path&&!a&&!s&&(0,H.jsxs)(`div`,{className:`aa-image-preview aa-image-preview--current`,children:[(0,H.jsx)(`img`,{src:`http://localhost/prc-management-system/${e.image_path}`,alt:e.title}),(0,H.jsx)(`div`,{className:`aa-image-preview__label`,children:`Current Image`})]}),(0,H.jsxs)(`small`,{className:`aa-form__hint`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-info-circle`}),` Accepted formats: JPG, PNG, GIF (Max 5MB)`]})]}),(0,H.jsx)(`button`,{type:`submit`,className:`aa-form__submit`,disabled:p,children:p?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-spinner fa-spin`}),e?`Updating...`:`Creating...`]}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fa-solid ${e?`fa-pen-to-square`:`fa-plus`}`}),e?`Update Announcement`:`Create Announcement`]})})]})]})})}function Gc({announcement:e,onClose:t}){if(!e)return null;let n=Vc(e.category),r=Hc(e.target_role),i=Oc.find(t=>t.value===e.category)?.icon||`fa-solid fa-megaphone`,a=kc.find(t=>t.value===e.target_role)?.icon||`fa-solid fa-users`;return(0,H.jsx)(`div`,{className:`aa-overlay`,onClick:t,children:(0,H.jsxs)(`div`,{className:`aa-modal aa-modal--lg`,onClick:e=>e.stopPropagation(),children:[(0,H.jsxs)(`div`,{className:`aa-modal__header`,children:[(0,H.jsxs)(`div`,{className:`aa-modal__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-eye`}),`Announcement Details`]}),(0,H.jsx)(`button`,{className:`aa-modal__close`,onClick:t,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]}),(0,H.jsxs)(`div`,{className:`aa-modal__body`,children:[e.image_path&&(0,H.jsx)(`div`,{className:`aa-view__image`,children:(0,H.jsx)(`img`,{src:`http://localhost/prc-management-system/${e.image_path}`,alt:e.title})}),(0,H.jsx)(`div`,{className:`aa-view__section`,children:(0,H.jsxs)(`div`,{className:`aa-view__badges`,children:[(0,H.jsxs)(`span`,{className:`aa-view__badge`,style:{background:`${n}12`,color:n,border:`1px solid ${n}25`},children:[(0,H.jsx)(`i`,{className:i}),Rc(e.category)]}),(0,H.jsxs)(`span`,{className:`aa-view__badge`,style:{background:`${r}12`,color:r,border:`1px solid ${r}25`},children:[(0,H.jsx)(`i`,{className:a}),zc(e.target_role)]}),(0,H.jsxs)(`span`,{className:`aa-view__badge`,style:{background:e.status===`published`?`#10b98112`:`#6b728012`,color:e.status===`published`?`#10b981`:`#6b7280`,border:e.status===`published`?`1px solid #10b98125`:`1px solid #6b728025`},children:[(0,H.jsx)(`i`,{className:e.status===`published`?`fa-solid fa-globe`:`fa-solid fa-pen`}),Bc(e.status)]})]})}),(0,H.jsx)(`div`,{className:`aa-view__section`,children:(0,H.jsxs)(`h3`,{className:`aa-view__section-title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-heading`,style:{color:n}}),e.title]})}),(0,H.jsxs)(`div`,{className:`aa-view__section`,children:[(0,H.jsxs)(`h3`,{className:`aa-view__section-title`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-file-lines`}),`Content`]}),(0,H.jsx)(`div`,{className:`aa-view__content`,children:e.content.split(`
`).map((e,t)=>(0,H.jsx)(`p`,{children:e},t))})]}),(0,H.jsxs)(`div`,{className:`aa-view__section`,children:[(0,H.jsxs)(`h3`,{className:`aa-view__section-title`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-clock`}),`Timeline`]}),(0,H.jsxs)(`div`,{className:`aa-view__grid`,children:[(0,H.jsxs)(`div`,{className:`aa-view__item`,children:[(0,H.jsx)(`div`,{className:`aa-view__item-label`,children:`Posted Date`}),(0,H.jsx)(`div`,{className:`aa-view__item-value`,children:new Date(e.posted_at).toLocaleString()})]}),(0,H.jsxs)(`div`,{className:`aa-view__item`,children:[(0,H.jsx)(`div`,{className:`aa-view__item-label`,children:`Created At`}),(0,H.jsx)(`div`,{className:`aa-view__item-value`,children:new Date(e.created_at).toLocaleString()})]}),e.updated_at&&(0,H.jsxs)(`div`,{className:`aa-view__item`,children:[(0,H.jsx)(`div`,{className:`aa-view__item-label`,children:`Updated At`}),(0,H.jsx)(`div`,{className:`aa-view__item-value`,children:new Date(e.updated_at).toLocaleString()})]}),e.archived_at&&(0,H.jsxs)(`div`,{className:`aa-view__item`,children:[(0,H.jsx)(`div`,{className:`aa-view__item-label`,children:`Archived At`}),(0,H.jsx)(`div`,{className:`aa-view__item-value`,children:new Date(e.archived_at).toLocaleString()})]})]})]}),(e.created_by_name||e.archived_by_name||e.updated_by_name)&&(0,H.jsxs)(`div`,{className:`aa-view__section`,children:[(0,H.jsxs)(`h3`,{className:`aa-view__section-title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-user`}),`Audit Information`]}),(0,H.jsxs)(`div`,{className:`aa-view__grid`,children:[e.created_by_name&&(0,H.jsxs)(`div`,{className:`aa-view__item`,children:[(0,H.jsx)(`div`,{className:`aa-view__item-label`,children:`Created By`}),(0,H.jsx)(`div`,{className:`aa-view__item-value`,children:e.created_by_name})]}),e.updated_by_name&&(0,H.jsxs)(`div`,{className:`aa-view__item`,children:[(0,H.jsx)(`div`,{className:`aa-view__item-label`,children:`Updated By`}),(0,H.jsx)(`div`,{className:`aa-view__item-value`,children:e.updated_by_name})]}),e.archived_by_name&&(0,H.jsxs)(`div`,{className:`aa-view__item`,children:[(0,H.jsx)(`div`,{className:`aa-view__item-label`,children:`Archived By`}),(0,H.jsx)(`div`,{className:`aa-view__item-value`,children:e.archived_by_name})]})]})]})]})]})})}function Kc(){let[e,t]=(0,v.useState)([]),[n,r]=(0,v.useState)({total:0,published:0,draft:0,archived:0,by_category:{},by_target_role:{}}),[i,a]=(0,v.useState)(!0),[o,s]=(0,v.useState)(``),[c,l]=(0,v.useState)(``),[u,d]=(0,v.useState)(``),[f,p]=(0,v.useState)(`published`),[m,h]=(0,v.useState)(!1),[g,_]=(0,v.useState)(!1),[y,b]=(0,v.useState)(!1),[x,S]=(0,v.useState)(!1),[C,w]=(0,v.useState)(!1),[T,E]=(0,v.useState)(!1),[D,O]=(0,v.useState)(null),[ee,k]=(0,v.useState)(null),[te,A]=(0,v.useState)(null),ne=(e,t=`success`)=>{k({message:e,type:t})},j=(0,v.useCallback)(async()=>{a(!0);try{let e={};o&&(e.search=o),c&&(e.category=c),u&&(e.target_role=u),f&&f!==`all`&&(e.status=f),m&&(e.archived=!0);let n=await jc(e);t(n.data),r(n.stats)}catch(e){ne(e.message,`error`)}finally{a(!1)}},[o,c,u,f,m]);(0,v.useEffect)(()=>{let e=setTimeout(()=>{j()},300);return()=>clearTimeout(e)},[j]);let M=()=>{O(null),w(!0)},N=e=>{O(e),w(!0)},P=e=>{O(e),E(!0)},re=async e=>{if(window.confirm(`Are you sure you want to archive this announcement?`))try{await Fc(e),ne(`Announcement archived successfully`),j()}catch(e){ne(e.message,`error`)}},F=async e=>{if(window.confirm(`Restore this announcement?`))try{await Ic(e),ne(`Announcement restored successfully`),j()}catch(e){ne(e.message,`error`)}},I=async e=>{if(window.confirm(`Permanently delete this announcement? This action cannot be undone.`))try{await Lc(e),ne(`Announcement deleted permanently`),j()}catch(e){ne(e.message,`error`)}},ie=e=>{ne(e),j()},ae=()=>{s(``)},oe=()=>{l(``),d(``),p(`published`),h(!1)},se=()=>{h(!m),p(`all`)},ce=()=>{let e=0;return c&&e++,u&&e++,f&&f!==`published`&&e++,m&&e++,e},le=(e,t=100)=>e.length<=t?e:e.substring(0,t)+`...`;return(0,H.jsxs)(`div`,{className:`aa-root`,children:[(0,H.jsxs)(`div`,{className:`aa-header`,children:[(0,H.jsx)(`div`,{className:`aa-header__container`,children:(0,H.jsxs)(`div`,{className:`aa-header__content`,children:[(0,H.jsxs)(`div`,{className:`aa-header__left`,children:[(0,H.jsxs)(`div`,{className:`aa-header__badge`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-bullhorn`}),`Announcements Management`]}),(0,H.jsx)(`h1`,{className:`aa-header__title`,children:`Announcements`}),(0,H.jsx)(`p`,{className:`aa-header__subtitle`,children:`Create and manage announcements for users and volunteers`})]}),(0,H.jsxs)(`div`,{className:`aa-header__stats`,children:[(0,H.jsxs)(`div`,{className:`aa-header-stat`,children:[(0,H.jsx)(`span`,{className:`aa-header-stat__value`,children:n.total}),(0,H.jsx)(`span`,{className:`aa-header-stat__label`,children:`Total`})]}),(0,H.jsxs)(`div`,{className:`aa-header-stat`,children:[(0,H.jsx)(`span`,{className:`aa-header-stat__value`,children:n.published}),(0,H.jsx)(`span`,{className:`aa-header-stat__label`,children:`Published`})]}),(0,H.jsxs)(`div`,{className:`aa-header-stat`,children:[(0,H.jsx)(`span`,{className:`aa-header-stat__value`,children:n.draft}),(0,H.jsx)(`span`,{className:`aa-header-stat__label`,children:`Drafts`})]}),(0,H.jsxs)(`div`,{className:`aa-header-stat`,children:[(0,H.jsx)(`span`,{className:`aa-header-stat__value`,children:n.archived}),(0,H.jsx)(`span`,{className:`aa-header-stat__label`,children:`Archived`})]})]})]})}),(0,H.jsx)(`div`,{className:`aa-header__wave`,children:(0,H.jsx)(`svg`,{viewBox:`0 0 1440 120`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`,children:(0,H.jsx)(`path`,{d:`M0 120L60 105C120 90 240 60 360 45C480 30 600 30 720 37.5C840 45 960 60 1080 67.5C1200 75 1320 75 1380 75L1440 75V120H1380C1320 120 1200 120 1080 120C960 120 840 120 720 120C600 120 480 120 360 120C240 120 120 120 60 120H0Z`,fill:`white`,fillOpacity:`0.1`})})})]}),(0,H.jsxs)(`div`,{className:`aa-body`,children:[(0,H.jsx)(`div`,{className:`aa-cards`,children:Oc.map(e=>(0,H.jsxs)(`div`,{className:`aa-card`,style:{borderColor:e.color},children:[(0,H.jsx)(`div`,{className:`aa-card__icon`,style:{background:`${e.color}12`},children:(0,H.jsx)(`i`,{className:e.icon,style:{color:e.color}})}),(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`div`,{className:`aa-card__num`,style:{color:e.color},children:n.by_category[e.value]||0}),(0,H.jsx)(`div`,{className:`aa-card__label`,children:e.label})]})]},e.value))}),(0,H.jsxs)(`div`,{className:`aa-toolbar`,children:[(0,H.jsxs)(`div`,{className:`aa-toolbar__search`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-magnifying-glass aa-toolbar__search-icon`}),(0,H.jsx)(`input`,{type:`text`,className:`aa-toolbar__search-input`,placeholder:`Search announcements by title or content...`,value:o,onChange:e=>s(e.target.value)}),o&&(0,H.jsx)(`button`,{className:`aa-toolbar__search-clear`,onClick:ae,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]}),(0,H.jsxs)(`div`,{className:`aa-toolbar__filters`,children:[(0,H.jsxs)(`div`,{className:`aa-toolbar__filter-dropdown`,children:[(0,H.jsxs)(`button`,{className:`aa-toolbar__filter-dropdown-btn ${c?`aa-toolbar__filter-dropdown-btn--active`:``}`,onClick:()=>_(!g),children:[(0,H.jsx)(`i`,{className:`fa-solid fa-tag`}),(0,H.jsx)(`span`,{children:c?Rc(c):`All Categories`}),(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-down`})]}),g&&(0,H.jsxs)(`div`,{className:`aa-toolbar__filter-dropdown-menu`,children:[(0,H.jsxs)(`button`,{onClick:()=>{l(``),_(!1)},className:c?``:`active`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-tag`}),`All Categories`]}),Oc.map(e=>(0,H.jsxs)(`button`,{onClick:()=>{l(e.value),_(!1)},className:c===e.value?`active`:``,children:[(0,H.jsx)(`i`,{className:e.icon,style:{color:e.color}}),e.label]},e.value))]})]}),(0,H.jsxs)(`div`,{className:`aa-toolbar__filter-dropdown`,children:[(0,H.jsxs)(`button`,{className:`aa-toolbar__filter-dropdown-btn ${u?`aa-toolbar__filter-dropdown-btn--active`:``}`,onClick:()=>b(!y),children:[(0,H.jsx)(`i`,{className:`fa-solid fa-bullseye`}),(0,H.jsx)(`span`,{children:u?zc(u):`All Audiences`}),(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-down`})]}),y&&(0,H.jsxs)(`div`,{className:`aa-toolbar__filter-dropdown-menu`,children:[(0,H.jsxs)(`button`,{onClick:()=>{d(``),b(!1)},className:u?``:`active`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-bullseye`}),`All Audiences`]}),kc.map(e=>(0,H.jsxs)(`button`,{onClick:()=>{d(e.value),b(!1)},className:u===e.value?`active`:``,children:[(0,H.jsx)(`i`,{className:e.icon,style:{color:e.color}}),e.label]},e.value))]})]}),(0,H.jsxs)(`div`,{className:`aa-toolbar__filter-dropdown`,children:[(0,H.jsxs)(`button`,{className:`aa-toolbar__filter-dropdown-btn ${f===`published`?``:`aa-toolbar__filter-dropdown-btn--active`}`,onClick:()=>S(!x),children:[(0,H.jsx)(`i`,{className:`fa-solid fa-flag`}),(0,H.jsx)(`span`,{children:f===`all`?`All Status`:Bc(f)}),(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-down`})]}),x&&(0,H.jsxs)(`div`,{className:`aa-toolbar__filter-dropdown-menu`,children:[(0,H.jsxs)(`button`,{onClick:()=>{p(`all`),S(!1)},className:f===`all`?`active`:``,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-flag`}),`All Status`]}),Ac.map(e=>(0,H.jsxs)(`button`,{onClick:()=>{p(e.value),S(!1)},className:f===e.value?`active`:``,children:[(0,H.jsx)(`i`,{className:e.icon}),e.label]},e.value))]})]}),(0,H.jsxs)(`button`,{className:`aa-toolbar__filter-btn ${m?`aa-toolbar__filter-btn--active`:``}`,onClick:se,style:m?{background:`#6b7280`,color:`white`}:{},children:[(0,H.jsx)(`i`,{className:`fa-solid fa-archive`}),m?`Showing Archived`:`Show Archived`]}),ce()>0&&(0,H.jsxs)(`button`,{className:`aa-toolbar__filter-clear`,onClick:oe,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-times`}),`Clear Filters (`,ce(),`)`]})]}),(0,H.jsxs)(`button`,{className:`aa-toolbar__create-btn`,onClick:M,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-plus`}),`Create Announcement`]})]}),(0,H.jsxs)(`div`,{className:`aa-table-panel`,children:[(0,H.jsxs)(`div`,{className:`aa-table-panel__head`,children:[(0,H.jsxs)(`div`,{className:`aa-table-panel__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-bullhorn`}),m?`Archived Announcements`:`Announcements`]}),(0,H.jsx)(`div`,{className:`aa-table-panel__info`,children:!i&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(`span`,{className:`aa-table-panel__count`,children:[e.length,` `,e.length===1?`announcement`:`announcements`]}),(0,H.jsx)(`span`,{className:`aa-table-panel__divider`,children:``}),(0,H.jsxs)(`span`,{className:`aa-table-panel__sub`,children:[`Page 1 of `,Math.ceil(e.length/10)||1]})]})})]}),(0,H.jsx)(`div`,{className:`aa-table-panel__scroll`,children:(0,H.jsxs)(`table`,{className:`aa-table`,children:[(0,H.jsx)(`thead`,{children:(0,H.jsxs)(`tr`,{children:[(0,H.jsx)(`th`,{children:`Title`}),(0,H.jsx)(`th`,{children:`Category`}),(0,H.jsx)(`th`,{children:`Target Audience`}),(0,H.jsx)(`th`,{children:`Status`}),(0,H.jsx)(`th`,{children:`Posted Date`}),(0,H.jsx)(`th`,{children:`Preview`}),(0,H.jsx)(`th`,{children:`Actions`})]})}),(0,H.jsx)(`tbody`,{children:i?(0,H.jsx)(`tr`,{children:(0,H.jsx)(`td`,{colSpan:`7`,children:(0,H.jsxs)(`div`,{className:`aa-table__loading`,children:[(0,H.jsx)(`div`,{className:`aa-table__loading-spinner`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-spinner fa-spin`})}),(0,H.jsx)(`p`,{children:`Loading announcements...`}),(0,H.jsx)(`span`,{className:`aa-table__loading-sub`,children:`Fetching announcement data`})]})})}):e.length===0?(0,H.jsx)(`tr`,{children:(0,H.jsx)(`td`,{colSpan:`7`,children:(0,H.jsxs)(`div`,{className:`aa-table__empty`,children:[(0,H.jsx)(`div`,{className:`aa-table__empty-icon`,children:(0,H.jsx)(`i`,{className:`fa-regular fa-face-frown`})}),(0,H.jsx)(`h3`,{className:`aa-table__empty-title`,children:`No Announcements Found`}),(0,H.jsx)(`p`,{className:`aa-table__empty-message`,children:o||c||u||f!==`published`||m?`Try adjusting your search or filter criteria`:`Get started by creating your first announcement`}),(o||c||u||f!==`published`||m)&&(0,H.jsxs)(`button`,{className:`aa-table__empty-action`,onClick:oe,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-times`}),` Clear Filters`]})]})})}):e.map(e=>{let t=Vc(e.category),n=Hc(e.target_role),r=Oc.find(t=>t.value===e.category)?.icon||`fa-solid fa-megaphone`,i=kc.find(t=>t.value===e.target_role)?.icon||`fa-solid fa-users`;return(0,H.jsxs)(`tr`,{onMouseEnter:()=>A(e.announcement_id),onMouseLeave:()=>A(null),className:te===e.announcement_id?`aa-table__row--hovered`:``,children:[(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`aa-title-cell`,children:[(0,H.jsx)(`div`,{className:`aa-title-cell__title`,children:e.title}),(0,H.jsxs)(`div`,{className:`aa-title-cell__id`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-hashtag`}),` ID: #`,e.announcement_id]})]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`span`,{className:`aa-badge`,style:{background:`${t}12`,color:t,border:`1px solid ${t}25`},children:[(0,H.jsx)(`i`,{className:r}),Rc(e.category)]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`span`,{className:`aa-badge`,style:{background:`${n}12`,color:n,border:`1px solid ${n}25`},children:[(0,H.jsx)(`i`,{className:i}),zc(e.target_role)]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`span`,{className:`aa-badge`,style:{background:e.status===`published`?`#10b98112`:`#6b728012`,color:e.status===`published`?`#10b981`:`#6b7280`,border:e.status===`published`?`1px solid #10b98125`:`1px solid #6b728025`},children:[(0,H.jsx)(`i`,{className:e.status===`published`?`fa-solid fa-globe`:`fa-solid fa-pen`}),Bc(e.status)]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`aa-date`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-calendar`}),new Date(e.posted_at).toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,year:`numeric`})]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`aa-preview`,title:e.content,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-file-lines`}),le(e.content)]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`aa-actions`,children:[(0,H.jsx)(`button`,{className:`aa-action-btn aa-action-btn--view`,onClick:()=>P(e),title:`View Details`,style:{background:`#10b98112`,color:`#10b981`,border:`1px solid #10b98125`},children:(0,H.jsx)(`i`,{className:`fa-solid fa-eye`})}),!m&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`button`,{className:`aa-action-btn aa-action-btn--edit`,onClick:()=>N(e),title:`Edit Announcement`,style:{background:`#3b82f612`,color:`#3b82f6`,border:`1px solid #3b82f625`},children:(0,H.jsx)(`i`,{className:`fa-solid fa-pen`})}),(0,H.jsx)(`button`,{className:`aa-action-btn aa-action-btn--archive`,onClick:()=>re(e.announcement_id),title:`Archive Announcement`,style:{background:`#f59e0b12`,color:`#f59e0b`,border:`1px solid #f59e0b25`},children:(0,H.jsx)(`i`,{className:`fa-solid fa-box-archive`})})]}),m&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`button`,{className:`aa-action-btn aa-action-btn--restore`,onClick:()=>F(e.announcement_id),title:`Restore Announcement`,style:{background:`#10b98112`,color:`#10b981`,border:`1px solid #10b98125`},children:(0,H.jsx)(`i`,{className:`fa-solid fa-trash-arrow-up`})}),(0,H.jsx)(`button`,{className:`aa-action-btn aa-action-btn--delete`,onClick:()=>I(e.announcement_id),title:`Delete Permanently`,style:{background:`#ef444412`,color:`#ef4444`,border:`1px solid #ef444425`},children:(0,H.jsx)(`i`,{className:`fa-solid fa-trash`})})]})]})})]},e.announcement_id)})})]})})]})]}),C&&(0,H.jsx)(Wc,{announcement:D,onClose:()=>w(!1),onSuccess:ie}),T&&(0,H.jsx)(Gc,{announcement:D,onClose:()=>E(!1)}),ee&&(0,H.jsx)(Uc,{message:ee.message,type:ee.type,onClose:()=>k(null)})]})}var qc=`/api/volunteers.php`;const Jc=async(e={})=>{let t={};e.search&&(t.search=e.search),e.service&&(t.service=e.service),e.status&&(t.status=e.status);let{data:n}=await K.get(qc,{params:t});if(!n.success)throw Error(n.message||`Failed to fetch volunteers`);return{success:!0,data:n.data??[],stats:n.stats??{total:0,by_status:{},by_service:{}}}},Yc=async e=>{if(!e.full_name?.trim())throw Error(`Full name is required`);if(!e.age)throw Error(`Age is required`);if(!e.location?.trim())throw Error(`Location is required`);if(!e.contact_number?.trim())throw Error(`Contact number is required`);if(!e.service)throw Error(`Service is required`);let{data:t}=await K.post(qc,e);if(!t.success)throw Error(t.message||`Failed to create volunteer`);return{success:!0,message:t.message,id:t.id}},Xc=async(e,t)=>{if(!e)throw Error(`Volunteer ID is required`);let{data:n}=await K.put(qc,t,{params:{id:e}});if(!n.success)throw Error(n.message||`Failed to update volunteer`);return{success:!0,message:n.message}},Zc=async e=>{if(!e)throw Error(`Volunteer ID is required`);let{data:t}=await K.delete(qc,{params:{id:e}});if(!t.success)throw Error(t.message||`Failed to delete volunteer`);return{success:!0,message:t.message}},Qc=[{value:`first_aid`,label:`First Aid`,icon:`fa-solid fa-kit-medical`},{value:`disaster_response`,label:`Disaster Response`,icon:`fa-solid fa-triangle-exclamation`},{value:`blood_services`,label:`Blood Services`,icon:`fa-solid fa-droplet`},{value:`safety_services`,label:`Safety Services`,icon:`fa-solid fa-shield-heart`},{value:`youth_services`,label:`Youth Services`,icon:`fa-solid fa-users`},{value:`welfare_services`,label:`Welfare Services`,icon:`fa-solid fa-hand-holding-heart`}],$c=[{value:`current`,label:`Current`,icon:`fa-solid fa-check-circle`},{value:`graduated`,label:`Graduated`,icon:`fa-solid fa-graduation-cap`}],el=e=>{let t=Qc.find(t=>t.value===e);return t?t.label:e.replace(/_/g,` `).replace(/\b\w/g,e=>e.toUpperCase())},tl=e=>{let t=$c.find(t=>t.value===e);return t?t.label:e.charAt(0).toUpperCase()+e.slice(1)};function nl({message:e,type:t,onClose:n}){return(0,v.useEffect)(()=>{let e=setTimeout(n,3500);return()=>clearTimeout(e)},[n]),(0,H.jsxs)(`div`,{className:`av-toast av-toast--${t}`,onClick:n,children:[(0,H.jsx)(`div`,{className:`av-toast__icon`,children:(0,H.jsx)(`i`,{className:`fa-solid ${t===`success`?`fa-circle-check`:`fa-circle-exclamation`}`})}),(0,H.jsxs)(`div`,{className:`av-toast__content`,children:[(0,H.jsx)(`div`,{className:`av-toast__title`,children:t===`success`?`Success`:`Error`}),(0,H.jsx)(`div`,{className:`av-toast__message`,children:e})]}),(0,H.jsx)(`button`,{className:`av-toast__close`,onClick:n,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]})}function rl({volunteer:e,onClose:t,onSuccess:n}){let[r,i]=(0,v.useState)({full_name:``,age:``,location:``,barangay:``,municipality:``,city:``,contact_number:``,email:``,service:`first_aid`,status:`current`,notes:``}),[a,o]=(0,v.useState)({}),[s,c]=(0,v.useState)(!1);(0,v.useEffect)(()=>{e&&i({full_name:e.full_name||``,age:e.age||``,location:e.location||``,barangay:e.barangay||``,municipality:e.municipality||``,city:e.city||``,contact_number:e.contact_number||``,email:e.email||``,service:e.service||`first_aid`,status:e.status||`current`,notes:e.notes||``})},[e]);let l=e=>{let{name:t,value:n}=e.target;i(e=>({...e,[t]:n})),a[t]&&o(e=>({...e,[t]:null}))},u=()=>{let e={};return r.full_name.trim()||(e.full_name=`Full name is required`),r.age?(r.age<16||r.age>100)&&(e.age=`Age must be between 16 and 100`):e.age=`Age is required`,r.location.trim()||(e.location=`Location is required`),r.contact_number.trim()||(e.contact_number=`Contact number is required`),r.email&&!/\S+@\S+\.\S+/.test(r.email)&&(e.email=`Please enter a valid email address`),r.service||(e.service=`Service is required`),e};return(0,H.jsx)(`div`,{className:`av-overlay`,onClick:t,children:(0,H.jsxs)(`div`,{className:`av-modal`,onClick:e=>e.stopPropagation(),children:[(0,H.jsxs)(`div`,{className:`av-modal__header`,children:[(0,H.jsxs)(`span`,{className:`av-modal__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid ${e?`fa-pen-to-square`:`fa-user-plus`}`}),e?`Edit Volunteer`:`Add New Volunteer`]}),(0,H.jsx)(`button`,{className:`av-modal__close`,onClick:t,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]}),(0,H.jsxs)(`form`,{className:`av-modal__body`,onSubmit:async i=>{i.preventDefault();let a=u();if(Object.keys(a).length>0){o(a);return}c(!0);try{e?(await Xc(e.volunteer_id,r),n(`Volunteer updated successfully`)):(await Yc(r),n(`Volunteer created successfully`)),t()}catch(e){o({submit:e.message})}finally{c(!1)}},children:[a.submit&&(0,H.jsxs)(`div`,{className:`av-form__error-banner`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),a.submit]}),(0,H.jsxs)(`div`,{className:`av-form__row`,children:[(0,H.jsxs)(`div`,{className:`av-form__field`,children:[(0,H.jsxs)(`label`,{className:`av-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-user`}),`Full Name `,(0,H.jsx)(`span`,{className:`av-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`text`,name:`full_name`,value:r.full_name,onChange:l,className:`av-form__input ${a.full_name?`av-form__input--error`:``}`,placeholder:`Enter full name`}),a.full_name&&(0,H.jsxs)(`span`,{className:`av-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),a.full_name]})]}),(0,H.jsxs)(`div`,{className:`av-form__field`,children:[(0,H.jsxs)(`label`,{className:`av-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-calendar`}),`Age `,(0,H.jsx)(`span`,{className:`av-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`number`,name:`age`,value:r.age,onChange:l,min:`16`,max:`100`,className:`av-form__input ${a.age?`av-form__input--error`:``}`,placeholder:`Enter age`}),a.age&&(0,H.jsxs)(`span`,{className:`av-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),a.age]})]})]}),(0,H.jsxs)(`div`,{className:`av-form__field`,children:[(0,H.jsxs)(`label`,{className:`av-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-dot`}),`Location `,(0,H.jsx)(`span`,{className:`av-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`text`,name:`location`,value:r.location,onChange:l,className:`av-form__input ${a.location?`av-form__input--error`:``}`,placeholder:`e.g., Bacolod City, Negros Occidental`}),a.location&&(0,H.jsxs)(`span`,{className:`av-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),a.location]})]}),(0,H.jsxs)(`div`,{className:`av-form__row`,children:[(0,H.jsxs)(`div`,{className:`av-form__field`,children:[(0,H.jsxs)(`label`,{className:`av-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-map-pin`}),`Barangay`]}),(0,H.jsx)(`input`,{type:`text`,name:`barangay`,value:r.barangay,onChange:l,className:`av-form__input`,placeholder:`Enter barangay`})]}),(0,H.jsxs)(`div`,{className:`av-form__field`,children:[(0,H.jsxs)(`label`,{className:`av-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-city`}),`Municipality`]}),(0,H.jsx)(`input`,{type:`text`,name:`municipality`,value:r.municipality,onChange:l,className:`av-form__input`,placeholder:`Enter municipality`})]})]}),(0,H.jsxs)(`div`,{className:`av-form__row`,children:[(0,H.jsxs)(`div`,{className:`av-form__field`,children:[(0,H.jsxs)(`label`,{className:`av-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-city`}),`City`]}),(0,H.jsx)(`input`,{type:`text`,name:`city`,value:r.city,onChange:l,className:`av-form__input`,placeholder:`Enter city`})]}),(0,H.jsxs)(`div`,{className:`av-form__field`,children:[(0,H.jsxs)(`label`,{className:`av-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-phone`}),`Contact Number `,(0,H.jsx)(`span`,{className:`av-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`text`,name:`contact_number`,value:r.contact_number,onChange:l,className:`av-form__input ${a.contact_number?`av-form__input--error`:``}`,placeholder:`e.g., +63-912-345-6789`}),a.contact_number&&(0,H.jsxs)(`span`,{className:`av-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),a.contact_number]})]})]}),(0,H.jsxs)(`div`,{className:`av-form__row`,children:[(0,H.jsxs)(`div`,{className:`av-form__field`,children:[(0,H.jsxs)(`label`,{className:`av-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-envelope`}),`Email`]}),(0,H.jsx)(`input`,{type:`email`,name:`email`,value:r.email,onChange:l,className:`av-form__input ${a.email?`av-form__input--error`:``}`,placeholder:`Enter email address`}),a.email&&(0,H.jsxs)(`span`,{className:`av-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),a.email]})]}),(0,H.jsxs)(`div`,{className:`av-form__field`,children:[(0,H.jsxs)(`label`,{className:`av-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-hand-holding-heart`}),`Service `,(0,H.jsx)(`span`,{className:`av-form__required`,children:`*`})]}),(0,H.jsx)(`select`,{name:`service`,value:r.service,onChange:l,className:`av-form__select ${a.service?`av-form__input--error`:``}`,children:Qc.map(e=>(0,H.jsx)(`option`,{value:e.value,children:e.label},e.value))}),a.service&&(0,H.jsxs)(`span`,{className:`av-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),a.service]})]})]}),(0,H.jsx)(`div`,{className:`av-form__row`,children:(0,H.jsxs)(`div`,{className:`av-form__field`,children:[(0,H.jsxs)(`label`,{className:`av-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-flag`}),`Status`]}),(0,H.jsx)(`select`,{name:`status`,value:r.status,onChange:l,className:`av-form__select`,children:$c.map(e=>(0,H.jsx)(`option`,{value:e.value,children:e.label},e.value))})]})}),(0,H.jsxs)(`div`,{className:`av-form__field av-form__field--full`,children:[(0,H.jsxs)(`label`,{className:`av-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-note-sticky`}),`Notes`]}),(0,H.jsx)(`textarea`,{name:`notes`,value:r.notes,onChange:l,className:`av-form__textarea`,placeholder:`Additional notes about the volunteer...`,rows:`3`})]}),(0,H.jsx)(`button`,{type:`submit`,className:`av-form__submit`,disabled:s,children:s?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-spinner fa-spin`}),e?`Updating...`:`Creating...`]}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fa-solid ${e?`fa-pen-to-square`:`fa-user-plus`}`}),e?`Update Volunteer`:`Create Volunteer`]})})]})]})})}function il({volunteer:e,onClose:t}){return e?(0,H.jsx)(`div`,{className:`av-overlay`,onClick:t,children:(0,H.jsxs)(`div`,{className:`av-modal`,onClick:e=>e.stopPropagation(),children:[(0,H.jsxs)(`div`,{className:`av-modal__header`,children:[(0,H.jsxs)(`span`,{className:`av-modal__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-eye`}),`Volunteer Details`]}),(0,H.jsx)(`button`,{className:`av-modal__close`,onClick:t,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]}),(0,H.jsxs)(`div`,{className:`av-modal__body`,children:[(0,H.jsxs)(`div`,{className:`av-view__section`,children:[(0,H.jsxs)(`h3`,{className:`av-view__section-title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-user`}),`Personal Information`]}),(0,H.jsxs)(`div`,{className:`av-view__grid`,children:[(0,H.jsxs)(`div`,{className:`av-view__item`,children:[(0,H.jsx)(`div`,{className:`av-view__item-label`,children:`Full Name`}),(0,H.jsx)(`div`,{className:`av-view__item-value`,children:e.full_name})]}),(0,H.jsxs)(`div`,{className:`av-view__item`,children:[(0,H.jsx)(`div`,{className:`av-view__item-label`,children:`Age`}),(0,H.jsxs)(`div`,{className:`av-view__item-value`,children:[e.age,` years old`]})]}),(0,H.jsxs)(`div`,{className:`av-view__item av-view__full`,children:[(0,H.jsx)(`div`,{className:`av-view__item-label`,children:`Location`}),(0,H.jsx)(`div`,{className:`av-view__item-value`,children:e.location})]}),(0,H.jsxs)(`div`,{className:`av-view__item`,children:[(0,H.jsx)(`div`,{className:`av-view__item-label`,children:`Barangay`}),(0,H.jsx)(`div`,{className:`av-view__item-value`,children:e.barangay||``})]}),(0,H.jsxs)(`div`,{className:`av-view__item`,children:[(0,H.jsx)(`div`,{className:`av-view__item-label`,children:`Municipality`}),(0,H.jsx)(`div`,{className:`av-view__item-value`,children:e.municipality||``})]}),(0,H.jsxs)(`div`,{className:`av-view__item`,children:[(0,H.jsx)(`div`,{className:`av-view__item-label`,children:`City`}),(0,H.jsx)(`div`,{className:`av-view__item-value`,children:e.city||``})]})]})]}),(0,H.jsxs)(`div`,{className:`av-view__section`,children:[(0,H.jsxs)(`h3`,{className:`av-view__section-title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-address-book`}),`Contact Information`]}),(0,H.jsxs)(`div`,{className:`av-view__grid`,children:[(0,H.jsxs)(`div`,{className:`av-view__item`,children:[(0,H.jsx)(`div`,{className:`av-view__item-label`,children:`Contact Number`}),(0,H.jsx)(`div`,{className:`av-view__item-value`,children:e.contact_number})]}),(0,H.jsxs)(`div`,{className:`av-view__item`,children:[(0,H.jsx)(`div`,{className:`av-view__item-label`,children:`Email`}),(0,H.jsx)(`div`,{className:`av-view__item-value`,children:e.email||``})]})]})]}),(0,H.jsxs)(`div`,{className:`av-view__section`,children:[(0,H.jsxs)(`h3`,{className:`av-view__section-title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-briefcase`}),`Volunteer Details`]}),(0,H.jsxs)(`div`,{className:`av-view__grid`,children:[(0,H.jsxs)(`div`,{className:`av-view__item`,children:[(0,H.jsx)(`div`,{className:`av-view__item-label`,children:`Service`}),(0,H.jsx)(`div`,{className:`av-view__item-value`,children:(0,H.jsxs)(`span`,{className:`av-view__service ${(e=>({first_aid:`av-view__service--first_aid`,disaster_response:`av-view__service--disaster_response`,blood_services:`av-view__service--blood_services`,safety_services:`av-view__service--safety_services`,youth_services:`av-view__service--youth_services`,welfare_services:`av-view__service--welfare_services`})[e]||``)(e.service)}`,children:[(0,H.jsx)(`i`,{className:`fa-solid ${Qc.find(t=>t.value===e.service)?.icon||`fa-hand`}`}),el(e.service)]})})]}),(0,H.jsxs)(`div`,{className:`av-view__item`,children:[(0,H.jsx)(`div`,{className:`av-view__item-label`,children:`Status`}),(0,H.jsx)(`div`,{className:`av-view__item-value`,children:(0,H.jsxs)(`span`,{className:`av-view__status av-view__status--${e.status}`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle`}),tl(e.status)]})})]}),(0,H.jsxs)(`div`,{className:`av-view__item av-view__full`,children:[(0,H.jsx)(`div`,{className:`av-view__item-label`,children:`Notes`}),(0,H.jsx)(`div`,{className:`av-view__notes`,children:e.notes||`No notes available`})]})]})]}),(0,H.jsxs)(`div`,{className:`av-view__section`,children:[(0,H.jsxs)(`h3`,{className:`av-view__section-title`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-clock`}),`System Information`]}),(0,H.jsxs)(`div`,{className:`av-view__grid`,children:[(0,H.jsxs)(`div`,{className:`av-view__item`,children:[(0,H.jsx)(`div`,{className:`av-view__item-label`,children:`Created At`}),(0,H.jsx)(`div`,{className:`av-view__item-value`,children:new Date(e.created_at).toLocaleString()})]}),(0,H.jsxs)(`div`,{className:`av-view__item`,children:[(0,H.jsx)(`div`,{className:`av-view__item-label`,children:`Updated At`}),(0,H.jsx)(`div`,{className:`av-view__item-value`,children:new Date(e.updated_at).toLocaleString()})]}),e.created_by_name&&(0,H.jsxs)(`div`,{className:`av-view__item`,children:[(0,H.jsx)(`div`,{className:`av-view__item-label`,children:`Created By`}),(0,H.jsx)(`div`,{className:`av-view__item-value`,children:e.created_by_name})]}),e.updated_by_name&&(0,H.jsxs)(`div`,{className:`av-view__item`,children:[(0,H.jsx)(`div`,{className:`av-view__item-label`,children:`Updated By`}),(0,H.jsx)(`div`,{className:`av-view__item-value`,children:e.updated_by_name})]})]})]})]})]})}):null}function al(){let[e,t]=(0,v.useState)([]),[n,r]=(0,v.useState)({total:0,by_status:{current:0,graduated:0},by_service:{},location_stats:{by_city:{},by_municipality:{},by_barangay:{}}}),[i,a]=(0,v.useState)(!0),[o,s]=(0,v.useState)(``),[c,l]=(0,v.useState)(``),[u,d]=(0,v.useState)(``),[f,p]=(0,v.useState)({city:``,municipality:``,barangay:``}),[m,h]=(0,v.useState)(!1),[g,_]=(0,v.useState)(!1),[y,b]=(0,v.useState)(!1),[x,S]=(0,v.useState)(!1),[C,w]=(0,v.useState)(!1),[T,E]=(0,v.useState)(!1),[D,O]=(0,v.useState)(!1),[ee,k]=(0,v.useState)(null),[te,A]=(0,v.useState)(null),[ne,j]=(0,v.useState)(null),M=(e,t=`success`)=>{A({message:e,type:t})},N=(0,v.useCallback)(async()=>{a(!0);try{let e={};o&&(e.search=o),c&&(e.service=c),u&&(e.status=u),f.city&&(e.city=f.city),f.municipality&&(e.municipality=f.municipality),f.barangay&&(e.barangay=f.barangay);let n=await Jc(e);t(n.data),r(n.stats)}catch(e){M(e.message,`error`)}finally{a(!1)}},[o,c,u,f]);(0,v.useEffect)(()=>{let e=setTimeout(()=>{N()},300);return()=>clearTimeout(e)},[N]);let[P,re]=(0,v.useState)({cities:[],municipalities:[],barangays:[]});(0,v.useEffect)(()=>{e.length>0&&re({cities:[...new Set(e.map(e=>e.city).filter(Boolean))].sort(),municipalities:[...new Set(e.map(e=>e.municipality).filter(Boolean))].sort(),barangays:[...new Set(e.map(e=>e.barangay).filter(Boolean))].sort()})},[e]);let F=()=>{k(null),E(!0)},I=e=>{k(e),E(!0)},ie=e=>{k(e),O(!0)},ae=async e=>{if(window.confirm(`Are you sure you want to delete this volunteer?`))try{await Zc(e),M(`Volunteer deleted successfully`),N()}catch(e){M(e.message,`error`)}},oe=e=>{M(e),N()},se=()=>{s(``)},ce=()=>{l(``),d(``),p({city:``,municipality:``,barangay:``})},le=e=>e.split(` `).map(e=>e[0]).join(``).toUpperCase().slice(0,2),ue=e=>{let t=Qc.find(t=>t.value===e);return t?t.icon:`fa-solid fa-hand`},de=e=>({first_aid:`#3b82f6`,disaster_response:`#f59e0b`,blood_services:`#ef4444`,safety_services:`#10b981`,youth_services:`#14b8a6`,welfare_services:`#8b5cf6`})[e]||`#6b7280`,fe=()=>{let e=0;return c&&e++,u&&e++,f.city&&e++,f.municipality&&e++,f.barangay&&e++,e};return(0,H.jsxs)(`div`,{className:`av-root`,children:[(0,H.jsxs)(`div`,{className:`av-header`,children:[(0,H.jsx)(`div`,{className:`av-header__container`,children:(0,H.jsxs)(`div`,{className:`av-header__content`,children:[(0,H.jsxs)(`div`,{className:`av-header__left`,children:[(0,H.jsxs)(`div`,{className:`av-header__badge`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-hand-holding-heart`}),`Volunteer Management`]}),(0,H.jsx)(`h1`,{className:`av-header__title`,children:`Volunteers`}),(0,H.jsx)(`p`,{className:`av-header__subtitle`,children:`Manage and track volunteers across all service areas`})]}),(0,H.jsxs)(`div`,{className:`av-header__stats`,children:[(0,H.jsxs)(`div`,{className:`av-header-stat`,children:[(0,H.jsx)(`span`,{className:`av-header-stat__value`,children:n.total}),(0,H.jsx)(`span`,{className:`av-header-stat__label`,children:`Total Volunteers`})]}),(0,H.jsxs)(`div`,{className:`av-header-stat`,children:[(0,H.jsx)(`span`,{className:`av-header-stat__value`,children:n.by_status?.current||0}),(0,H.jsx)(`span`,{className:`av-header-stat__label`,children:`Active`})]}),(0,H.jsxs)(`div`,{className:`av-header-stat`,children:[(0,H.jsx)(`span`,{className:`av-header-stat__value`,children:n.by_status?.graduated||0}),(0,H.jsx)(`span`,{className:`av-header-stat__label`,children:`Graduated`})]})]})]})}),(0,H.jsx)(`div`,{className:`av-header__wave`,children:(0,H.jsx)(`svg`,{viewBox:`0 0 1440 120`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`,children:(0,H.jsx)(`path`,{d:`M0 120L60 105C120 90 240 60 360 45C480 30 600 30 720 37.5C840 45 960 60 1080 67.5C1200 75 1320 75 1380 75L1440 75V120H1380C1320 120 1200 120 1080 120C960 120 840 120 720 120C600 120 480 120 360 120C240 120 120 120 60 120H0Z`,fill:`white`,fillOpacity:`0.1`})})})]}),(0,H.jsxs)(`div`,{className:`av-body`,children:[(0,H.jsxs)(`div`,{className:`av-cards`,children:[(0,H.jsxs)(`div`,{className:`av-card`,children:[(0,H.jsx)(`div`,{className:`av-card__icon av-card__icon--total`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-users`})}),(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`div`,{className:`av-card__num`,children:n.total}),(0,H.jsx)(`div`,{className:`av-card__label`,children:`Total Volunteers`})]})]}),(0,H.jsxs)(`div`,{className:`av-card`,children:[(0,H.jsx)(`div`,{className:`av-card__icon av-card__icon--current`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-user-check`})}),(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`div`,{className:`av-card__num`,children:n.by_status?.current||0}),(0,H.jsx)(`div`,{className:`av-card__label`,children:`Current`})]})]}),(0,H.jsxs)(`div`,{className:`av-card`,children:[(0,H.jsx)(`div`,{className:`av-card__icon av-card__icon--graduated`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-graduation-cap`})}),(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`div`,{className:`av-card__num`,children:n.by_status?.graduated||0}),(0,H.jsx)(`div`,{className:`av-card__label`,children:`Graduated`})]})]}),(0,H.jsxs)(`div`,{className:`av-card`,children:[(0,H.jsx)(`div`,{className:`av-card__icon av-card__icon--services`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-hand-holding-heart`})}),(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`div`,{className:`av-card__num`,children:Object.keys(n.by_service||{}).length}),(0,H.jsx)(`div`,{className:`av-card__label`,children:`Service Areas`})]})]})]}),(0,H.jsxs)(`div`,{className:`av-toolbar`,children:[(0,H.jsxs)(`div`,{className:`av-toolbar__search`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-magnifying-glass av-toolbar__search-icon`}),(0,H.jsx)(`input`,{type:`text`,className:`av-toolbar__search-input`,placeholder:`Search volunteers by name or location...`,value:o,onChange:e=>s(e.target.value)}),o&&(0,H.jsx)(`button`,{className:`av-toolbar__search-clear`,onClick:se,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]}),(0,H.jsxs)(`div`,{className:`av-toolbar__filters`,children:[P.cities.length>0&&(0,H.jsxs)(`div`,{className:`av-toolbar__filter-dropdown`,children:[(0,H.jsxs)(`button`,{className:`av-toolbar__filter-dropdown-btn ${f.city?`av-toolbar__filter-dropdown-btn--active`:``}`,onClick:()=>b(!y),children:[(0,H.jsx)(`i`,{className:`fa-solid fa-city`}),(0,H.jsx)(`span`,{children:f.city||`All Cities`}),(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-down`})]}),y&&(0,H.jsxs)(`div`,{className:`av-toolbar__filter-dropdown-menu`,children:[(0,H.jsxs)(`button`,{onClick:()=>{p({...f,city:``}),b(!1)},className:f.city?``:`active`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-city`}),`All Cities`]}),P.cities.map(e=>(0,H.jsxs)(`button`,{onClick:()=>{p({...f,city:e,municipality:``,barangay:``}),b(!1)},className:f.city===e?`active`:``,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-city`}),e]},e))]})]}),P.municipalities.length>0&&(0,H.jsxs)(`div`,{className:`av-toolbar__filter-dropdown`,children:[(0,H.jsxs)(`button`,{className:`av-toolbar__filter-dropdown-btn ${f.municipality?`av-toolbar__filter-dropdown-btn--active`:``}`,onClick:()=>S(!x),children:[(0,H.jsx)(`i`,{className:`fa-solid fa-map-pin`}),(0,H.jsx)(`span`,{children:f.municipality||`All Municipalities`}),(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-down`})]}),x&&(0,H.jsxs)(`div`,{className:`av-toolbar__filter-dropdown-menu`,children:[(0,H.jsxs)(`button`,{onClick:()=>{p({...f,municipality:``,barangay:``}),S(!1)},className:f.municipality?``:`active`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-map-pin`}),`All Municipalities`]}),P.municipalities.map(e=>(0,H.jsxs)(`button`,{onClick:()=>{p({...f,municipality:e,barangay:``}),S(!1)},className:f.municipality===e?`active`:``,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-map-pin`}),e]},e))]})]}),P.barangays.length>0&&(0,H.jsxs)(`div`,{className:`av-toolbar__filter-dropdown`,children:[(0,H.jsxs)(`button`,{className:`av-toolbar__filter-dropdown-btn ${f.barangay?`av-toolbar__filter-dropdown-btn--active`:``}`,onClick:()=>w(!C),children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-dot`}),(0,H.jsx)(`span`,{children:f.barangay||`All Barangays`}),(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-down`})]}),C&&(0,H.jsxs)(`div`,{className:`av-toolbar__filter-dropdown-menu`,children:[(0,H.jsxs)(`button`,{onClick:()=>{p({...f,barangay:``}),w(!1)},className:f.barangay?``:`active`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-dot`}),`All Barangays`]}),P.barangays.map(e=>(0,H.jsxs)(`button`,{onClick:()=>{p({...f,barangay:e}),w(!1)},className:f.barangay===e?`active`:``,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-dot`}),e]},e))]})]}),(0,H.jsxs)(`div`,{className:`av-toolbar__filter-dropdown`,children:[(0,H.jsxs)(`button`,{className:`av-toolbar__filter-dropdown-btn ${c?`av-toolbar__filter-dropdown-btn--active`:``}`,onClick:()=>h(!m),children:[(0,H.jsx)(`i`,{className:`fa-solid fa-filter`}),(0,H.jsx)(`span`,{children:c?el(c):`All Services`}),(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-down`})]}),m&&(0,H.jsxs)(`div`,{className:`av-toolbar__filter-dropdown-menu`,children:[(0,H.jsxs)(`button`,{onClick:()=>{l(``),h(!1)},className:c?``:`active`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-filter`}),`All Services`]}),Qc.map(e=>(0,H.jsxs)(`button`,{onClick:()=>{l(e.value),h(!1)},className:c===e.value?`active`:``,children:[(0,H.jsx)(`i`,{className:e.icon}),e.label]},e.value))]})]}),(0,H.jsxs)(`div`,{className:`av-toolbar__filter-dropdown`,children:[(0,H.jsxs)(`button`,{className:`av-toolbar__filter-dropdown-btn ${u?`av-toolbar__filter-dropdown-btn--active`:``}`,onClick:()=>_(!g),children:[(0,H.jsx)(`i`,{className:`fa-solid fa-flag`}),(0,H.jsx)(`span`,{children:u?tl(u):`All Status`}),(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-down`})]}),g&&(0,H.jsxs)(`div`,{className:`av-toolbar__filter-dropdown-menu`,children:[(0,H.jsxs)(`button`,{onClick:()=>{d(``),_(!1)},className:u?``:`active`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-flag`}),`All Status`]}),$c.map(e=>(0,H.jsxs)(`button`,{onClick:()=>{d(e.value),_(!1)},className:u===e.value?`active`:``,children:[(0,H.jsx)(`i`,{className:e.icon}),e.label]},e.value))]})]}),fe()>0&&(0,H.jsxs)(`button`,{className:`av-toolbar__filter-clear-btn`,onClick:ce,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-times`}),`Clear Filters (`,fe(),`)`]})]}),(0,H.jsxs)(`button`,{className:`av-toolbar__create-btn`,onClick:F,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-plus`}),`Add Volunteer`]})]}),(0,H.jsxs)(`div`,{className:`av-table-panel`,children:[(0,H.jsxs)(`div`,{className:`av-table-panel__head`,children:[(0,H.jsxs)(`div`,{className:`av-table-panel__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-users`}),`Volunteer List`]}),(0,H.jsxs)(`div`,{className:`av-table-panel__info`,children:[(0,H.jsxs)(`span`,{className:`av-table-panel__count`,children:[e.length,` `,e.length===1?`volunteer`:`volunteers`]}),(0,H.jsx)(`span`,{className:`av-table-panel__divider`,children:``}),(0,H.jsxs)(`span`,{className:`av-table-panel__sub`,children:[`Page 1 of `,Math.ceil(e.length/10)||1]})]})]}),(0,H.jsx)(`div`,{className:`av-table-panel__scroll`,children:(0,H.jsxs)(`table`,{className:`av-table`,children:[(0,H.jsx)(`thead`,{children:(0,H.jsxs)(`tr`,{children:[(0,H.jsx)(`th`,{children:`Volunteer`}),(0,H.jsx)(`th`,{children:`Location`}),(0,H.jsx)(`th`,{children:`Contact`}),(0,H.jsx)(`th`,{children:`Service`}),(0,H.jsx)(`th`,{children:`Status`}),(0,H.jsx)(`th`,{children:`Notes`}),(0,H.jsx)(`th`,{children:`Actions`})]})}),(0,H.jsx)(`tbody`,{children:i?(0,H.jsx)(`tr`,{children:(0,H.jsx)(`td`,{colSpan:`7`,children:(0,H.jsxs)(`div`,{className:`av-table__loading`,children:[(0,H.jsx)(`div`,{className:`av-table__loading-spinner`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-spinner fa-spin`})}),(0,H.jsx)(`p`,{children:`Loading volunteers...`}),(0,H.jsx)(`span`,{className:`av-table__loading-sub`,children:`Fetching volunteer data`})]})})}):e.length===0?(0,H.jsx)(`tr`,{children:(0,H.jsx)(`td`,{colSpan:`7`,children:(0,H.jsxs)(`div`,{className:`av-table__empty`,children:[(0,H.jsx)(`div`,{className:`av-table__empty-icon`,children:(0,H.jsx)(`i`,{className:`fa-regular fa-face-frown`})}),(0,H.jsx)(`h3`,{className:`av-table__empty-title`,children:`No Volunteers Found`}),(0,H.jsx)(`p`,{className:`av-table__empty-message`,children:o||c||u||f.city||f.municipality||f.barangay?`Try adjusting your search or filter criteria`:`Get started by adding your first volunteer`}),(o||c||u||f.city||f.municipality||f.barangay)&&(0,H.jsxs)(`button`,{className:`av-table__empty-action`,onClick:ce,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-times`}),` Clear Filters`]})]})})}):e.map(e=>{let t=de(e.service);return(0,H.jsxs)(`tr`,{onMouseEnter:()=>j(e.volunteer_id),onMouseLeave:()=>j(null),className:ne===e.volunteer_id?`av-table__row--hovered`:``,children:[(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`av-volunteer-cell`,children:[(0,H.jsx)(`div`,{className:`av-volunteer-cell__avatar`,style:{background:`linear-gradient(135deg, ${t}, ${t}dd)`},children:le(e.full_name)}),(0,H.jsxs)(`div`,{className:`av-volunteer-cell__info`,children:[(0,H.jsx)(`div`,{className:`av-volunteer-cell__info-name`,children:e.full_name}),(0,H.jsxs)(`div`,{className:`av-volunteer-cell__info-age`,children:[e.age,` years old`]})]})]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`av-location`,children:[(0,H.jsx)(`div`,{className:`av-location__main`,children:e.location}),(e.barangay||e.municipality)&&(0,H.jsxs)(`div`,{className:`av-location__detail`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle`}),[e.barangay,e.municipality,e.city].filter(Boolean).join(`, `)]})]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`av-contact`,children:[(0,H.jsxs)(`div`,{className:`av-contact__phone`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-phone`}),e.contact_number]}),e.email&&(0,H.jsxs)(`div`,{className:`av-contact__email`,title:e.email,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-envelope`}),(0,H.jsx)(`span`,{children:e.email})]})]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`span`,{className:`av-service-badge av-service-badge--${e.service}`,style:{background:`${t}12`,color:t,border:`1px solid ${t}25`},children:[(0,H.jsx)(`i`,{className:ue(e.service)}),el(e.service)]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`span`,{className:`av-status av-status--${e.status}`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle`}),tl(e.status)]})}),(0,H.jsx)(`td`,{children:(0,H.jsx)(`div`,{className:`av-notes`,title:e.notes,children:e.notes||``})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`av-actions`,children:[(0,H.jsx)(`button`,{className:`av-action-btn av-action-btn--view`,onClick:()=>ie(e),title:`View Details`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-eye`})}),(0,H.jsx)(`button`,{className:`av-action-btn av-action-btn--edit`,onClick:()=>I(e),title:`Edit Volunteer`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-pen`})}),(0,H.jsx)(`button`,{className:`av-action-btn av-action-btn--delete`,onClick:()=>ae(e.volunteer_id),title:`Delete Volunteer`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-trash`})})]})})]},e.volunteer_id)})})]})})]})]}),T&&(0,H.jsx)(rl,{volunteer:ee,onClose:()=>E(!1),onSuccess:oe}),D&&(0,H.jsx)(il,{volunteer:ee,onClose:()=>O(!1)}),te&&(0,H.jsx)(nl,{message:te.message,type:te.type,onClose:()=>A(null)})]})}var ol=[{key:`All Services`,label:`All Services`,color:`#8b1e1e`,icon:`fa-calendar`},{key:`Health Service`,label:`Health Service`,color:`#c41e3a`,icon:`fa-heart-pulse`},{key:`Safety Service`,label:`Safety Service`,color:`#15803d`,icon:`fa-shield`},{key:`Welfare Service`,label:`Welfare Service`,color:`#7c3aed`,icon:`fa-hand-holding-heart`},{key:`Disaster Management Service`,label:`Disaster Management`,color:`#c2410c`,icon:`fa-triangle-exclamation`},{key:`Red Cross Youth`,label:`Red Cross Youth`,color:`#003d6b`,icon:`fa-people-group`}],sl={title:``,description:``,major_service:``,session_date:``,session_end_date:``,start_time:`09:00`,end_time:`17:00`,venue:``,capacity:0,fee:0,requirements:``,instructor:``,instructor_bio:``,instructor_credentials:``};function cl({service:e}){let t=ol.find(t=>t.key===e)||{label:e,color:`#6b7280`,icon:`fa-tag`};return(0,H.jsxs)(`span`,{className:`at-badge at-badge--service`,style:{background:`${t.color}12`,color:t.color,border:`1px solid ${t.color}25`},children:[(0,H.jsx)(`i`,{className:`fas ${t.icon}`}),t.label]})}function ll({isPast:e,isUpcoming:t,isOngoing:n}){let r=`Ongoing`,i=`#f59e0b`,a=`#fef3c7`,o=`fa-clock`;return e?(r=`Completed`,i=`#10b981`,a=`#d1fae5`,o=`fa-check-circle`):t&&(r=`Upcoming`,i=`#3b82f6`,a=`#dbeafe`,o=`fa-calendar`),(0,H.jsxs)(`span`,{className:`at-badge`,style:{background:a,color:i,border:`1px solid ${i}33`},children:[(0,H.jsx)(`i`,{className:`fas ${o}`}),` `,r]})}function ul({fee:e}){return e>0?(0,H.jsxs)(`span`,{className:`at-fee`,children:[``,parseFloat(e).toFixed(2)]}):(0,H.jsxs)(`span`,{className:`at-badge at-badge--free`,style:{background:`#10b98112`,color:`#10b981`,border:`1px solid #10b98125`},children:[(0,H.jsx)(`i`,{className:`fas fa-gift`}),` FREE`]})}function dl({message:e,type:t,onClose:n}){return(0,v.useEffect)(()=>{let e=setTimeout(n,3500);return()=>clearTimeout(e)},[n]),(0,H.jsxs)(`div`,{className:`at-toast at-toast--${t}`,onClick:n,children:[(0,H.jsx)(`div`,{className:`at-toast__icon`,children:(0,H.jsx)(`i`,{className:`fas ${t===`success`?`fa-circle-check`:`fa-circle-xmark`}`})}),(0,H.jsxs)(`div`,{className:`at-toast__content`,children:[(0,H.jsx)(`div`,{className:`at-toast__title`,children:t===`success`?`Success`:`Error`}),(0,H.jsx)(`div`,{className:`at-toast__message`,children:e})]}),(0,H.jsx)(`button`,{className:`at-toast__close`,onClick:n,children:(0,H.jsx)(`i`,{className:`fas fa-xmark`})})]})}function fl({session:e,onClose:t,onSaved:n}){let[r,i]=(0,v.useState)(e||{...sl}),[a,o]=(0,v.useState)(!1),[s,c]=(0,v.useState)({}),l=!!e;function u(e,t){i(n=>({...n,[e]:t})),c(t=>({...t,[e]:void 0}))}function d(){let e={};return r.title?.trim()||(e.title=`Title is required`),r.major_service||(e.major_service=`Service is required`),r.session_date||(e.session_date=`Start date is required`),r.venue?.trim()||(e.venue=`Venue is required`),e}async function f(t){t.preventDefault();let i=d();if(Object.keys(i).length){c(i);return}o(!0);try{let t={...r};t.session_end_date||=t.session_date,n((l?await bo(e.session_id,t):await yo(t)).message||`Training session saved successfully`)}catch(e){c({_global:e.message||`Failed to save training session`})}finally{o(!1)}}return(0,H.jsx)(`div`,{className:`at-overlay`,onClick:t,children:(0,H.jsxs)(`div`,{className:`at-modal at-modal--lg`,onClick:e=>e.stopPropagation(),children:[(0,H.jsxs)(`div`,{className:`at-modal__header`,children:[(0,H.jsxs)(`div`,{className:`at-modal__title`,children:[(0,H.jsx)(`i`,{className:`fas ${l?`fa-pen-to-square`:`fa-plus-circle`}`}),l?` Edit Training Session`:` Create New Training Session`]}),(0,H.jsx)(`button`,{className:`at-modal__close`,onClick:t,children:(0,H.jsx)(`i`,{className:`fas fa-xmark`})})]}),(0,H.jsxs)(`form`,{className:`at-modal__body`,onSubmit:f,children:[s._global&&(0,H.jsxs)(`div`,{className:`at-form__error-banner`,children:[(0,H.jsx)(`i`,{className:`fas fa-circle-exclamation`}),` `,s._global]}),(0,H.jsxs)(`div`,{className:`at-form__field`,children:[(0,H.jsxs)(`label`,{className:`at-form__label`,children:[`Session Title `,(0,H.jsx)(`span`,{className:`at-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{className:`at-form__input${s.title?` at-form__input--error`:``}`,value:r.title,onChange:e=>u(`title`,e.target.value),placeholder:`e.g., Emergency First Aid Training`}),s.title&&(0,H.jsxs)(`span`,{className:`at-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fas fa-circle-exclamation`}),` `,s.title]})]}),(0,H.jsxs)(`div`,{className:`at-form__field`,children:[(0,H.jsx)(`label`,{className:`at-form__label`,children:`Description`}),(0,H.jsx)(`textarea`,{className:`at-form__textarea`,rows:3,value:r.description,onChange:e=>u(`description`,e.target.value),placeholder:`Training session description, objectives, and learning outcomes`})]}),(0,H.jsxs)(`div`,{className:`at-form__field`,children:[(0,H.jsxs)(`label`,{className:`at-form__label`,children:[`Major Service `,(0,H.jsx)(`span`,{className:`at-form__required`,children:`*`})]}),(0,H.jsxs)(`select`,{className:`at-form__select${s.major_service?` at-form__select--error`:``}`,value:r.major_service,onChange:e=>u(`major_service`,e.target.value),children:[(0,H.jsx)(`option`,{value:``,children:`Select a service`}),ol.filter(e=>e.key!==`All Services`).map(e=>(0,H.jsx)(`option`,{value:e.key,children:e.label},e.key))]}),s.major_service&&(0,H.jsxs)(`span`,{className:`at-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fas fa-circle-exclamation`}),` `,s.major_service]})]}),(0,H.jsxs)(`div`,{className:`at-form__row`,children:[(0,H.jsxs)(`div`,{className:`at-form__field`,children:[(0,H.jsxs)(`label`,{className:`at-form__label`,children:[`Start Date `,(0,H.jsx)(`span`,{className:`at-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`date`,className:`at-form__input${s.session_date?` at-form__input--error`:``}`,value:r.session_date,onChange:e=>u(`session_date`,e.target.value)}),s.session_date&&(0,H.jsxs)(`span`,{className:`at-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fas fa-circle-exclamation`}),` `,s.session_date]})]}),(0,H.jsxs)(`div`,{className:`at-form__field`,children:[(0,H.jsx)(`label`,{className:`at-form__label`,children:`End Date`}),(0,H.jsx)(`input`,{type:`date`,className:`at-form__input`,value:r.session_end_date||r.session_date,onChange:e=>u(`session_end_date`,e.target.value)}),(0,H.jsxs)(`small`,{className:`at-form__hint`,children:[(0,H.jsx)(`i`,{className:`fas fa-info-circle`}),` Leave blank for single day`]})]})]}),(0,H.jsxs)(`div`,{className:`at-form__row`,children:[(0,H.jsxs)(`div`,{className:`at-form__field`,children:[(0,H.jsx)(`label`,{className:`at-form__label`,children:`Start Time`}),(0,H.jsx)(`input`,{type:`time`,className:`at-form__input`,value:r.start_time,onChange:e=>u(`start_time`,e.target.value)})]}),(0,H.jsxs)(`div`,{className:`at-form__field`,children:[(0,H.jsx)(`label`,{className:`at-form__label`,children:`End Time`}),(0,H.jsx)(`input`,{type:`time`,className:`at-form__input`,value:r.end_time,onChange:e=>u(`end_time`,e.target.value)})]})]}),(0,H.jsxs)(`div`,{className:`at-form__field`,children:[(0,H.jsxs)(`label`,{className:`at-form__label`,children:[`Training Venue `,(0,H.jsx)(`span`,{className:`at-form__required`,children:`*`})]}),(0,H.jsx)(`textarea`,{className:`at-form__textarea${s.venue?` at-form__textarea--error`:``}`,rows:3,value:r.venue,onChange:e=>u(`venue`,e.target.value),placeholder:`Full address, building name, room number, and directions`}),(0,H.jsxs)(`small`,{className:`at-form__hint`,children:[(0,H.jsx)(`i`,{className:`fas fa-info-circle`}),` Include room numbers, parking info, and accessibility notes`]}),s.venue&&(0,H.jsxs)(`span`,{className:`at-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fas fa-circle-exclamation`}),` `,s.venue]})]}),(0,H.jsxs)(`div`,{className:`at-form__row`,children:[(0,H.jsxs)(`div`,{className:`at-form__field`,children:[(0,H.jsx)(`label`,{className:`at-form__label`,children:`Capacity`}),(0,H.jsx)(`input`,{type:`number`,className:`at-form__input`,value:r.capacity,onChange:e=>u(`capacity`,e.target.value),min:`0`,placeholder:`0 for unlimited`}),(0,H.jsxs)(`small`,{className:`at-form__hint`,children:[(0,H.jsx)(`i`,{className:`fas fa-info-circle`}),` Maximum participants`]})]}),(0,H.jsxs)(`div`,{className:`at-form__field`,children:[(0,H.jsx)(`label`,{className:`at-form__label`,children:`Fee ()`}),(0,H.jsx)(`input`,{type:`number`,step:`0.01`,className:`at-form__input`,value:r.fee,onChange:e=>u(`fee`,e.target.value),min:`0`,placeholder:`0.00 for free`})]})]}),(0,H.jsxs)(`div`,{className:`at-form__field`,children:[(0,H.jsx)(`label`,{className:`at-form__label`,children:`Instructor/Facilitator`}),(0,H.jsx)(`input`,{className:`at-form__input`,value:r.instructor,onChange:e=>u(`instructor`,e.target.value),placeholder:`e.g., Dr. Maria Santos, RN`}),(0,H.jsxs)(`small`,{className:`at-form__hint`,children:[(0,H.jsx)(`i`,{className:`fas fa-info-circle`}),` Optional - leave blank if not assigned`]})]}),(0,H.jsxs)(`div`,{className:`at-form__field`,children:[(0,H.jsx)(`label`,{className:`at-form__label`,children:`Instructor Credentials`}),(0,H.jsx)(`input`,{className:`at-form__input`,value:r.instructor_credentials,onChange:e=>u(`instructor_credentials`,e.target.value),placeholder:`e.g., MD, BLS Instructor, ACLS Provider`})]}),(0,H.jsxs)(`div`,{className:`at-form__field`,children:[(0,H.jsx)(`label`,{className:`at-form__label`,children:`Instructor Bio`}),(0,H.jsx)(`textarea`,{className:`at-form__textarea`,rows:3,value:r.instructor_bio,onChange:e=>u(`instructor_bio`,e.target.value),placeholder:`Brief professional background and experience`})]}),(0,H.jsxs)(`div`,{className:`at-form__field`,children:[(0,H.jsx)(`label`,{className:`at-form__label`,children:`Training Requirements`}),(0,H.jsx)(`textarea`,{className:`at-form__textarea`,rows:2,value:r.requirements,onChange:e=>u(`requirements`,e.target.value),placeholder:`Prerequisites, materials to bring, documents needed, etc.`})]}),(0,H.jsx)(`button`,{type:`submit`,disabled:a,className:`at-form__submit`,children:a?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fas fa-spinner fa-spin`}),` Saving Session...`]}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fas fa-save`}),` `,l?`Update Session`:`Create Session`]})})]})]})})}function pl({session:e,onClose:t,onUpdate:n}){let[r,i]=(0,v.useState)([]),[a,o]=(0,v.useState)(!0),[s,c]=(0,v.useState)(null),[l,u]=(0,v.useState)({total:0,approved:0,pending:0,rejected:0}),d=(e,t=`success`)=>c({msg:e,type:t}),f=(0,v.useCallback)(async()=>{try{o(!0);let{registrations:t}=await Mo(e.session_id);i(t),u({total:t.length,approved:t.filter(e=>e.status===`approved`).length,pending:t.filter(e=>e.status===`pending`).length,rejected:t.filter(e=>e.status===`rejected`).length})}catch(e){console.error(`Load registrations error:`,e),d(e.message||`Failed to load registrations`,`error`)}finally{o(!1)}},[e.session_id]);(0,v.useEffect)(()=>{f()},[f]);async function p(e){try{await No(e),d(`Registration approved successfully`),f(),n?.()}catch(e){d(e.message||`Failed to approve registration`,`error`)}}async function m(e){try{await Po(e),d(`Registration rejected`),f(),n?.()}catch(e){d(e.message||`Failed to reject registration`,`error`)}}async function h(e){if(window.confirm(`Are you sure you want to delete this registration?`))try{await Fo(e),d(`Registration deleted`),f(),n?.()}catch(e){d(e.message||`Failed to delete registration`,`error`)}}function g(e){return e.split(` `).map(e=>e[0]).join(``).toUpperCase().slice(0,2)}return(0,H.jsx)(`div`,{className:`at-overlay`,onClick:t,children:(0,H.jsxs)(`div`,{className:`at-modal at-modal--xl`,onClick:e=>e.stopPropagation(),children:[(0,H.jsxs)(`div`,{className:`at-modal__header`,children:[(0,H.jsxs)(`div`,{className:`at-modal__title`,children:[(0,H.jsx)(`i`,{className:`fas fa-users`}),` Registrations `,` `,(0,H.jsx)(`strong`,{children:e.title})]}),(0,H.jsx)(`button`,{className:`at-modal__close`,onClick:t,children:(0,H.jsx)(`i`,{className:`fas fa-xmark`})})]}),(0,H.jsxs)(`div`,{className:`at-modal__body at-modal__body--regs`,children:[(0,H.jsxs)(`div`,{className:`at-reg-stats`,children:[(0,H.jsxs)(`div`,{className:`at-reg-stat`,children:[(0,H.jsx)(`div`,{className:`at-reg-stat__num`,children:l.total}),(0,H.jsx)(`div`,{className:`at-reg-stat__label`,children:`Total Registrations`})]}),(0,H.jsxs)(`div`,{className:`at-reg-stat at-reg-stat--approved`,children:[(0,H.jsx)(`div`,{className:`at-reg-stat__num`,children:l.approved}),(0,H.jsx)(`div`,{className:`at-reg-stat__label`,children:`Approved`})]}),(0,H.jsxs)(`div`,{className:`at-reg-stat at-reg-stat--pending`,children:[(0,H.jsx)(`div`,{className:`at-reg-stat__num`,children:l.pending}),(0,H.jsx)(`div`,{className:`at-reg-stat__label`,children:`Pending`})]}),(0,H.jsxs)(`div`,{className:`at-reg-stat at-reg-stat--rejected`,children:[(0,H.jsx)(`div`,{className:`at-reg-stat__num`,children:l.rejected}),(0,H.jsx)(`div`,{className:`at-reg-stat__label`,children:`Rejected`})]})]}),a?(0,H.jsxs)(`div`,{className:`at-reg-loading`,children:[(0,H.jsx)(`div`,{className:`at-reg-loading__spinner`,children:(0,H.jsx)(`i`,{className:`fas fa-spinner fa-spin`})}),(0,H.jsx)(`p`,{children:`Loading registrations...`}),(0,H.jsx)(`span`,{className:`at-reg-loading__sub`,children:`Fetching participant data`})]}):r.length===0?(0,H.jsxs)(`div`,{className:`at-reg-empty`,children:[(0,H.jsx)(`div`,{className:`at-reg-empty__icon`,children:(0,H.jsx)(`i`,{className:`fas fa-inbox`})}),(0,H.jsx)(`h3`,{className:`at-reg-empty__title`,children:`No Registrations Yet`}),(0,H.jsx)(`p`,{className:`at-reg-empty__message`,children:`No participants have registered for this training session`})]}):(0,H.jsx)(`div`,{className:`at-reg-table-container`,children:(0,H.jsxs)(`table`,{className:`at-reg-table`,children:[(0,H.jsx)(`thead`,{children:(0,H.jsxs)(`tr`,{children:[(0,H.jsx)(`th`,{children:`PARTICIPANT`}),(0,H.jsx)(`th`,{children:`REGISTRATION DATE`}),(0,H.jsx)(`th`,{children:`STATUS`}),(0,H.jsx)(`th`,{children:`DOCUMENTS`}),(0,H.jsx)(`th`,{children:`ACTIONS`})]})}),(0,H.jsx)(`tbody`,{children:r.map(e=>{let t=`#c41e3a`;return(0,H.jsxs)(`tr`,{className:`at-reg-row`,children:[(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`at-reg-user`,children:[(0,H.jsx)(`div`,{className:`at-reg-user__avatar`,style:{background:`${t}12`,color:t,border:`2px solid ${t}25`},children:g(e.full_name)}),(0,H.jsxs)(`div`,{className:`at-reg-user__info`,children:[(0,H.jsx)(`div`,{className:`at-reg-user__name`,children:e.full_name}),(0,H.jsx)(`div`,{className:`at-reg-user__email`,children:e.email}),e.age&&(0,H.jsxs)(`div`,{className:`at-reg-user__meta`,children:[(0,H.jsx)(`i`,{className:`fas fa-cake-candles`}),` Age:`,` `,e.age]}),e.location&&(0,H.jsxs)(`div`,{className:`at-reg-user__meta`,children:[(0,H.jsx)(`i`,{className:`fas fa-location-dot`}),` `,e.location]})]})]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`at-reg-date`,children:[(0,H.jsx)(`div`,{className:`at-reg-date__main`,children:new Date(e.registration_date).toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,year:`numeric`})}),(0,H.jsx)(`div`,{className:`at-reg-date__time`,children:new Date(e.registration_date).toLocaleTimeString(`en-US`,{hour:`2-digit`,minute:`2-digit`})})]})}),(0,H.jsx)(`td`,{children:(0,H.jsx)(`span`,{className:`at-status at-status--${e.status}`,children:e.status?.toUpperCase()})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`at-reg-docs`,children:[e.valid_id_path&&(0,H.jsxs)(`a`,{href:`http://localhost/prc-management-system/${e.valid_id_path}`,target:`_blank`,rel:`noreferrer`,className:`at-doc-link`,children:[(0,H.jsx)(`i`,{className:`fas fa-id-card`}),` Valid ID`]}),e.requirements_path&&(0,H.jsxs)(`a`,{href:`http://localhost/prc-management-system/${e.requirements_path}`,target:`_blank`,rel:`noreferrer`,className:`at-doc-link`,children:[(0,H.jsx)(`i`,{className:`fas fa-file-alt`}),` Requirements`]}),e.payment_receipt_path&&(0,H.jsxs)(`a`,{href:`http://localhost/prc-management-system/${e.payment_receipt_path}`,target:`_blank`,rel:`noreferrer`,className:`at-doc-link`,children:[(0,H.jsx)(`i`,{className:`fas fa-receipt`}),` Receipt`]})]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`at-reg-actions`,children:[e.status===`pending`&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`button`,{className:`at-reg-btn at-reg-btn--approve`,onClick:()=>p(e.registration_id),title:`Approve Registration`,children:(0,H.jsx)(`i`,{className:`fas fa-check`})}),(0,H.jsx)(`button`,{className:`at-reg-btn at-reg-btn--reject`,onClick:()=>m(e.registration_id),title:`Reject Registration`,children:(0,H.jsx)(`i`,{className:`fas fa-times`})})]}),(0,H.jsx)(`button`,{className:`at-reg-btn at-reg-btn--delete`,onClick:()=>h(e.registration_id),title:`Delete Registration`,children:(0,H.jsx)(`i`,{className:`fas fa-trash`})})]})})]},e.registration_id)})})]})})]}),s&&(0,H.jsx)(dl,{message:s.msg,type:s.type,onClose:()=>c(null)})]})})}function ml(){let[e,t]=(0,v.useState)([]),[n,r]=(0,v.useState)(null),[i,a]=(0,v.useState)(!0),[o,s]=(0,v.useState)(`all`),[c,l]=(0,v.useState)(``),[u,d]=(0,v.useState)(`All Services`),[f,p]=(0,v.useState)(null),[m,h]=(0,v.useState)(null),[g,_]=(0,v.useState)(!1),[y,b]=(0,v.useState)(null),[x,S]=(0,v.useState)(null),C=(e,t=`success`)=>b({msg:e,type:t}),w=(0,v.useCallback)(async()=>{try{let{stats:e}=await vo();r(e)}catch(e){console.error(`Stats error:`,e)}},[]);(0,v.useEffect)(()=>{w()},[w]);let T=(0,v.useCallback)(async()=>{a(!0);try{let{sessions:e}=await _o({filter:o,search:c,service:u});t(e)}catch(e){console.error(`Fetch sessions error:`,e),C(e.message||`Failed to load training sessions`,`error`),t([])}finally{a(!1)}},[o,c,u]);(0,v.useEffect)(()=>{T()},[T]);async function E(e){if(window.confirm(`Are you sure you want to archive "${e.title}"?`))try{C((await xo(e.session_id)).message||`Session archived successfully`),T(),w()}catch(e){C(e.message||`Failed to archive session`,`error`)}}function D(e){C(e),p(null),_(!1),T(),w()}let O=n?.total??e.length,ee=n?.upcoming??0,k=n?.completed??0,te=n?.services||[],A=()=>{let e=0;return o!==`all`&&e++,c&&e++,u!==`All Services`&&e++,e},ne=()=>{s(`all`),l(``),d(`All Services`)};return(0,H.jsxs)(`div`,{className:`at-root`,children:[(0,H.jsxs)(`div`,{className:`at-header`,children:[(0,H.jsx)(`div`,{className:`at-header__container`,children:(0,H.jsxs)(`div`,{className:`at-header__content`,children:[(0,H.jsxs)(`div`,{className:`at-header__left`,children:[(0,H.jsxs)(`div`,{className:`at-header__badge`,children:[(0,H.jsx)(`i`,{className:`fas fa-graduation-cap`}),` Training Management`]}),(0,H.jsx)(`h1`,{className:`at-header__title`,children:`Training Administration`}),(0,H.jsx)(`p`,{className:`at-header__subtitle`,children:`Schedule and manage training sessions and participant registrations`})]}),(0,H.jsxs)(`div`,{className:`at-header__stats`,children:[(0,H.jsxs)(`div`,{className:`at-header-stat`,children:[(0,H.jsx)(`span`,{className:`at-header-stat__value`,children:O}),(0,H.jsx)(`span`,{className:`at-header-stat__label`,children:`Total Sessions`})]}),(0,H.jsxs)(`div`,{className:`at-header-stat`,children:[(0,H.jsx)(`span`,{className:`at-header-stat__value`,children:ee}),(0,H.jsx)(`span`,{className:`at-header-stat__label`,children:`Upcoming`})]}),(0,H.jsxs)(`div`,{className:`at-header-stat`,children:[(0,H.jsx)(`span`,{className:`at-header-stat__value`,children:k}),(0,H.jsx)(`span`,{className:`at-header-stat__label`,children:`Completed`})]})]})]})}),(0,H.jsx)(`div`,{className:`at-header__wave`,children:(0,H.jsx)(`svg`,{viewBox:`0 0 1440 120`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`,children:(0,H.jsx)(`path`,{d:`M0 120L60 105C120 90 240 60 360 45C480 30 600 30 720 37.5C840 45 960 60 1080 67.5C1200 75 1320 75 1380 75L1440 75V120H1380C1320 120 1200 120 1080 120C960 120 840 120 720 120C600 120 480 120 360 120C240 120 120 120 60 120H0Z`,fill:`white`,fillOpacity:`0.1`})})})]}),(0,H.jsxs)(`div`,{className:`at-body`,children:[(0,H.jsx)(`div`,{className:`at-services`,children:ol.map(e=>{let t=e.key===`All Services`?O:te.find(t=>t.major_service===e.key)?.count||0,n=u===e.key;return(0,H.jsxs)(`button`,{className:`at-service-card ${n?`at-service-card--active`:``}`,style:{borderColor:e.color,background:n?`${e.color}08`:`white`},onClick:()=>d(e.key),children:[(0,H.jsx)(`i`,{className:`fas ${e.icon}`,style:{color:e.color,fontSize:`1.5rem`,marginBottom:`0.5rem`}}),(0,H.jsx)(`div`,{className:`at-service-card__count`,style:{color:e.color},children:t}),(0,H.jsx)(`div`,{className:`at-service-card__label`,children:e.label})]},e.key)})}),(0,H.jsxs)(`div`,{className:`at-toolbar`,children:[(0,H.jsxs)(`div`,{className:`at-toolbar__search`,children:[(0,H.jsx)(`i`,{className:`fas fa-search at-toolbar__search-icon`}),(0,H.jsx)(`input`,{className:`at-toolbar__search-input`,value:c,onChange:e=>l(e.target.value),placeholder:`Search sessions by title, instructor, or venue...`}),c&&(0,H.jsx)(`button`,{className:`at-toolbar__search-clear`,onClick:()=>l(``),children:(0,H.jsx)(`i`,{className:`fas fa-times`})})]}),(0,H.jsxs)(`div`,{className:`at-toolbar__filters`,children:[[{key:`all`,label:`All Sessions`,color:`#6b7280`},{key:`upcoming`,label:`Upcoming`,color:`#3b82f6`},{key:`past`,label:`Past Sessions`,color:`#9ca3af`}].map(({key:e,label:t,color:n})=>(0,H.jsx)(`button`,{className:`at-toolbar__filter-btn ${o===e?`at-toolbar__filter-btn--active`:``}`,onClick:()=>s(e),style:o===e?{background:`${n}12`,color:n,borderColor:n}:{},children:t},e)),A()>0&&(0,H.jsxs)(`button`,{className:`at-toolbar__filter-clear`,onClick:ne,children:[(0,H.jsx)(`i`,{className:`fas fa-times`}),`Clear Filters (`,A(),`)`]})]}),(0,H.jsxs)(`button`,{className:`at-toolbar__create-btn`,onClick:()=>_(!0),children:[(0,H.jsx)(`i`,{className:`fas fa-plus`}),` Create Session`]})]}),(0,H.jsxs)(`div`,{className:`at-table-panel`,children:[(0,H.jsxs)(`div`,{className:`at-table-panel__head`,children:[(0,H.jsxs)(`div`,{className:`at-table-panel__title`,children:[(0,H.jsx)(`i`,{className:`fas fa-graduation-cap`}),` Training Sessions`]}),(0,H.jsx)(`div`,{className:`at-table-panel__info`,children:!i&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(`span`,{className:`at-table-panel__count`,children:[e.length,` session`,e.length===1?``:`s`]}),(0,H.jsx)(`span`,{className:`at-table-panel__divider`,children:``}),(0,H.jsxs)(`span`,{className:`at-table-panel__sub`,children:[`Page 1 of `,Math.ceil(e.length/10)||1]})]})})]}),(0,H.jsx)(`div`,{className:`at-table-panel__scroll`,children:(0,H.jsxs)(`table`,{className:`at-table`,children:[(0,H.jsx)(`thead`,{children:(0,H.jsxs)(`tr`,{children:[(0,H.jsx)(`th`,{children:`SESSION DETAILS`}),(0,H.jsx)(`th`,{children:`SERVICE`}),(0,H.jsx)(`th`,{children:`DATE & TIME`}),(0,H.jsx)(`th`,{children:`INSTRUCTOR`}),(0,H.jsx)(`th`,{children:`LOCATION`}),(0,H.jsx)(`th`,{children:`FEE`}),(0,H.jsx)(`th`,{children:`REGISTRATIONS`}),(0,H.jsx)(`th`,{children:`STATUS`}),(0,H.jsx)(`th`,{children:`ACTIONS`})]})}),(0,H.jsx)(`tbody`,{children:i?(0,H.jsx)(`tr`,{children:(0,H.jsx)(`td`,{colSpan:9,children:(0,H.jsxs)(`div`,{className:`at-table__loading`,children:[(0,H.jsx)(`div`,{className:`at-table__loading-spinner`,children:(0,H.jsx)(`i`,{className:`fas fa-spinner fa-spin`})}),(0,H.jsx)(`p`,{children:`Loading training sessions...`}),(0,H.jsx)(`span`,{className:`at-table__loading-sub`,children:`Fetching session data`})]})})}):e.length===0?(0,H.jsx)(`tr`,{children:(0,H.jsx)(`td`,{colSpan:9,children:(0,H.jsxs)(`div`,{className:`at-table__empty`,children:[(0,H.jsx)(`div`,{className:`at-table__empty-icon`,children:(0,H.jsx)(`i`,{className:`fas fa-calendar-xmark`})}),(0,H.jsx)(`h3`,{className:`at-table__empty-title`,children:`No Sessions Found`}),(0,H.jsx)(`p`,{className:`at-table__empty-message`,children:c||o!==`all`||u!==`All Services`?`Try adjusting your search or filter criteria`:`Get started by creating your first training session`}),(c||o!==`all`||u!==`All Services`)&&(0,H.jsxs)(`button`,{className:`at-table__empty-action`,onClick:ne,children:[(0,H.jsx)(`i`,{className:`fas fa-times`}),` Clear Filters`]})]})})}):e.map(e=>{let t=ol.find(t=>t.key===e.major_service)?.color||`#6b7280`;return(0,H.jsxs)(`tr`,{onMouseEnter:()=>S(e.session_id),onMouseLeave:()=>S(null),className:x===e.session_id?`at-table__row--hovered`:``,children:[(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`at-event-cell`,children:[(0,H.jsx)(`div`,{className:`at-event-cell__title`,children:e.title}),(0,H.jsxs)(`div`,{className:`at-event-cell__id`,children:[(0,H.jsx)(`i`,{className:`fas fa-hashtag`}),` ID: #`,e.session_id]}),e.duration_days>1&&(0,H.jsxs)(`div`,{className:`at-event-cell__duration`,children:[(0,H.jsx)(`i`,{className:`fas fa-calendar-week`}),e.duration_days,` days`]})]})}),(0,H.jsx)(`td`,{children:(0,H.jsx)(cl,{service:e.major_service})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`at-date`,children:[(0,H.jsx)(`div`,{className:`at-date__main`,children:new Date(e.session_date).toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,year:`numeric`})}),e.session_end_date&&e.session_end_date!==e.session_date&&(0,H.jsxs)(`div`,{className:`at-date__end`,children:[(0,H.jsx)(`i`,{className:`fas fa-arrow-right`}),new Date(e.session_end_date).toLocaleDateString(`en-US`,{month:`short`,day:`numeric`})]}),(0,H.jsxs)(`div`,{className:`at-date__time`,children:[(0,H.jsx)(`i`,{className:`fas fa-clock`}),e.start_time?.slice(0,5),` -`,` `,e.end_time?.slice(0,5)]})]})}),(0,H.jsx)(`td`,{children:e.instructor?(0,H.jsxs)(`div`,{className:`at-instructor`,children:[(0,H.jsx)(`div`,{className:`at-instructor__name`,children:e.instructor}),e.instructor_credentials&&(0,H.jsx)(`div`,{className:`at-instructor__credentials`,children:e.instructor_credentials})]}):(0,H.jsxs)(`span`,{className:`at-muted`,children:[(0,H.jsx)(`i`,{className:`fas fa-user-slash`}),` Not assigned`]})}),(0,H.jsx)(`td`,{style:{maxWidth:200},children:(0,H.jsxs)(`div`,{className:`at-location`,title:e.venue,children:[(0,H.jsx)(`i`,{className:`fas fa-map-marker-alt`,style:{color:t}}),e.venue?.split(`
`)[0]]})}),(0,H.jsx)(`td`,{children:(0,H.jsx)(ul,{fee:e.fee})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`at-regs`,children:[(0,H.jsxs)(`span`,{className:`at-regs__count`,children:[e.approved_count,`/`,e.capacity>0?e.capacity:``]}),e.pending_count>0&&(0,H.jsxs)(`span`,{className:`at-regs__pending`,children:[(0,H.jsx)(`i`,{className:`fas fa-clock`}),e.pending_count,` pending`]})]})}),(0,H.jsx)(`td`,{children:(0,H.jsx)(ll,{isPast:e.is_past,isUpcoming:e.is_upcoming,isOngoing:e.is_ongoing})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`at-actions`,children:[(0,H.jsx)(`button`,{title:`View Registrations`,className:`at-action-btn at-action-btn--view`,onClick:()=>h(e),style:{background:`${t}12`,color:t,borderColor:`${t}25`},children:(0,H.jsx)(`i`,{className:`fas fa-users`})}),(0,H.jsx)(`button`,{title:`Edit Session`,className:`at-action-btn at-action-btn--edit`,onClick:()=>p(e),style:{background:`#3b82f612`,color:`#3b82f6`,borderColor:`#3b82f625`},children:(0,H.jsx)(`i`,{className:`fas fa-pen`})}),(0,H.jsx)(`button`,{title:`Archive Session`,className:`at-action-btn at-action-btn--delete`,onClick:()=>E(e),style:{background:`#6b728012`,color:`#6b7280`,borderColor:`#6b728025`},children:(0,H.jsx)(`i`,{className:`fas fa-archive`})})]})})]},e.session_id)})})]})})]})]}),(g||f)&&(0,H.jsx)(fl,{session:f||null,onClose:()=>{p(null),_(!1)},onSaved:D}),m&&(0,H.jsx)(pl,{session:m,onClose:()=>h(null),onUpdate:()=>{T(),w()}}),y&&(0,H.jsx)(dl,{message:y.msg,type:y.type,onClose:()=>b(null)})]})}function hl({message:e,type:t,onClose:n}){return(0,v.useEffect)(()=>{let e=setTimeout(n,3500);return()=>clearTimeout(e)},[n]),(0,H.jsxs)(`div`,{className:`abb-toast abb-toast--${t}`,onClick:n,children:[(0,H.jsx)(`div`,{className:`abb-toast__icon`,children:(0,H.jsx)(`i`,{className:`fa-solid ${t===`success`?`fa-circle-check`:`fa-circle-exclamation`}`})}),(0,H.jsxs)(`div`,{className:`abb-toast__content`,children:[(0,H.jsx)(`div`,{className:`abb-toast__title`,children:t===`success`?`Success`:`Error`}),(0,H.jsx)(`div`,{className:`abb-toast__message`,children:e})]}),(0,H.jsx)(`button`,{className:`abb-toast__close`,onClick:n,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]})}function gl({item:e,onClose:t,onSuccess:n}){let[r,i]=(0,v.useState)({location_name:``,blood_type:`A+`,units_available:``,contact_number:``,address:``,latitude:``,longitude:``}),[a,o]=(0,v.useState)({}),[s,c]=(0,v.useState)(!1),[l,u]=(0,v.useState)([]),[d,f]=(0,v.useState)(!1);(0,v.useEffect)(()=>{p()},[]),(0,v.useEffect)(()=>{e&&i({location_name:e.location_name||``,blood_type:e.blood_type||`A+`,units_available:e.units_available||``,contact_number:e.contact_number||``,address:e.address||``,latitude:e.latitude||``,longitude:e.longitude||``})},[e]);let p=async()=>{try{u((await qs()).data)}catch(e){console.error(`Error fetching locations:`,e)}},m=e=>{let{name:t,value:n}=e.target;i(e=>({...e,[t]:n})),a[t]&&o(e=>({...e,[t]:null}))},h=e=>{let t=e.target.value;t===`new`?(f(!0),i(e=>({...e,location_name:``}))):(f(!1),i(e=>({...e,location_name:t})))},g=()=>{let e={};return r.location_name.trim()||(e.location_name=`Location name is required`),r.blood_type||(e.blood_type=`Blood type is required`),(r.units_available===``||r.units_available<0)&&(e.units_available=`Units must be a positive number`),r.contact_number.trim()||(e.contact_number=`Contact number is required`),r.address.trim()||(e.address=`Address is required`),(!r.latitude||r.latitude<-90||r.latitude>90)&&(e.latitude=`Valid latitude (-90 to 90) is required`),(!r.longitude||r.longitude<-180||r.longitude>180)&&(e.longitude=`Valid longitude (-180 to 180) is required`),e};return(0,H.jsx)(`div`,{className:`abb-overlay`,onClick:t,children:(0,H.jsxs)(`div`,{className:`abb-modal`,onClick:e=>e.stopPropagation(),children:[(0,H.jsxs)(`div`,{className:`abb-modal__header`,children:[(0,H.jsxs)(`div`,{className:`abb-modal__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid ${e?`fa-pen-to-square`:`fa-plus-circle`}`}),e?`Edit Blood Inventory`:`Add Blood Inventory`]}),(0,H.jsx)(`button`,{className:`abb-modal__close`,onClick:t,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]}),(0,H.jsxs)(`form`,{className:`abb-modal__body`,onSubmit:async i=>{i.preventDefault();let a=g();if(Object.keys(a).length>0){o(a);return}c(!0);try{let i={...r,units_available:parseInt(r.units_available),latitude:parseFloat(r.latitude),longitude:parseFloat(r.longitude)};e?(await Ys(e.id,i),n(`Blood inventory item updated successfully`)):(await Js(i),n(`Blood inventory item created successfully`)),t()}catch(e){o({submit:e.message})}finally{c(!1)}},children:[a.submit&&(0,H.jsxs)(`div`,{className:`abb-form__error-banner`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),a.submit]}),(0,H.jsxs)(`div`,{className:`abb-form__field abb-form__field--full`,children:[(0,H.jsxs)(`label`,{className:`abb-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-hospital`}),`Location `,(0,H.jsx)(`span`,{className:`abb-form__required`,children:`*`})]}),!e&&(0,H.jsxs)(`select`,{className:`abb-form__select`,onChange:h,defaultValue:``,children:[(0,H.jsx)(`option`,{value:``,disabled:!0,children:`Select location or add new`}),l.map(e=>(0,H.jsx)(`option`,{value:e,children:e},e)),(0,H.jsx)(`option`,{value:`new`,children:`+ Add New Location`})]}),(0,H.jsx)(`input`,{type:`text`,name:`location_name`,value:r.location_name,onChange:m,className:`abb-form__input ${a.location_name?`abb-form__input--error`:``}`,placeholder:`Enter location name`,readOnly:!d&&!e&&l.length>0}),a.location_name&&(0,H.jsxs)(`span`,{className:`abb-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),a.location_name]})]}),(0,H.jsxs)(`div`,{className:`abb-form__row`,children:[(0,H.jsxs)(`div`,{className:`abb-form__field`,children:[(0,H.jsxs)(`label`,{className:`abb-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-droplet`}),`Blood Type `,(0,H.jsx)(`span`,{className:`abb-form__required`,children:`*`})]}),(0,H.jsx)(`select`,{name:`blood_type`,value:r.blood_type,onChange:m,className:`abb-form__select ${a.blood_type?`abb-form__input--error`:``}`,children:Ws.map(e=>(0,H.jsx)(`option`,{value:e.value,children:e.value},e.value))}),a.blood_type&&(0,H.jsxs)(`span`,{className:`abb-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),a.blood_type]})]}),(0,H.jsxs)(`div`,{className:`abb-form__field`,children:[(0,H.jsxs)(`label`,{className:`abb-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-boxes`}),`Units Available `,(0,H.jsx)(`span`,{className:`abb-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`number`,name:`units_available`,value:r.units_available,onChange:m,min:`0`,className:`abb-form__input ${a.units_available?`abb-form__input--error`:``}`,placeholder:`0`}),a.units_available&&(0,H.jsxs)(`span`,{className:`abb-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),a.units_available]})]})]}),(0,H.jsxs)(`div`,{className:`abb-form__field`,children:[(0,H.jsxs)(`label`,{className:`abb-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-phone`}),`Contact Number `,(0,H.jsx)(`span`,{className:`abb-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`text`,name:`contact_number`,value:r.contact_number,onChange:m,className:`abb-form__input ${a.contact_number?`abb-form__input--error`:``}`,placeholder:`e.g., (032) 123-4567`}),a.contact_number&&(0,H.jsxs)(`span`,{className:`abb-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),a.contact_number]})]}),(0,H.jsxs)(`div`,{className:`abb-form__field`,children:[(0,H.jsxs)(`label`,{className:`abb-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-dot`}),`Address `,(0,H.jsx)(`span`,{className:`abb-form__required`,children:`*`})]}),(0,H.jsx)(`textarea`,{name:`address`,value:r.address,onChange:m,className:`abb-form__textarea ${a.address?`abb-form__input--error`:``}`,placeholder:`Enter complete address`,rows:`3`}),a.address&&(0,H.jsxs)(`span`,{className:`abb-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),a.address]})]}),(0,H.jsxs)(`div`,{className:`abb-form__row`,children:[(0,H.jsxs)(`div`,{className:`abb-form__field`,children:[(0,H.jsxs)(`label`,{className:`abb-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-map-pin`}),`Latitude `,(0,H.jsx)(`span`,{className:`abb-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`number`,name:`latitude`,value:r.latitude,onChange:m,step:`any`,className:`abb-form__input ${a.latitude?`abb-form__input--error`:``}`,placeholder:`e.g., 10.3157`}),a.latitude&&(0,H.jsxs)(`span`,{className:`abb-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),a.latitude]})]}),(0,H.jsxs)(`div`,{className:`abb-form__field`,children:[(0,H.jsxs)(`label`,{className:`abb-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-map-pin`}),`Longitude `,(0,H.jsx)(`span`,{className:`abb-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`number`,name:`longitude`,value:r.longitude,onChange:m,step:`any`,className:`abb-form__input ${a.longitude?`abb-form__input--error`:``}`,placeholder:`e.g., 123.8854`}),a.longitude&&(0,H.jsxs)(`span`,{className:`abb-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),a.longitude]})]})]}),(0,H.jsxs)(`div`,{className:`abb-form__hint`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-info-circle`}),(0,H.jsx)(`span`,{children:`You can get latitude and longitude from Google Maps by right-clicking on the location.`})]}),(0,H.jsx)(`button`,{type:`submit`,className:`abb-form__submit`,disabled:s,children:s?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-spinner fa-spin`}),e?`Updating...`:`Creating...`]}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fa-solid ${e?`fa-pen-to-square`:`fa-plus`}`}),e?`Update Item`:`Create Item`]})})]})]})})}function _l({item:e,onClose:t}){if(!e)return null;let n=Zs(e.blood_type),r=Qs(e.units_available),i=()=>{window.location.href=`tel:${e.contact_number.replace(/\D/g,``)}`},a=()=>{let t=encodeURIComponent(e.address);window.open(`https://www.google.com/maps/search/?api=1&query=${t}`,`_blank`)},o=(e,t)=>{navigator.clipboard.writeText(e)};return(0,H.jsx)(`div`,{className:`abb-overlay`,onClick:t,children:(0,H.jsxs)(`div`,{className:`abb-modal abb-modal--lg`,onClick:e=>e.stopPropagation(),children:[(0,H.jsxs)(`div`,{className:`abb-modal__header`,children:[(0,H.jsxs)(`div`,{className:`abb-modal__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-eye`}),`Blood Inventory Details`]}),(0,H.jsx)(`button`,{className:`abb-modal__close`,onClick:t,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]}),(0,H.jsxs)(`div`,{className:`abb-modal__body`,children:[(0,H.jsxs)(`div`,{className:`abb-view__section`,children:[(0,H.jsxs)(`h3`,{className:`abb-view__section-title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-hospital`,style:{color:n}}),e.location_name]}),(0,H.jsxs)(`div`,{className:`abb-view__badges`,children:[(0,H.jsxs)(`span`,{className:`abb-view__badge`,style:{background:`${n}12`,color:n,border:`1px solid ${n}25`},children:[(0,H.jsx)(`i`,{className:`fa-solid fa-droplet`}),`Type `,e.blood_type]}),(0,H.jsxs)(`span`,{className:`abb-view__badge`,style:{background:`${r.color}12`,color:r.color,border:`1px solid ${r.color}25`},children:[(0,H.jsx)(`i`,{className:`fa-solid fa-boxes`}),e.units_available,` units`]}),(0,H.jsxs)(`span`,{className:`abb-view__badge`,style:{background:e.units_available===0?`#6b728012`:e.units_available<10?`#ef444412`:e.units_available<20?`#f59e0b12`:`#10b98112`,color:e.units_available===0?`#6b7280`:e.units_available<10?`#ef4444`:e.units_available<20?`#f59e0b`:`#10b981`},children:[(0,H.jsx)(`i`,{className:`fa-solid fa-chart-line`}),e.units_available===0?`Out of Stock`:e.units_available<10?`Critical`:e.units_available<20?`Low`:`Normal`]})]})]}),(0,H.jsxs)(`div`,{className:`abb-view__grid`,children:[(0,H.jsxs)(`div`,{className:`abb-view__item`,children:[(0,H.jsx)(`div`,{className:`abb-view__item-label`,children:`Contact Number`}),(0,H.jsxs)(`div`,{className:`abb-view__item-value-group`,children:[(0,H.jsxs)(`button`,{className:`abb-view__item-value abb-view__item-value--clickable`,onClick:i,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-phone`}),e.contact_number]}),(0,H.jsx)(`button`,{className:`abb-view__copy-btn`,onClick:()=>o(e.contact_number,`phone`),title:`Copy phone number`,children:(0,H.jsx)(`i`,{className:`fa-regular fa-copy`})})]})]}),(0,H.jsxs)(`div`,{className:`abb-view__item`,children:[(0,H.jsx)(`div`,{className:`abb-view__item-label`,children:`Address`}),(0,H.jsxs)(`div`,{className:`abb-view__item-value-group`,children:[(0,H.jsxs)(`span`,{className:`abb-view__item-value`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-dot`}),e.address]}),(0,H.jsx)(`button`,{className:`abb-view__copy-btn`,onClick:()=>o(e.address,`address`),title:`Copy address`,children:(0,H.jsx)(`i`,{className:`fa-regular fa-copy`})})]})]}),(0,H.jsxs)(`div`,{className:`abb-view__item`,children:[(0,H.jsx)(`div`,{className:`abb-view__item-label`,children:`Coordinates`}),(0,H.jsxs)(`div`,{className:`abb-view__item-value-group`,children:[(0,H.jsxs)(`span`,{className:`abb-view__item-value`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-map-pin`}),e.latitude,`, `,e.longitude]}),(0,H.jsx)(`button`,{className:`abb-view__copy-btn`,onClick:()=>o(`${e.latitude}, ${e.longitude}`,`coordinates`),title:`Copy coordinates`,children:(0,H.jsx)(`i`,{className:`fa-regular fa-copy`})})]})]}),(0,H.jsxs)(`div`,{className:`abb-view__item`,children:[(0,H.jsx)(`div`,{className:`abb-view__item-label`,children:`Last Updated`}),(0,H.jsxs)(`div`,{className:`abb-view__item-value`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-clock`}),new Date(e.updated_at).toLocaleString()]})]})]}),(0,H.jsxs)(`div`,{className:`abb-view__actions`,children:[(0,H.jsxs)(`button`,{className:`abb-btn abb-btn--primary`,onClick:a,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-arrow`}),`Get Directions`]}),(0,H.jsxs)(`button`,{className:`abb-btn abb-btn--secondary`,onClick:i,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-phone`}),`Call Now`]})]}),e.created_at&&(0,H.jsxs)(`div`,{className:`abb-view__footer`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-calendar`}),(0,H.jsxs)(`span`,{children:[`Added on `,new Date(e.created_at).toLocaleDateString()]})]})]})]})})}function vl(){let[e,t]=(0,v.useState)([]),[n,r]=(0,v.useState)({total_locations:0,total_units:0,by_blood_type:{},by_location:{},low_stock:0,critical_stock:0,out_of_stock:0}),[i,a]=(0,v.useState)(!0),[o,s]=(0,v.useState)(``),[c,l]=(0,v.useState)(``),[u,d]=(0,v.useState)(``),[f,p]=(0,v.useState)([]),[m,h]=(0,v.useState)(!1),[g,_]=(0,v.useState)(!1),[y,b]=(0,v.useState)(!1),[x,S]=(0,v.useState)(!1),[C,w]=(0,v.useState)(null),[T,E]=(0,v.useState)(null),[D,O]=(0,v.useState)(null),ee=(e,t=`success`)=>{E({message:e,type:t})},k=(0,v.useCallback)(async()=>{a(!0);try{let e={};o&&(e.location=o),c&&(e.blood_type=c),u&&(e.location=u);let n=await Ks(e);t(n.data),r(n.stats)}catch(e){ee(e.message,`error`)}finally{a(!1)}},[o,c,u]),te=(0,v.useCallback)(async()=>{try{p((await qs()).data)}catch(e){console.error(`Error fetching locations:`,e)}},[]);(0,v.useEffect)(()=>{k(),te()},[k,te]);let A=()=>{w(null),b(!0)},ne=e=>{w(e),b(!0)},j=e=>{w(e),S(!0)},M=async e=>{if(window.confirm(`Are you sure you want to delete this inventory item?`))try{await Xs(e),ee(`Inventory item deleted successfully`),k(),te()}catch(e){ee(e.message,`error`)}},N=e=>{ee(e),k(),te()},P=()=>{s(``)},re=()=>{l(``),d(``)},F=()=>{let e=0;return c&&e++,u&&e++,o&&e++,e};return(0,H.jsxs)(`div`,{className:`abb-root`,children:[(0,H.jsxs)(`div`,{className:`abb-header`,children:[(0,H.jsx)(`div`,{className:`abb-header__container`,children:(0,H.jsxs)(`div`,{className:`abb-header__content`,children:[(0,H.jsxs)(`div`,{className:`abb-header__left`,children:[(0,H.jsxs)(`div`,{className:`abb-header__badge`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-droplet`}),`Blood Bank Management`]}),(0,H.jsx)(`h1`,{className:`abb-header__title`,children:`Blood Inventory`}),(0,H.jsx)(`p`,{className:`abb-header__subtitle`,children:`Manage blood inventory across all locations`})]}),(0,H.jsxs)(`div`,{className:`abb-header__stats`,children:[(0,H.jsxs)(`div`,{className:`abb-header-stat`,children:[(0,H.jsx)(`span`,{className:`abb-header-stat__value`,children:n.total_locations}),(0,H.jsx)(`span`,{className:`abb-header-stat__label`,children:`Locations`})]}),(0,H.jsxs)(`div`,{className:`abb-header-stat`,children:[(0,H.jsx)(`span`,{className:`abb-header-stat__value`,children:n.total_units}),(0,H.jsx)(`span`,{className:`abb-header-stat__label`,children:`Total Units`})]}),(0,H.jsxs)(`div`,{className:`abb-header-stat`,children:[(0,H.jsx)(`span`,{className:`abb-header-stat__value`,children:n.low_stock}),(0,H.jsx)(`span`,{className:`abb-header-stat__label`,children:`Low Stock`})]}),(0,H.jsxs)(`div`,{className:`abb-header-stat`,children:[(0,H.jsx)(`span`,{className:`abb-header-stat__value`,children:n.critical_stock}),(0,H.jsx)(`span`,{className:`abb-header-stat__label`,children:`Critical`})]})]})]})}),(0,H.jsx)(`div`,{className:`abb-header__wave`,children:(0,H.jsx)(`svg`,{viewBox:`0 0 1440 120`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`,children:(0,H.jsx)(`path`,{d:`M0 120L60 105C120 90 240 60 360 45C480 30 600 30 720 37.5C840 45 960 60 1080 67.5C1200 75 1320 75 1380 75L1440 75V120H1380C1320 120 1200 120 1080 120C960 120 840 120 720 120C600 120 480 120 360 120C240 120 120 120 60 120H0Z`,fill:`white`,fillOpacity:`0.1`})})})]}),(0,H.jsxs)(`div`,{className:`abb-body`,children:[(0,H.jsx)(`div`,{className:`abb-cards`,children:Ws.map(e=>{let t=n.by_blood_type[e.value]?.units||0,r=n.by_blood_type[e.value]?.locations||0;return(0,H.jsxs)(`div`,{className:`abb-card`,style:{borderColor:e.color},children:[(0,H.jsx)(`div`,{className:`abb-card__icon`,style:{background:`${e.color}12`},children:(0,H.jsx)(`i`,{className:`fa-solid fa-droplet`,style:{color:e.color}})}),(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`div`,{className:`abb-card__num`,style:{color:e.color},children:t}),(0,H.jsxs)(`div`,{className:`abb-card__label`,children:[`Type `,e.value]}),(0,H.jsxs)(`div`,{className:`abb-card__sub`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-dot`}),r,` `,r===1?`location`:`locations`]})]})]},e.value)})}),(0,H.jsxs)(`div`,{className:`abb-toolbar`,children:[(0,H.jsxs)(`div`,{className:`abb-toolbar__search`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-magnifying-glass abb-toolbar__search-icon`}),(0,H.jsx)(`input`,{type:`text`,className:`abb-toolbar__search-input`,placeholder:`Search by location or address...`,value:o,onChange:e=>s(e.target.value)}),o&&(0,H.jsx)(`button`,{className:`abb-toolbar__search-clear`,onClick:P,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]}),(0,H.jsxs)(`div`,{className:`abb-toolbar__filters`,children:[(0,H.jsxs)(`div`,{className:`abb-toolbar__filter-dropdown`,children:[(0,H.jsxs)(`button`,{className:`abb-toolbar__filter-dropdown-btn ${c?`abb-toolbar__filter-dropdown-btn--active`:``}`,onClick:()=>h(!m),children:[(0,H.jsx)(`i`,{className:`fa-solid fa-droplet`}),(0,H.jsx)(`span`,{children:c?`Type ${c}`:`All Blood Types`}),(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-down`})]}),m&&(0,H.jsxs)(`div`,{className:`abb-toolbar__filter-dropdown-menu`,children:[(0,H.jsxs)(`button`,{onClick:()=>{l(``),h(!1)},className:c?``:`active`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-droplet`}),`All Blood Types`]}),Ws.map(e=>(0,H.jsxs)(`button`,{onClick:()=>{l(e.value),h(!1)},className:c===e.value?`active`:``,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-droplet`,style:{color:e.color}}),`Type `,e.value]},e.value))]})]}),f.length>0&&(0,H.jsxs)(`div`,{className:`abb-toolbar__filter-dropdown`,children:[(0,H.jsxs)(`button`,{className:`abb-toolbar__filter-dropdown-btn ${u?`abb-toolbar__filter-dropdown-btn--active`:``}`,onClick:()=>_(!g),children:[(0,H.jsx)(`i`,{className:`fa-solid fa-hospital`}),(0,H.jsx)(`span`,{children:u||`All Locations`}),(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-down`})]}),g&&(0,H.jsxs)(`div`,{className:`abb-toolbar__filter-dropdown-menu`,children:[(0,H.jsxs)(`button`,{onClick:()=>{d(``),_(!1)},className:u?``:`active`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-hospital`}),`All Locations`]}),f.map(e=>(0,H.jsxs)(`button`,{onClick:()=>{d(e),_(!1)},className:u===e?`active`:``,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-hospital`}),e]},e))]})]}),F()>0&&(0,H.jsxs)(`button`,{className:`abb-toolbar__filter-clear`,onClick:re,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-times`}),`Clear Filters (`,F(),`)`]})]}),(0,H.jsxs)(`button`,{className:`abb-toolbar__create-btn`,onClick:A,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-plus`}),`Add Inventory`]})]}),(0,H.jsxs)(`div`,{className:`abb-table-panel`,children:[(0,H.jsxs)(`div`,{className:`abb-table-panel__head`,children:[(0,H.jsxs)(`div`,{className:`abb-table-panel__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-droplet`}),`Blood Inventory List`]}),(0,H.jsx)(`div`,{className:`abb-table-panel__info`,children:!i&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(`span`,{className:`abb-table-panel__count`,children:[e.length,` `,e.length===1?`item`:`items`]}),(0,H.jsx)(`span`,{className:`abb-table-panel__divider`,children:``}),(0,H.jsxs)(`span`,{className:`abb-table-panel__sub`,children:[`Page 1 of `,Math.ceil(e.length/10)||1]})]})})]}),(0,H.jsx)(`div`,{className:`abb-table-panel__scroll`,children:(0,H.jsxs)(`table`,{className:`abb-table`,children:[(0,H.jsx)(`thead`,{children:(0,H.jsxs)(`tr`,{children:[(0,H.jsx)(`th`,{children:`Location`}),(0,H.jsx)(`th`,{children:`Blood Type`}),(0,H.jsx)(`th`,{children:`Units`}),(0,H.jsx)(`th`,{children:`Status`}),(0,H.jsx)(`th`,{children:`Contact`}),(0,H.jsx)(`th`,{children:`Last Updated`}),(0,H.jsx)(`th`,{children:`Actions`})]})}),(0,H.jsx)(`tbody`,{children:i?(0,H.jsx)(`tr`,{children:(0,H.jsx)(`td`,{colSpan:`7`,children:(0,H.jsxs)(`div`,{className:`abb-table__loading`,children:[(0,H.jsx)(`div`,{className:`abb-table__loading-spinner`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-spinner fa-spin`})}),(0,H.jsx)(`p`,{children:`Loading inventory...`}),(0,H.jsx)(`span`,{className:`abb-table__loading-sub`,children:`Fetching blood inventory data`})]})})}):e.length===0?(0,H.jsx)(`tr`,{children:(0,H.jsx)(`td`,{colSpan:`7`,children:(0,H.jsxs)(`div`,{className:`abb-table__empty`,children:[(0,H.jsx)(`div`,{className:`abb-table__empty-icon`,children:(0,H.jsx)(`i`,{className:`fa-regular fa-face-frown`})}),(0,H.jsx)(`h3`,{className:`abb-table__empty-title`,children:`No Inventory Found`}),(0,H.jsx)(`p`,{className:`abb-table__empty-message`,children:o||c||u?`Try adjusting your search or filter criteria`:`Get started by adding your first inventory item`}),(o||c||u)&&(0,H.jsxs)(`button`,{className:`abb-table__empty-action`,onClick:re,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-times`}),` Clear Filters`]})]})})}):e.map(e=>{let t=Zs(e.blood_type),n=Qs(e.units_available);return(0,H.jsxs)(`tr`,{onMouseEnter:()=>O(e.id),onMouseLeave:()=>O(null),className:D===e.id?`abb-table__row--hovered`:``,children:[(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`abb-location-cell`,children:[(0,H.jsxs)(`div`,{className:`abb-location-cell__name`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-building`}),e.location_name]}),(0,H.jsxs)(`div`,{className:`abb-location-cell__address`,title:e.address,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-dot`}),e.address.substring(0,50),e.address.length>50?`...`:``]})]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`span`,{className:`abb-badge`,style:{background:`${t}12`,color:t,border:`1px solid ${t}25`},children:[(0,H.jsx)(`i`,{className:`fa-solid fa-droplet`}),e.blood_type]})}),(0,H.jsx)(`td`,{children:(0,H.jsx)(`span`,{className:`abb-units`,children:e.units_available})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`span`,{className:`abb-badge`,style:{background:`${n.color}12`,color:n.color,border:`1px solid ${n.color}25`},children:[(0,H.jsx)(`i`,{className:`fa-solid fa-chart-line`}),e.units_available===0?`Out`:n.label]})}),(0,H.jsx)(`td`,{children:(0,H.jsx)(`div`,{className:`abb-contact`,children:(0,H.jsxs)(`div`,{className:`abb-contact__phone`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-phone`}),e.contact_number]})})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`abb-date`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-calendar`}),new Date(e.updated_at).toLocaleDateString()]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`abb-actions`,children:[(0,H.jsx)(`button`,{className:`abb-action-btn abb-action-btn--view`,onClick:()=>j(e),title:`View Details`,style:{background:`#10b98112`,color:`#10b981`,border:`1px solid #10b98125`},children:(0,H.jsx)(`i`,{className:`fa-solid fa-eye`})}),(0,H.jsx)(`button`,{className:`abb-action-btn abb-action-btn--edit`,onClick:()=>ne(e),title:`Edit Item`,style:{background:`#3b82f612`,color:`#3b82f6`,border:`1px solid #3b82f625`},children:(0,H.jsx)(`i`,{className:`fa-solid fa-pen`})}),(0,H.jsx)(`button`,{className:`abb-action-btn abb-action-btn--delete`,onClick:()=>M(e.id),title:`Delete Item`,style:{background:`#ef444412`,color:`#ef4444`,border:`1px solid #ef444425`},children:(0,H.jsx)(`i`,{className:`fa-solid fa-trash`})})]})})]},e.id)})})]})})]})]}),y&&(0,H.jsx)(gl,{item:C,onClose:()=>b(!1),onSuccess:N}),x&&(0,H.jsx)(_l,{item:C,onClose:()=>S(!1)}),T&&(0,H.jsx)(hl,{message:T.message,type:T.type,onClose:()=>E(null)})]})}var yl=`/api/inventory.php`;const bl=[{value:`health`,label:`Health Services`,color:`#c41e3a`},{value:`safety`,label:`Safety Services`,color:`#15803d`},{value:`welfare`,label:`Welfare Services`,color:`#7c3aed`},{value:`disaster`,label:`Disaster Management`,color:`#c2410c`},{value:`youth`,label:`Red Cross Youth`,color:`#003d6b`},{value:`super`,label:`Super Admin`,color:`#6b7280`}],xl=[{value:`operational`,label:`Operational`,color:`#10b981`},{value:`maintenance`,label:`In Maintenance`,color:`#f59e0b`},{value:`out_of_service`,label:`Out of Service`,color:`#ef4444`}],Sl=[{value:`gasoline`,label:`Gasoline`,icon:`fa-solid fa-gas-pump`},{value:`diesel`,label:`Diesel`,icon:`fa-solid fa-gas-pump`},{value:`hybrid`,label:`Hybrid`,icon:`fa-solid fa-car`},{value:`electric`,label:`Electric`,icon:`fa-solid fa-charging-station`}],Cl=[{value:`routine`,label:`Routine`,color:`#10b981`},{value:`repair`,label:`Repair`,color:`#f59e0b`},{value:`inspection`,label:`Inspection`,color:`#3b82f6`},{value:`emergency`,label:`Emergency`,color:`#ef4444`}],wl=[{value:`pcs`,label:`Pieces`},{value:`box`,label:`Box`},{value:`pack`,label:`Pack`},{value:`kg`,label:`Kilogram`},{value:`liter`,label:`Liter`},{value:`meter`,label:`Meter`}],Tl=async(e=`inventory`)=>{let{data:t}=await K.get(yl,{params:{action:`categories`,type:e}});if(!t.success)throw Error(t.message||`Failed to fetch categories`);return{success:!0,data:t.data}},El=async(e={})=>{let t={action:`inventory`,...e},{data:n}=await K.get(yl,{params:t});if(!n.success)throw Error(n.message||`Failed to fetch inventory items`);return{success:!0,data:n.data??[],stats:n.stats??{total_items:0,total_value:0,low_stock:0,out_of_stock:0,by_service_area:{},by_category:{}}}},Dl=async e=>{for(let t of[`item_code`,`item_name`,`category_id`,`current_stock`,`unit`,`service_area`])if(!e[t]&&e[t]!==0)throw Error(`${t.replace(/_/g,` `)} is required`);let{data:t}=await K.post(yl,e,{params:{action:`inventory`}});if(!t.success)throw Error(t.message||`Failed to create inventory item`);return{success:!0,message:t.message,id:t.id,data:t.data}},Ol=async(e,t)=>{if(!e)throw Error(`Item ID is required`);let{data:n}=await K.put(yl,t,{params:{action:`inventory`,id:e}});if(!n.success)throw Error(n.message||`Failed to update inventory item`);return{success:!0,message:n.message,data:n.data}},kl=async e=>{if(!e)throw Error(`Item ID is required`);let{data:t}=await K.delete(yl,{params:{action:`inventory`,id:e}});if(!t.success)throw Error(t.message||`Failed to delete inventory item`);return{success:!0,message:t.message}},Al=async(e={})=>{let t={action:`vehicles`,...e},{data:n}=await K.get(yl,{params:t});if(!n.success)throw Error(n.message||`Failed to fetch vehicles`);return{success:!0,data:n.data??[],stats:n.stats??{total_vehicles:0,operational:0,maintenance:0,out_of_service:0,maintenance_due:0,by_service_area:{},by_category:{}}}},jl=async e=>{if(!e)throw Error(`Vehicle ID is required`);let{data:t}=await K.get(yl,{params:{action:`vehicles`,id:e}});if(!t.success)throw Error(t.message||`Failed to fetch vehicle`);return{success:!0,data:t.data}},Ml=async e=>{for(let t of[`vehicle_code`,`vehicle_name`,`category_id`,`plate_number`,`model`,`year`,`fuel_type`,`service_area`])if(!e[t])throw Error(`${t.replace(/_/g,` `)} is required`);let{data:t}=await K.post(yl,e,{params:{action:`vehicles`}});if(!t.success)throw Error(t.message||`Failed to create vehicle`);return{success:!0,message:t.message,id:t.id,data:t.data}},Nl=async(e,t)=>{if(!e)throw Error(`Vehicle ID is required`);let{data:n}=await K.put(yl,t,{params:{action:`vehicles`,id:e}});if(!n.success)throw Error(n.message||`Failed to update vehicle`);return{success:!0,message:n.message,data:n.data}},Pl=async e=>{if(!e)throw Error(`Vehicle ID is required`);let{data:t}=await K.delete(yl,{params:{action:`vehicles`,id:e}});if(!t.success)throw Error(t.message||`Failed to delete vehicle`);return{success:!0,message:t.message}},Fl=async e=>{for(let t of[`vehicle_id`,`maintenance_type`,`description`,`maintenance_date`])if(!e[t])throw Error(`${t.replace(/_/g,` `)} is required`);let{data:t}=await K.post(yl,e,{params:{action:`maintenance`}});if(!t.success)throw Error(t.message||`Failed to add maintenance record`);return{success:!0,message:t.message,id:t.id,data:t.data}},Il=e=>{let t=bl.find(t=>t.value===e);return t?t.color:`#6b7280`},Ll=e=>{let t=xl.find(t=>t.value===e);return t?t.color:`#6b7280`},Rl=e=>{let t=Cl.find(t=>t.value===e);return t?t.color:`#6b7280`},zl=(e,t)=>e===0?{label:`Out of Stock`,color:`#ef4444`}:e<=t?{label:`Low Stock`,color:`#f59e0b`}:{label:`In Stock`,color:`#10b981`},Bl=e=>new Intl.NumberFormat(`en-PH`,{style:`currency`,currency:`PHP`,minimumFractionDigits:2}).format(e);function Vl({message:e,type:t,onClose:n}){return(0,v.useEffect)(()=>{let e=setTimeout(n,3500);return()=>clearTimeout(e)},[n]),(0,H.jsxs)(`div`,{className:`ai-toast ai-toast--${t}`,onClick:n,children:[(0,H.jsx)(`div`,{className:`ai-toast__icon`,children:(0,H.jsx)(`i`,{className:`fa-solid ${t===`success`?`fa-circle-check`:`fa-circle-exclamation`}`})}),(0,H.jsxs)(`div`,{className:`ai-toast__content`,children:[(0,H.jsx)(`div`,{className:`ai-toast__title`,children:t===`success`?`Success`:`Error`}),(0,H.jsx)(`div`,{className:`ai-toast__message`,children:e})]}),(0,H.jsx)(`button`,{className:`ai-toast__close`,onClick:n,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]})}function Hl({item:e,onClose:t,onSuccess:n}){let[r,i]=(0,v.useState)({item_code:``,item_name:``,description:``,category_id:``,current_stock:``,minimum_stock:``,unit:`pcs`,location:`Central Storage`,service_area:`health`,unit_cost:``,expiry_date:``,batch_number:``}),[a,o]=(0,v.useState)([]),[s,c]=(0,v.useState)({}),[l,u]=(0,v.useState)(!1);(0,v.useEffect)(()=>{d()},[]),(0,v.useEffect)(()=>{e&&i({item_code:e.item_code||``,item_name:e.item_name||``,description:e.description||``,category_id:e.category_id||``,current_stock:e.current_stock||``,minimum_stock:e.minimum_stock||``,unit:e.unit||`pcs`,location:e.location||`Central Storage`,service_area:e.service_area||`health`,unit_cost:e.unit_cost||``,expiry_date:e.expiry_date||``,batch_number:e.batch_number||``})},[e]);let d=async()=>{try{o((await Tl(`inventory`)).data)}catch(e){console.error(`Error fetching categories:`,e)}},f=e=>{let{name:t,value:n}=e.target;i(e=>({...e,[t]:n})),s[t]&&c(e=>({...e,[t]:null}))},p=()=>{let e={};return r.item_code.trim()||(e.item_code=`Item code is required`),r.item_name.trim()||(e.item_name=`Item name is required`),r.category_id||(e.category_id=`Category is required`),(r.current_stock===``||r.current_stock<0)&&(e.current_stock=`Current stock must be a positive number`),r.minimum_stock&&r.minimum_stock<0&&(e.minimum_stock=`Minimum stock must be a positive number`),r.unit||(e.unit=`Unit is required`),r.service_area||(e.service_area=`Service area is required`),r.unit_cost&&r.unit_cost<0&&(e.unit_cost=`Unit cost must be a positive number`),e};return(0,H.jsx)(`div`,{className:`ai-overlay`,onClick:t,children:(0,H.jsxs)(`div`,{className:`ai-modal`,onClick:e=>e.stopPropagation(),children:[(0,H.jsxs)(`div`,{className:`ai-modal__header`,children:[(0,H.jsxs)(`div`,{className:`ai-modal__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid ${e?`fa-pen-to-square`:`fa-plus-circle`}`}),e?`Edit Inventory Item`:`Add Inventory Item`]}),(0,H.jsx)(`button`,{className:`ai-modal__close`,onClick:t,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]}),(0,H.jsxs)(`form`,{className:`ai-modal__body`,onSubmit:async i=>{i.preventDefault();let a=p();if(Object.keys(a).length>0){c(a);return}u(!0);try{let i={...r,current_stock:parseInt(r.current_stock)||0,minimum_stock:parseInt(r.minimum_stock)||0,unit_cost:parseFloat(r.unit_cost)||0};e?(await Ol(e.item_id,i),n(`Inventory item updated successfully`)):(await Dl(i),n(`Inventory item created successfully`)),t()}catch(e){c({submit:e.message})}finally{u(!1)}},children:[s.submit&&(0,H.jsxs)(`div`,{className:`ai-form__error-banner`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),s.submit]}),(0,H.jsxs)(`div`,{className:`ai-form__row`,children:[(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-barcode`}),`Item Code `,(0,H.jsx)(`span`,{className:`ai-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`text`,name:`item_code`,value:r.item_code,onChange:f,disabled:!!e,className:`ai-form__input ${s.item_code?`ai-form__input--error`:``}`,placeholder:`e.g., HEA0001`}),s.item_code&&(0,H.jsxs)(`span`,{className:`ai-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),s.item_code]})]}),(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-tag`}),`Item Name `,(0,H.jsx)(`span`,{className:`ai-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`text`,name:`item_name`,value:r.item_name,onChange:f,className:`ai-form__input ${s.item_name?`ai-form__input--error`:``}`,placeholder:`Enter item name`}),s.item_name&&(0,H.jsxs)(`span`,{className:`ai-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),s.item_name]})]})]}),(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-file-lines`}),`Description`]}),(0,H.jsx)(`textarea`,{name:`description`,value:r.description,onChange:f,className:`ai-form__textarea`,placeholder:`Enter item description...`,rows:`3`})]}),(0,H.jsxs)(`div`,{className:`ai-form__row`,children:[(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-layer-group`}),`Category `,(0,H.jsx)(`span`,{className:`ai-form__required`,children:`*`})]}),(0,H.jsxs)(`select`,{name:`category_id`,value:r.category_id,onChange:f,className:`ai-form__select ${s.category_id?`ai-form__input--error`:``}`,children:[(0,H.jsx)(`option`,{value:``,children:`Select Category`}),a.map(e=>(0,H.jsx)(`option`,{value:e.category_id,children:e.category_name},e.category_id))]}),s.category_id&&(0,H.jsxs)(`span`,{className:`ai-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),s.category_id]})]}),(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-scale-balanced`}),`Unit `,(0,H.jsx)(`span`,{className:`ai-form__required`,children:`*`})]}),(0,H.jsx)(`select`,{name:`unit`,value:r.unit,onChange:f,className:`ai-form__select ${s.unit?`ai-form__input--error`:``}`,children:wl.map(e=>(0,H.jsx)(`option`,{value:e.value,children:e.label},e.value))}),s.unit&&(0,H.jsxs)(`span`,{className:`ai-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),s.unit]})]})]}),(0,H.jsxs)(`div`,{className:`ai-form__row`,children:[(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-boxes`}),`Current Stock `,(0,H.jsx)(`span`,{className:`ai-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`number`,name:`current_stock`,value:r.current_stock,onChange:f,min:`0`,className:`ai-form__input ${s.current_stock?`ai-form__input--error`:``}`,placeholder:`0`}),s.current_stock&&(0,H.jsxs)(`span`,{className:`ai-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),s.current_stock]})]}),(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-triangle-exclamation`}),`Minimum Stock`]}),(0,H.jsx)(`input`,{type:`number`,name:`minimum_stock`,value:r.minimum_stock,onChange:f,min:`0`,className:`ai-form__input ${s.minimum_stock?`ai-form__input--error`:``}`,placeholder:`0`}),s.minimum_stock&&(0,H.jsxs)(`span`,{className:`ai-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),s.minimum_stock]})]})]}),(0,H.jsxs)(`div`,{className:`ai-form__row`,children:[(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-money-bill`}),`Unit Cost`]}),(0,H.jsx)(`input`,{type:`number`,name:`unit_cost`,value:r.unit_cost,onChange:f,min:`0`,step:`0.01`,className:`ai-form__input ${s.unit_cost?`ai-form__input--error`:``}`,placeholder:`0.00`}),s.unit_cost&&(0,H.jsxs)(`span`,{className:`ai-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),s.unit_cost]})]}),(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-calendar`}),`Expiry Date`]}),(0,H.jsx)(`input`,{type:`date`,name:`expiry_date`,value:r.expiry_date,onChange:f,className:`ai-form__input`})]})]}),(0,H.jsxs)(`div`,{className:`ai-form__row`,children:[(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-hashtag`}),`Batch Number`]}),(0,H.jsx)(`input`,{type:`text`,name:`batch_number`,value:r.batch_number,onChange:f,className:`ai-form__input`,placeholder:`Enter batch number`})]}),(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-dot`}),`Storage Location`]}),(0,H.jsx)(`input`,{type:`text`,name:`location`,value:r.location,onChange:f,className:`ai-form__input`,placeholder:`e.g., Warehouse A`})]})]}),(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-bullseye`}),`Service Area `,(0,H.jsx)(`span`,{className:`ai-form__required`,children:`*`})]}),(0,H.jsx)(`select`,{name:`service_area`,value:r.service_area,onChange:f,className:`ai-form__select ${s.service_area?`ai-form__input--error`:``}`,children:bl.map(e=>(0,H.jsx)(`option`,{value:e.value,children:e.label},e.value))}),s.service_area&&(0,H.jsxs)(`span`,{className:`ai-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),s.service_area]})]}),(0,H.jsx)(`button`,{type:`submit`,className:`ai-form__submit`,disabled:l,children:l?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-spinner fa-spin`}),e?`Updating...`:`Creating...`]}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fa-solid ${e?`fa-pen-to-square`:`fa-plus`}`}),e?`Update Item`:`Create Item`]})})]})]})})}function Ul({vehicle:e,onClose:t,onSuccess:n}){let[r,i]=(0,v.useState)({vehicle_code:``,vehicle_name:``,category_id:``,vehicle_type:``,plate_number:``,model:``,year:new Date().getFullYear(),fuel_type:`diesel`,service_area:`health`,branch_name:``,location:``,current_mileage:``,maintenance_interval:5e3}),[a,o]=(0,v.useState)([]),[s,c]=(0,v.useState)({}),[l,u]=(0,v.useState)(!1);(0,v.useEffect)(()=>{d()},[]),(0,v.useEffect)(()=>{e&&i({vehicle_code:e.vehicle_code||``,vehicle_name:e.vehicle_name||``,category_id:e.category_id||``,vehicle_type:e.vehicle_type||``,plate_number:e.plate_number||``,model:e.model||``,year:e.year||new Date().getFullYear(),fuel_type:e.fuel_type||`diesel`,service_area:e.service_area||`health`,branch_name:e.branch_name||``,location:e.location||``,current_mileage:e.current_mileage||``,maintenance_interval:e.maintenance_interval||5e3})},[e]);let d=async()=>{try{o((await Tl(`vehicle`)).data)}catch(e){console.error(`Error fetching categories:`,e)}},f=e=>{let{name:t,value:n}=e.target;i(e=>({...e,[t]:n})),s[t]&&c(e=>({...e,[t]:null}))},p=()=>{let e={};return r.vehicle_code.trim()||(e.vehicle_code=`Vehicle code is required`),r.vehicle_name.trim()||(e.vehicle_name=`Vehicle name is required`),r.category_id||(e.category_id=`Category is required`),r.plate_number.trim()||(e.plate_number=`Plate number is required`),r.model.trim()||(e.model=`Model is required`),r.year?(r.year<1900||r.year>new Date().getFullYear()+1)&&(e.year=`Invalid year`):e.year=`Year is required`,r.fuel_type||(e.fuel_type=`Fuel type is required`),r.service_area||(e.service_area=`Service area is required`),r.current_mileage&&r.current_mileage<0&&(e.current_mileage=`Mileage must be a positive number`),e};return(0,H.jsx)(`div`,{className:`ai-overlay`,onClick:t,children:(0,H.jsxs)(`div`,{className:`ai-modal`,onClick:e=>e.stopPropagation(),children:[(0,H.jsxs)(`div`,{className:`ai-modal__header`,children:[(0,H.jsxs)(`div`,{className:`ai-modal__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid ${e?`fa-pen-to-square`:`fa-plus-circle`}`}),e?`Edit Vehicle`:`Add Vehicle`]}),(0,H.jsx)(`button`,{className:`ai-modal__close`,onClick:t,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]}),(0,H.jsxs)(`form`,{className:`ai-modal__body`,onSubmit:async i=>{i.preventDefault();let a=p();if(Object.keys(a).length>0){c(a);return}u(!0);try{let i={...r,year:parseInt(r.year),current_mileage:parseInt(r.current_mileage)||0,maintenance_interval:parseInt(r.maintenance_interval)||5e3};e?(await Nl(e.vehicle_id,i),n(`Vehicle updated successfully`)):(await Ml(i),n(`Vehicle created successfully`)),t()}catch(e){c({submit:e.message})}finally{u(!1)}},children:[s.submit&&(0,H.jsxs)(`div`,{className:`ai-form__error-banner`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),s.submit]}),(0,H.jsxs)(`div`,{className:`ai-form__row`,children:[(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-barcode`}),`Vehicle Code `,(0,H.jsx)(`span`,{className:`ai-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`text`,name:`vehicle_code`,value:r.vehicle_code,onChange:f,disabled:!!e,className:`ai-form__input ${s.vehicle_code?`ai-form__input--error`:``}`,placeholder:`e.g., AMB001`}),s.vehicle_code&&(0,H.jsxs)(`span`,{className:`ai-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),s.vehicle_code]})]}),(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-tag`}),`Vehicle Name `,(0,H.jsx)(`span`,{className:`ai-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`text`,name:`vehicle_name`,value:r.vehicle_name,onChange:f,className:`ai-form__input ${s.vehicle_name?`ai-form__input--error`:``}`,placeholder:`e.g., Ambulance Unit 1`}),s.vehicle_name&&(0,H.jsxs)(`span`,{className:`ai-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),s.vehicle_name]})]})]}),(0,H.jsxs)(`div`,{className:`ai-form__row`,children:[(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-layer-group`}),`Category `,(0,H.jsx)(`span`,{className:`ai-form__required`,children:`*`})]}),(0,H.jsxs)(`select`,{name:`category_id`,value:r.category_id,onChange:f,className:`ai-form__select ${s.category_id?`ai-form__input--error`:``}`,children:[(0,H.jsx)(`option`,{value:``,children:`Select Category`}),a.map(e=>(0,H.jsx)(`option`,{value:e.category_id,children:e.category_name},e.category_id))]}),s.category_id&&(0,H.jsxs)(`span`,{className:`ai-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),s.category_id]})]}),(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-truck`}),`Vehicle Type`]}),(0,H.jsx)(`input`,{type:`text`,name:`vehicle_type`,value:r.vehicle_type,onChange:f,className:`ai-form__input`,placeholder:`e.g., Ambulance, Fire Truck`})]})]}),(0,H.jsxs)(`div`,{className:`ai-form__row`,children:[(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-id-card`}),`Plate Number `,(0,H.jsx)(`span`,{className:`ai-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`text`,name:`plate_number`,value:r.plate_number,onChange:f,className:`ai-form__input ${s.plate_number?`ai-form__input--error`:``}`,placeholder:`e.g., PRC-001`}),s.plate_number&&(0,H.jsxs)(`span`,{className:`ai-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),s.plate_number]})]}),(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-car`}),`Model `,(0,H.jsx)(`span`,{className:`ai-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`text`,name:`model`,value:r.model,onChange:f,className:`ai-form__input ${s.model?`ai-form__input--error`:``}`,placeholder:`e.g., Toyota Hiace`}),s.model&&(0,H.jsxs)(`span`,{className:`ai-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),s.model]})]})]}),(0,H.jsxs)(`div`,{className:`ai-form__row`,children:[(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-calendar`}),`Year `,(0,H.jsx)(`span`,{className:`ai-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`number`,name:`year`,value:r.year,onChange:f,min:`1900`,max:new Date().getFullYear()+1,className:`ai-form__input ${s.year?`ai-form__input--error`:``}`,placeholder:`2024`}),s.year&&(0,H.jsxs)(`span`,{className:`ai-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),s.year]})]}),(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-gas-pump`}),`Fuel Type `,(0,H.jsx)(`span`,{className:`ai-form__required`,children:`*`})]}),(0,H.jsx)(`select`,{name:`fuel_type`,value:r.fuel_type,onChange:f,className:`ai-form__select ${s.fuel_type?`ai-form__input--error`:``}`,children:Sl.map(e=>(0,H.jsx)(`option`,{value:e.value,children:e.label},e.value))}),s.fuel_type&&(0,H.jsxs)(`span`,{className:`ai-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),s.fuel_type]})]})]}),(0,H.jsxs)(`div`,{className:`ai-form__row`,children:[(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-gauge`}),`Current Mileage (km)`]}),(0,H.jsx)(`input`,{type:`number`,name:`current_mileage`,value:r.current_mileage,onChange:f,min:`0`,className:`ai-form__input ${s.current_mileage?`ai-form__input--error`:``}`,placeholder:`0`}),s.current_mileage&&(0,H.jsxs)(`span`,{className:`ai-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),s.current_mileage]})]}),(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-calendar-check`}),`Maintenance Interval (km)`]}),(0,H.jsx)(`input`,{type:`number`,name:`maintenance_interval`,value:r.maintenance_interval,onChange:f,min:`0`,className:`ai-form__input`,placeholder:`5000`})]})]}),(0,H.jsxs)(`div`,{className:`ai-form__row`,children:[(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-building`}),`Branch Name`]}),(0,H.jsx)(`input`,{type:`text`,name:`branch_name`,value:r.branch_name,onChange:f,className:`ai-form__input`,placeholder:`e.g., Central Branch`})]}),(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-dot`}),`Location`]}),(0,H.jsx)(`input`,{type:`text`,name:`location`,value:r.location,onChange:f,className:`ai-form__input`,placeholder:`e.g., Garage A`})]})]}),(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-bullseye`}),`Service Area `,(0,H.jsx)(`span`,{className:`ai-form__required`,children:`*`})]}),(0,H.jsx)(`select`,{name:`service_area`,value:r.service_area,onChange:f,className:`ai-form__select ${s.service_area?`ai-form__input--error`:``}`,children:bl.map(e=>(0,H.jsx)(`option`,{value:e.value,children:e.label},e.value))}),s.service_area&&(0,H.jsxs)(`span`,{className:`ai-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),s.service_area]})]}),(0,H.jsx)(`button`,{type:`submit`,className:`ai-form__submit`,disabled:l,children:l?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-spinner fa-spin`}),e?`Updating...`:`Creating...`]}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fa-solid ${e?`fa-pen-to-square`:`fa-plus`}`}),e?`Update Vehicle`:`Create Vehicle`]})})]})]})})}function Wl({vehicle:e,onClose:t,onSuccess:n}){let[r,i]=(0,v.useState)({vehicle_id:e?.vehicle_id||``,maintenance_type:`routine`,description:``,cost:``,maintenance_date:new Date().toISOString().split(`T`)[0],next_maintenance_date:``,service_provider:``,mileage_at_service:``,notes:``}),[a,o]=(0,v.useState)({}),[s,c]=(0,v.useState)(!1),l=e=>{let{name:t,value:n}=e.target;i(e=>({...e,[t]:n})),a[t]&&o(e=>({...e,[t]:null}))},u=()=>{let e={};return r.maintenance_type||(e.maintenance_type=`Maintenance type is required`),r.description.trim()||(e.description=`Description is required`),r.maintenance_date||(e.maintenance_date=`Maintenance date is required`),r.cost&&r.cost<0&&(e.cost=`Cost must be a positive number`),e};return(0,H.jsx)(`div`,{className:`ai-overlay`,onClick:t,children:(0,H.jsxs)(`div`,{className:`ai-modal`,onClick:e=>e.stopPropagation(),children:[(0,H.jsxs)(`div`,{className:`ai-modal__header`,children:[(0,H.jsxs)(`div`,{className:`ai-modal__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-wrench`}),`Add Maintenance - `,e?.vehicle_name]}),(0,H.jsx)(`button`,{className:`ai-modal__close`,onClick:t,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]}),(0,H.jsxs)(`form`,{className:`ai-modal__body`,onSubmit:async e=>{e.preventDefault();let i=u();if(Object.keys(i).length>0){o(i);return}c(!0);try{await Fl({...r,cost:parseFloat(r.cost)||0,mileage_at_service:parseInt(r.mileage_at_service)||null}),n(`Maintenance record added successfully`),t()}catch(e){o({submit:e.message})}finally{c(!1)}},children:[a.submit&&(0,H.jsxs)(`div`,{className:`ai-form__error-banner`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),a.submit]}),(0,H.jsxs)(`div`,{className:`ai-form__row`,children:[(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-tools`}),`Maintenance Type `,(0,H.jsx)(`span`,{className:`ai-form__required`,children:`*`})]}),(0,H.jsx)(`select`,{name:`maintenance_type`,value:r.maintenance_type,onChange:l,className:`ai-form__select ${a.maintenance_type?`ai-form__input--error`:``}`,children:Cl.map(e=>(0,H.jsx)(`option`,{value:e.value,children:e.label},e.value))}),a.maintenance_type&&(0,H.jsxs)(`span`,{className:`ai-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),a.maintenance_type]})]}),(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-money-bill`}),`Cost`]}),(0,H.jsx)(`input`,{type:`number`,name:`cost`,value:r.cost,onChange:l,min:`0`,step:`0.01`,className:`ai-form__input ${a.cost?`ai-form__input--error`:``}`,placeholder:`0.00`}),a.cost&&(0,H.jsxs)(`span`,{className:`ai-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),a.cost]})]})]}),(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-file-lines`}),`Description `,(0,H.jsx)(`span`,{className:`ai-form__required`,children:`*`})]}),(0,H.jsx)(`textarea`,{name:`description`,value:r.description,onChange:l,className:`ai-form__textarea ${a.description?`ai-form__input--error`:``}`,placeholder:`Describe the maintenance work...`,rows:`3`}),a.description&&(0,H.jsxs)(`span`,{className:`ai-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),a.description]})]}),(0,H.jsxs)(`div`,{className:`ai-form__row`,children:[(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-calendar`}),`Maintenance Date `,(0,H.jsx)(`span`,{className:`ai-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`date`,name:`maintenance_date`,value:r.maintenance_date,onChange:l,className:`ai-form__input ${a.maintenance_date?`ai-form__input--error`:``}`}),a.maintenance_date&&(0,H.jsxs)(`span`,{className:`ai-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),a.maintenance_date]})]}),(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-calendar-check`}),`Next Maintenance Date`]}),(0,H.jsx)(`input`,{type:`date`,name:`next_maintenance_date`,value:r.next_maintenance_date,onChange:l,className:`ai-form__input`})]})]}),(0,H.jsxs)(`div`,{className:`ai-form__row`,children:[(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-gauge`}),`Mileage at Service`]}),(0,H.jsx)(`input`,{type:`number`,name:`mileage_at_service`,value:r.mileage_at_service,onChange:l,min:`0`,className:`ai-form__input`,placeholder:`0 km`})]}),(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-building`}),`Service Provider`]}),(0,H.jsx)(`input`,{type:`text`,name:`service_provider`,value:r.service_provider,onChange:l,className:`ai-form__input`,placeholder:`e.g., Auto Shop`})]})]}),(0,H.jsxs)(`div`,{className:`ai-form__field`,children:[(0,H.jsxs)(`label`,{className:`ai-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-note-sticky`}),`Notes`]}),(0,H.jsx)(`textarea`,{name:`notes`,value:r.notes,onChange:l,className:`ai-form__textarea`,placeholder:`Additional notes...`,rows:`2`})]}),(0,H.jsx)(`button`,{type:`submit`,className:`ai-form__submit`,disabled:s,children:s?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-spinner fa-spin`}),`Adding...`]}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-plus`}),`Add Maintenance Record`]})})]})]})})}function Gl({type:e,data:t,onClose:n,onAddMaintenance:r,onEdit:i}){if(!t)return null;let a=e=>{let t=bl.find(t=>t.value===e);return t?t.color:`#6b7280`};return(0,H.jsx)(`div`,{className:`ai-overlay`,onClick:n,children:(0,H.jsxs)(`div`,{className:`ai-modal ai-modal--lg`,onClick:e=>e.stopPropagation(),children:[(0,H.jsxs)(`div`,{className:`ai-modal__header`,children:[(0,H.jsxs)(`div`,{className:`ai-modal__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-eye`}),e===`inventory`?`Inventory Item Details`:`Vehicle Details`]}),(0,H.jsx)(`button`,{className:`ai-modal__close`,onClick:n,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]}),(0,H.jsxs)(`div`,{className:`ai-modal__body`,children:[e===`inventory`?(()=>{let e=zl(t.current_stock,t.minimum_stock),n=a(t.service_area);return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(`div`,{className:`ai-view__section`,children:[(0,H.jsxs)(`h3`,{className:`ai-view__section-title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-box`,style:{color:n}}),t.item_name]}),(0,H.jsxs)(`div`,{className:`ai-view__badges`,children:[(0,H.jsxs)(`span`,{className:`ai-view__badge`,style:{background:`${n}12`,color:n,border:`1px solid ${n}25`},children:[(0,H.jsx)(`i`,{className:`fa-solid fa-bullseye`}),bl.find(e=>e.value===t.service_area)?.label]}),(0,H.jsxs)(`span`,{className:`ai-view__badge`,style:{background:`${e.color}12`,color:e.color,border:`1px solid ${e.color}25`},children:[(0,H.jsx)(`i`,{className:`fa-solid fa-chart-line`}),e.label]})]})]}),(0,H.jsxs)(`div`,{className:`ai-view__grid`,children:[(0,H.jsxs)(`div`,{className:`ai-view__item`,children:[(0,H.jsx)(`div`,{className:`ai-view__item-label`,children:`Item Code`}),(0,H.jsxs)(`div`,{className:`ai-view__item-value`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-barcode`}),t.item_code]})]}),(0,H.jsxs)(`div`,{className:`ai-view__item`,children:[(0,H.jsx)(`div`,{className:`ai-view__item-label`,children:`Category`}),(0,H.jsx)(`div`,{className:`ai-view__item-value`,children:t.category_name})]}),(0,H.jsxs)(`div`,{className:`ai-view__item`,children:[(0,H.jsx)(`div`,{className:`ai-view__item-label`,children:`Current Stock`}),(0,H.jsxs)(`div`,{className:`ai-view__item-value ai-view__item-value--stock`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-boxes`}),t.current_stock,` `,t.unit]})]}),(0,H.jsxs)(`div`,{className:`ai-view__item`,children:[(0,H.jsx)(`div`,{className:`ai-view__item-label`,children:`Minimum Stock`}),(0,H.jsxs)(`div`,{className:`ai-view__item-value`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-triangle-exclamation`}),t.minimum_stock,` `,t.unit]})]}),(0,H.jsxs)(`div`,{className:`ai-view__item`,children:[(0,H.jsx)(`div`,{className:`ai-view__item-label`,children:`Unit Cost`}),(0,H.jsxs)(`div`,{className:`ai-view__item-value ai-view__item-value--price`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-money-bill`}),Bl(t.unit_cost)]})]}),(0,H.jsxs)(`div`,{className:`ai-view__item`,children:[(0,H.jsx)(`div`,{className:`ai-view__item-label`,children:`Total Value`}),(0,H.jsxs)(`div`,{className:`ai-view__item-value ai-view__item-value--price`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-calculator`}),Bl(t.total_value)]})]}),(0,H.jsxs)(`div`,{className:`ai-view__item`,children:[(0,H.jsx)(`div`,{className:`ai-view__item-label`,children:`Location`}),(0,H.jsxs)(`div`,{className:`ai-view__item-value`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-dot`}),t.location]})]}),t.expiry_date&&(0,H.jsxs)(`div`,{className:`ai-view__item`,children:[(0,H.jsx)(`div`,{className:`ai-view__item-label`,children:`Expiry Date`}),(0,H.jsxs)(`div`,{className:`ai-view__item-value`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-calendar`}),new Date(t.expiry_date).toLocaleDateString()]})]}),t.batch_number&&(0,H.jsxs)(`div`,{className:`ai-view__item`,children:[(0,H.jsx)(`div`,{className:`ai-view__item-label`,children:`Batch Number`}),(0,H.jsxs)(`div`,{className:`ai-view__item-value`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-hashtag`}),t.batch_number]})]})]}),t.description&&(0,H.jsxs)(`div`,{className:`ai-view__section`,children:[(0,H.jsxs)(`h3`,{className:`ai-view__section-title`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-file-lines`}),`Description`]}),(0,H.jsx)(`div`,{className:`ai-view__content`,children:t.description})]})]})})():(()=>{let n=Ll(t.status),o=a(t.service_area),s=t.next_maintenance_date&&new Date(t.next_maintenance_date)<=new Date(Date.now()+720*60*60*1e3);return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(`div`,{className:`ai-view__section`,children:[(0,H.jsxs)(`h3`,{className:`ai-view__section-title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-truck`,style:{color:o}}),t.vehicle_name]}),(0,H.jsxs)(`div`,{className:`ai-view__badges`,children:[(0,H.jsxs)(`span`,{className:`ai-view__badge`,style:{background:`${o}12`,color:o,border:`1px solid ${o}25`},children:[(0,H.jsx)(`i`,{className:`fa-solid fa-bullseye`}),bl.find(e=>e.value===t.service_area)?.label]}),(0,H.jsxs)(`span`,{className:`ai-view__badge`,style:{background:`${n}12`,color:n,border:`1px solid ${n}25`},children:[(0,H.jsx)(`i`,{className:`fa-solid fa-flag`}),xl.find(e=>e.value===t.status)?.label]}),s&&(0,H.jsxs)(`span`,{className:`ai-view__badge`,style:{background:`#f59e0b12`,color:`#f59e0b`,border:`1px solid #f59e0b25`},children:[(0,H.jsx)(`i`,{className:`fa-solid fa-calendar-check`}),`Maintenance Due`]})]})]}),(0,H.jsxs)(`div`,{className:`ai-view__grid`,children:[(0,H.jsxs)(`div`,{className:`ai-view__item`,children:[(0,H.jsx)(`div`,{className:`ai-view__item-label`,children:`Vehicle Code`}),(0,H.jsxs)(`div`,{className:`ai-view__item-value`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-barcode`}),t.vehicle_code]})]}),(0,H.jsxs)(`div`,{className:`ai-view__item`,children:[(0,H.jsx)(`div`,{className:`ai-view__item-label`,children:`Category`}),(0,H.jsx)(`div`,{className:`ai-view__item-value`,children:t.category_name})]}),(0,H.jsxs)(`div`,{className:`ai-view__item`,children:[(0,H.jsx)(`div`,{className:`ai-view__item-label`,children:`Plate Number`}),(0,H.jsxs)(`div`,{className:`ai-view__item-value`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-id-card`}),t.plate_number]})]}),(0,H.jsxs)(`div`,{className:`ai-view__item`,children:[(0,H.jsx)(`div`,{className:`ai-view__item-label`,children:`Model`}),(0,H.jsxs)(`div`,{className:`ai-view__item-value`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-car`}),t.model]})]}),(0,H.jsxs)(`div`,{className:`ai-view__item`,children:[(0,H.jsx)(`div`,{className:`ai-view__item-label`,children:`Year`}),(0,H.jsxs)(`div`,{className:`ai-view__item-value`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-calendar`}),t.year]})]}),(0,H.jsxs)(`div`,{className:`ai-view__item`,children:[(0,H.jsx)(`div`,{className:`ai-view__item-label`,children:`Fuel Type`}),(0,H.jsxs)(`div`,{className:`ai-view__item-value`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-gas-pump`}),Sl.find(e=>e.value===t.fuel_type)?.label]})]}),(0,H.jsxs)(`div`,{className:`ai-view__item`,children:[(0,H.jsx)(`div`,{className:`ai-view__item-label`,children:`Current Mileage`}),(0,H.jsxs)(`div`,{className:`ai-view__item-value`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-gauge`}),t.current_mileage,` km`]})]}),(0,H.jsxs)(`div`,{className:`ai-view__item`,children:[(0,H.jsx)(`div`,{className:`ai-view__item-label`,children:`Maintenance Interval`}),(0,H.jsxs)(`div`,{className:`ai-view__item-value`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-calendar-check`}),t.maintenance_interval,` km`]})]}),(0,H.jsxs)(`div`,{className:`ai-view__item`,children:[(0,H.jsx)(`div`,{className:`ai-view__item-label`,children:`Last Maintenance`}),(0,H.jsxs)(`div`,{className:`ai-view__item-value`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-wrench`}),t.last_maintenance_date?new Date(t.last_maintenance_date).toLocaleDateString():`None`]})]}),(0,H.jsxs)(`div`,{className:`ai-view__item`,children:[(0,H.jsx)(`div`,{className:`ai-view__item-label`,children:`Next Maintenance`}),(0,H.jsxs)(`div`,{className:`ai-view__item-value`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-calendar`}),t.next_maintenance_date?new Date(t.next_maintenance_date).toLocaleDateString():`Not scheduled`]})]}),t.branch_name&&(0,H.jsxs)(`div`,{className:`ai-view__item`,children:[(0,H.jsx)(`div`,{className:`ai-view__item-label`,children:`Branch`}),(0,H.jsxs)(`div`,{className:`ai-view__item-value`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-building`}),t.branch_name]})]}),t.location&&(0,H.jsxs)(`div`,{className:`ai-view__item`,children:[(0,H.jsx)(`div`,{className:`ai-view__item-label`,children:`Location`}),(0,H.jsxs)(`div`,{className:`ai-view__item-value`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-dot`}),t.location]})]})]}),t.maintenance_history&&t.maintenance_history.length>0&&(0,H.jsxs)(`div`,{className:`ai-view__section`,children:[(0,H.jsxs)(`h3`,{className:`ai-view__section-title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-history`}),`Maintenance History`]}),(0,H.jsx)(`div`,{className:`ai-maintenance-list`,children:t.maintenance_history.map(e=>{let t=Rl(e.maintenance_type);return(0,H.jsxs)(`div`,{className:`ai-maintenance-item`,children:[(0,H.jsxs)(`div`,{className:`ai-maintenance-item__header`,children:[(0,H.jsxs)(`span`,{className:`ai-maintenance-item__type`,style:{backgroundColor:`${t}12`,color:t,border:`1px solid ${t}25`},children:[(0,H.jsx)(`i`,{className:`fa-solid fa-tools`}),Cl.find(t=>t.value===e.maintenance_type)?.label]}),(0,H.jsxs)(`span`,{className:`ai-maintenance-item__date`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-calendar`}),new Date(e.maintenance_date).toLocaleDateString()]})]}),(0,H.jsx)(`p`,{className:`ai-maintenance-item__description`,children:e.description}),e.cost>0&&(0,H.jsxs)(`div`,{className:`ai-maintenance-item__cost`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-money-bill`}),`Cost: `,Bl(e.cost)]})]},e.maintenance_id)})})]}),(0,H.jsxs)(`div`,{className:`ai-view__actions`,children:[e===`vehicle`&&(0,H.jsxs)(`button`,{className:`ai-btn ai-btn--primary`,onClick:()=>r(t),children:[(0,H.jsx)(`i`,{className:`fa-solid fa-wrench`}),`Add Maintenance`]}),(0,H.jsxs)(`button`,{className:`ai-btn ai-btn--secondary`,onClick:()=>i(t),children:[(0,H.jsx)(`i`,{className:`fa-solid fa-pen`}),`Edit`]})]})]})})(),(0,H.jsxs)(`div`,{className:`ai-view__footer`,children:[t.created_by_name&&(0,H.jsxs)(`small`,{children:[(0,H.jsx)(`i`,{className:`fa-regular fa-user`}),`Created by `,t.created_by_name,` on`,` `,new Date(t.created_at).toLocaleString()]}),t.updated_at&&t.updated_at!==t.created_at&&(0,H.jsxs)(`small`,{children:[(0,H.jsx)(`i`,{className:`fa-regular fa-clock`}),`Updated on `,new Date(t.updated_at).toLocaleString()]})]})]})]})})}function Kl(){let[e,t]=(0,v.useState)(`inventory`),[n,r]=(0,v.useState)([]),[i,a]=(0,v.useState)([]),[o,s]=(0,v.useState)({}),[c,l]=(0,v.useState)(!0),[u,d]=(0,v.useState)(``),[f,p]=(0,v.useState)(``),[m,h]=(0,v.useState)(``),[g,_]=(0,v.useState)(``),[y,b]=(0,v.useState)([]),[x,S]=(0,v.useState)(!1),[C,w]=(0,v.useState)(!1),[T,E]=(0,v.useState)(!1),[D,O]=(0,v.useState)(!1),[ee,k]=(0,v.useState)(!1),[te,A]=(0,v.useState)(!1),[ne,j]=(0,v.useState)(null),[M,N]=(0,v.useState)(null),[P,re]=(0,v.useState)(null),[F,I]=(0,v.useState)(!1),[ie,ae]=(0,v.useState)(!1),[oe,se]=(0,v.useState)(null),ce=(e,t=`success`)=>{re({message:e,type:t})};(0,v.useEffect)(()=>{le()},[e]),(0,v.useEffect)(()=>{e===`inventory`?ue():de()},[e,u,f,m,g,F,ie]);let le=async()=>{try{b((await Tl(e===`inventory`?`inventory`:`vehicle`)).data)}catch(e){console.error(`Error fetching categories:`,e)}},ue=async()=>{l(!0);try{let e=await El({search:u||void 0,category:f||void 0,service_area:m||void 0,status:g||void 0,low_stock:F||void 0});r(e.data),s(e.stats)}catch(e){ce(e.message,`error`)}finally{l(!1)}},de=async()=>{l(!0);try{let e=await Al({search:u||void 0,category:f||void 0,service_area:m||void 0,status:g||void 0,maintenance_due:ie||void 0});a(e.data),s(e.stats)}catch(e){ce(e.message,`error`)}finally{l(!1)}},fe=()=>{j(null),O(!0)},pe=e=>{j(e),O(!0)},me=e=>{j(e),k(!0)},he=e=>{N(e),A(!0)},ge=async t=>{if(window.confirm(`Are you sure you want to delete this item?`))try{e===`inventory`?(await kl(t),ce(`Inventory item deleted successfully`),ue()):(await Pl(t),ce(`Vehicle deleted successfully`),de())}catch(e){ce(e.message,`error`)}},_e=t=>{ce(t),e===`inventory`?ue():de(),le()},ve=e=>{ce(e),M&&jl(M.vehicle_id).then(e=>{j(e.data)}),de()},ye=()=>{d(``)},be=()=>{p(``),h(``),_(``),I(!1),ae(!1)},xe=()=>{let e=0;return f&&e++,m&&e++,g&&e++,F&&e++,ie&&e++,e};return(0,H.jsxs)(`div`,{className:`ai-root`,children:[(0,H.jsxs)(`div`,{className:`ai-header`,children:[(0,H.jsx)(`div`,{className:`ai-header__container`,children:(0,H.jsxs)(`div`,{className:`ai-header__content`,children:[(0,H.jsxs)(`div`,{className:`ai-header__left`,children:[(0,H.jsxs)(`div`,{className:`ai-header__badge`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-warehouse`}),`Inventory Management`]}),(0,H.jsx)(`h1`,{className:`ai-header__title`,children:`Inventory & Vehicles`}),(0,H.jsx)(`p`,{className:`ai-header__subtitle`,children:`Manage your inventory items and vehicle fleet`})]}),(0,H.jsx)(`div`,{className:`ai-header__stats`,children:e===`inventory`?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(`div`,{className:`ai-header-stat`,children:[(0,H.jsx)(`span`,{className:`ai-header-stat__value`,children:o.total_items||0}),(0,H.jsx)(`span`,{className:`ai-header-stat__label`,children:`Total Items`})]}),(0,H.jsxs)(`div`,{className:`ai-header-stat`,children:[(0,H.jsx)(`span`,{className:`ai-header-stat__value`,children:o.low_stock||0}),(0,H.jsx)(`span`,{className:`ai-header-stat__label`,children:`Low Stock`})]}),(0,H.jsxs)(`div`,{className:`ai-header-stat`,children:[(0,H.jsx)(`span`,{className:`ai-header-stat__value`,children:o.out_of_stock||0}),(0,H.jsx)(`span`,{className:`ai-header-stat__label`,children:`Out of Stock`})]}),(0,H.jsxs)(`div`,{className:`ai-header-stat`,children:[(0,H.jsx)(`span`,{className:`ai-header-stat__value`,children:Bl(o.total_value||0)}),(0,H.jsx)(`span`,{className:`ai-header-stat__label`,children:`Total Value`})]})]}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(`div`,{className:`ai-header-stat`,children:[(0,H.jsx)(`span`,{className:`ai-header-stat__value`,children:o.total_vehicles||0}),(0,H.jsx)(`span`,{className:`ai-header-stat__label`,children:`Total Vehicles`})]}),(0,H.jsxs)(`div`,{className:`ai-header-stat`,children:[(0,H.jsx)(`span`,{className:`ai-header-stat__value`,children:o.operational||0}),(0,H.jsx)(`span`,{className:`ai-header-stat__label`,children:`Operational`})]}),(0,H.jsxs)(`div`,{className:`ai-header-stat`,children:[(0,H.jsx)(`span`,{className:`ai-header-stat__value`,children:o.maintenance||0}),(0,H.jsx)(`span`,{className:`ai-header-stat__label`,children:`In Maintenance`})]}),(0,H.jsxs)(`div`,{className:`ai-header-stat`,children:[(0,H.jsx)(`span`,{className:`ai-header-stat__value`,children:o.maintenance_due||0}),(0,H.jsx)(`span`,{className:`ai-header-stat__label`,children:`Maintenance Due`})]})]})})]})}),(0,H.jsx)(`div`,{className:`ai-header__wave`,children:(0,H.jsx)(`svg`,{viewBox:`0 0 1440 120`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`,children:(0,H.jsx)(`path`,{d:`M0 120L60 105C120 90 240 60 360 45C480 30 600 30 720 37.5C840 45 960 60 1080 67.5C1200 75 1320 75 1380 75L1440 75V120H1380C1320 120 1200 120 1080 120C960 120 840 120 720 120C600 120 480 120 360 120C240 120 120 120 60 120H0Z`,fill:`white`,fillOpacity:`0.1`})})})]}),(0,H.jsxs)(`div`,{className:`ai-body`,children:[(0,H.jsxs)(`div`,{className:`ai-tabs`,children:[(0,H.jsxs)(`button`,{className:`ai-tab ${e===`inventory`?`ai-tab--active`:``}`,onClick:()=>t(`inventory`),children:[(0,H.jsx)(`i`,{className:`fa-solid fa-boxes`}),`Inventory Items`]}),(0,H.jsxs)(`button`,{className:`ai-tab ${e===`vehicles`?`ai-tab--active`:``}`,onClick:()=>t(`vehicles`),children:[(0,H.jsx)(`i`,{className:`fa-solid fa-truck`}),`Vehicles`]})]}),(0,H.jsxs)(`div`,{className:`ai-toolbar`,children:[(0,H.jsxs)(`div`,{className:`ai-toolbar__search`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-magnifying-glass ai-toolbar__search-icon`}),(0,H.jsx)(`input`,{type:`text`,className:`ai-toolbar__search-input`,placeholder:e===`inventory`?`Search items...`:`Search vehicles...`,value:u,onChange:e=>d(e.target.value)}),u&&(0,H.jsx)(`button`,{className:`ai-toolbar__search-clear`,onClick:ye,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]}),(0,H.jsxs)(`div`,{className:`ai-toolbar__filters`,children:[y.length>0&&(0,H.jsxs)(`div`,{className:`ai-toolbar__filter-dropdown`,children:[(0,H.jsxs)(`button`,{className:`ai-toolbar__filter-dropdown-btn ${f?`ai-toolbar__filter-dropdown-btn--active`:``}`,onClick:()=>S(!x),children:[(0,H.jsx)(`i`,{className:`fa-solid fa-layer-group`}),(0,H.jsx)(`span`,{children:f?y.find(e=>e.category_id.toString()===f)?.category_name:`All Categories`}),(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-down`})]}),x&&(0,H.jsxs)(`div`,{className:`ai-toolbar__filter-dropdown-menu`,children:[(0,H.jsx)(`button`,{onClick:()=>{p(``),S(!1)},className:f?``:`active`,children:`All Categories`}),y.map(e=>(0,H.jsx)(`button`,{onClick:()=>{p(e.category_id.toString()),S(!1)},className:f===e.category_id.toString()?`active`:``,children:e.category_name},e.category_id))]})]}),(0,H.jsxs)(`div`,{className:`ai-toolbar__filter-dropdown`,children:[(0,H.jsxs)(`button`,{className:`ai-toolbar__filter-dropdown-btn ${m?`ai-toolbar__filter-dropdown-btn--active`:``}`,onClick:()=>w(!C),children:[(0,H.jsx)(`i`,{className:`fa-solid fa-bullseye`}),(0,H.jsx)(`span`,{children:m?bl.find(e=>e.value===m)?.label:`All Service Areas`}),(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-down`})]}),C&&(0,H.jsxs)(`div`,{className:`ai-toolbar__filter-dropdown-menu`,children:[(0,H.jsx)(`button`,{onClick:()=>{h(``),w(!1)},className:m?``:`active`,children:`All Service Areas`}),bl.map(e=>(0,H.jsxs)(`button`,{onClick:()=>{h(e.value),w(!1)},className:m===e.value?`active`:``,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle`,style:{color:e.color}}),e.label]},e.value))]})]}),e===`inventory`?(0,H.jsxs)(`div`,{className:`ai-toolbar__filter-dropdown`,children:[(0,H.jsxs)(`button`,{className:`ai-toolbar__filter-dropdown-btn ${g?`ai-toolbar__filter-dropdown-btn--active`:``}`,onClick:()=>E(!T),children:[(0,H.jsx)(`i`,{className:`fa-solid fa-flag`}),(0,H.jsx)(`span`,{children:g||`All Status`}),(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-down`})]}),T&&(0,H.jsxs)(`div`,{className:`ai-toolbar__filter-dropdown-menu`,children:[(0,H.jsx)(`button`,{onClick:()=>{_(``),E(!1)},className:g?``:`active`,children:`All Status`}),(0,H.jsx)(`button`,{onClick:()=>{_(`active`),E(!1)},className:g===`active`?`active`:``,children:`Active`}),(0,H.jsx)(`button`,{onClick:()=>{_(`inactive`),E(!1)},className:g===`inactive`?`active`:``,children:`Inactive`}),(0,H.jsx)(`button`,{onClick:()=>{_(`discontinued`),E(!1)},className:g===`discontinued`?`active`:``,children:`Discontinued`})]})]}):(0,H.jsxs)(`div`,{className:`ai-toolbar__filter-dropdown`,children:[(0,H.jsxs)(`button`,{className:`ai-toolbar__filter-dropdown-btn ${g?`ai-toolbar__filter-dropdown-btn--active`:``}`,onClick:()=>E(!T),children:[(0,H.jsx)(`i`,{className:`fa-solid fa-flag`}),(0,H.jsx)(`span`,{children:g?xl.find(e=>e.value===g)?.label:`All Status`}),(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-down`})]}),T&&(0,H.jsxs)(`div`,{className:`ai-toolbar__filter-dropdown-menu`,children:[(0,H.jsx)(`button`,{onClick:()=>{_(``),E(!1)},className:g?``:`active`,children:`All Status`}),xl.map(e=>(0,H.jsxs)(`button`,{onClick:()=>{_(e.value),E(!1)},className:g===e.value?`active`:``,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle`,style:{color:e.color}}),e.label]},e.value))]})]}),e===`inventory`&&(0,H.jsxs)(`button`,{className:`ai-toolbar__filter-btn ${F?`ai-toolbar__filter-btn--active`:``}`,onClick:()=>I(!F),children:[(0,H.jsx)(`i`,{className:`fa-solid fa-exclamation-triangle`}),`Low Stock Only`]}),e===`vehicles`&&(0,H.jsxs)(`button`,{className:`ai-toolbar__filter-btn ${ie?`ai-toolbar__filter-btn--active`:``}`,onClick:()=>ae(!ie),children:[(0,H.jsx)(`i`,{className:`fa-solid fa-calendar-check`}),`Maintenance Due`]}),xe()>0&&(0,H.jsxs)(`button`,{className:`ai-toolbar__filter-clear`,onClick:be,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-times`}),`Clear Filters (`,xe(),`)`]})]}),(0,H.jsxs)(`button`,{className:`ai-toolbar__create-btn`,onClick:fe,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-plus`}),e===`inventory`?`Add Item`:`Add Vehicle`]})]}),(0,H.jsxs)(`div`,{className:`ai-table-panel`,children:[(0,H.jsxs)(`div`,{className:`ai-table-panel__head`,children:[(0,H.jsxs)(`div`,{className:`ai-table-panel__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid ${e===`inventory`?`fa-boxes`:`fa-truck`}`}),e===`inventory`?`Inventory Items List`:`Vehicles List`]}),(0,H.jsx)(`div`,{className:`ai-table-panel__info`,children:!c&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(`span`,{className:`ai-table-panel__count`,children:[e===`inventory`?n.length:i.length,` `,`items`]}),(0,H.jsx)(`span`,{className:`ai-table-panel__divider`,children:``}),(0,H.jsxs)(`span`,{className:`ai-table-panel__sub`,children:[`Page 1 of`,` `,Math.ceil((e===`inventory`?n.length:i.length)/10)||1]})]})})]}),(0,H.jsx)(`div`,{className:`ai-table-panel__scroll`,children:(0,H.jsxs)(`table`,{className:`ai-table`,children:[(0,H.jsx)(`thead`,{children:(0,H.jsx)(`tr`,{children:e===`inventory`?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`th`,{children:`Item Code`}),(0,H.jsx)(`th`,{children:`Item Name`}),(0,H.jsx)(`th`,{children:`Category`}),(0,H.jsx)(`th`,{children:`Stock`}),(0,H.jsx)(`th`,{children:`Status`}),(0,H.jsx)(`th`,{children:`Service Area`}),(0,H.jsx)(`th`,{children:`Location`}),(0,H.jsx)(`th`,{children:`Actions`})]}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`th`,{children:`Vehicle Code`}),(0,H.jsx)(`th`,{children:`Vehicle Name`}),(0,H.jsx)(`th`,{children:`Category`}),(0,H.jsx)(`th`,{children:`Plate Number`}),(0,H.jsx)(`th`,{children:`Status`}),(0,H.jsx)(`th`,{children:`Service Area`}),(0,H.jsx)(`th`,{children:`Next Maintenance`}),(0,H.jsx)(`th`,{children:`Actions`})]})})}),(0,H.jsx)(`tbody`,{children:c?(0,H.jsx)(`tr`,{children:(0,H.jsx)(`td`,{colSpan:`8`,children:(0,H.jsxs)(`div`,{className:`ai-table__loading`,children:[(0,H.jsx)(`div`,{className:`ai-table__loading-spinner`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-spinner fa-spin`})}),(0,H.jsx)(`p`,{children:`Loading...`}),(0,H.jsx)(`span`,{className:`ai-table__loading-sub`,children:`Fetching data`})]})})}):(e===`inventory`?n:i).length===0?(0,H.jsx)(`tr`,{children:(0,H.jsx)(`td`,{colSpan:`8`,children:(0,H.jsxs)(`div`,{className:`ai-table__empty`,children:[(0,H.jsx)(`div`,{className:`ai-table__empty-icon`,children:(0,H.jsx)(`i`,{className:`fa-regular fa-face-frown`})}),(0,H.jsx)(`h3`,{className:`ai-table__empty-title`,children:`No Items Found`}),(0,H.jsx)(`p`,{className:`ai-table__empty-message`,children:u||f||m||g||F||ie?`Try adjusting your search or filter criteria`:`Get started by adding your first ${e===`inventory`?`inventory item`:`vehicle`}`}),(u||f||m||g||F||ie)&&(0,H.jsxs)(`button`,{className:`ai-table__empty-action`,onClick:be,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-times`}),` Clear Filters`]})]})})}):(e===`inventory`?n:i).map(t=>{if(e===`inventory`){let e=zl(t.current_stock,t.minimum_stock),n=Il(t.service_area);return(0,H.jsxs)(`tr`,{onMouseEnter:()=>se(t.item_id),onMouseLeave:()=>se(null),className:oe===t.item_id?`ai-table__row--hovered`:``,children:[(0,H.jsx)(`td`,{children:(0,H.jsxs)(`span`,{className:`ai-item-code`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-barcode`}),t.item_code]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`ai-item-name`,children:[(0,H.jsx)(`div`,{className:`ai-item-name__main`,children:t.item_name}),t.description&&(0,H.jsxs)(`div`,{className:`ai-item-name__desc`,title:t.description,children:[t.description.substring(0,30),`...`]})]})}),(0,H.jsx)(`td`,{children:t.category_name}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`ai-stock`,children:[(0,H.jsx)(`span`,{className:`ai-stock__quantity`,children:t.current_stock}),(0,H.jsx)(`span`,{className:`ai-stock__unit`,children:t.unit})]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`span`,{className:`ai-badge`,style:{backgroundColor:`${e.color}12`,color:e.color,border:`1px solid ${e.color}25`},children:[(0,H.jsx)(`i`,{className:`fa-solid fa-chart-line`}),e.label]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`span`,{className:`ai-badge`,style:{backgroundColor:`${n}12`,color:n,border:`1px solid ${n}25`},children:[(0,H.jsx)(`i`,{className:`fa-solid fa-bullseye`}),bl.find(e=>e.value===t.service_area)?.label]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`ai-location`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-dot`}),t.location]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`ai-actions`,children:[(0,H.jsx)(`button`,{className:`ai-action-btn ai-action-btn--view`,onClick:()=>me(t),title:`View Details`,style:{background:`#10b98112`,color:`#10b981`,border:`1px solid #10b98125`},children:(0,H.jsx)(`i`,{className:`fa-solid fa-eye`})}),(0,H.jsx)(`button`,{className:`ai-action-btn ai-action-btn--edit`,onClick:()=>pe(t),title:`Edit Item`,style:{background:`#3b82f612`,color:`#3b82f6`,border:`1px solid #3b82f625`},children:(0,H.jsx)(`i`,{className:`fa-solid fa-pen`})}),(0,H.jsx)(`button`,{className:`ai-action-btn ai-action-btn--delete`,onClick:()=>ge(t.item_id),title:`Delete Item`,style:{background:`#ef444412`,color:`#ef4444`,border:`1px solid #ef444425`},children:(0,H.jsx)(`i`,{className:`fa-solid fa-trash`})})]})})]},t.item_id)}else{let e=Il(t.service_area),n=Ll(t.status),r=t.next_maintenance_date&&new Date(t.next_maintenance_date)<=new Date(Date.now()+720*60*60*1e3);return(0,H.jsxs)(`tr`,{onMouseEnter:()=>se(t.vehicle_id),onMouseLeave:()=>se(null),className:oe===t.vehicle_id?`ai-table__row--hovered`:``,children:[(0,H.jsx)(`td`,{children:(0,H.jsxs)(`span`,{className:`ai-item-code`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-barcode`}),t.vehicle_code]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`ai-item-name`,children:[(0,H.jsx)(`div`,{className:`ai-item-name__main`,children:t.vehicle_name}),(0,H.jsxs)(`div`,{className:`ai-item-name__desc`,children:[t.model,` `,t.year]})]})}),(0,H.jsx)(`td`,{children:t.category_name}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`span`,{className:`ai-plate`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-id-card`}),t.plate_number]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`span`,{className:`ai-badge`,style:{backgroundColor:`${n}12`,color:n,border:`1px solid ${n}25`},children:[(0,H.jsx)(`i`,{className:`fa-solid fa-flag`}),xl.find(e=>e.value===t.status)?.label]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`span`,{className:`ai-badge`,style:{backgroundColor:`${e}12`,color:e,border:`1px solid ${e}25`},children:[(0,H.jsx)(`i`,{className:`fa-solid fa-bullseye`}),bl.find(e=>e.value===t.service_area)?.label]})}),(0,H.jsx)(`td`,{children:t.next_maintenance_date?(0,H.jsxs)(`div`,{className:`ai-maintenance-date ${r?`ai-maintenance-date--due`:``}`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-calendar`}),(0,H.jsx)(`span`,{children:new Date(t.next_maintenance_date).toLocaleDateString()}),r&&(0,H.jsx)(`i`,{className:`fa-solid fa-exclamation-circle`,title:`Maintenance Due`})]}):(0,H.jsxs)(`span`,{className:`ai-muted`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-calendar`}),` Not set`]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`ai-actions`,children:[(0,H.jsx)(`button`,{className:`ai-action-btn ai-action-btn--view`,onClick:()=>me(t),title:`View Details`,style:{background:`#10b98112`,color:`#10b981`,border:`1px solid #10b98125`},children:(0,H.jsx)(`i`,{className:`fa-solid fa-eye`})}),(0,H.jsx)(`button`,{className:`ai-action-btn ai-action-btn--wrench`,onClick:()=>he(t),title:`Add Maintenance`,style:{background:`#f59e0b12`,color:`#f59e0b`,border:`1px solid #f59e0b25`},children:(0,H.jsx)(`i`,{className:`fa-solid fa-wrench`})}),(0,H.jsx)(`button`,{className:`ai-action-btn ai-action-btn--edit`,onClick:()=>pe(t),title:`Edit Vehicle`,style:{background:`#3b82f612`,color:`#3b82f6`,border:`1px solid #3b82f625`},children:(0,H.jsx)(`i`,{className:`fa-solid fa-pen`})}),(0,H.jsx)(`button`,{className:`ai-action-btn ai-action-btn--delete`,onClick:()=>ge(t.vehicle_id),title:`Delete Vehicle`,style:{background:`#ef444412`,color:`#ef4444`,border:`1px solid #ef444425`},children:(0,H.jsx)(`i`,{className:`fa-solid fa-trash`})})]})})]},t.vehicle_id)}})})]})})]})]}),D&&(e===`inventory`?(0,H.jsx)(Hl,{item:ne,onClose:()=>O(!1),onSuccess:_e}):(0,H.jsx)(Ul,{vehicle:ne,onClose:()=>O(!1),onSuccess:_e})),ee&&(0,H.jsx)(Gl,{type:e===`inventory`?`inventory`:`vehicle`,data:ne,onClose:()=>k(!1),onAddMaintenance:he,onEdit:pe}),te&&M&&(0,H.jsx)(Wl,{vehicle:M,onClose:()=>{A(!1),N(null)},onSuccess:ve}),P&&(0,H.jsx)(Vl,{message:P.message,type:P.type,onClose:()=>re(null)})]})}function ql({message:e,type:t,onClose:n}){return(0,v.useEffect)(()=>{let e=setTimeout(n,3500);return()=>clearTimeout(e)},[n]),(0,H.jsxs)(`div`,{className:`am-toast am-toast--${t}`,onClick:n,children:[(0,H.jsx)(`div`,{className:`am-toast__icon`,children:(0,H.jsx)(`i`,{className:`fa-solid ${t===`success`?`fa-circle-check`:`fa-circle-exclamation`}`})}),(0,H.jsxs)(`div`,{className:`am-toast__content`,children:[(0,H.jsx)(`div`,{className:`am-toast__title`,children:t===`success`?`Success`:`Error`}),(0,H.jsx)(`div`,{className:`am-toast__message`,children:e})]}),(0,H.jsx)(`button`,{className:`am-toast__close`,onClick:n,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]})}function Jl({item:e,onClose:t,onSuccess:n}){let[r,i]=(0,v.useState)({name:``,description:``,category:`other`,price:``,stock_quantity:``,is_available:!0}),[a,o]=(0,v.useState)(null),[s,c]=(0,v.useState)(null),[l,u]=(0,v.useState)({}),[d,f]=(0,v.useState)(!1);(0,v.useEffect)(()=>{e&&(i({name:e.name||``,description:e.description||``,category:e.category||`other`,price:e.price||``,stock_quantity:e.stock_quantity||``,is_available:e.is_available===1||e.is_available===!0}),e.image_url&&c(as(e)))},[e]);let p=e=>{let{name:t,value:n,type:r,checked:a}=e.target;i(e=>({...e,[t]:r===`checkbox`?a:n})),l[t]&&u(e=>({...e,[t]:null}))},m=e=>{let t=e.target.files[0];t&&(o(t),c(URL.createObjectURL(t)))},h=()=>{o(null),c(null),document.getElementById(`merchandise-image`).value=``},g=()=>{let e={};return r.name.trim()||(e.name=`Item name is required`),(r.price===``||r.price<0)&&(e.price=`Price must be a positive number`),(r.stock_quantity===``||r.stock_quantity<0)&&(e.stock_quantity=`Stock quantity must be a positive number`),e};return(0,H.jsx)(`div`,{className:`am-overlay`,onClick:t,children:(0,H.jsxs)(`div`,{className:`am-modal`,onClick:e=>e.stopPropagation(),children:[(0,H.jsxs)(`div`,{className:`am-modal__header`,children:[(0,H.jsxs)(`div`,{className:`am-modal__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid ${e?`fa-pen-to-square`:`fa-plus-circle`}`}),e?`Edit Merchandise Item`:`Add New Merchandise Item`]}),(0,H.jsx)(`button`,{className:`am-modal__close`,onClick:t,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]}),(0,H.jsxs)(`form`,{className:`am-modal__body`,onSubmit:async i=>{i.preventDefault();let o=g();if(Object.keys(o).length>0){u(o);return}f(!0);try{if(e){if(a){let t=new FormData;t.append(`name`,r.name),t.append(`description`,r.description||``),t.append(`category`,r.category),t.append(`price`,r.price),t.append(`stock_quantity`,r.stock_quantity),t.append(`is_available`,r.is_available?`1`:`0`),t.append(`image`,a),await Qo(e.merch_id,t)}else await $o(e.merch_id,{name:r.name,description:r.description,category:r.category,price:r.price,stock_quantity:r.stock_quantity,is_available:r.is_available?1:0});n(`Merchandise item updated successfully`)}else{let e=new FormData;e.append(`name`,r.name),e.append(`description`,r.description||``),e.append(`category`,r.category),e.append(`price`,r.price),e.append(`stock_quantity`,r.stock_quantity),e.append(`is_available`,r.is_available?`1`:`0`),a&&e.append(`image`,a),await Zo(e),n(`Merchandise item created successfully`)}t()}catch(e){u({submit:e.message})}finally{f(!1)}},children:[l.submit&&(0,H.jsxs)(`div`,{className:`am-form__error-banner`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),l.submit]}),(0,H.jsxs)(`div`,{className:`am-form__field`,children:[(0,H.jsxs)(`label`,{className:`am-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-tag`}),`Item Name `,(0,H.jsx)(`span`,{className:`am-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`text`,name:`name`,value:r.name,onChange:p,className:`am-form__input ${l.name?`am-form__input--error`:``}`,placeholder:`Enter item name`}),l.name&&(0,H.jsxs)(`span`,{className:`am-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),l.name]})]}),(0,H.jsxs)(`div`,{className:`am-form__field`,children:[(0,H.jsxs)(`label`,{className:`am-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-file-lines`}),`Description`]}),(0,H.jsx)(`textarea`,{name:`description`,value:r.description,onChange:p,className:`am-form__textarea`,placeholder:`Enter item description...`,rows:`4`})]}),(0,H.jsxs)(`div`,{className:`am-form__row`,children:[(0,H.jsxs)(`div`,{className:`am-form__field`,children:[(0,H.jsxs)(`label`,{className:`am-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-list`}),`Category`]}),(0,H.jsx)(`select`,{name:`category`,value:r.category,onChange:p,className:`am-form__select`,children:Yo.map(e=>(0,H.jsx)(`option`,{value:e.value,children:e.label},e.value))})]}),(0,H.jsxs)(`div`,{className:`am-form__field`,children:[(0,H.jsxs)(`label`,{className:`am-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-boxes`}),`Stock Quantity `,(0,H.jsx)(`span`,{className:`am-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`number`,name:`stock_quantity`,value:r.stock_quantity,onChange:p,min:`0`,className:`am-form__input ${l.stock_quantity?`am-form__input--error`:``}`,placeholder:`0`}),l.stock_quantity&&(0,H.jsxs)(`span`,{className:`am-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),l.stock_quantity]})]})]}),(0,H.jsxs)(`div`,{className:`am-form__row`,children:[(0,H.jsxs)(`div`,{className:`am-form__field`,children:[(0,H.jsxs)(`label`,{className:`am-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-money-bill`}),`Price () `,(0,H.jsx)(`span`,{className:`am-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{type:`number`,name:`price`,value:r.price,onChange:p,min:`0`,step:`0.01`,className:`am-form__input ${l.price?`am-form__input--error`:``}`,placeholder:`0.00`}),l.price&&(0,H.jsxs)(`span`,{className:`am-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-exclamation`}),l.price]})]}),(0,H.jsx)(`div`,{className:`am-form__field am-form__field--checkbox`,children:(0,H.jsxs)(`label`,{className:`am-form__checkbox-label`,children:[(0,H.jsx)(`input`,{type:`checkbox`,name:`is_available`,checked:r.is_available,onChange:p,className:`am-form__checkbox`}),(0,H.jsxs)(`span`,{className:`am-form__checkbox-text`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-check-circle`}),`Available for sale`]})]})})]}),(0,H.jsxs)(`div`,{className:`am-form__field`,children:[(0,H.jsxs)(`label`,{className:`am-form__label`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-image`}),e?`Image (Leave empty to keep current)`:`Image (Optional)`]}),(0,H.jsxs)(`div`,{className:`am-file-upload`,children:[(0,H.jsx)(`input`,{type:`file`,id:`merchandise-image`,accept:`image/*`,onChange:m,className:`am-file-upload__input`}),(0,H.jsxs)(`label`,{htmlFor:`merchandise-image`,className:`am-file-upload__label`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-cloud-upload-alt`}),(0,H.jsx)(`span`,{className:`am-file-upload__text`,children:a?a.name:e?.image_url?`Change image`:`Choose an image`}),a&&(0,H.jsx)(`span`,{className:`am-file-upload__check`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-check-circle`})})]})]}),s&&(0,H.jsxs)(`div`,{className:`am-image-preview`,children:[(0,H.jsx)(`img`,{src:s,alt:`Preview`}),(0,H.jsx)(`button`,{type:`button`,onClick:h,className:`am-image-preview__remove`,title:`Remove image`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-times`})})]}),e?.image_url&&!a&&!s&&(0,H.jsxs)(`div`,{className:`am-image-preview am-image-preview--current`,children:[(0,H.jsx)(`img`,{src:as(e),alt:e.name}),(0,H.jsx)(`div`,{className:`am-image-preview__label`,children:`Current Image`})]}),(0,H.jsxs)(`small`,{className:`am-form__hint`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-info-circle`}),` Accepted formats: JPG, PNG, GIF (Max 5MB)`]})]}),(0,H.jsx)(`button`,{type:`submit`,className:`am-form__submit`,disabled:d,children:d?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-spinner fa-spin`}),e?`Updating...`:`Creating...`]}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fa-solid ${e?`fa-pen-to-square`:`fa-plus`}`}),e?`Update Item`:`Create Item`]})})]})]})})}function Yl({item:e,onClose:t}){if(!e)return null;let n=rs(e.category),r=is(e.category),i=as(e);return(0,H.jsx)(`div`,{className:`am-overlay`,onClick:t,children:(0,H.jsxs)(`div`,{className:`am-modal am-modal--lg`,onClick:e=>e.stopPropagation(),children:[(0,H.jsxs)(`div`,{className:`am-modal__header`,children:[(0,H.jsxs)(`div`,{className:`am-modal__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-eye`}),`Item Details`]}),(0,H.jsx)(`button`,{className:`am-modal__close`,onClick:t,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]}),(0,H.jsxs)(`div`,{className:`am-modal__body`,children:[i&&(0,H.jsx)(`div`,{className:`am-view__image`,children:(0,H.jsx)(`img`,{src:i,alt:e.name})}),(0,H.jsxs)(`div`,{className:`am-view__section`,children:[(0,H.jsxs)(`h3`,{className:`am-view__section-title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-tag`,style:{color:n}}),e.name]}),(0,H.jsxs)(`div`,{className:`am-view__badges`,children:[(0,H.jsxs)(`span`,{className:`am-view__badge`,style:{background:`${n}12`,color:n,border:`1px solid ${n}25`},children:[(0,H.jsx)(`i`,{className:r}),ts(e.category)]}),(0,H.jsxs)(`span`,{className:`am-view__badge`,style:{background:e.is_available?`#10b98112`:`#6b728012`,color:e.is_available?`#10b981`:`#6b7280`,border:e.is_available?`1px solid #10b98125`:`1px solid #6b728025`},children:[(0,H.jsx)(`i`,{className:e.is_available?`fa-solid fa-check-circle`:`fa-solid fa-ban`}),e.is_available?`Available`:`Unavailable`]})]})]}),e.description&&(0,H.jsxs)(`div`,{className:`am-view__section`,children:[(0,H.jsxs)(`h3`,{className:`am-view__section-title`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-file-lines`}),`Description`]}),(0,H.jsx)(`div`,{className:`am-view__content`,children:e.description})]}),(0,H.jsxs)(`div`,{className:`am-view__section`,children:[(0,H.jsxs)(`h3`,{className:`am-view__section-title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-info-circle`}),`Details`]}),(0,H.jsxs)(`div`,{className:`am-view__grid`,children:[(0,H.jsxs)(`div`,{className:`am-view__item`,children:[(0,H.jsx)(`div`,{className:`am-view__item-label`,children:`Price`}),(0,H.jsxs)(`div`,{className:`am-view__item-value am-view__item-value--price`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-money-bill`}),ns(e.price)]})]}),(0,H.jsxs)(`div`,{className:`am-view__item`,children:[(0,H.jsx)(`div`,{className:`am-view__item-label`,children:`Stock Quantity`}),(0,H.jsx)(`div`,{className:`am-view__item-value`,children:(0,H.jsxs)(`span`,{className:`am-stock-badge ${e.stock_quantity>0?`am-stock-badge--in`:`am-stock-badge--out`}`,children:[(0,H.jsx)(`i`,{className:`fa-solid ${e.stock_quantity>0?`fa-boxes`:`fa-box-open`}`}),e.stock_quantity>0?`${e.stock_quantity} units`:`Out of Stock`]})})]})]})]}),(0,H.jsxs)(`div`,{className:`am-view__section`,children:[(0,H.jsxs)(`h3`,{className:`am-view__section-title`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-clock`}),`System Information`]}),(0,H.jsxs)(`div`,{className:`am-view__grid`,children:[(0,H.jsxs)(`div`,{className:`am-view__item`,children:[(0,H.jsx)(`div`,{className:`am-view__item-label`,children:`Created At`}),(0,H.jsxs)(`div`,{className:`am-view__item-value`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-calendar`}),new Date(e.created_at).toLocaleString()]})]}),e.updated_at&&(0,H.jsxs)(`div`,{className:`am-view__item`,children:[(0,H.jsx)(`div`,{className:`am-view__item-label`,children:`Updated At`}),(0,H.jsxs)(`div`,{className:`am-view__item-value`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-pen-to-square`}),new Date(e.updated_at).toLocaleString()]})]}),e.created_by_name&&(0,H.jsxs)(`div`,{className:`am-view__item`,children:[(0,H.jsx)(`div`,{className:`am-view__item-label`,children:`Created By`}),(0,H.jsxs)(`div`,{className:`am-view__item-value`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-user`}),e.created_by_name]})]})]})]})]})]})})}function Xl(){let[e,t]=(0,v.useState)([]),[n,r]=(0,v.useState)({total:0,available:0,unavailable:0,total_stock:0,total_value:0,by_category:{}}),[i,a]=(0,v.useState)(!0),[o,s]=(0,v.useState)(``),[c,l]=(0,v.useState)(``),[u,d]=(0,v.useState)(!1),[f,p]=(0,v.useState)(!1),[m,h]=(0,v.useState)(!1),[g,_]=(0,v.useState)(!1),[y,b]=(0,v.useState)(null),[x,S]=(0,v.useState)(null),[C,w]=(0,v.useState)(null),T=(e,t=`success`)=>{S({message:e,type:t})},E=(0,v.useCallback)(async()=>{a(!0);try{let e={};o&&(e.search=o),c&&(e.category=c),u&&(e.available_only=!0);let n=await Xo(e);t(n.data),r(n.stats)}catch(e){T(e.message,`error`)}finally{a(!1)}},[o,c,u]);(0,v.useEffect)(()=>{let e=setTimeout(()=>{E()},300);return()=>clearTimeout(e)},[E]);let D=()=>{b(null),h(!0)},O=e=>{b(e),h(!0)},ee=e=>{b(e),_(!0)},k=async e=>{if(window.confirm(`Are you sure you want to delete this item?`))try{await es(e),T(`Item deleted successfully`),E()}catch(e){T(e.message,`error`)}},te=e=>{T(e),E()},A=()=>{s(``)},ne=()=>{l(``),d(!1)},j=()=>{let e=0;return c&&e++,u&&e++,e};return(0,H.jsxs)(`div`,{className:`am-root`,children:[(0,H.jsxs)(`div`,{className:`am-header`,children:[(0,H.jsx)(`div`,{className:`am-header__container`,children:(0,H.jsxs)(`div`,{className:`am-header__content`,children:[(0,H.jsxs)(`div`,{className:`am-header__left`,children:[(0,H.jsxs)(`div`,{className:`am-header__badge`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-store`}),`Merchandise Management`]}),(0,H.jsx)(`h1`,{className:`am-header__title`,children:`Merchandise`}),(0,H.jsx)(`p`,{className:`am-header__subtitle`,children:`Manage your merchandise inventory and products`})]}),(0,H.jsxs)(`div`,{className:`am-header__stats`,children:[(0,H.jsxs)(`div`,{className:`am-header-stat`,children:[(0,H.jsx)(`span`,{className:`am-header-stat__value`,children:n.total}),(0,H.jsx)(`span`,{className:`am-header-stat__label`,children:`Total Items`})]}),(0,H.jsxs)(`div`,{className:`am-header-stat`,children:[(0,H.jsx)(`span`,{className:`am-header-stat__value`,children:n.available}),(0,H.jsx)(`span`,{className:`am-header-stat__label`,children:`Available`})]}),(0,H.jsxs)(`div`,{className:`am-header-stat`,children:[(0,H.jsx)(`span`,{className:`am-header-stat__value`,children:n.total_stock}),(0,H.jsx)(`span`,{className:`am-header-stat__label`,children:`Total Stock`})]}),(0,H.jsxs)(`div`,{className:`am-header-stat`,children:[(0,H.jsxs)(`span`,{className:`am-header-stat__value`,children:[``,n.total_value.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,H.jsx)(`span`,{className:`am-header-stat__label`,children:`Inventory Value`})]})]})]})}),(0,H.jsx)(`div`,{className:`am-header__wave`,children:(0,H.jsx)(`svg`,{viewBox:`0 0 1440 120`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`,children:(0,H.jsx)(`path`,{d:`M0 120L60 105C120 90 240 60 360 45C480 30 600 30 720 37.5C840 45 960 60 1080 67.5C1200 75 1320 75 1380 75L1440 75V120H1380C1320 120 1200 120 1080 120C960 120 840 120 720 120C600 120 480 120 360 120C240 120 120 120 60 120H0Z`,fill:`white`,fillOpacity:`0.1`})})})]}),(0,H.jsxs)(`div`,{className:`am-body`,children:[(0,H.jsx)(`div`,{className:`am-cards`,children:Yo.map(e=>(0,H.jsxs)(`div`,{className:`am-card`,style:{borderColor:e.color},children:[(0,H.jsx)(`div`,{className:`am-card__icon`,style:{background:`${e.color}12`},children:(0,H.jsx)(`i`,{className:e.icon,style:{color:e.color}})}),(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`div`,{className:`am-card__num`,style:{color:e.color},children:n.by_category[e.value]?.count||0}),(0,H.jsx)(`div`,{className:`am-card__label`,children:e.label}),(0,H.jsxs)(`div`,{className:`am-card__sub`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-boxes`}),` `,n.by_category[e.value]?.stock||0,` units`]}),(0,H.jsxs)(`div`,{className:`am-card__sub`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-money-bill`}),` `,(n.by_category[e.value]?.value||0).toLocaleString(void 0,{minimumFractionDigits:2})]})]})]},e.value))}),(0,H.jsxs)(`div`,{className:`am-toolbar`,children:[(0,H.jsxs)(`div`,{className:`am-toolbar__search`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-magnifying-glass am-toolbar__search-icon`}),(0,H.jsx)(`input`,{type:`text`,className:`am-toolbar__search-input`,placeholder:`Search merchandise by name or description...`,value:o,onChange:e=>s(e.target.value)}),o&&(0,H.jsx)(`button`,{className:`am-toolbar__search-clear`,onClick:A,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]}),(0,H.jsxs)(`div`,{className:`am-toolbar__filters`,children:[(0,H.jsxs)(`div`,{className:`am-toolbar__filter-dropdown`,children:[(0,H.jsxs)(`button`,{className:`am-toolbar__filter-dropdown-btn ${c?`am-toolbar__filter-dropdown-btn--active`:``}`,onClick:()=>p(!f),children:[(0,H.jsx)(`i`,{className:`fa-solid fa-list`}),(0,H.jsx)(`span`,{children:c?ts(c):`All Categories`}),(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-down`})]}),f&&(0,H.jsxs)(`div`,{className:`am-toolbar__filter-dropdown-menu`,children:[(0,H.jsxs)(`button`,{onClick:()=>{l(``),p(!1)},className:c?``:`active`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-list`}),`All Categories`]}),Yo.map(e=>(0,H.jsxs)(`button`,{onClick:()=>{l(e.value),p(!1)},className:c===e.value?`active`:``,children:[(0,H.jsx)(`i`,{className:e.icon,style:{color:e.color}}),e.label]},e.value))]})]}),(0,H.jsxs)(`button`,{className:`am-toolbar__filter-btn ${u?`am-toolbar__filter-btn--active`:``}`,onClick:()=>d(!u),style:u?{background:`#6b728012`,color:`#6b7280`}:{},children:[(0,H.jsx)(`i`,{className:`fa-solid fa-eye`}),u?`Available Only`:`Show All`]}),j()>0&&(0,H.jsxs)(`button`,{className:`am-toolbar__filter-clear`,onClick:ne,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-times`}),`Clear Filters (`,j(),`)`]})]}),(0,H.jsxs)(`button`,{className:`am-toolbar__create-btn`,onClick:D,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-plus`}),`Add New Item`]})]}),(0,H.jsxs)(`div`,{className:`am-table-panel`,children:[(0,H.jsxs)(`div`,{className:`am-table-panel__head`,children:[(0,H.jsxs)(`div`,{className:`am-table-panel__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-store`}),`Merchandise Items`]}),(0,H.jsx)(`div`,{className:`am-table-panel__info`,children:!i&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(`span`,{className:`am-table-panel__count`,children:[e.length,` `,e.length===1?`item`:`items`]}),(0,H.jsx)(`span`,{className:`am-table-panel__divider`,children:``}),(0,H.jsxs)(`span`,{className:`am-table-panel__sub`,children:[`Page 1 of `,Math.ceil(e.length/10)||1]})]})})]}),(0,H.jsx)(`div`,{className:`am-table-panel__scroll`,children:(0,H.jsxs)(`table`,{className:`am-table`,children:[(0,H.jsx)(`thead`,{children:(0,H.jsxs)(`tr`,{children:[(0,H.jsx)(`th`,{children:`Item`}),(0,H.jsx)(`th`,{children:`Category`}),(0,H.jsx)(`th`,{children:`Price`}),(0,H.jsx)(`th`,{children:`Stock`}),(0,H.jsx)(`th`,{children:`Status`}),(0,H.jsx)(`th`,{children:`Total Value`}),(0,H.jsx)(`th`,{children:`Actions`})]})}),(0,H.jsx)(`tbody`,{children:i?(0,H.jsx)(`tr`,{children:(0,H.jsx)(`td`,{colSpan:`7`,children:(0,H.jsxs)(`div`,{className:`am-table__loading`,children:[(0,H.jsx)(`div`,{className:`am-table__loading-spinner`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-spinner fa-spin`})}),(0,H.jsx)(`p`,{children:`Loading merchandise...`}),(0,H.jsx)(`span`,{className:`am-table__loading-sub`,children:`Fetching product data`})]})})}):e.length===0?(0,H.jsx)(`tr`,{children:(0,H.jsx)(`td`,{colSpan:`7`,children:(0,H.jsxs)(`div`,{className:`am-table__empty`,children:[(0,H.jsx)(`div`,{className:`am-table__empty-icon`,children:(0,H.jsx)(`i`,{className:`fa-regular fa-face-frown`})}),(0,H.jsx)(`h3`,{className:`am-table__empty-title`,children:`No Items Found`}),(0,H.jsx)(`p`,{className:`am-table__empty-message`,children:o||c||u?`Try adjusting your search or filter criteria`:`Get started by adding your first merchandise item`}),(o||c||u)&&(0,H.jsxs)(`button`,{className:`am-table__empty-action`,onClick:ne,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-times`}),` Clear Filters`]})]})})}):e.map(e=>{let t=rs(e.category),n=is(e.category),r=as(e),i=e.price*e.stock_quantity;return(0,H.jsxs)(`tr`,{onMouseEnter:()=>w(e.merch_id),onMouseLeave:()=>w(null),className:C===e.merch_id?`am-table__row--hovered`:``,children:[(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`am-item-cell`,children:[(0,H.jsx)(`div`,{className:`am-item-cell__image`,children:r?(0,H.jsx)(`img`,{src:r,alt:e.name,onError:e=>{e.target.onerror=null,e.target.style.display=`none`}}):(0,H.jsx)(`div`,{className:`am-item-cell__image-placeholder`,style:{background:`linear-gradient(135deg, ${t}, ${t}dd)`},children:(0,H.jsx)(`i`,{className:n})})}),(0,H.jsxs)(`div`,{className:`am-item-cell__info`,children:[(0,H.jsx)(`div`,{className:`am-item-cell__name`,children:e.name}),e.description&&(0,H.jsxs)(`div`,{className:`am-item-cell__desc`,title:e.description,children:[e.description.substring(0,50),e.description.length>50?`...`:``]})]})]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`span`,{className:`am-badge`,style:{background:`${t}12`,color:t,border:`1px solid ${t}25`},children:[(0,H.jsx)(`i`,{className:n}),ts(e.category)]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`span`,{className:`am-price`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-money-bill`}),ns(e.price)]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`span`,{className:`am-stock ${e.stock_quantity>0?`am-stock--in`:`am-stock--out`}`,children:[(0,H.jsx)(`i`,{className:`fa-solid ${e.stock_quantity>0?`fa-boxes`:`fa-box-open`}`}),e.stock_quantity,` units`]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`span`,{className:`am-badge`,style:{background:e.is_available?`#10b98112`:`#6b728012`,color:e.is_available?`#10b981`:`#6b7280`,border:e.is_available?`1px solid #10b98125`:`1px solid #6b728025`},children:[(0,H.jsx)(`i`,{className:e.is_available?`fa-solid fa-check-circle`:`fa-solid fa-ban`}),e.is_available?`Available`:`Unavailable`]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`span`,{className:`am-total-value`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-calculator`}),ns(i)]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`am-actions`,children:[(0,H.jsx)(`button`,{className:`am-action-btn am-action-btn--view`,onClick:()=>ee(e),title:`View Details`,style:{background:`#10b98112`,color:`#10b981`,border:`1px solid #10b98125`},children:(0,H.jsx)(`i`,{className:`fa-solid fa-eye`})}),(0,H.jsx)(`button`,{className:`am-action-btn am-action-btn--edit`,onClick:()=>O(e),title:`Edit Item`,style:{background:`#3b82f612`,color:`#3b82f6`,border:`1px solid #3b82f625`},children:(0,H.jsx)(`i`,{className:`fa-solid fa-pen`})}),(0,H.jsx)(`button`,{className:`am-action-btn am-action-btn--delete`,onClick:()=>k(e.merch_id),title:`Delete Item`,style:{background:`#ef444412`,color:`#ef4444`,border:`1px solid #ef444425`},children:(0,H.jsx)(`i`,{className:`fa-solid fa-trash`})})]})})]},e.merch_id)})})]})})]})]}),m&&(0,H.jsx)(Jl,{item:y,onClose:()=>h(!1),onSuccess:te}),g&&(0,H.jsx)(Yl,{item:y,onClose:()=>_(!1)}),x&&(0,H.jsx)(ql,{message:x.message,type:x.type,onClose:()=>S(null)})]})}var Zl=`/api/users.php`;const Ql=async({filter:e=`all`,search:t=``}={})=>{let n={action:`list`,filter:e};t.trim()&&(n.search=t.trim());let{data:r}=await K.get(Zl,{params:n});if(!r.success)throw Error(r.message||`Failed to fetch users`);return{success:!0,users:r.users??[],total:r.total??0}},$l=async()=>{let{data:e}=await K.get(Zl,{params:{action:`stats`}});if(!e.success)throw Error(e.message||`Failed to fetch stats`);return{success:!0,stats:e.stats}},eu=async e=>{if(!e)throw Error(`User ID is required`);let{data:t}=await K.get(Zl,{params:{action:`docs`,user_id:e}});if(!t.success)throw Error(t.message||`Failed to fetch documents`);return{success:!0,documents:t.documents??[]}},tu=async e=>{if(!e.username?.trim())throw Error(`Username is required`);if(!e.password?.trim())throw Error(`Password is required`);if(!e.full_name?.trim())throw Error(`Full name is required`);let{data:t}=await K.post(Zl,e,{params:{action:`create`}});if(!t.success)throw Error(t.message||`Failed to create user`);return{success:!0,message:t.message,user_id:t.user_id}},nu=async(e,t)=>{if(!e)throw Error(`User ID is required`);let n=Object.fromEntries(Object.entries(t).filter(([e,t])=>e===`password`||t!==``)),{data:r}=await K.put(Zl,n,{params:{action:`update`,id:e}});if(!r.success)throw Error(r.message||`Failed to update user`);return{success:!0,message:r.message}},ru=async e=>{if(!e)throw Error(`User ID is required`);let{data:t}=await K.delete(Zl,{params:{action:`delete`,id:e}});if(!t.success)throw Error(t.message||`Failed to delete user`);return{success:!0,message:t.message}};var iu={super_admin:{label:`SUPER ADMIN`,color:`#c41e3a`,bg:`#fee2e2`,icon:`fa-crown`,canSee:`all`},safety_admin:{label:`SAFETY ADMIN`,color:`#15803d`,bg:`#dcfce7`,icon:`fa-shield`,canSee:[`safety`]},welfare_admin:{label:`WELFARE ADMIN`,color:`#7c3aed`,bg:`#ede9fe`,icon:`fa-hand-holding-heart`,canSee:[`welfare`]},health_admin:{label:`HEALTH ADMIN`,color:`#c41e3a`,bg:`#ffe4e6`,icon:`fa-heart-pulse`,canSee:[`health`]},disaster_admin:{label:`DISASTER ADMIN`,color:`#c2410c`,bg:`#ffedd5`,icon:`fa-triangle-exclamation`,canSee:[`disaster_management`]},youth_admin:{label:`YOUTH ADMIN`,color:`#003d6b`,bg:`#e0f2fe`,icon:`fa-people-group`,canSee:[`red_cross_youth`]},user:{label:`USER`,color:`#4a5568`,bg:`#f1f5f9`,icon:`fa-user`,canSee:`none`}},au=[{key:`health`,label:`Health Services`,icon:`fa-heart-pulse`,color:`#c41e3a`},{key:`safety`,label:`Safety Services`,icon:`fa-shield`,color:`#15803d`},{key:`welfare`,label:`Welfare Services`,icon:`fa-hand-holding-heart`,color:`#7c3aed`},{key:`disaster_management`,label:`Disaster Management`,icon:`fa-triangle-exclamation`,color:`#c2410c`},{key:`red_cross_youth`,label:`Red Cross Youth`,icon:`fa-people-group`,color:`#003d6b`}],ou={username:``,password:``,full_name:``,first_name:``,last_name:``,role:`user`,email:``,phone:``,gender:``,user_type:`non_rcy_member`,rcy_role:``,services:[]},su={maab_id:`MAAB ID`,supporting_document:`Supporting Doc`,other:`Other`},cu=[{key:`total`,icon:`fa-users`,label:`Total Users`,color:`#c41e3a`,gradient:!0},{key:`admins`,icon:`fa-shield-halved`,label:`Administrators`,color:`#1d4ed8`,gradient:!1},{key:`users`,icon:`fa-user`,label:`Regular Users`,color:`#7c3aed`,gradient:!1},{key:`rcy_members`,icon:`fa-heart`,label:`RCY Members`,color:`#c41e3a`,gradient:!0}];function lu({name:e,role:t,size:n=`md`}){let r=iu[t]||iu.user,i=e?e.split(` `).map(e=>e[0]).join(``).slice(0,2).toUpperCase():`?`;return(0,H.jsx)(`div`,{className:`au-avatar au-avatar--${n}`,style:{background:r.bg,color:r.color,border:`2px solid ${r.color}30`},children:i})}function uu({role:e}){let t=iu[e]||iu.user;return(0,H.jsxs)(`span`,{className:`au-badge au-badge--role`,style:{background:t.bg,color:t.color,border:`1px solid ${t.color}30`},children:[(0,H.jsx)(`i`,{className:`fas ${t.icon}`}),` `,t.label]})}function du({serviceKey:e}){let t=au.find(t=>t.key===e);return t?(0,H.jsxs)(`span`,{className:`au-service-badge`,style:{background:`${t.color}12`,color:t.color,border:`1px solid ${t.color}25`},children:[(0,H.jsx)(`i`,{className:`fas ${t.icon}`}),` `,t.label]}):null}function fu({message:e,type:t,onClose:n}){return(0,v.useEffect)(()=>{let e=setTimeout(n,3500);return()=>clearTimeout(e)},[n]),(0,H.jsxs)(`div`,{className:`au-toast au-toast--${t}`,children:[(0,H.jsx)(`div`,{className:`au-toast__icon`,children:(0,H.jsx)(`i`,{className:`fas ${t===`success`?`fa-circle-check`:`fa-circle-xmark`}`})}),(0,H.jsxs)(`div`,{className:`au-toast__content`,children:[(0,H.jsx)(`div`,{className:`au-toast__title`,children:t===`success`?`Success`:`Error`}),(0,H.jsx)(`div`,{className:`au-toast__message`,children:e})]}),(0,H.jsx)(`button`,{className:`au-toast__close`,onClick:n,children:(0,H.jsx)(`i`,{className:`fas fa-xmark`})})]})}function pu({user:e,onClose:t}){let[n,r]=(0,v.useState)([]),[i,a]=(0,v.useState)(!0);(0,v.useEffect)(()=>{eu(e.user_id).then(e=>{r(e.documents),a(!1)}).catch(()=>a(!1))},[e.user_id]);let o=e=>`au-docs__item ${{maab_id:`au-docs__item--maab`,supporting_document:`au-docs__item--supporting`,other:`au-docs__item--other`}[e]||`au-docs__item--other`}`;return(0,H.jsx)(`div`,{className:`au-overlay`,onClick:t,children:(0,H.jsxs)(`div`,{className:`au-modal au-modal--sm`,onClick:e=>e.stopPropagation(),children:[(0,H.jsxs)(`div`,{className:`au-modal__header`,children:[(0,H.jsxs)(`div`,{className:`au-modal__title`,children:[(0,H.jsx)(`i`,{className:`fas fa-folder-open`}),` Documents `,` `,(0,H.jsx)(`strong`,{children:e.username})]}),(0,H.jsx)(`button`,{className:`au-modal__close`,onClick:t,children:(0,H.jsx)(`i`,{className:`fas fa-xmark`})})]}),(0,H.jsx)(`div`,{className:`au-modal__body au-modal__body--docs`,children:i?(0,H.jsxs)(`div`,{className:`au-docs__loading`,children:[(0,H.jsx)(`div`,{className:`au-docs__spinner`,children:(0,H.jsx)(`i`,{className:`fas fa-spinner fa-spin`})}),(0,H.jsx)(`p`,{children:`Loading documents`})]}):n.length===0?(0,H.jsxs)(`div`,{className:`au-docs__empty`,children:[(0,H.jsx)(`div`,{className:`au-docs__empty-icon`,children:(0,H.jsx)(`i`,{className:`fas fa-folder-open`})}),(0,H.jsx)(`h3`,{className:`au-docs__empty-title`,children:`No Documents Found`}),(0,H.jsx)(`p`,{className:`au-docs__empty-message`,children:`This user hasn't uploaded any documents yet.`})]}):(0,H.jsx)(`div`,{className:`au-docs`,children:n.map((e,t)=>(0,H.jsxs)(`div`,{className:o(e.document_type),children:[(0,H.jsx)(`div`,{className:`au-docs__file-icon`,children:(0,H.jsx)(`i`,{className:`fas ${e.file_type===`pdf`?`fa-file-pdf`:`fa-file-image`}`})}),(0,H.jsxs)(`div`,{className:`au-docs__info`,children:[(0,H.jsx)(`div`,{className:`au-docs__name`,children:e.original_name}),(0,H.jsxs)(`div`,{className:`au-docs__meta`,children:[(0,H.jsx)(`span`,{className:`au-docs__type-tag`,children:su[e.document_type]||`Other`}),(e.file_size/1024).toFixed(1),` KB `,` `,new Date(e.uploaded_at).toLocaleDateString()]})]}),(0,H.jsxs)(`a`,{href:`http://localhost/prc-management-system/${e.file_path}`,target:`_blank`,rel:`noreferrer`,className:`au-docs__view-link`,children:[(0,H.jsx)(`i`,{className:`fas fa-external-link-alt`}),` View`]})]},t))})})]})})}function mu({user:e,onClose:t,onSaved:n}){let[r,i]=(0,v.useState)(e?{...e,password:``,services:e.services||[]}:{...ou}),[a,o]=(0,v.useState)(!1),[s,c]=(0,v.useState)({}),l=!!e,u=r.user_type===`rcy_member`;function d(e,t){i(n=>({...n,[e]:t})),c(t=>({...t,[e]:void 0}))}function f(e){d(`services`,r.services.includes(e)?r.services.filter(t=>t!==e):[...r.services,e])}function p(){let e={};return r.username.trim()||(e.username=`Username is required`),!l&&!r.password.trim()&&(e.password=`Password is required for new users`),r.full_name.trim()||(e.full_name=`Full name is required`),r.role||(e.role=`Role is required`),r.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)&&(e.email=`Invalid email format`),e}async function m(t){t.preventDefault();let i=p();if(Object.keys(i).length){c(i);return}o(!0);try{let t={...r};l&&!t.password&&delete t.password,n((l?await nu(e.user_id,t):await tu(t)).message||`User saved successfully`)}catch(e){c({_global:e.message||`Failed to save user`})}finally{o(!1)}}return(0,H.jsx)(`div`,{className:`au-overlay`,onClick:t,children:(0,H.jsxs)(`div`,{className:`au-modal au-modal--md`,onClick:e=>e.stopPropagation(),children:[(0,H.jsxs)(`div`,{className:`au-modal__header`,children:[(0,H.jsxs)(`div`,{className:`au-modal__title`,children:[(0,H.jsx)(`i`,{className:`fas ${l?`fa-user-pen`:`fa-user-plus`}`}),l?` Edit User`:` Create New User`]}),(0,H.jsx)(`button`,{className:`au-modal__close`,onClick:t,children:(0,H.jsx)(`i`,{className:`fas fa-xmark`})})]}),(0,H.jsxs)(`form`,{className:`au-modal__body`,onSubmit:m,children:[s._global&&(0,H.jsxs)(`div`,{className:`au-form__error-banner`,children:[(0,H.jsx)(`i`,{className:`fas fa-circle-exclamation`}),` `,s._global]}),(0,H.jsxs)(`div`,{className:`au-form__row`,children:[(0,H.jsxs)(`div`,{className:`au-form__field`,children:[(0,H.jsxs)(`label`,{className:`au-form__label`,children:[`Username `,(0,H.jsx)(`span`,{className:`au-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{className:`au-form__input${s.username?` au-form__input--error`:``}`,value:r.username,onChange:e=>d(`username`,e.target.value),placeholder:`Enter username`}),s.username&&(0,H.jsxs)(`span`,{className:`au-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fas fa-circle-exclamation`}),` `,s.username]})]}),(0,H.jsxs)(`div`,{className:`au-form__field`,children:[(0,H.jsxs)(`label`,{className:`au-form__label`,children:[`Password`,` `,!l&&(0,H.jsx)(`span`,{className:`au-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{className:`au-form__input${s.password?` au-form__input--error`:``}`,type:`password`,value:r.password,onChange:e=>d(`password`,e.target.value),placeholder:l?`Leave blank to keep current`:`Enter password`}),s.password&&(0,H.jsxs)(`span`,{className:`au-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fas fa-circle-exclamation`}),` `,s.password]})]})]}),(0,H.jsxs)(`div`,{className:`au-form__field`,children:[(0,H.jsxs)(`label`,{className:`au-form__label`,children:[`Full Name `,(0,H.jsx)(`span`,{className:`au-form__required`,children:`*`})]}),(0,H.jsx)(`input`,{className:`au-form__input${s.full_name?` au-form__input--error`:``}`,value:r.full_name,onChange:e=>d(`full_name`,e.target.value),placeholder:`Enter full name`}),s.full_name&&(0,H.jsxs)(`span`,{className:`au-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fas fa-circle-exclamation`}),` `,s.full_name]})]}),(0,H.jsxs)(`div`,{className:`au-form__row`,children:[(0,H.jsxs)(`div`,{className:`au-form__field`,children:[(0,H.jsx)(`label`,{className:`au-form__label`,children:`First Name`}),(0,H.jsx)(`input`,{className:`au-form__input`,value:r.first_name,onChange:e=>d(`first_name`,e.target.value),placeholder:`First name (optional)`})]}),(0,H.jsxs)(`div`,{className:`au-form__field`,children:[(0,H.jsx)(`label`,{className:`au-form__label`,children:`Last Name`}),(0,H.jsx)(`input`,{className:`au-form__input`,value:r.last_name,onChange:e=>d(`last_name`,e.target.value),placeholder:`Last name (optional)`})]})]}),(0,H.jsxs)(`div`,{className:`au-form__row`,children:[(0,H.jsxs)(`div`,{className:`au-form__field`,children:[(0,H.jsxs)(`label`,{className:`au-form__label`,children:[`Role `,(0,H.jsx)(`span`,{className:`au-form__required`,children:`*`})]}),(0,H.jsxs)(`select`,{className:`au-form__select${s.role?` au-form__select--error`:``}`,value:r.role,onChange:e=>d(`role`,e.target.value),children:[(0,H.jsx)(`option`,{value:`user`,children:`Regular User`}),(0,H.jsxs)(`optgroup`,{label:`Administrators`,children:[(0,H.jsx)(`option`,{value:`super_admin`,children:`Super Administrator`}),(0,H.jsx)(`option`,{value:`safety_admin`,children:`Safety Admin`}),(0,H.jsx)(`option`,{value:`welfare_admin`,children:`Welfare Admin`}),(0,H.jsx)(`option`,{value:`health_admin`,children:`Health Admin`}),(0,H.jsx)(`option`,{value:`disaster_admin`,children:`Disaster Admin`}),(0,H.jsx)(`option`,{value:`youth_admin`,children:`Youth Admin`})]})]}),s.role&&(0,H.jsxs)(`span`,{className:`au-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fas fa-circle-exclamation`}),` `,s.role]})]}),(0,H.jsxs)(`div`,{className:`au-form__field`,children:[(0,H.jsx)(`label`,{className:`au-form__label`,children:`User Type`}),(0,H.jsxs)(`select`,{className:`au-form__select`,value:r.user_type,onChange:e=>d(`user_type`,e.target.value),children:[(0,H.jsx)(`option`,{value:`non_rcy_member`,children:`Non-RCY Member`}),(0,H.jsx)(`option`,{value:`rcy_member`,children:`RCY Member`})]})]})]}),(0,H.jsxs)(`div`,{className:`au-form__row`,children:[(0,H.jsxs)(`div`,{className:`au-form__field`,children:[(0,H.jsx)(`label`,{className:`au-form__label`,children:`Email Address`}),(0,H.jsx)(`input`,{className:`au-form__input${s.email?` au-form__input--error`:``}`,type:`email`,value:r.email,onChange:e=>d(`email`,e.target.value),placeholder:`email@example.com`}),s.email&&(0,H.jsxs)(`span`,{className:`au-form__error-text`,children:[(0,H.jsx)(`i`,{className:`fas fa-circle-exclamation`}),` `,s.email]})]}),(0,H.jsxs)(`div`,{className:`au-form__field`,children:[(0,H.jsx)(`label`,{className:`au-form__label`,children:`Phone Number`}),(0,H.jsx)(`input`,{className:`au-form__input`,value:r.phone,onChange:e=>d(`phone`,e.target.value),placeholder:`+63 XXX XXX XXXX`})]})]}),(0,H.jsxs)(`div`,{className:`au-form__row`,children:[(0,H.jsxs)(`div`,{className:`au-form__field`,children:[(0,H.jsx)(`label`,{className:`au-form__label`,children:`Gender`}),(0,H.jsxs)(`select`,{className:`au-form__select`,value:r.gender,onChange:e=>d(`gender`,e.target.value),children:[(0,H.jsx)(`option`,{value:``,children:` Select Gender `}),(0,H.jsx)(`option`,{value:`male`,children:`Male`}),(0,H.jsx)(`option`,{value:`female`,children:`Female`}),(0,H.jsx)(`option`,{value:`other`,children:`Other`})]})]}),u&&(0,H.jsxs)(`div`,{className:`au-form__field`,children:[(0,H.jsx)(`label`,{className:`au-form__label`,children:`RCY Role`}),(0,H.jsxs)(`select`,{className:`au-form__select`,value:r.rcy_role,onChange:e=>d(`rcy_role`,e.target.value),children:[(0,H.jsx)(`option`,{value:``,children:` Select RCY Role `}),(0,H.jsx)(`option`,{value:`adviser`,children:`Adviser`}),(0,H.jsx)(`option`,{value:`member`,children:`Member`})]})]})]}),u&&(0,H.jsxs)(`div`,{className:`au-form__services`,children:[(0,H.jsxs)(`div`,{className:`au-form__services-title`,children:[(0,H.jsx)(`i`,{className:`fas fa-heart`}),` RCY Member Services`]}),(0,H.jsx)(`div`,{className:`au-form__services-hint`,children:`Select the services this RCY member will participate in:`}),(0,H.jsx)(`div`,{className:`au-form__services-grid`,children:au.map(e=>{let t=r.services.includes(e.key);return(0,H.jsxs)(`label`,{className:`au-form__service-option${t?` au-form__service-option--checked`:``}`,style:{borderColor:t?e.color:void 0,background:t?`${e.color}08`:void 0},children:[(0,H.jsx)(`input`,{type:`checkbox`,checked:t,onChange:()=>f(e.key)}),(0,H.jsx)(`i`,{className:`fas ${e.icon}`,style:{color:t?e.color:void 0}}),e.label]},e.key)})})]}),(0,H.jsx)(`button`,{type:`submit`,disabled:a,className:`au-form__submit`,children:a?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fas fa-spinner fa-spin`}),` Saving User...`]}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fas fa-save`}),` Save User`]})})]})]})})}function hu(){let[e,t]=(0,v.useState)([]),[n,r]=(0,v.useState)(null),[i,a]=(0,v.useState)(!0),[o,s]=(0,v.useState)(`all`),[c,l]=(0,v.useState)(``),[u,d]=(0,v.useState)(null),[f,p]=(0,v.useState)(null),[m,h]=(0,v.useState)(!1),[g,_]=(0,v.useState)(null),[y,b]=(0,v.useState)(null),x=(0,v.useRef)(),S=(e,t=`success`)=>_({msg:e,type:t}),C=(0,v.useCallback)(async()=>{try{let{stats:e}=await $l();r(e)}catch(e){console.error(`Stats error:`,e)}},[]);(0,v.useEffect)(()=>{C()},[C]);let w=(0,v.useCallback)(async()=>{a(!0);try{let{users:e}=await Ql({filter:o,search:c});t(e)}catch(e){console.error(`Fetch users error:`,e),S(e.message||`Failed to load users`,`error`),t([])}finally{a(!1)}},[o,c]);(0,v.useEffect)(()=>{w()},[w]);async function T(e){if(window.confirm(`Are you sure you want to delete "${e.username}"? This action cannot be undone.`))try{S((await ru(e.user_id)).message||`User deleted successfully`),w(),C()}catch(e){S(e.message||`Failed to delete user`,`error`)}}function E(e){S(e),d(null),h(!1),w(),C()}let D=n?.total??e.length,O=n?.admins??e.filter(e=>e.role.includes(`admin`)).length,ee=n?.users??e.filter(e=>e.role===`user`).length,k=n?.rcy_members??e.filter(e=>e.user_type===`rcy_member`).length,te={total:D,admins:O,users:ee,rcy_members:k},A=[{key:`all`,label:`All Users`,count:D,icon:`fa-users`},{key:`new`,label:`New This Week`,count:n?.new_this_week??0,icon:`fa-star`},{key:`admin`,label:`Administrators`,count:O,icon:`fa-shield-halved`},{key:`user`,label:`Regular Users`,count:ee,icon:`fa-user`}];return(0,H.jsxs)(`div`,{className:`au-root`,children:[(0,H.jsxs)(`div`,{className:`au-header`,children:[(0,H.jsx)(`div`,{className:`au-header__container`,children:(0,H.jsxs)(`div`,{className:`au-header__content`,children:[(0,H.jsxs)(`div`,{className:`au-header__left`,children:[(0,H.jsxs)(`div`,{className:`au-header__badge`,children:[(0,H.jsx)(`i`,{className:`fas fa-users-cog`}),` User Management`]}),(0,H.jsx)(`h1`,{className:`au-header__title`,children:`User Administration`}),(0,H.jsx)(`p`,{className:`au-header__subtitle`,children:`Create, manage, and organize system users and their permissions`})]}),(0,H.jsx)(`div`,{className:`au-header__stats`,children:[{value:D,label:`Total Users`},{value:O,label:`Admins`},{value:k,label:`RCY Members`}].map(({value:e,label:t})=>(0,H.jsxs)(`div`,{className:`au-header-stat`,children:[(0,H.jsx)(`span`,{className:`au-header-stat__value`,children:e??``}),(0,H.jsx)(`span`,{className:`au-header-stat__label`,children:t})]},t))})]})}),(0,H.jsx)(`div`,{className:`au-header__wave`,children:(0,H.jsx)(`svg`,{viewBox:`0 0 1440 120`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`,children:(0,H.jsx)(`path`,{d:`M0 120L60 105C120 90 240 60 360 45C480 30 600 30 720 37.5C840 45 960 60 1080 67.5C1200 75 1320 75 1380 75L1440 75V120H1380C1320 120 1200 120 1080 120C960 120 840 120 720 120C600 120 480 120 360 120C240 120 120 120 60 120H0Z`,fill:`white`,fillOpacity:`0.1`})})})]}),(0,H.jsxs)(`div`,{className:`au-body`,children:[(0,H.jsx)(`div`,{className:`au-cards`,children:cu.map(({key:e,icon:t,label:n,color:r,gradient:i})=>(0,H.jsxs)(`div`,{className:`au-card ${i?`au-card--gradient`:``}`,style:i?{background:`linear-gradient(135deg, ${r} 0%, ${r}dd 100%)`}:{},children:[(0,H.jsx)(`div`,{className:`au-card__icon`,style:{background:i?`rgba(255,255,255,0.2)`:`${r}15`},children:(0,H.jsx)(`i`,{className:`fas ${t}`,style:{color:i?`#fff`:r}})}),(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`div`,{className:`au-card__num`,style:{color:i?`#fff`:void 0},children:te[e]??``}),(0,H.jsx)(`div`,{className:`au-card__label`,style:{color:i?`rgba(255,255,255,0.8)`:void 0},children:n})]})]},e))}),(0,H.jsxs)(`div`,{className:`au-toolbar`,children:[(0,H.jsxs)(`div`,{className:`au-toolbar__search`,children:[(0,H.jsx)(`i`,{className:`fas fa-search au-toolbar__search-icon`}),(0,H.jsx)(`input`,{ref:x,className:`au-toolbar__search-input`,value:c,onChange:e=>l(e.target.value),placeholder:`Search by name, username, or email...`}),c&&(0,H.jsx)(`button`,{className:`au-toolbar__search-clear`,onClick:()=>l(``),children:(0,H.jsx)(`i`,{className:`fas fa-times`})})]}),(0,H.jsx)(`div`,{className:`au-toolbar__filters`,children:A.map(({key:e,label:t,count:n,icon:r})=>(0,H.jsxs)(`button`,{className:`au-toolbar__filter-btn${o===e?` au-toolbar__filter-btn--active`:``}`,onClick:()=>s(e),children:[(0,H.jsx)(`i`,{className:`fas ${r}`}),t,(0,H.jsx)(`span`,{className:`au-toolbar__filter-count`,children:n})]},e))}),(0,H.jsxs)(`button`,{className:`au-toolbar__create-btn`,onClick:()=>h(!0),children:[(0,H.jsx)(`i`,{className:`fas fa-user-plus`}),` Create User`]})]}),(0,H.jsxs)(`div`,{className:`au-table-panel`,children:[(0,H.jsxs)(`div`,{className:`au-table-panel__head`,children:[(0,H.jsxs)(`div`,{className:`au-table-panel__title`,children:[(0,H.jsx)(`i`,{className:`fas fa-users`}),` System Users`]}),(0,H.jsx)(`div`,{className:`au-table-panel__info`,children:!i&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(`span`,{className:`au-table-panel__count`,children:[e.length,` user`,e.length===1?``:`s`]}),(0,H.jsx)(`span`,{className:`au-table-panel__divider`,children:``}),(0,H.jsxs)(`span`,{className:`au-table-panel__sub`,children:[`Page 1 of `,Math.ceil(e.length/10)||1]})]})})]}),(0,H.jsx)(`div`,{className:`au-table-panel__scroll`,children:(0,H.jsxs)(`table`,{className:`au-table`,children:[(0,H.jsx)(`thead`,{children:(0,H.jsx)(`tr`,{children:[`USER`,`ROLE`,`TYPE`,`GENDER`,`RCY ROLE`,`SERVICES`,`CONTACT`,`ACTIONS`].map(e=>(0,H.jsx)(`th`,{children:e},e))})}),(0,H.jsx)(`tbody`,{children:i?(0,H.jsx)(`tr`,{children:(0,H.jsx)(`td`,{colSpan:8,children:(0,H.jsxs)(`div`,{className:`au-table__loading`,children:[(0,H.jsx)(`div`,{className:`au-table__loading-spinner`,children:(0,H.jsx)(`i`,{className:`fas fa-spinner fa-spin`})}),(0,H.jsx)(`p`,{children:`Loading users...`}),(0,H.jsx)(`span`,{className:`au-table__loading-sub`,children:`Fetching user data`})]})})}):e.length===0?(0,H.jsx)(`tr`,{children:(0,H.jsx)(`td`,{colSpan:8,children:(0,H.jsxs)(`div`,{className:`au-table__empty`,children:[(0,H.jsx)(`div`,{className:`au-table__empty-icon`,children:(0,H.jsx)(`i`,{className:`fas fa-users-slash`})}),(0,H.jsx)(`h3`,{className:`au-table__empty-title`,children:`No Users Found`}),(0,H.jsx)(`p`,{className:`au-table__empty-message`,children:c||o!==`all`?`Try adjusting your search or filter criteria`:`Get started by creating your first user`}),(c||o!==`all`)&&(0,H.jsxs)(`button`,{className:`au-table__empty-action`,onClick:()=>{l(``),s(`all`)},children:[(0,H.jsx)(`i`,{className:`fas fa-times`}),` Clear Filters`]})]})})}):e.map(e=>(0,H.jsxs)(`tr`,{onMouseEnter:()=>b(e.user_id),onMouseLeave:()=>b(null),className:y===e.user_id?`au-table__row--hovered`:``,children:[(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`au-user-cell`,children:[(0,H.jsx)(lu,{name:e.full_name,role:e.role}),(0,H.jsxs)(`div`,{children:[(0,H.jsxs)(`div`,{className:`au-user-cell__name`,children:[e.full_name,e.is_new&&(0,H.jsxs)(`span`,{className:`au-new-badge`,children:[(0,H.jsx)(`i`,{className:`fas fa-star`}),` NEW`]})]}),(0,H.jsxs)(`div`,{className:`au-user-cell__username`,children:[`@`,e.username]})]})]})}),(0,H.jsx)(`td`,{children:(0,H.jsx)(uu,{role:e.role})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`span`,{className:`au-badge au-badge--type ${e.user_type===`rcy_member`?`au-badge--type-rcy`:`au-badge--type-non`}`,children:[(0,H.jsx)(`i`,{className:`fas ${e.user_type===`rcy_member`?`fa-heart`:`fa-user`}`}),e.user_type===`rcy_member`?` RCY`:` Non-RCY`]})}),(0,H.jsx)(`td`,{children:e.gender?(0,H.jsxs)(`span`,{className:`au-gender`,children:[(0,H.jsx)(`i`,{className:`fas fa-${e.gender===`male`?`mars`:e.gender===`female`?`venus`:`genderless`}`}),e.gender.charAt(0).toUpperCase()+e.gender.slice(1)]}):(0,H.jsx)(`span`,{className:`au-muted`,children:``})}),(0,H.jsx)(`td`,{children:e.rcy_role?(0,H.jsxs)(`span`,{className:`au-badge au-badge--rcy-role`,children:[(0,H.jsx)(`i`,{className:`fas fa-id-badge`}),` `,e.rcy_role.charAt(0).toUpperCase()+e.rcy_role.slice(1)]}):(0,H.jsx)(`span`,{className:`au-muted`,children:``})}),(0,H.jsx)(`td`,{style:{maxWidth:220},children:e.services?.length>0?(0,H.jsxs)(`div`,{className:`au-services`,children:[e.services.slice(0,2).map(e=>(0,H.jsx)(du,{serviceKey:e},e)),e.services.length>2&&(0,H.jsxs)(`span`,{className:`au-service-overflow`,title:`${e.services.length-2} more services`,children:[`+`,e.services.length-2]})]}):(0,H.jsx)(`span`,{className:`au-muted`,children:``})}),(0,H.jsxs)(`td`,{style:{maxWidth:200},children:[e.email&&(0,H.jsxs)(`div`,{className:`au-contact__email`,title:e.email,children:[(0,H.jsx)(`i`,{className:`fas fa-envelope`}),(0,H.jsx)(`span`,{children:e.email})]}),e.phone&&(0,H.jsxs)(`div`,{className:`au-contact__phone`,title:e.phone,children:[(0,H.jsx)(`i`,{className:`fas fa-phone`}),(0,H.jsx)(`span`,{children:e.phone})]}),!e.email&&!e.phone&&(0,H.jsx)(`span`,{className:`au-muted`,children:``})]}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`au-actions`,children:[(0,H.jsx)(`button`,{title:`Edit User`,className:`au-action-btn au-action-btn--edit`,onClick:()=>d(e),children:(0,H.jsx)(`i`,{className:`fas fa-pen`})}),(0,H.jsx)(`button`,{title:`View Documents`,className:`au-action-btn au-action-btn--docs`,onClick:()=>p(e),children:(0,H.jsx)(`i`,{className:`fas fa-folder-open`})}),(0,H.jsx)(`button`,{title:`Delete User`,className:`au-action-btn au-action-btn--delete`,onClick:()=>T(e),disabled:e.user_id===1||e.role===`super_admin`,children:(0,H.jsx)(`i`,{className:`fas fa-trash`})})]})})]},e.user_id))})]})})]})]}),(m||u)&&(0,H.jsx)(mu,{user:u||null,onClose:()=>{d(null),h(!1)},onSaved:E}),f&&(0,H.jsx)(pu,{user:f,onClose:()=>p(null)}),g&&(0,H.jsx)(fu,{message:g.msg,type:g.type,onClose:()=>_(null)})]})}var gu=`/api/reports.php`;const _u=async()=>{try{let{data:e}=await K.get(gu,{params:{action:`summary`}});if(!e.success)throw Error(e.message||`Failed to fetch summary`);return{success:!0,data:e.data}}catch(e){return console.error(`Error fetching report summary:`,e),{success:!1,error:e.message,data:null}}},vu=async(e={})=>{try{let t={action:`users`,...e},{data:n}=await K.get(gu,{params:t});if(!n.success)throw Error(n.message||`Failed to fetch users report`);return{success:!0,data:n.data,stats:n.stats}}catch(e){return console.error(`Error fetching users report:`,e),{success:!1,error:e.message,data:[],stats:{}}}},yu=async(e={})=>{try{let t={action:`events`,...e},{data:n}=await K.get(gu,{params:t});if(!n.success)throw Error(n.message||`Failed to fetch events report`);return{success:!0,data:n.data,stats:n.stats}}catch(e){return console.error(`Error fetching events report:`,e),{success:!1,error:e.message,data:[],stats:{}}}},bu=async(e={})=>{try{let t={action:`training`,...e},{data:n}=await K.get(gu,{params:t});if(!n.success)throw Error(n.message||`Failed to fetch training report`);return{success:!0,data:n.data,stats:n.stats}}catch(e){return console.error(`Error fetching training report:`,e),{success:!1,error:e.message,data:[],stats:{}}}},xu=async(e={})=>{try{let t={action:`volunteers`,...e},{data:n}=await K.get(gu,{params:t});if(!n.success)throw Error(n.message||`Failed to fetch volunteers report`);return{success:!0,data:n.data,stats:n.stats}}catch(e){return console.error(`Error fetching volunteers report:`,e),{success:!1,error:e.message,data:[],stats:{}}}},Su=async(e={})=>{try{let t={action:`inventory`,...e},{data:n}=await K.get(gu,{params:t});if(!n.success)throw Error(n.message||`Failed to fetch inventory report`);return{success:!0,data:n.data,stats:n.stats}}catch(e){return console.error(`Error fetching inventory report:`,e),{success:!1,error:e.message,data:[],stats:{}}}},Cu=async(e,t={})=>{try{let n=new FormData;n.append(`action`,`export`),n.append(`report_type`,e),n.append(`filters`,JSON.stringify(t));let r=await K.post(gu,n,{headers:{"Content-Type":`multipart/form-data`},responseType:`blob`}),i=window.URL.createObjectURL(new Blob([r.data])),a=document.createElement(`a`);return a.href=i,a.setAttribute(`download`,`${e}_report_${new Date().toISOString().split(`T`)[0]}.xlsx`),document.body.appendChild(a),a.click(),a.remove(),window.URL.revokeObjectURL(i),{success:!0}}catch(e){return console.error(`Error exporting report:`,e),{success:!1,error:e.message}}};function wu({message:e,type:t,onClose:n}){return(0,v.useEffect)(()=>{let e=setTimeout(n,3500);return()=>clearTimeout(e)},[n]),(0,H.jsxs)(`div`,{className:`ar-toast ar-toast--${t}`,onClick:n,children:[(0,H.jsx)(`div`,{className:`ar-toast__icon`,children:(0,H.jsx)(`i`,{className:`fa-solid ${t===`success`?`fa-circle-check`:`fa-circle-exclamation`}`})}),(0,H.jsxs)(`div`,{className:`ar-toast__content`,children:[(0,H.jsx)(`div`,{className:`ar-toast__title`,children:t===`success`?`Success`:`Error`}),(0,H.jsx)(`div`,{className:`ar-toast__message`,children:e})]}),(0,H.jsx)(`button`,{className:`ar-toast__close`,onClick:n,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]})}function Tu({icon:e,label:t,value:n,sub:r,color:i}){return(0,H.jsxs)(`div`,{className:`ar-stat-card`,style:{"--card-color":i},children:[(0,H.jsx)(`div`,{className:`ar-stat-card__icon`,children:(0,H.jsx)(`i`,{className:e})}),(0,H.jsxs)(`div`,{className:`ar-stat-card__content`,children:[(0,H.jsx)(`div`,{className:`ar-stat-card__value`,children:n}),(0,H.jsx)(`div`,{className:`ar-stat-card__label`,children:t}),r&&(0,H.jsx)(`div`,{className:`ar-stat-card__sub`,children:r})]})]})}function Eu({data:e,columns:t,onExport:n,reportType:r}){let[i,a]=(0,v.useState)(null),[o,s]=(0,v.useState)(`asc`),[c,l]=(0,v.useState)(null),u=e=>{i===e?s(o===`asc`?`desc`:`asc`):(a(e),s(`asc`))},d=[...e].sort((e,t)=>{if(!i)return 0;let n=e[i],r=t[i];return typeof n==`number`&&typeof r==`number`?o===`asc`?n-r:r-n:o===`asc`?String(n).localeCompare(String(r)):String(r).localeCompare(String(n))});return(0,H.jsxs)(`div`,{className:`ar-report-table`,children:[(0,H.jsxs)(`div`,{className:`ar-report-table__header`,children:[(0,H.jsxs)(`div`,{className:`ar-report-table__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-file-alt`}),(0,H.jsxs)(`span`,{children:[r,` Report`]})]}),(0,H.jsxs)(`button`,{className:`ar-export-btn`,onClick:n,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-download`}),(0,H.jsx)(`span`,{children:`Export to Excel`})]})]}),(0,H.jsx)(`div`,{className:`ar-table-container`,children:(0,H.jsxs)(`table`,{className:`ar-table`,children:[(0,H.jsx)(`thead`,{children:(0,H.jsx)(`tr`,{children:t.map(e=>(0,H.jsxs)(`th`,{onClick:()=>e.sortable!==!1&&u(e.key),className:e.sortable===!1?``:`sortable`,children:[(0,H.jsx)(`span`,{children:e.label}),i===e.key&&(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-${o===`asc`?`up`:`down`}`})]},e.key))})}),(0,H.jsx)(`tbody`,{children:d.length===0?(0,H.jsx)(`tr`,{children:(0,H.jsx)(`td`,{colSpan:t.length,children:(0,H.jsxs)(`div`,{className:`ar-table__empty`,children:[(0,H.jsx)(`div`,{className:`ar-table__empty-icon`,children:(0,H.jsx)(`i`,{className:`fa-regular fa-folder-open`})}),(0,H.jsx)(`h3`,{className:`ar-table__empty-title`,children:`No Data Available`}),(0,H.jsx)(`p`,{className:`ar-table__empty-message`,children:`There are no records to display for this report.`})]})})}):d.map((e,n)=>(0,H.jsx)(`tr`,{onMouseEnter:()=>l(n),onMouseLeave:()=>l(null),className:c===n?`ar-table__row--hovered`:``,children:t.map(t=>(0,H.jsx)(`td`,{children:t.render?t.render(e[t.key],e):e[t.key]},t.key))},n))})]})}),d.length>0&&(0,H.jsx)(`div`,{className:`ar-table__footer`,children:(0,H.jsxs)(`span`,{children:[(0,H.jsx)(`i`,{className:`fa-regular fa-eye`}),`Showing `,d.length,` `,d.length===1?`record`:`records`]})})]})}function Du(){let[e,t]=(0,v.useState)(`dashboard`),[n,r]=(0,v.useState)(null),[i,a]=(0,v.useState)(!0),[o,s]=(0,v.useState)(null),[c,l]=(0,v.useState)({}),[u,d]=(0,v.useState)([]),[f,p]=(0,v.useState)(null),m=(e,t=`success`)=>{s({message:e,type:t})},h=[{id:`dashboard`,label:`Dashboard`,icon:`fa-solid fa-chart-pie`,color:`#c41e3a`},{id:`users`,label:`Users`,icon:`fa-solid fa-users`,color:`#0891b2`},{id:`events`,label:`Events`,icon:`fa-solid fa-calendar-days`,color:`#f59e0b`},{id:`training`,label:`Training`,icon:`fa-solid fa-graduation-cap`,color:`#7c3aed`},{id:`volunteers`,label:`Volunteers`,icon:`fa-solid fa-hand-peace`,color:`#10b981`},{id:`inventory`,label:`Inventory`,icon:`fa-solid fa-boxes`,color:`#c2410c`}];(0,v.useEffect)(()=>{g()},[]),(0,v.useEffect)(()=>{e!==`dashboard`&&_(e)},[e,c]);let g=async()=>{a(!0);let e=await _u();e.success?r(e.data):m(e.error,`error`),a(!1)},_=async e=>{a(!0);let t;switch(e){case`users`:t=await vu(c);break;case`events`:t=await yu(c);break;case`training`:t=await bu(c);break;case`volunteers`:t=await xu(c);break;case`inventory`:t=await Su(c);break;default:t={data:[]}}t.success?d(t.data):m(t.error,`error`),a(!1)};return(0,H.jsxs)(`div`,{className:`ar-root`,children:[(0,H.jsxs)(`div`,{className:`ar-header`,children:[(0,H.jsx)(`div`,{className:`ar-header__container`,children:(0,H.jsxs)(`div`,{className:`ar-header__content`,children:[(0,H.jsxs)(`div`,{className:`ar-header__left`,children:[(0,H.jsxs)(`div`,{className:`ar-header__badge`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-chart-line`}),`Reports & Analytics`]}),(0,H.jsx)(`h1`,{className:`ar-header__title`,children:`Reports`}),(0,H.jsx)(`p`,{className:`ar-header__subtitle`,children:`View and export comprehensive reports across all modules`})]}),(0,H.jsxs)(`div`,{className:`ar-header__stats`,children:[(0,H.jsxs)(`div`,{className:`ar-header-stat`,children:[(0,H.jsx)(`span`,{className:`ar-header-stat__value`,children:n?.users?.total||0}),(0,H.jsx)(`span`,{className:`ar-header-stat__label`,children:`Total Users`})]}),(0,H.jsxs)(`div`,{className:`ar-header-stat`,children:[(0,H.jsx)(`span`,{className:`ar-header-stat__value`,children:n?.events?.total||0}),(0,H.jsx)(`span`,{className:`ar-header-stat__label`,children:`Events`})]}),(0,H.jsxs)(`div`,{className:`ar-header-stat`,children:[(0,H.jsx)(`span`,{className:`ar-header-stat__value`,children:n?.training?.total||0}),(0,H.jsx)(`span`,{className:`ar-header-stat__label`,children:`Training`})]})]})]})}),(0,H.jsx)(`div`,{className:`ar-header__wave`,children:(0,H.jsx)(`svg`,{viewBox:`0 0 1440 120`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`,children:(0,H.jsx)(`path`,{d:`M0 120L60 105C120 90 240 60 360 45C480 30 600 30 720 37.5C840 45 960 60 1080 67.5C1200 75 1320 75 1380 75L1440 75V120H1380C1320 120 1200 120 1080 120C960 120 840 120 720 120C600 120 480 120 360 120C240 120 120 120 60 120H0Z`,fill:`white`,fillOpacity:`0.1`})})})]}),(0,H.jsx)(`div`,{className:`ar-tabs`,children:h.map(n=>(0,H.jsxs)(`button`,{className:`ar-tab ${e===n.id?`ar-tab--active`:``}`,onClick:()=>t(n.id),onMouseEnter:()=>p(n.id),onMouseLeave:()=>p(null),style:{borderColor:e===n.id||f===n.id?n.color:void 0,background:e===n.id?`${n.color}08`:void 0,color:e===n.id||f===n.id?n.color:void 0},children:[(0,H.jsx)(`i`,{className:n.icon}),n.label]},n.id))}),(0,H.jsx)(`div`,{className:`ar-body`,children:i?(0,H.jsxs)(`div`,{className:`ar-loading`,children:[(0,H.jsx)(`div`,{className:`ar-loading__spinner`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-spinner fa-spin`})}),(0,H.jsx)(`p`,{children:`Loading reports...`}),(0,H.jsx)(`span`,{className:`ar-loading__subtitle`,children:`Fetching your data`})]}):e===`dashboard`?(0,H.jsxs)(`div`,{className:`ar-dashboard`,children:[(0,H.jsxs)(`div`,{className:`ar-section`,children:[(0,H.jsxs)(`h2`,{className:`ar-section__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-users`,style:{color:`#0891b2`}}),`Users Overview`]}),(0,H.jsxs)(`div`,{className:`ar-grid ar-grid--4`,children:[(0,H.jsx)(Tu,{icon:`fa-solid fa-users`,label:`Total Users`,value:n?.users?.total||0,color:`#c41e3a`}),(0,H.jsx)(Tu,{icon:`fa-solid fa-user-shield`,label:`Admins`,value:n?.users?.admins||0,color:`#7c3aed`}),(0,H.jsx)(Tu,{icon:`fa-solid fa-user-plus`,label:`New This Month`,value:n?.users?.new_month||0,color:`#0891b2`}),(0,H.jsx)(Tu,{icon:`fa-solid fa-check-circle`,label:`Verified`,value:n?.users?.verified||0,color:`#10b981`})]})]}),(0,H.jsxs)(`div`,{className:`ar-section`,children:[(0,H.jsxs)(`h2`,{className:`ar-section__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-calendar-days`,style:{color:`#f59e0b`}}),`Events & Training`]}),(0,H.jsxs)(`div`,{className:`ar-grid ar-grid--4`,children:[(0,H.jsx)(Tu,{icon:`fa-solid fa-calendar`,label:`Total Events`,value:n?.events?.total||0,color:`#c41e3a`,sub:`${n?.events?.upcoming||0} upcoming`}),(0,H.jsx)(Tu,{icon:`fa-solid fa-user-check`,label:`Event Regs`,value:n?.events?.registrations||0,color:`#f59e0b`}),(0,H.jsx)(Tu,{icon:`fa-solid fa-graduation-cap`,label:`Training Sessions`,value:n?.training?.total||0,color:`#7c3aed`,sub:`${n?.training?.upcoming||0} upcoming`}),(0,H.jsx)(Tu,{icon:`fa-solid fa-users`,label:`Training Regs`,value:n?.training?.registrations||0,color:`#0891b2`})]})]}),(0,H.jsxs)(`div`,{className:`ar-section`,children:[(0,H.jsxs)(`h2`,{className:`ar-section__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-boxes`,style:{color:`#c2410c`}}),`Inventory & Merchandise`]}),(0,H.jsxs)(`div`,{className:`ar-grid ar-grid--4`,children:[(0,H.jsx)(Tu,{icon:`fa-solid fa-box-open`,label:`Inventory Items`,value:n?.inventory?.total_items||0,color:`#0891b2`,sub:`${(n?.inventory?.total_value||0).toLocaleString()}`}),(0,H.jsx)(Tu,{icon:`fa-solid fa-exclamation-triangle`,label:`Low Stock`,value:n?.inventory?.low_stock||0,color:`#f59e0b`}),(0,H.jsx)(Tu,{icon:`fa-solid fa-store`,label:`Merch Items`,value:n?.merchandise?.total_items||0,color:`#7c3aed`}),(0,H.jsx)(Tu,{icon:`fa-solid fa-droplet`,label:`Blood Units`,value:n?.blood_bank?.total_units||0,color:`#c41e3a`,sub:`${n?.blood_bank?.critical||0} critical`})]})]}),(0,H.jsxs)(`div`,{className:`ar-section`,children:[(0,H.jsxs)(`h2`,{className:`ar-section__title`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-hand-peace`,style:{color:`#10b981`}}),`Volunteers`]}),(0,H.jsxs)(`div`,{className:`ar-grid ar-grid--3`,children:[(0,H.jsx)(Tu,{icon:`fa-solid fa-users`,label:`Total Volunteers`,value:n?.volunteers?.total||0,color:`#0891b2`}),(0,H.jsx)(Tu,{icon:`fa-solid fa-user-check`,label:`Active`,value:n?.volunteers?.current||0,color:`#10b981`}),(0,H.jsx)(Tu,{icon:`fa-solid fa-graduation-cap`,label:`Graduated`,value:n?.volunteers?.graduated||0,color:`#7c3aed`})]})]})]}):(0,H.jsx)(Eu,{data:u,columns:(e=>{switch(e){case`users`:return[{key:`user_id`,label:`ID`},{key:`username`,label:`Username`},{key:`full_name`,label:`Full Name`},{key:`email`,label:`Email`},{key:`role`,label:`Role`},{key:`user_type`,label:`Type`},{key:`created_at`,label:`Joined`,render:e=>new Date(e).toLocaleDateString()}];case`events`:return[{key:`event_id`,label:`ID`},{key:`title`,label:`Title`},{key:`major_service`,label:`Service`},{key:`event_date`,label:`Date`,render:e=>new Date(e).toLocaleDateString()},{key:`location`,label:`Location`},{key:`capacity`,label:`Capacity`},{key:`approved_registrations`,label:`Registrations`}];case`training`:return[{key:`session_id`,label:`ID`},{key:`title`,label:`Title`},{key:`major_service`,label:`Service`},{key:`session_date`,label:`Date`,render:e=>new Date(e).toLocaleDateString()},{key:`venue`,label:`Venue`},{key:`instructor`,label:`Instructor`},{key:`approved_registrations`,label:`Registrations`}];case`volunteers`:return[{key:`volunteer_id`,label:`ID`},{key:`full_name`,label:`Name`},{key:`age`,label:`Age`},{key:`location`,label:`Location`},{key:`service`,label:`Service`},{key:`status`,label:`Status`}];case`inventory`:return[{key:`item_code`,label:`Code`},{key:`item_name`,label:`Name`},{key:`category_name`,label:`Category`},{key:`current_stock`,label:`Stock`},{key:`unit`,label:`Unit`},{key:`status`,label:`Status`}];default:return[]}})(e),onExport:async()=>{let t=await Cu(e,c);t.success?m(`Report exported successfully`):m(t.error,`error`)},reportType:h.find(t=>t.id===e)?.label})}),o&&(0,H.jsx)(wu,{message:o.message,type:o.type,onClose:()=>s(null)})]})}function Ou(){let[e,t]=(0,v.useState)([]),[n,r]=(0,v.useState)([]),[i,a]=(0,v.useState)(null),[o,s]=(0,v.useState)(``),[c,l]=(0,v.useState)(!1);(0,v.useEffect)(()=>{u(),d()},[]);let u=async()=>{try{t([{id:1,userId:101,name:`John Doe`,role:`Volunteer`,lastMessage:`Thank you for the information`,timestamp:`2026-02-17T10:30:00`,unread:0,avatar:`J`},{id:2,userId:102,name:`Jane Smith`,role:`Member`,lastMessage:`When is the next event?`,timestamp:`2026-02-16T15:20:00`,unread:1,avatar:`J`}])}catch(e){console.error(`Error fetching conversations:`,e)}},d=async()=>{try{r([{id:101,name:`John Doe`,role:`Volunteer`},{id:102,name:`Jane Smith`,role:`Member`},{id:103,name:`Bob Johnson`,role:`Volunteer`}])}catch(e){console.error(`Error fetching users:`,e)}},f=e=>{a({id:Date.now(),userId:e.id,name:e.name,role:e.role,avatar:e.name.charAt(0)}),l(!1)},p=e.filter(e=>e.name.toLowerCase().includes(o.toLowerCase())),m=n.filter(e=>e.name.toLowerCase().includes(o.toLowerCase())),h=e=>{let t=new Date(e),n=new Date;return t.toDateString()===n.toDateString()?t.toLocaleTimeString(`en-US`,{hour:`numeric`,minute:`2-digit`,hour12:!0}):t.toLocaleDateString(`en-US`,{month:`short`,day:`numeric`})};return(0,H.jsxs)(`div`,{className:`admin-messages`,children:[(0,H.jsxs)(`div`,{className:`messages-header`,children:[(0,H.jsx)(`h1`,{children:`Messages`}),(0,H.jsx)(`button`,{className:`btn-new-chat`,onClick:()=>l(!c),children:`+ New Message`})]}),(0,H.jsxs)(`div`,{className:`messages-layout`,children:[(0,H.jsxs)(`div`,{className:`conversations-panel`,children:[(0,H.jsxs)(`div`,{className:`search-box`,children:[(0,H.jsx)(`input`,{type:`text`,placeholder:`Search conversations...`,value:o,onChange:e=>s(e.target.value)}),(0,H.jsx)(`span`,{className:`search-icon`,children:``})]}),c&&(0,H.jsxs)(`div`,{className:`new-chat-section`,children:[(0,H.jsx)(`h4`,{children:`Start New Conversation`}),m.map(e=>(0,H.jsxs)(`div`,{className:`user-item`,onClick:()=>f(e),children:[(0,H.jsx)(`div`,{className:`avatar`,children:e.name.charAt(0)}),(0,H.jsxs)(`div`,{className:`user-info`,children:[(0,H.jsx)(`h5`,{children:e.name}),(0,H.jsx)(`span`,{className:`role`,children:e.role})]})]},e.id))]}),(0,H.jsx)(`div`,{className:`conversations-list`,children:p.length===0?(0,H.jsxs)(`div`,{className:`empty-state`,children:[(0,H.jsx)(`p`,{children:`No conversations yet`}),(0,H.jsx)(`button`,{onClick:()=>l(!0),children:`Start a conversation`})]}):p.map(e=>(0,H.jsxs)(`div`,{className:`conversation-item ${i?.id===e.id?`active`:``}`,onClick:()=>a(e),children:[(0,H.jsx)(`div`,{className:`avatar`,children:e.avatar}),(0,H.jsxs)(`div`,{className:`conversation-info`,children:[(0,H.jsxs)(`div`,{className:`header`,children:[(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`h4`,{children:e.name}),(0,H.jsx)(`span`,{className:`role`,children:e.role})]}),(0,H.jsx)(`span`,{className:`time`,children:h(e.timestamp)})]}),(0,H.jsxs)(`div`,{className:`preview`,children:[(0,H.jsx)(`p`,{children:e.lastMessage}),e.unread>0&&(0,H.jsx)(`span`,{className:`unread-badge`,children:e.unread})]})]})]},e.id))})]}),(0,H.jsx)(`div`,{className:`chat-panel`,children:i?(0,H.jsx)(ChatBox,{recipientId:i.userId,recipientName:i.name,onClose:()=>a(null)}):(0,H.jsxs)(`div`,{className:`no-chat-selected`,children:[(0,H.jsx)(`div`,{className:`icon`,children:``}),(0,H.jsx)(`h3`,{children:`Select a conversation`}),(0,H.jsx)(`p`,{children:`Choose a conversation or start a new one`})]})})]})]})}var ku=[{key:`all`,label:`All Requests`,color:`#6b7280`,icon:`fa-inbox`},{key:`pending`,label:`Pending`,color:`#f59e0b`,icon:`fa-clock`},{key:`under_review`,label:`Under Review`,color:`#3b82f6`,icon:`fa-magnifying-glass`},{key:`approved`,label:`Approved`,color:`#10b981`,icon:`fa-check-circle`},{key:`scheduled`,label:`Scheduled`,color:`#8b5cf6`,icon:`fa-calendar-check`},{key:`completed`,label:`Completed`,color:`#059669`,icon:`fa-graduation-cap`},{key:`rejected`,label:`Rejected`,color:`#ef4444`,icon:`fa-times-circle`}],Au=[{key:`low`,label:`Low`,color:`#3b82f6`,icon:`fa-arrow-down`},{key:`normal`,label:`Normal`,color:`#8b5cf6`,icon:`fa-equals`},{key:`high`,label:`High`,color:`#f59e0b`,icon:`fa-arrow-up`},{key:`urgent`,label:`Urgent`,color:`#ef4444`,icon:`fa-exclamation-triangle`}];function ju({message:e,type:t,onClose:n}){return(0,v.useEffect)(()=>{let e=setTimeout(n,3500);return()=>clearTimeout(e)},[n]),(0,H.jsxs)(`div`,{className:`atr-toast atr-toast--${t}`,onClick:n,children:[(0,H.jsx)(`div`,{className:`atr-toast__icon`,children:(0,H.jsx)(`i`,{className:`fas ${t===`success`?`fa-circle-check`:`fa-circle-xmark`}`})}),(0,H.jsxs)(`div`,{className:`atr-toast__content`,children:[(0,H.jsx)(`div`,{className:`atr-toast__title`,children:t===`success`?`Success`:`Error`}),(0,H.jsx)(`div`,{className:`atr-toast__message`,children:e})]}),(0,H.jsx)(`button`,{className:`atr-toast__close`,onClick:n,children:(0,H.jsx)(`i`,{className:`fas fa-xmark`})})]})}function Mu({request:e,onClose:t,onUpdate:n}){let[r,i]=(0,v.useState)(``),[a,o]=(0,v.useState)(e.admin_notes||``),[s,c]=(0,v.useState)(!1);async function l(){if(r){c(!0);try{await Eo(e.request_id,r,a),n?.(),t()}catch(e){alert(e.message)}finally{c(!1)}}}async function u(){if(window.confirm(`Create a training session from this request?`)){c(!0);try{let r=await Do(e.request_id);alert(`${r.message}\n\nSession ID: ${r.session_id}\n\nYou can now view it in Admin Training Sessions.`),n?.(),t()}catch(e){alert(e.message)}finally{c(!1)}}}let d=Au.find(t=>t.key===e.urgency)||Au[1],f=ku.find(t=>t.key===e.status)||ku[0];return(0,H.jsx)(`div`,{className:`atr-overlay`,onClick:t,children:(0,H.jsxs)(`div`,{className:`atr-modal atr-modal--xl`,onClick:e=>e.stopPropagation(),children:[(0,H.jsxs)(`div`,{className:`atr-modal__header`,children:[(0,H.jsxs)(`div`,{className:`atr-modal__title`,children:[(0,H.jsx)(`i`,{className:`fas fa-file-alt`}),` Request Details #`,e.request_id]}),(0,H.jsx)(`button`,{className:`atr-modal__close`,onClick:t,children:(0,H.jsx)(`i`,{className:`fas fa-xmark`})})]}),(0,H.jsxs)(`div`,{className:`atr-modal__body atr-modal__body--details`,children:[(0,H.jsxs)(`div`,{className:`atr-detail-header`,children:[(0,H.jsxs)(`span`,{className:`atr-status-badge atr-status-badge--${e.status}`,children:[(0,H.jsx)(`i`,{className:`fas ${f.icon}`}),f.label]}),(0,H.jsxs)(`span`,{className:`atr-urgency-badge atr-urgency-badge--${e.urgency}`,children:[(0,H.jsx)(`i`,{className:`fas ${d.icon}`}),d.label,` Priority`]})]}),(0,H.jsxs)(`div`,{className:`atr-detail-section`,children:[(0,H.jsxs)(`h3`,{className:`atr-detail-section__title`,children:[(0,H.jsx)(`i`,{className:`fas fa-graduation-cap`}),` Training Program`]}),(0,H.jsxs)(`div`,{className:`atr-detail-grid`,children:[(0,H.jsxs)(`div`,{className:`atr-detail-item`,children:[(0,H.jsx)(`label`,{children:`Service Type`}),(0,H.jsx)(`span`,{className:`atr-service-badge`,children:e.service_type})]}),(0,H.jsxs)(`div`,{className:`atr-detail-item`,children:[(0,H.jsx)(`label`,{children:`Program`}),(0,H.jsx)(`span`,{className:`atr-program-name`,children:e.training_program})]}),(0,H.jsxs)(`div`,{className:`atr-detail-item`,children:[(0,H.jsx)(`label`,{children:`Type`}),(0,H.jsx)(`span`,{className:`atr-training-type`,children:e.training_type?.replace(`_`,` `)})]}),(0,H.jsxs)(`div`,{className:`atr-detail-item`,children:[(0,H.jsx)(`label`,{children:`Duration`}),(0,H.jsxs)(`span`,{className:`atr-duration`,children:[e.duration_days,` day(s)`]})]})]})]}),(0,H.jsxs)(`div`,{className:`atr-detail-section`,children:[(0,H.jsxs)(`h3`,{className:`atr-detail-section__title`,children:[(0,H.jsx)(`i`,{className:`fas fa-calendar`}),` Preferred Schedule`]}),(0,H.jsxs)(`div`,{className:`atr-detail-grid`,children:[e.preferred_start_date&&(0,H.jsxs)(`div`,{className:`atr-detail-item`,children:[(0,H.jsx)(`label`,{children:`Start Date`}),(0,H.jsxs)(`span`,{className:`atr-date`,children:[(0,H.jsx)(`i`,{className:`fas fa-calendar-alt`}),new Date(e.preferred_start_date).toLocaleDateString(`en-US`,{month:`long`,day:`numeric`,year:`numeric`})]})]}),e.preferred_end_date&&(0,H.jsxs)(`div`,{className:`atr-detail-item`,children:[(0,H.jsx)(`label`,{children:`End Date`}),(0,H.jsxs)(`span`,{className:`atr-date`,children:[(0,H.jsx)(`i`,{className:`fas fa-calendar-check`}),new Date(e.preferred_end_date).toLocaleDateString(`en-US`,{month:`long`,day:`numeric`,year:`numeric`})]})]}),e.preferred_start_time&&(0,H.jsxs)(`div`,{className:`atr-detail-item`,children:[(0,H.jsx)(`label`,{children:`Time`}),(0,H.jsxs)(`span`,{className:`atr-time`,children:[(0,H.jsx)(`i`,{className:`fas fa-clock`}),e.preferred_start_time,` -`,` `,e.preferred_end_time]})]})]})]}),(0,H.jsxs)(`div`,{className:`atr-detail-section`,children:[(0,H.jsxs)(`h3`,{className:`atr-detail-section__title`,children:[(0,H.jsx)(`i`,{className:`fas fa-users`}),` Participant Information`]}),(0,H.jsxs)(`div`,{className:`atr-detail-grid`,children:[(0,H.jsxs)(`div`,{className:`atr-detail-item`,children:[(0,H.jsx)(`label`,{children:`Number of Participants`}),(0,H.jsxs)(`span`,{className:`atr-participant-count`,children:[(0,H.jsx)(`i`,{className:`fas fa-user-group`}),e.participant_count]})]}),e.organization_name&&(0,H.jsxs)(`div`,{className:`atr-detail-item atr-detail-item--full`,children:[(0,H.jsx)(`label`,{children:`Organization`}),(0,H.jsxs)(`span`,{className:`atr-organization`,children:[(0,H.jsx)(`i`,{className:`fas fa-building`}),e.organization_name]})]})]})]}),(0,H.jsxs)(`div`,{className:`atr-detail-section`,children:[(0,H.jsxs)(`h3`,{className:`atr-detail-section__title`,children:[(0,H.jsx)(`i`,{className:`fas fa-address-book`}),` Contact Information`]}),(0,H.jsxs)(`div`,{className:`atr-contact-grid`,children:[(0,H.jsxs)(`div`,{className:`atr-contact-card`,children:[(0,H.jsx)(`i`,{className:`fas fa-user-circle`}),(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`label`,{children:`Contact Person`}),(0,H.jsx)(`span`,{children:e.contact_person})]})]}),(0,H.jsxs)(`div`,{className:`atr-contact-card`,children:[(0,H.jsx)(`i`,{className:`fas fa-phone`}),(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`label`,{children:`Phone`}),(0,H.jsx)(`span`,{children:e.contact_number})]})]}),(0,H.jsxs)(`div`,{className:`atr-contact-card atr-contact-card--full`,children:[(0,H.jsx)(`i`,{className:`fas fa-envelope`}),(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`label`,{children:`Email`}),(0,H.jsx)(`span`,{children:e.email})]})]})]})]}),(e.location_preference||e.venue_requirements||e.equipment_needed)&&(0,H.jsxs)(`div`,{className:`atr-detail-section`,children:[(0,H.jsxs)(`h3`,{className:`atr-detail-section__title`,children:[(0,H.jsx)(`i`,{className:`fas fa-map-marker-alt`}),` Location & Requirements`]}),(0,H.jsxs)(`div`,{className:`atr-detail-grid`,children:[e.location_preference&&(0,H.jsxs)(`div`,{className:`atr-detail-item atr-detail-item--full`,children:[(0,H.jsx)(`label`,{children:`Location Preference`}),(0,H.jsxs)(`span`,{className:`atr-location`,children:[(0,H.jsx)(`i`,{className:`fas fa-map-pin`}),e.location_preference]})]}),e.venue_requirements&&(0,H.jsxs)(`div`,{className:`atr-detail-item atr-detail-item--full`,children:[(0,H.jsx)(`label`,{children:`Venue Requirements`}),(0,H.jsx)(`p`,{className:`atr-detail-text`,children:e.venue_requirements})]}),e.equipment_needed&&(0,H.jsxs)(`div`,{className:`atr-detail-item atr-detail-item--full`,children:[(0,H.jsx)(`label`,{children:`Equipment Needed`}),(0,H.jsx)(`p`,{className:`atr-detail-text`,children:e.equipment_needed})]})]})]}),(e.purpose||e.additional_requirements)&&(0,H.jsxs)(`div`,{className:`atr-detail-section`,children:[(0,H.jsxs)(`h3`,{className:`atr-detail-section__title`,children:[(0,H.jsx)(`i`,{className:`fas fa-clipboard-list`}),` Additional Information`]}),e.purpose&&(0,H.jsxs)(`div`,{className:`atr-detail-item atr-detail-item--full`,children:[(0,H.jsx)(`label`,{children:`Purpose / Objective`}),(0,H.jsx)(`p`,{className:`atr-detail-text`,children:e.purpose})]}),e.additional_requirements&&(0,H.jsxs)(`div`,{className:`atr-detail-item atr-detail-item--full`,children:[(0,H.jsx)(`label`,{children:`Additional Requirements`}),(0,H.jsx)(`p`,{className:`atr-detail-text`,children:e.additional_requirements})]})]}),(e.valid_id_request_path||e.participant_list_path||e.additional_docs_paths)&&(0,H.jsxs)(`div`,{className:`atr-detail-section`,children:[(0,H.jsxs)(`h3`,{className:`atr-detail-section__title`,children:[(0,H.jsx)(`i`,{className:`fas fa-file-upload`}),` Uploaded Documents`]}),(0,H.jsxs)(`div`,{className:`atr-doc-grid`,children:[e.valid_id_request_path&&(0,H.jsxs)(`a`,{href:`http://localhost/prc-management-system/${e.valid_id_request_path}`,target:`_blank`,rel:`noreferrer`,className:`atr-doc-card`,children:[(0,H.jsx)(`i`,{className:`fas fa-id-card`}),(0,H.jsx)(`span`,{children:`Valid ID`}),(0,H.jsx)(`small`,{children:`View Document`})]}),e.participant_list_path&&(0,H.jsxs)(`a`,{href:`http://localhost/prc-management-system/${e.participant_list_path}`,target:`_blank`,rel:`noreferrer`,className:`atr-doc-card`,children:[(0,H.jsx)(`i`,{className:`fas fa-users`}),(0,H.jsx)(`span`,{children:`Participant List`}),(0,H.jsx)(`small`,{children:`View Document`})]}),e.additional_docs_paths&&(()=>{try{let t=JSON.parse(e.additional_docs_paths),n=e.additional_docs_filenames?JSON.parse(e.additional_docs_filenames):[];return t.map((e,t)=>(0,H.jsxs)(`a`,{href:`http://localhost/prc-management-system/${e}`,target:`_blank`,rel:`noreferrer`,className:`atr-doc-card`,children:[(0,H.jsx)(`i`,{className:`fas fa-file-alt`}),(0,H.jsx)(`span`,{children:n[t]||`Document ${t+1}`}),(0,H.jsx)(`small`,{children:`View Document`})]},t))}catch{return null}})()]})]}),(0,H.jsxs)(`div`,{className:`atr-detail-section atr-detail-section--actions`,children:[(0,H.jsxs)(`h3`,{className:`atr-detail-section__title`,children:[(0,H.jsx)(`i`,{className:`fas fa-tasks`}),` Admin Actions`]}),(0,H.jsxs)(`div`,{className:`atr-admin-panel`,children:[(0,H.jsxs)(`div`,{className:`atr-form__field`,children:[(0,H.jsx)(`label`,{className:`atr-form__label`,children:`Update Status`}),(0,H.jsxs)(`select`,{className:`atr-form__select`,value:r,onChange:e=>i(e.target.value),children:[(0,H.jsx)(`option`,{value:``,children:`Select new status...`}),ku.filter(e=>e.key!==`all`).map(e=>(0,H.jsx)(`option`,{value:e.key,children:e.label},e.key))]})]}),(0,H.jsxs)(`div`,{className:`atr-form__field`,children:[(0,H.jsx)(`label`,{className:`atr-form__label`,children:`Admin Notes`}),(0,H.jsx)(`textarea`,{className:`atr-form__textarea`,rows:3,value:a,onChange:e=>o(e.target.value),placeholder:`Add internal notes about this request...`})]}),(0,H.jsxs)(`div`,{className:`atr-action-buttons`,children:[(0,H.jsxs)(`button`,{className:`atr-btn atr-btn--primary`,onClick:l,disabled:!r||s,children:[s?(0,H.jsx)(`i`,{className:`fas fa-spinner fa-spin`}):(0,H.jsx)(`i`,{className:`fas fa-save`}),`Update Status`]}),e.status===`approved`&&!e.created_session_id&&(0,H.jsxs)(`button`,{className:`atr-btn atr-btn--success`,onClick:u,disabled:s,children:[(0,H.jsx)(`i`,{className:`fas fa-plus-circle`}),` Create Training Session`]})]}),e.created_session_id&&(0,H.jsxs)(`div`,{className:`atr-session-created`,children:[(0,H.jsx)(`i`,{className:`fas fa-check-circle`}),(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`strong`,{children:`Training session created`}),(0,H.jsxs)(`span`,{children:[`ID: #`,e.created_session_id]}),e.created_session_title&&(0,H.jsx)(`span`,{children:e.created_session_title})]})]})]})]}),(0,H.jsx)(`div`,{className:`atr-detail-section atr-detail-section--meta`,children:(0,H.jsxs)(`div`,{className:`atr-meta-grid`,children:[(0,H.jsxs)(`div`,{className:`atr-meta-item`,children:[(0,H.jsx)(`i`,{className:`fas fa-calendar-plus`}),(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`span`,{className:`atr-meta-label`,children:`Submitted`}),(0,H.jsx)(`span`,{className:`atr-meta-value`,children:new Date(e.created_at).toLocaleString()})]})]}),e.reviewed_date&&(0,H.jsxs)(`div`,{className:`atr-meta-item`,children:[(0,H.jsx)(`i`,{className:`fas fa-check-circle`}),(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`span`,{className:`atr-meta-label`,children:`Reviewed`}),(0,H.jsx)(`span`,{className:`atr-meta-value`,children:new Date(e.reviewed_date).toLocaleString()})]})]}),e.username&&(0,H.jsxs)(`div`,{className:`atr-meta-item`,children:[(0,H.jsx)(`i`,{className:`fas fa-user`}),(0,H.jsxs)(`div`,{children:[(0,H.jsx)(`span`,{className:`atr-meta-label`,children:`Submitted by`}),(0,H.jsx)(`span`,{className:`atr-meta-value`,children:e.username})]})]})]})})]})]})})}function Nu(){Qe();let[e,t]=(0,v.useState)([]),[n,r]=(0,v.useState)(null),[i,a]=(0,v.useState)(!0),[o,s]=(0,v.useState)(`all`),[c,l]=(0,v.useState)(``),[u,d]=(0,v.useState)(null),[f,p]=(0,v.useState)(null),[m,h]=(0,v.useState)(null),g=(e,t=`success`)=>p({msg:e,type:t}),_=(0,v.useCallback)(async()=>{try{let{stats:e}=await Oo();r(e)}catch(e){console.error(`Stats error:`,e)}},[]);(0,v.useEffect)(()=>{_()},[_]);let y=(0,v.useCallback)(async()=>{a(!0);try{let{requests:e}=await wo({status:o,search:c});t(e)}catch(e){console.error(`Fetch requests error:`,e),g(e.message||`Failed to load requests`,`error`),t([])}finally{a(!1)}},[o,c]);(0,v.useEffect)(()=>{y()},[y]);async function b(e){try{let{request:t}=await To(e.request_id);d(t)}catch(e){g(e.message||`Failed to load details`,`error`)}}function x(){y(),_(),d(null),g(`Request updated successfully`)}let S=n?.total??e.length,C=n?.by_status||[],w=()=>{let e=0;return o!==`all`&&e++,c&&e++,e},T=()=>{s(`all`),l(``)},E=C.find(e=>e.status===`pending`)?.count||0,D=C.find(e=>e.status===`approved`)?.count||0;return(0,H.jsxs)(`div`,{className:`atr-root`,children:[(0,H.jsxs)(`div`,{className:`atr-header`,children:[(0,H.jsx)(`div`,{className:`atr-header__container`,children:(0,H.jsxs)(`div`,{className:`atr-header__content`,children:[(0,H.jsxs)(`div`,{className:`atr-header__left`,children:[(0,H.jsxs)(`div`,{className:`atr-header__badge`,children:[(0,H.jsx)(`i`,{className:`fas fa-inbox`}),` Training Request Management`]}),(0,H.jsx)(`h1`,{className:`atr-header__title`,children:`Manage Training Requests`}),(0,H.jsx)(`p`,{className:`atr-header__subtitle`,children:`Review and process training program requests from users`})]}),(0,H.jsxs)(`div`,{className:`atr-header__stats`,children:[(0,H.jsxs)(`div`,{className:`atr-header-stat`,children:[(0,H.jsx)(`span`,{className:`atr-header-stat__value`,children:S}),(0,H.jsx)(`span`,{className:`atr-header-stat__label`,children:`Total Requests`})]}),(0,H.jsxs)(`div`,{className:`atr-header-stat`,children:[(0,H.jsx)(`span`,{className:`atr-header-stat__value`,children:E}),(0,H.jsx)(`span`,{className:`atr-header-stat__label`,children:`Pending`})]}),(0,H.jsxs)(`div`,{className:`atr-header-stat`,children:[(0,H.jsx)(`span`,{className:`atr-header-stat__value`,children:D}),(0,H.jsx)(`span`,{className:`atr-header-stat__label`,children:`Approved`})]})]})]})}),(0,H.jsx)(`div`,{className:`atr-header__wave`,children:(0,H.jsx)(`svg`,{viewBox:`0 0 1440 120`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`,children:(0,H.jsx)(`path`,{d:`M0 120L60 105C120 90 240 60 360 45C480 30 600 30 720 37.5C840 45 960 60 1080 67.5C1200 75 1320 75 1380 75L1440 75V120H1380C1320 120 1200 120 1080 120C960 120 840 120 720 120C600 120 480 120 360 120C240 120 120 120 60 120H0Z`,fill:`white`,fillOpacity:`0.1`})})})]}),(0,H.jsxs)(`div`,{className:`atr-body`,children:[(0,H.jsx)(`div`,{className:`atr-filters`,children:ku.map(e=>{let t=e.key===`all`?S:C.find(t=>t.status===e.key)?.count||0,n=o===e.key;return(0,H.jsxs)(`button`,{className:`atr-filter-card ${n?`atr-filter-card--active`:``}`,style:{borderColor:e.color,background:n?`${e.color}08`:`white`},onClick:()=>s(e.key),children:[(0,H.jsx)(`i`,{className:`fas ${e.icon}`,style:{color:e.color,fontSize:`1.25rem`,marginBottom:`0.5rem`}}),(0,H.jsx)(`div`,{className:`atr-filter-card__count`,style:{color:e.color},children:t}),(0,H.jsx)(`div`,{className:`atr-filter-card__label`,children:e.label})]},e.key)})}),(0,H.jsxs)(`div`,{className:`atr-toolbar`,children:[(0,H.jsxs)(`div`,{className:`atr-toolbar__search`,children:[(0,H.jsx)(`i`,{className:`fas fa-search atr-toolbar__search-icon`}),(0,H.jsx)(`input`,{className:`atr-toolbar__search-input`,value:c,onChange:e=>l(e.target.value),placeholder:`Search by program, contact person, or email...`}),c&&(0,H.jsx)(`button`,{className:`atr-toolbar__search-clear`,onClick:()=>l(``),children:(0,H.jsx)(`i`,{className:`fas fa-times`})})]}),(0,H.jsx)(`div`,{className:`atr-toolbar__actions`,children:w()>0&&(0,H.jsxs)(`button`,{className:`atr-toolbar__filter-clear`,onClick:T,children:[(0,H.jsx)(`i`,{className:`fas fa-times`}),`Clear Filters (`,w(),`)`]})})]}),(0,H.jsxs)(`div`,{className:`atr-table-panel`,children:[(0,H.jsxs)(`div`,{className:`atr-table-panel__head`,children:[(0,H.jsxs)(`div`,{className:`atr-table-panel__title`,children:[(0,H.jsx)(`i`,{className:`fas fa-list`}),` Training Requests`]}),(0,H.jsx)(`div`,{className:`atr-table-panel__info`,children:!i&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(`span`,{className:`atr-table-panel__count`,children:[e.length,` request`,e.length===1?``:`s`]}),(0,H.jsx)(`span`,{className:`atr-table-panel__divider`,children:``}),(0,H.jsxs)(`span`,{className:`atr-table-panel__sub`,children:[`Page 1 of `,Math.ceil(e.length/10)||1]})]})})]}),(0,H.jsx)(`div`,{className:`atr-table-panel__scroll`,children:(0,H.jsxs)(`table`,{className:`atr-table`,children:[(0,H.jsx)(`thead`,{children:(0,H.jsxs)(`tr`,{children:[(0,H.jsx)(`th`,{children:`REQUEST ID`}),(0,H.jsx)(`th`,{children:`PROGRAM`}),(0,H.jsx)(`th`,{children:`SERVICE`}),(0,H.jsx)(`th`,{children:`CONTACT`}),(0,H.jsx)(`th`,{children:`PARTICIPANTS`}),(0,H.jsx)(`th`,{children:`PREFERRED DATE`}),(0,H.jsx)(`th`,{children:`URGENCY`}),(0,H.jsx)(`th`,{children:`STATUS`}),(0,H.jsx)(`th`,{children:`SUBMITTED`}),(0,H.jsx)(`th`,{children:`ACTIONS`})]})}),(0,H.jsx)(`tbody`,{children:i?(0,H.jsx)(`tr`,{children:(0,H.jsx)(`td`,{colSpan:10,children:(0,H.jsxs)(`div`,{className:`atr-table__loading`,children:[(0,H.jsx)(`div`,{className:`atr-table__loading-spinner`,children:(0,H.jsx)(`i`,{className:`fas fa-spinner fa-spin`})}),(0,H.jsx)(`p`,{children:`Loading requests...`}),(0,H.jsx)(`span`,{className:`atr-table__loading-sub`,children:`Fetching training requests`})]})})}):e.length===0?(0,H.jsx)(`tr`,{children:(0,H.jsx)(`td`,{colSpan:10,children:(0,H.jsxs)(`div`,{className:`atr-table__empty`,children:[(0,H.jsx)(`div`,{className:`atr-table__empty-icon`,children:(0,H.jsx)(`i`,{className:`fas fa-inbox`})}),(0,H.jsx)(`h3`,{className:`atr-table__empty-title`,children:`No Requests Found`}),(0,H.jsx)(`p`,{className:`atr-table__empty-message`,children:c||o!==`all`?`Try adjusting your search or filter criteria`:`No training requests have been submitted yet`}),(c||o!==`all`)&&(0,H.jsxs)(`button`,{className:`atr-table__empty-action`,onClick:T,children:[(0,H.jsx)(`i`,{className:`fas fa-times`}),` Clear Filters`]})]})})}):e.map(e=>{let t=ku.find(t=>t.key===e.status)||ku[0],n=Au.find(t=>t.key===e.urgency)||Au[1];return(0,H.jsxs)(`tr`,{onMouseEnter:()=>h(e.request_id),onMouseLeave:()=>h(null),className:m===e.request_id?`atr-table__row--hovered`:``,children:[(0,H.jsx)(`td`,{children:(0,H.jsxs)(`span`,{className:`atr-req-id`,children:[(0,H.jsx)(`i`,{className:`fas fa-hashtag`}),` #`,e.request_id]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`atr-program`,children:[(0,H.jsx)(`div`,{className:`atr-program__name`,children:e.training_program}),(0,H.jsx)(`div`,{className:`atr-program__type`,children:e.training_type?.replace(`_`,` `)})]})}),(0,H.jsx)(`td`,{children:(0,H.jsx)(`span`,{className:`atr-service-badge`,children:e.service_type})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`atr-contact`,children:[(0,H.jsx)(`div`,{className:`atr-contact__name`,children:e.contact_person}),(0,H.jsxs)(`div`,{className:`atr-contact__email`,title:e.email,children:[(0,H.jsx)(`i`,{className:`fas fa-envelope`}),e.email]})]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`span`,{className:`atr-participant-count`,children:[(0,H.jsx)(`i`,{className:`fas fa-user`}),e.participant_count]})}),(0,H.jsx)(`td`,{children:e.preferred_start_date?(0,H.jsxs)(`div`,{className:`atr-date`,children:[(0,H.jsx)(`i`,{className:`fas fa-calendar`}),new Date(e.preferred_start_date).toLocaleDateString(`en-US`,{month:`short`,day:`numeric`})]}):(0,H.jsxs)(`span`,{className:`atr-flexible`,children:[(0,H.jsx)(`i`,{className:`fas fa-calendar-alt`}),` Flexible`]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`span`,{className:`atr-urgency atr-urgency--${e.urgency}`,style:{background:`${n.color}12`,color:n.color,border:`1px solid ${n.color}25`},children:[(0,H.jsx)(`i`,{className:`fas ${n.icon}`}),n.label]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`span`,{className:`atr-status atr-status--${e.status}`,style:{background:`${t.color}12`,color:t.color,border:`1px solid ${t.color}25`},children:[(0,H.jsx)(`i`,{className:`fas ${t.icon}`}),e.status?.replace(`_`,` `)]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`atr-date`,children:[(0,H.jsx)(`i`,{className:`fas fa-calendar-plus`}),new Date(e.created_at).toLocaleDateString(`en-US`,{month:`short`,day:`numeric`})]})}),(0,H.jsx)(`td`,{children:(0,H.jsxs)(`div`,{className:`atr-actions`,children:[(0,H.jsx)(`button`,{className:`atr-action-btn atr-action-btn--view`,onClick:()=>b(e),title:`View Details`,style:{background:`#3b82f612`,color:`#3b82f6`,border:`1px solid #3b82f625`},children:(0,H.jsx)(`i`,{className:`fas fa-eye`})}),e.status===`approved`&&!e.created_session_id&&(0,H.jsx)(`button`,{className:`atr-action-btn atr-action-btn--create`,onClick:async t=>{if(t.stopPropagation(),window.confirm(`Create training session for "${e.training_program}"?`))try{let t=await Do(e.request_id);g(`${t.message} (Session ID: ${t.session_id})`),y(),_()}catch(e){g(e.message||`Failed to create session`,`error`)}},title:`Quick Create Session`,style:{background:`#10b98112`,color:`#10b981`,border:`1px solid #10b98125`},children:(0,H.jsx)(`i`,{className:`fas fa-plus-circle`})}),e.created_session_id&&(0,H.jsx)(`span`,{className:`atr-session-badge`,title:`Session created (ID: ${e.created_session_id})`,children:(0,H.jsx)(`i`,{className:`fas fa-check-circle`})})]})})]},e.request_id)})})]})})]})]}),u&&(0,H.jsx)(Mu,{request:u,onClose:()=>d(null),onUpdate:x}),f&&(0,H.jsx)(ju,{message:f.msg,type:f.type,onClose:()=>p(null)})]})}var Pu=()=>void 0,Fu=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)==55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)==56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Iu=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let a=e[n++];t[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){let a=e[n++],o=e[n++],s=e[n++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let a=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return t.join(``)},Lu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`,get ENCODED_VALS(){return this.ENCODED_VALS_BASE+`+/=`},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+`-_.`},HAS_NATIVE_SUPPORT:typeof atob==`function`,encodeByteArray(e,t){if(!Array.isArray(e))throw Error(`encodeByteArray takes an array as a parameter`);this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){let i=e[t],a=t+1<e.length,o=a?e[t+1]:0,s=t+2<e.length,c=s?e[t+2]:0,l=i>>2,u=(i&3)<<4|o>>4,d=(o&15)<<2|c>>6,f=c&63;s||(f=64,a||(d=64)),r.push(n[l],n[u],n[d],n[f])}return r.join(``)},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Fu(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Iu(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){let i=n[e.charAt(t++)],a=t<e.length?n[e.charAt(t)]:0;++t;let o=t<e.length?n[e.charAt(t)]:64;++t;let s=t<e.length?n[e.charAt(t)]:64;if(++t,i==null||a==null||o==null||s==null)throw new Ru;let c=i<<2|a>>4;if(r.push(c),o!==64){let e=a<<4&240|o>>2;if(r.push(e),s!==64){let e=o<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Ru=class extends Error{constructor(){super(...arguments),this.name=`DecodeBase64StringError`}},zu=function(e){let t=Fu(e);return Lu.encodeByteArray(t,!0)},Bu=function(e){return zu(e).replace(/\./g,``)},Vu=function(e){try{return Lu.decodeString(e,!0)}catch(e){console.error(`base64Decode failed: `,e)}return null};function Hu(){if(typeof self<`u`)return self;if(typeof window<`u`)return window;if(typeof global<`u`)return global;throw Error(`Unable to locate global object.`)}var Uu=()=>Hu().__FIREBASE_DEFAULTS__,Wu=()=>{if(typeof process>`u`)return;let e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Gu=()=>{if(typeof document>`u`)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&Vu(e[1]);return t&&JSON.parse(t)},Ku=()=>{try{return Pu()||Uu()||Wu()||Gu()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},qu=e=>Ku()?.emulatorHosts?.[e],Ju=e=>{let t=qu(e);if(!t)return;let n=t.lastIndexOf(`:`);if(n<=0||n+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return t[0]===`[`?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Yu=()=>Ku()?.config,Xu=e=>Ku()?.[`_${e}`],Zu=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e==`function`&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}};function Qu(e){try{return(e.startsWith(`http://`)||e.startsWith(`https://`)?new URL(e).hostname:e).endsWith(`.cloudworkstations.dev`)}catch{return!1}}async function $u(e){return(await fetch(e,{credentials:`include`})).ok}function ed(e,t){if(e.uid)throw Error(`The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.`);let n={alg:`none`,type:`JWT`},r=t||`demo-project`,i=e.iat||0,a=e.sub||e.user_id;if(!a)throw Error(`mockUserToken must contain 'sub' or 'user_id' field!`);let o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:`custom`,identities:{}},...e};return[Bu(JSON.stringify(n)),Bu(JSON.stringify(o)),``].join(`.`)}var td={};function nd(){let e={prod:[],emulator:[]};for(let t of Object.keys(td))td[t]?e.emulator.push(t):e.prod.push(t);return e}function rd(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement(`div`),t.setAttribute(`id`,e),n=!0),{created:n,element:t}}var id=!1;function ad(e,t){if(typeof window>`u`||typeof document>`u`||!Qu(window.location.host)||td[e]===t||td[e]||id)return;td[e]=t;function n(e){return`__firebase__banner__${e}`}let r=`__firebase__banner`,i=nd().prod.length>0;function a(){let e=document.getElementById(r);e&&e.remove()}function o(e){e.style.display=`flex`,e.style.background=`#7faaf0`,e.style.position=`fixed`,e.style.bottom=`5px`,e.style.left=`5px`,e.style.padding=`.5em`,e.style.borderRadius=`5px`,e.style.alignItems=`center`}function s(e,t){e.setAttribute(`width`,`24`),e.setAttribute(`id`,t),e.setAttribute(`height`,`24`),e.setAttribute(`viewBox`,`0 0 24 24`),e.setAttribute(`fill`,`none`),e.style.marginLeft=`-6px`}function c(){let e=document.createElement(`span`);return e.style.cursor=`pointer`,e.style.marginLeft=`16px`,e.style.fontSize=`24px`,e.innerHTML=` &times;`,e.onclick=()=>{id=!0,a()},e}function l(e,t){e.setAttribute(`id`,t),e.innerText=`Learn more`,e.href=`https://firebase.google.com/docs/studio/preview-apps#preview-backend`,e.setAttribute(`target`,`__blank`),e.style.paddingLeft=`5px`,e.style.textDecoration=`underline`}function u(){let e=rd(r),t=n(`text`),a=document.getElementById(t)||document.createElement(`span`),u=n(`learnmore`),d=document.getElementById(u)||document.createElement(`a`),f=n(`preprendIcon`),p=document.getElementById(f)||document.createElementNS(`http://www.w3.org/2000/svg`,`svg`);if(e.created){let t=e.element;o(t),l(d,u);let n=c();s(p,f),t.append(p,a,d,n),document.body.appendChild(t)}i?(a.innerText=`Preview backend disconnected.`,p.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(p.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,a.innerText=`Preview backend running in this workspace.`),a.setAttribute(`id`,t)}document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,u):u()}function od(){return typeof navigator<`u`&&typeof navigator.userAgent==`string`?navigator.userAgent:``}function sd(){return typeof window<`u`&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(od())}function cd(){let e=Ku()?.forceEnvironment;if(e===`node`)return!0;if(e===`browser`)return!1;try{return Object.prototype.toString.call(global.process)===`[object process]`}catch{return!1}}function ld(){return typeof navigator<`u`&&navigator.userAgent===`Cloudflare-Workers`}function ud(){let e=typeof chrome==`object`?chrome.runtime:typeof browser==`object`?browser.runtime:void 0;return typeof e==`object`&&e.id!==void 0}function dd(){return typeof navigator==`object`&&navigator.product===`ReactNative`}function fd(){let e=od();return e.indexOf(`MSIE `)>=0||e.indexOf(`Trident/`)>=0}function pd(){return!cd()&&!!navigator.userAgent&&navigator.userAgent.includes(`Safari`)&&!navigator.userAgent.includes(`Chrome`)}function md(){try{return typeof indexedDB==`object`}catch{return!1}}function hd(){return new Promise((e,t)=>{try{let n=!0,r=`validate-browser-context-for-indexeddb-analytics-module`,i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||``)}}catch(e){t(e)}})}var gd=`FirebaseError`,_d=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=gd,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vd.prototype.create)}},vd=class{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){let n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?yd(i,n):`Error`;return new _d(r,`${this.serviceName}: ${a} (${r}).`,n)}};function yd(e,t){return e.replace(bd,(e,n)=>{let r=t[n];return r==null?`<${n}?>`:String(r)})}var bd=/\{\$([^}]+)}/g;function xd(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Sd(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let n=e[i],a=t[i];if(Cd(n)&&Cd(a)){if(!Sd(n,a))return!1}else if(n!==a)return!1}for(let e of r)if(!n.includes(e))return!1;return!0}function Cd(e){return typeof e==`object`&&!!e}function wd(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+`=`+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+`=`+encodeURIComponent(r));return t.length?`&`+t.join(`&`):``}function Td(e){let t={};return e.replace(/^\?/,``).split(`&`).forEach(e=>{if(e){let[n,r]=e.split(`=`);t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function Ed(e){let t=e.indexOf(`?`);if(!t)return``;let n=e.indexOf(`#`,t);return e.substring(t,n>0?n:void 0)}function Dd(e,t){let n=new Od(e,t);return n.subscribe.bind(n)}var Od=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw Error(`Missing Observer.`);r=kd(e,[`next`,`error`,`complete`])?e:{next:e,error:t,complete:n},r.next===void 0&&(r.next=Ad),r.error===void 0&&(r.error=Ad),r.complete===void 0&&(r.complete=Ad);let i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],--this.observerCount,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(e){typeof console<`u`&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function kd(e,t){if(typeof e!=`object`||!e)return!1;for(let n of t)if(n in e&&typeof e[n]==`function`)return!0;return!1}function Ad(){}function jd(e){return e&&e._delegate?e._delegate:e}var Md=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode=`LAZY`,this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}},Nd=`[DEFAULT]`,Pd=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new Zu;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(n)return null;throw e}else if(n)return null;else throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(Id(e))try{this.getOrInitializeService({instanceIdentifier:Nd})}catch{}for(let[e,t]of this.instancesDeferred.entries()){let n=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch{}}}}clearInstance(e=Nd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>`INTERNAL`in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>`_delete`in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Nd){return this.instances.has(e)}getOptions(e=Nd){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(let[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){let n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);let i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){let n=this.onInitCallbacks.get(t);if(n)for(let r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Fd(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Nd){return this.component?this.component.multipleInstances?e:Nd:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!==`EXPLICIT`}};function Fd(e){return e===Nd?void 0:e}function Id(e){return e.instantiationMode===`EAGER`}var Ld=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Pd(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}},Rd=[],zd;(function(e){e[e.DEBUG=0]=`DEBUG`,e[e.VERBOSE=1]=`VERBOSE`,e[e.INFO=2]=`INFO`,e[e.WARN=3]=`WARN`,e[e.ERROR=4]=`ERROR`,e[e.SILENT=5]=`SILENT`})(zd||={});var Bd={debug:zd.DEBUG,verbose:zd.VERBOSE,info:zd.INFO,warn:zd.WARN,error:zd.ERROR,silent:zd.SILENT},Vd=zd.INFO,Hd={[zd.DEBUG]:`log`,[zd.VERBOSE]:`log`,[zd.INFO]:`info`,[zd.WARN]:`warn`,[zd.ERROR]:`error`},Ud=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=Hd[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)},Wd=class{constructor(e){this.name=e,this._logLevel=Vd,this._logHandler=Ud,this._userLogHandler=null,Rd.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in zd))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e==`string`?Bd[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!=`function`)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,zd.DEBUG,...e),this._logHandler(this,zd.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,zd.VERBOSE,...e),this._logHandler(this,zd.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,zd.INFO,...e),this._logHandler(this,zd.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,zd.WARN,...e),this._logHandler(this,zd.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,zd.ERROR,...e),this._logHandler(this,zd.ERROR,...e)}},Gd=(e,t)=>t.some(t=>e instanceof t),Kd,qd;function Jd(){return Kd||=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]}function Yd(){return qd||=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]}var Xd=new WeakMap,Zd=new WeakMap,Qd=new WeakMap,$d=new WeakMap,ef=new WeakMap;function tf(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`success`,i),e.removeEventListener(`error`,a)},i=()=>{t(cf(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener(`success`,i),e.addEventListener(`error`,a)});return t.then(t=>{t instanceof IDBCursor&&Xd.set(t,e)}).catch(()=>{}),ef.set(t,e),t}function nf(e){if(Zd.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`complete`,i),e.removeEventListener(`error`,a),e.removeEventListener(`abort`,a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException(`AbortError`,`AbortError`)),r()};e.addEventListener(`complete`,i),e.addEventListener(`error`,a),e.addEventListener(`abort`,a)});Zd.set(e,t)}var rf={get(e,t,n){if(e instanceof IDBTransaction){if(t===`done`)return Zd.get(e);if(t===`objectStoreNames`)return e.objectStoreNames||Qd.get(e);if(t===`store`)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cf(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t===`done`||t===`store`)?!0:t in e}};function af(e){rf=e(rf)}function of(e){return e===IDBDatabase.prototype.transaction&&!(`objectStoreNames`in IDBTransaction.prototype)?function(t,...n){let r=e.call(lf(this),t,...n);return Qd.set(r,t.sort?t.sort():[t]),cf(r)}:Yd().includes(e)?function(...t){return e.apply(lf(this),t),cf(Xd.get(this))}:function(...t){return cf(e.apply(lf(this),t))}}function sf(e){return typeof e==`function`?of(e):(e instanceof IDBTransaction&&nf(e),Gd(e,Jd())?new Proxy(e,rf):e)}function cf(e){if(e instanceof IDBRequest)return tf(e);if($d.has(e))return $d.get(e);let t=sf(e);return t!==e&&($d.set(e,t),ef.set(t,e)),t}var lf=e=>ef.get(e);function uf(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){let o=indexedDB.open(e,t),s=cf(o);return r&&o.addEventListener(`upgradeneeded`,e=>{r(cf(o.result),e.oldVersion,e.newVersion,cf(o.transaction),e)}),n&&o.addEventListener(`blocked`,e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{a&&e.addEventListener(`close`,()=>a()),i&&e.addEventListener(`versionchange`,e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}var df=[`get`,`getKey`,`getAll`,`getAllKeys`,`count`],ff=[`put`,`add`,`delete`,`clear`],pf=new Map;function mf(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t==`string`))return;if(pf.get(t))return pf.get(t);let n=t.replace(/FromIndex$/,``),r=t!==n,i=ff.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||df.includes(n)))return;let a=async function(e,...t){let a=this.transaction(e,i?`readwrite`:`readonly`),o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&a.done]))[0]};return pf.set(t,a),a}af(e=>({...e,get:(t,n,r)=>mf(t,n)||e.get(t,n,r),has:(t,n)=>!!mf(t,n)||e.has(t,n)}));var hf=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(gf(e)){let t=e.getImmediate();return`${t.library}/${t.version}`}else return null}).filter(e=>e).join(` `)}};function gf(e){return e.getComponent()?.type===`VERSION`}var _f=`@firebase/app`,vf=`0.14.8`,yf=new Wd(`@firebase/app`),bf=`@firebase/app-compat`,xf=`@firebase/analytics-compat`,Sf=`@firebase/analytics`,Cf=`@firebase/app-check-compat`,wf=`@firebase/app-check`,Tf=`@firebase/auth`,Ef=`@firebase/auth-compat`,Df=`@firebase/database`,Of=`@firebase/data-connect`,kf=`@firebase/database-compat`,Af=`@firebase/functions`,jf=`@firebase/functions-compat`,Mf=`@firebase/installations`,Nf=`@firebase/installations-compat`,Pf=`@firebase/messaging`,Ff=`@firebase/messaging-compat`,If=`@firebase/performance`,Lf=`@firebase/performance-compat`,Rf=`@firebase/remote-config`,zf=`@firebase/remote-config-compat`,Bf=`@firebase/storage`,Vf=`@firebase/storage-compat`,Hf=`@firebase/firestore`,Uf=`@firebase/ai`,Wf=`@firebase/firestore-compat`,Gf=`firebase`,Kf=`12.9.0`,qf=`[DEFAULT]`,Jf={[_f]:`fire-core`,[bf]:`fire-core-compat`,[Sf]:`fire-analytics`,[xf]:`fire-analytics-compat`,[wf]:`fire-app-check`,[Cf]:`fire-app-check-compat`,[Tf]:`fire-auth`,[Ef]:`fire-auth-compat`,[Df]:`fire-rtdb`,[Of]:`fire-data-connect`,[kf]:`fire-rtdb-compat`,[Af]:`fire-fn`,[jf]:`fire-fn-compat`,[Mf]:`fire-iid`,[Nf]:`fire-iid-compat`,[Pf]:`fire-fcm`,[Ff]:`fire-fcm-compat`,[If]:`fire-perf`,[Lf]:`fire-perf-compat`,[Rf]:`fire-rc`,[zf]:`fire-rc-compat`,[Bf]:`fire-gcs`,[Vf]:`fire-gcs-compat`,[Hf]:`fire-fst`,[Wf]:`fire-fst-compat`,[Uf]:`fire-vertex`,"fire-js":`fire-js`,[Gf]:`fire-js-all`},Yf=new Map,Xf=new Map,Zf=new Map;function Qf(e,t){try{e.container.addComponent(t)}catch(n){yf.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function $f(e){let t=e.name;if(Zf.has(t))return yf.debug(`There were multiple attempts to register component ${t}.`),!1;Zf.set(t,e);for(let t of Yf.values())Qf(t,e);for(let t of Xf.values())Qf(t,e);return!0}function ep(e,t){let n=e.container.getProvider(`heartbeat`).getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function tp(e){return e==null?!1:e.settings!==void 0}var np=new vd(`app`,`Firebase`,{"no-app":`No Firebase App '{$appName}' has been created - call initializeApp() first`,"bad-app-name":`Illegal App name: '{$appName}'`,"duplicate-app":`Firebase App named '{$appName}' already exists with different options or config`,"app-deleted":`Firebase App named '{$appName}' already deleted`,"server-app-deleted":`Firebase Server App has been deleted`,"no-options":`Need to provide options, when not being deployed to hosting via source.`,"invalid-app-argument":`firebase.{$appName}() takes either no argument or a Firebase App instance.`,"invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":`Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.`,"idb-get":`Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.`,"idb-set":`Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.`,"idb-delete":`Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.`,"finalization-registry-not-supported":`FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.`,"invalid-server-app-environment":`FirebaseServerApp is not for use in browser environments.`}),rp=class{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Md(`app`,()=>this,`PUBLIC`))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw np.create(`app-deleted`,{appName:this._name})}},ip=Kf;function ap(e,t={}){let n=e;typeof t!=`object`&&(t={name:t});let r={name:qf,automaticDataCollectionEnabled:!0,...t},i=r.name;if(typeof i!=`string`||!i)throw np.create(`bad-app-name`,{appName:String(i)});if(n||=Yu(),!n)throw np.create(`no-options`);let a=Yf.get(i);if(a){if(Sd(n,a.options)&&Sd(r,a.config))return a;throw np.create(`duplicate-app`,{appName:i})}let o=new Ld(i);for(let e of Zf.values())o.addComponent(e);let s=new rp(n,r,o);return Yf.set(i,s),s}function op(e=qf){let t=Yf.get(e);if(!t&&e===`[DEFAULT]`&&Yu())return ap();if(!t)throw np.create(`no-app`,{appName:e});return t}function sp(e,t,n){let r=Jf[e]??e;n&&(r+=`-${n}`);let i=r.match(/\s|\//),a=t.match(/\s|\//);if(i||a){let e=[`Unable to register library "${r}" with version "${t}":`];i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&e.push(`and`),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),yf.warn(e.join(` `));return}$f(new Md(`${r}-version`,()=>({library:r,version:t}),`VERSION`))}var cp=`firebase-heartbeat-database`,lp=1,up=`firebase-heartbeat-store`,dp=null;function fp(){return dp||=uf(cp,lp,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(up)}catch(e){console.warn(e)}}}}).catch(e=>{throw np.create(`idb-open`,{originalErrorMessage:e.message})}),dp}async function pp(e){try{let t=(await fp()).transaction(up),n=await t.objectStore(up).get(hp(e));return await t.done,n}catch(e){if(e instanceof _d)yf.warn(e.message);else{let t=np.create(`idb-get`,{originalErrorMessage:e?.message});yf.warn(t.message)}}}async function mp(e,t){try{let n=(await fp()).transaction(up,`readwrite`);await n.objectStore(up).put(t,hp(e)),await n.done}catch(e){if(e instanceof _d)yf.warn(e.message);else{let t=np.create(`idb-set`,{originalErrorMessage:e?.message});yf.warn(t.message)}}}function hp(e){return`${e.name}!${e.options.appId}`}var gp=1024,_p=30,vp=class{constructor(e){this.container=e,this._heartbeatsCache=null,this._storage=new xp(this.container.getProvider(`app`).getImmediate()),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{let e=this.container.getProvider(`platform-logger`).getImmediate().getPlatformInfoString(),t=yp();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>_p){let e=Cp(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){yf.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return``;let e=yp(),{heartbeatsToSend:t,unsentEntries:n}=bp(this._heartbeatsCache.heartbeats),r=Bu(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return yf.warn(e),``}}};function yp(){return new Date().toISOString().substring(0,10)}function bp(e,t=gp){let n=[],r=e.slice();for(let i of e){let e=n.find(e=>e.agent===i.agent);if(!e){if(n.push({agent:i.agent,dates:[i.date]}),Sp(n)>t){n.pop();break}}else if(e.dates.push(i.date),Sp(n)>t){e.dates.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var xp=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return md()?hd().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let e=await pp(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return mp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return mp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}else return}};function Sp(e){return Bu(JSON.stringify({version:2,heartbeats:e})).length}function Cp(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function wp(e){$f(new Md(`platform-logger`,e=>new hf(e),`PRIVATE`)),$f(new Md(`heartbeat`,e=>new vp(e),`PRIVATE`)),sp(_f,vf,e),sp(_f,vf,`esm2020`),sp(`fire-js`,``)}wp(``),sp(`firebase`,`12.9.0`,`app`);var Tp=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},Ep={},Dp,Op;(function(){var e;function t(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(e,t,n){n||=0;let r=Array(16);if(typeof t==`string`)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let a=e.g[3],o;o=t+(a^n&(i^a))+r[0]+3614090360&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[1]+3905402710&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[2]+606105819&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[5]+1200080426&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[6]+2821735955&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[9]+2336552879&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[10]+4294925233&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[13]+4254626195&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[14]+2792965006&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(i^a&(n^i))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[6]+3225465664&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[11]+643717713&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[10]+38016083&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[15]+3634488961&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[14]+3275163606&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[3]+4107603335&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[2]+4243563512&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[7]+1735328473&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(n^i^a)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[8]+2272392833&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[11]+1839030562&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[4]+1272893353&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[7]+4139469664&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[0]+3936430074&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[3]+3572445317&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[12]+3873151461&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[15]+530742520&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(i^(n|~a))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[7]+1126891415&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[14]+2878612391&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[3]+2399980690&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[10]+4293915773&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[15]+4264355552&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[6]+2734768916&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[11]+3174756917&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[2]+718787259&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}r.prototype.v=function(e,t){t===void 0&&(t=e.length);let n=t-this.blockSize,r=this.C,a=this.h,o=0;for(;o<t;){if(a==0)for(;o<=n;)i(this,e,o),o+=this.blockSize;if(typeof e==`string`){for(;o<t;)if(r[a++]=e.charCodeAt(o++),a==this.blockSize){i(this,r),a=0;break}}else for(;o<t;)if(r[a++]=e[o++],a==this.blockSize){i(this,r),a=0;break}}this.h=a,this.o+=t},r.prototype.A=function(){var e=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=this.o*8;for(var n=e.length-8;n<e.length;++n)e[n]=t&255,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};function a(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}function o(e,t){this.h=t;let n=[],r=!0;for(let i=e.length-1;i>=0;i--){let a=e[i]|0;r&&a==t||(n[i]=a,r=!1)}this.g=n}var s={};function c(e){return-128<=e&&e<128?a(e,function(e){return new o([e|0],e<0?-1:0)}):new o([e|0],e<0?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return d;if(e<0)return g(l(-e));let t=[],n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new o(t,0)}function u(e,t){if(e.length==0)throw Error(`number format error: empty string`);if(t||=10,t<2||36<t)throw Error(`radix out of range: `+t);if(e.charAt(0)==`-`)return g(u(e.substring(1),t));if(e.indexOf(`-`)>=0)throw Error(`number format error: interior "-" character`);let n=l(t**8),r=d;for(let a=0;a<e.length;a+=8){var i=Math.min(8,e.length-a);let o=parseInt(e.substring(a,a+i),t);i<8?(i=l(t**+i),r=r.j(i).add(l(o))):(r=r.j(n),r=r.add(l(o)))}return r}var d=c(0),f=c(1),p=c(16777216);e=o.prototype,e.m=function(){if(h(this))return-g(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){let r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(e||=10,e<2||36<e)throw Error(`radix out of range: `+e);if(m(this))return`0`;if(h(this))return`-`+g(this).toString(e);let t=l(e**6);var n=this;let r=``;for(;;){let i=b(n,t).g;n=_(n,i.j(t));let a=((n.g.length>0?n.g[0]:n.h)>>>0).toString(e);if(n=i,m(n))return a+r;for(;a.length<6;)a=`0`+a;r=a+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h};function m(e){if(e.h!=0)return!1;for(let t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function h(e){return e.h==-1}e.l=function(e){return e=_(this,e),h(e)?-1:m(e)?0:1};function g(e){let t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new o(n,~e.h).add(f)}e.abs=function(){return h(this)?g(this):this},e.add=function(e){let t=Math.max(this.g.length,e.g.length),n=[],r=0;for(let i=0;i<=t;i++){let t=r+(this.i(i)&65535)+(e.i(i)&65535),a=(t>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=a>>>16,t&=65535,a&=65535,n[i]=a<<16|t}return new o(n,n[n.length-1]&-2147483648?-1:0)};function _(e,t){return e.add(g(t))}e.j=function(e){if(m(this)||m(e))return d;if(h(this))return h(e)?g(this).j(g(e)):g(g(this).j(e));if(h(e))return g(this.j(g(e)));if(this.l(p)<0&&e.l(p)<0)return l(this.m()*e.m());let t=this.g.length+e.g.length,n=[];for(var r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){let i=this.i(r)>>>16,a=this.i(r)&65535,o=e.i(t)>>>16,s=e.i(t)&65535;n[2*r+2*t]+=a*s,v(n,2*r+2*t),n[2*r+2*t+1]+=i*s,v(n,2*r+2*t+1),n[2*r+2*t+1]+=a*o,v(n,2*r+2*t+1),n[2*r+2*t+2]+=i*o,v(n,2*r+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new o(n,0)};function v(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function b(e,t){if(m(t))throw Error(`division by zero`);if(m(e))return new y(d,d);if(h(e))return t=b(g(e),t),new y(g(t.g),g(t.h));if(h(t))return t=b(e,g(t)),new y(g(t.g),t.h);if(e.g.length>30){if(h(e)||h(t))throw Error(`slowDivide_ only works with positive integers.`);for(var n=f,r=t;r.l(e)<=0;)n=x(n),r=x(r);var i=S(n,1),a=S(r,1);for(r=S(r,2),n=S(n,2);!m(r);){var o=a.add(r);o.l(e)<=0&&(i=i.add(n),a=o),r=S(r,1),n=S(n,1)}return t=_(e,i.j(t)),new y(i,t)}for(i=d;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=Math.ceil(Math.log(n)/Math.LN2),r=r<=48?1:2**(r-48),a=l(n),o=a.j(t);h(o)||o.l(e)>0;)n-=r,a=l(n),o=a.j(t);m(a)&&(a=f),i=i.add(a),e=_(e,o)}return new y(i,e)}e.B=function(e){return b(this,e).h},e.and=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new o(n,this.h&e.h)},e.or=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new o(n,this.h|e.h)},e.xor=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new o(n,this.h^e.h)};function x(e){let t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new o(n,e.h)}function S(e,t){let n=t>>5;t%=32;let r=e.g.length-n,i=[];for(let a=0;a<r;a++)i[a]=t>0?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new o(i,e.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Op=Ep.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,Dp=Ep.Integer=o}).apply(Tp===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:Tp);var kp=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},Ap={},jp,Mp,Np,Pp,Fp,Ip,Lp,Rp;(function(){var e,t=Object.defineProperty;function n(e){e=[typeof globalThis==`object`&&globalThis,e,typeof window==`object`&&window,typeof self==`object`&&self,typeof kp==`object`&&kp];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error(`Cannot find global object`)}var r=n(this);function i(e,n){if(n)a:{var i=r;e=e.split(`.`);for(var a=0;a<e.length-1;a++){var o=e[a];if(!(o in i))break a;i=i[o]}e=e[e.length-1],a=i[e],n=n(a),n!=a&&n!=null&&t(i,e,{configurable:!0,writable:!0,value:n})}}i(`Symbol.dispose`,function(e){return e||Symbol(`Symbol.dispose`)}),i(`Array.prototype.values`,function(e){return e||function(){return this[Symbol.iterator]()}}),i(`Object.entries`,function(e){return e||function(e){var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push([n,e[n]]);return t}});var a=a||{},o=this||self;function s(e){var t=typeof e;return t==`object`&&e!=null||t==`function`}function c(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return l=c,l.apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}var f=typeof AsyncContext<`u`&&typeof AsyncContext.Snapshot==`function`?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function p(e){let t=e.length;if(t>0){let n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function m(e,t){for(let t=1;t<arguments.length;t++){let r=arguments[t];var n=typeof r;if(n=n==`object`?r?Array.isArray(r)?`array`:n:`null`:n,n==`array`||n==`object`&&typeof r.length==`number`){n=e.length||0;let t=r.length||0;e.length=n+t;for(let i=0;i<t;i++)e[n+i]=r[i]}else e.push(r)}}class h{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function g(e){o.setTimeout(()=>{throw e},0)}function _(){var e=C;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class v{constructor(){this.h=this.g=null}add(e,t){let n=y.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}var y=new h(()=>new b,e=>e.reset());class b{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let x,S=!1,C=new v,w=()=>{let e=Promise.resolve(void 0);x=()=>{e.then(T)}};function T(){for(var e;e=_();){try{e.h.call(e.g)}catch(e){g(e)}var t=y;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}S=!1}function E(){this.u=this.u,this.C=this.C}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},`passive`,{get:function(){e=!0}});try{let e=()=>{};o.addEventListener(`test`,e,t),o.removeEventListener(`test`,e,t)}catch{}return e}();function ee(e){return/^[\s\xa0]*$/.test(e)}function k(e,t){D.call(this,e?e.type:``),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key=``,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType=``,this.i=null,e&&this.init(e,t)}d(k,D),k.prototype.init=function(e,t){let n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget,t||(n==`mouseover`?t=e.fromElement:n==`mouseout`&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=r.clientX===void 0?r.pageX:r.clientX,this.clientY=r.clientY===void 0?r.pageY:r.clientY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX===void 0?e.pageX:e.clientX,this.clientY=e.clientY===void 0?e.pageY:e.clientY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||``,this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&k.Z.h.call(this)},k.prototype.h=function(){k.Z.h.call(this);let e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var te=`closure_listenable_`+(Math.random()*1e6|0),A=0;function ne(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++A,this.da=this.fa=!1}function j(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function M(e,t,n){for(let r in e)t.call(n,e[r],r,e)}function N(e,t){for(let n in e)t.call(void 0,e[n],n,e)}function P(e){let t={};for(let n in e)t[n]=e[n];return t}let re=`constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf`.split(` `);function F(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<re.length;t++)n=re[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function I(e){this.src=e,this.g={},this.h=0}I.prototype.add=function(e,t,n,r,i){let a=e.toString();e=this.g[a],e||(e=this.g[a]=[],this.h++);let o=ae(e,t,r,i);return o>-1?(t=e[o],n||(t.fa=!1)):(t=new ne(t,this.src,a,!!r,i),t.fa=n,e.push(t)),t};function ie(e,t){let n=t.type;if(n in e.g){var r=e.g[n],i=Array.prototype.indexOf.call(r,t,void 0),a;(a=i>=0)&&Array.prototype.splice.call(r,i,1),a&&(j(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function ae(e,t,n,r){for(let i=0;i<e.length;++i){let a=e[i];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}var oe=`closure_lm_`+(Math.random()*1e6|0),se={};function ce(e,t,n,r,i){if(r&&r.once)return de(e,t,n,r,i);if(Array.isArray(t)){for(let a=0;a<t.length;a++)ce(e,t[a],n,r,i);return null}return n=ve(n),e&&e[te]?e.J(t,n,s(r)?!!r.capture:!!r,i):le(e,t,n,!1,r,i)}function le(e,t,n,r,i,a){if(!t)throw Error(`Invalid event type`);let o=s(i)?!!i.capture:!!i,c=ge(e);if(c||(e[oe]=c=new I(e)),n=c.add(t,n,r,o,a),n.proxy)return n;if(r=ue(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=o),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(me(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error(`addEventListener and attachEvent are unavailable.`);return n}function ue(){function e(n){return t.call(e.src,e.listener,n)}let t=he;return e}function de(e,t,n,r,i){if(Array.isArray(t)){for(let a=0;a<t.length;a++)de(e,t[a],n,r,i);return null}return n=ve(n),e&&e[te]?e.K(t,n,s(r)?!!r.capture:!!r,i):le(e,t,n,!0,r,i)}function fe(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)fe(e,t[a],n,r,i);else r=s(r)?!!r.capture:!!r,n=ve(n),e&&e[te]?(e=e.i,a=String(t).toString(),a in e.g&&(t=e.g[a],n=ae(t,n,r,i),n>-1&&(j(t[n]),Array.prototype.splice.call(t,n,1),t.length==0&&(delete e.g[a],e.h--)))):(e&&=ge(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ae(t,n,r,i)),(n=e>-1?t[e]:null)&&pe(n))}function pe(e){if(typeof e!=`number`&&e&&!e.da){var t=e.src;if(t&&t[te])ie(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(me(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ge(t))?(ie(n,e),n.h==0&&(n.src=null,t[oe]=null)):j(e)}}}function me(e){return e in se?se[e]:se[e]=`on`+e}function he(e,t){if(e.da)e=!0;else{t=new k(t,this);let n=e.listener,r=e.ha||e.src;e.fa&&pe(e),e=n.call(r,t)}return e}function ge(e){return e=e[oe],e instanceof I?e:null}var _e=`__closure_events_fn_`+(Math.random()*1e9>>>0);function ve(e){return typeof e==`function`?e:(e[_e]||(e[_e]=function(t){return e.handleEvent(t)}),e[_e])}function ye(){E.call(this),this.i=new I(this),this.M=this,this.G=null}d(ye,E),ye.prototype[te]=!0,ye.prototype.removeEventListener=function(e,t,n,r){fe(this,e,t,n,r)};function be(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,typeof t==`string`)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var i=t;t=new D(r,e),F(t,i)}i=!0;let a,o;if(n)for(o=n.length-1;o>=0;o--)a=t.g=n[o],i=xe(a,r,!0,t)&&i;if(a=t.g=e,i=xe(a,r,!0,t)&&i,i=xe(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)a=t.g=n[o],i=xe(a,r,!1,t)&&i}ye.prototype.N=function(){if(ye.Z.N.call(this),this.i){var e=this.i;for(let t in e.g){let n=e.g[t];for(let e=0;e<n.length;e++)j(n[e]);delete e.g[t],e.h--}}this.G=null},ye.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ye.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function xe(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();let i=!0;for(let a=0;a<t.length;++a){let o=t[a];if(o&&!o.da&&o.capture==n){let t=o.listener,n=o.ha||o.src;o.fa&&ie(e.i,o),i=t.call(n,r)!==!1&&i}}return i&&!r.defaultPrevented}function Se(e,t){if(typeof e!=`function`)if(e&&typeof e.handleEvent==`function`)e=l(e.handleEvent,e);else throw Error(`Invalid listener argument`);return Number(t)>2147483647?-1:o.setTimeout(e,t||0)}function Ce(e){e.g=Se(()=>{e.g=null,e.i&&(e.i=!1,Ce(e))},e.l);let t=e.h;e.h=null,e.m.apply(null,t)}class we extends E{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:Ce(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Te(e){E.call(this),this.h=e,this.g={}}d(Te,E);var Ee=[];function De(e){M(e.g,function(e,t){this.g.hasOwnProperty(t)&&pe(e)},e),e.g={}}Te.prototype.N=function(){Te.Z.N.call(this),De(this)},Te.prototype.handleEvent=function(){throw Error(`EventHandler.handleEvent not implemented`)};var Oe=o.JSON.stringify,ke=o.JSON.parse,Ae=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function je(){}function Me(){}var Ne={OPEN:`a`,hb:`b`,ERROR:`c`,tb:`d`};function Pe(){D.call(this,`d`)}d(Pe,D);function Fe(){D.call(this,`c`)}d(Fe,D);var Ie={},Le=null;function Re(){return Le||=new ye}Ie.Ia=`serverreachability`;function ze(e){D.call(this,Ie.Ia,e)}d(ze,D);function Be(e){let t=Re();be(t,new ze(t))}Ie.STAT_EVENT=`statevent`;function Ve(e,t){D.call(this,Ie.STAT_EVENT,e),this.stat=t}d(Ve,D);function He(e){let t=Re();be(t,new Ve(t,e))}Ie.Ja=`timingevent`;function Ue(e,t){D.call(this,Ie.Ja,e),this.size=t}d(Ue,D);function We(e,t){if(typeof e!=`function`)throw Error(`Fn must not be null and must be a function`);return o.setTimeout(function(){e()},t)}function Ge(){this.g=!0}Ge.prototype.ua=function(){this.g=!1};function Ke(e,t,n,r,i,a){e.info(function(){if(e.g)if(a){var o=``,s=a.split(`&`);for(let e=0;e<s.length;e++){var c=s[e].split(`=`);if(c.length>1){let e=c[0];c=c[1];let t=e.split(`_`);o=t.length>=2&&t[1]==`type`?o+(e+`=`+c+`&`):o+(e+`=redacted&`)}}}else o=null;else o=a;return`XMLHTTP REQ (`+r+`) [attempt `+i+`]: `+t+`
`+n+`
`+o})}function qe(e,t,n,r,i,a,o){e.info(function(){return`XMLHTTP RESP (`+r+`) [ attempt `+i+`]: `+t+`
`+n+`
`+a+` `+o})}function Je(e,t,n,r){e.info(function(){return`XMLHTTP TEXT (`+t+`): `+Xe(e,n)+(r?` `+r:``)})}function Ye(e,t){e.info(function(){return`TIMEOUT: `+t})}Ge.prototype.info=function(){};function Xe(e,t){if(!e.g)return t;if(!t)return null;try{let a=JSON.parse(t);if(a){for(e=0;e<a.length;e++)if(Array.isArray(a[e])){var n=a[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if(i!=`noop`&&i!=`stop`&&i!=`close`)for(let e=1;e<r.length;e++)r[e]=``}}}}return Oe(a)}catch{return t}}var Ze={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},R={ib:`complete`,Fb:`success`,ERROR:`error`,Ga:`abort`,xb:`ready`,yb:`readystatechange`,TIMEOUT:`timeout`,sb:`incrementaldata`,wb:`progress`,lb:`downloadprogress`,Nb:`uploadprogress`},Qe;function $e(){}d($e,je),$e.prototype.g=function(){return new XMLHttpRequest},Qe=new $e;function et(e){return encodeURIComponent(String(e))}function tt(e){var t=1;e=e.split(`:`);let n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(`:`)),n}function nt(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new Te(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new rt}function rt(){this.i=null,this.g=``,this.h=!1}var it={},at={};function ot(e,t,n){e.M=1,e.A=jt(z(t)),e.u=n,e.R=!0,st(e,null)}function st(e,t){e.F=Date.now(),dt(e),e.B=z(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),Gt(n.i,`t`,r),e.C=0,n=e.j.L,e.h=new rt,e.g=In(e.j,n?t:null,!e.u),e.P>0&&(e.O=new we(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i=`readystatechange`;Array.isArray(i)||(i&&(Ee[0]=i.toString()),i=Ee);for(let e=0;e<i.length;e++){let a=ce(n,i[e],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.J?P(e.J):{},e.u?(e.v||=`POST`,t[`Content-Type`]=`application/x-www-form-urlencoded`,e.g.ea(e.B,e.v,e.u,t)):(e.v=`GET`,e.g.ea(e.B,e.v,null,t)),Be(),Ke(e.i,e.v,e.B,e.l,e.S,e.u)}nt.prototype.ba=function(e){e=e.target;let t=this.O;t&&mn(e)==3?t.j():this.Y(e)},nt.prototype.Y=function(e){try{if(e==this.g)a:{let s=mn(this.g),c=this.g.ya(),l=this.g.ca();if(!(s<3)&&(s!=3||this.g&&(this.h.h||this.g.la()||hn(this.g)))){this.K||s!=4||c==7||Be(c==8||l<=0?3:2),pt(this);var t=this.g.ca();this.X=t;var n=ct(this);if(this.o=t==200,qe(this.i,this.v,this.B,this.l,this.S,s,t),this.o){if(this.U&&!this.L){b:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader(`X-HTTP-Initial-Response`):null)&&!ee(r)){var a=r;break b}}a=null}if(e=a)Je(this.i,this.l,e,`Initial handshake response via X-HTTP-Initial-Response`),this.L=!0,gt(this,e);else{this.o=!1,this.m=3,He(12),ht(this),mt(this);break a}}if(this.R){e=!0;let t;for(;!this.K&&this.C<n.length;)if(t=ut(this,n),t==at){s==4&&(this.m=4,He(14),e=!1),Je(this.i,this.l,null,`[Incomplete Response]`);break}else if(t==it){this.m=4,He(15),Je(this.i,this.l,n,`[Invalid Chunk]`),e=!1;break}else Je(this.i,this.l,t,null),gt(this,t);if(lt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),s!=4||n.length!=0||this.h.h||(this.m=1,He(16),e=!1),this.o=this.o&&e,!e)Je(this.i,this.l,n,`[Invalid Chunked Response]`),ht(this),mt(this);else if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info(`Great, no buffering proxy detected. Bytes received: `+n.length),On(o),o.P=!0,He(11))}}else Je(this.i,this.l,n,null),gt(this,n);s==4&&ht(this),this.o&&!this.K&&(s==4?jn(this.j,this):(this.o=!1,dt(this)))}else gn(this.g),t==400&&n.indexOf(`Unknown SID`)>0?(this.m=3,He(12)):(this.m=0,He(13)),ht(this),mt(this)}}}catch{}};function ct(e){if(!lt(e))return e.g.la();let t=hn(e.g);if(t===``)return``;let n=``,r=t.length,i=mn(e.g)==4;if(!e.h.i){if(typeof TextDecoder>`u`)return ht(e),mt(e),``;e.h.i=new o.TextDecoder}for(let a=0;a<r;a++)e.h.h=!0,n+=e.h.i.decode(t[a],{stream:!(i&&a==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}function lt(e){return e.g?e.v==`GET`&&e.M!=2&&e.j.Aa:!1}function ut(e,t){var n=e.C,r=t.indexOf(`
`,n);return r==-1?at:(n=Number(t.substring(n,r)),isNaN(n)?it:(r+=1,r+n>t.length?at:(t=t.slice(r,r+n),e.C=r+n,t)))}nt.prototype.cancel=function(){this.K=!0,ht(this)};function dt(e){e.T=Date.now()+e.H,ft(e,e.H)}function ft(e,t){if(e.D!=null)throw Error(`WatchDog timer not null`);e.D=We(l(e.aa,e),t)}function pt(e){e.D&&=(o.clearTimeout(e.D),null)}nt.prototype.aa=function(){this.D=null;let e=Date.now();e-this.T>=0?(Ye(this.i,this.B),this.M!=2&&(Be(),He(17)),ht(this),this.m=2,mt(this)):ft(this,this.T-e)};function mt(e){e.j.I==0||e.K||jn(e.j,e)}function ht(e){pt(e);var t=e.O;t&&typeof t.dispose==`function`&&t.dispose(),e.O=null,De(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function gt(e,t){try{var n=e.j;if(n.I!=0&&(n.g==e||xt(n.h,e))){if(!e.L&&xt(n.h,e)&&n.I==3){try{var r=n.Ba.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){a:if(!n.v){if(n.g)if(n.g.F+3e3<e.F)An(n),V(n);else break a;Dn(n),He(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&n.A==0&&!n.C&&(n.C=We(l(n.Va,n),6e3));bt(n.h)<=1&&n.ta&&(n.ta=void 0)}else Nn(n,11)}else if((e.L||n.g==e)&&An(n),!ee(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t],u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],n.I==2)if(l[0]==`c`){n.M=l[1],n.ba=l[2];let t=l[3];t!=null&&(n.ka=t,n.j.info(`VER=`+n.ka));let i=l[4];i!=null&&(n.za=i,n.j.info(`SVER=`+n.za));let u=l[5];u!=null&&typeof u==`number`&&u>0&&(r=1.5*u,n.O=r,n.j.info(`backChannelRequestTimeoutMs_=`+r)),r=n;let d=e.g;if(d){let e=d.g?d.g.getResponseHeader(`X-Client-Wire-Protocol`):null;if(e){var a=r.h;a.g||e.indexOf(`spdy`)==-1&&e.indexOf(`quic`)==-1&&e.indexOf(`h2`)==-1||(a.j=a.l,a.g=new Set,a.h&&=(St(a,a.h),null))}if(r.G){let e=d.g?d.g.getResponseHeader(`X-HTTP-Session-Id`):null;e&&(r.wa=e,At(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info(`Handshake RTT: `+n.T+`ms`)),r=n;var o=e;if(r.na=Fn(r,r.L?r.ba:null,r.W),o.L){Ct(r.h,o);var s=o,c=r.O;c&&(s.H=c),s.D&&(pt(s),dt(s)),r.g=o}else En(r);n.i.length>0&&xn(n)}else l[0]!=`stop`&&l[0]!=`close`||Nn(n,7);else n.I==3&&(l[0]==`stop`||l[0]==`close`?l[0]==`stop`?Nn(n,7):yn(n):l[0]!=`noop`&&n.l&&n.l.qa(l),n.A=0)}}Be(4)}catch{}}var _t=class{constructor(e,t){this.g=e,this.map=t}};function vt(e){this.l=e||10,o.PerformanceNavigationTiming?(e=o.performance.getEntriesByType(`navigation`),e=e.length>0&&(e[0].nextHopProtocol==`hq`||e[0].nextHopProtocol==`h2`)):e=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function yt(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function bt(e){return e.h?1:e.g?e.g.size:0}function xt(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function St(e,t){e.g?e.g.add(t):e.h=t}function Ct(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}vt.prototype.cancel=function(){if(this.i=wt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let e of this.g.values())e.cancel();this.g.clear()}};function wt(e){if(e.h!=null)return e.i.concat(e.h.G);if(e.g!=null&&e.g.size!==0){let t=e.i;for(let n of e.g.values())t=t.concat(n.G);return t}return p(e.i)}var Tt=RegExp(`^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$`);function Et(e,t){if(e){e=e.split(`&`);for(let n=0;n<e.length;n++){let r=e[n].indexOf(`=`),i,a=null;r>=0?(i=e[n].substring(0,r),a=e[n].substring(r+1)):i=e[n],t(i,a?decodeURIComponent(a.replace(/\+/g,` `)):``)}}}function Dt(e){this.g=this.o=this.j=``,this.u=null,this.m=this.h=``,this.l=!1;let t;e instanceof Dt?(this.l=e.l,B(this,e.j),this.o=e.o,this.g=e.g,Ot(this,e.u),this.h=e.h,kt(this,Kt(e.i)),this.m=e.m):e&&(t=String(e).match(Tt))?(this.l=!1,B(this,t[1]||``,!0),this.o=Mt(t[2]||``),this.g=Mt(t[3]||``,!0),Ot(this,t[4]),this.h=Mt(t[5]||``,!0),kt(this,t[6]||``,!0),this.m=Mt(t[7]||``)):(this.l=!1,this.i=new Bt(null,this.l))}Dt.prototype.toString=function(){let e=[];var t=this.j;t&&e.push(Nt(t,Ft,!0),`:`);var n=this.g;return(n||t==`file`)&&(e.push(`//`),(t=this.o)&&e.push(Nt(t,Ft,!0),`@`),e.push(et(n).replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),n=this.u,n!=null&&e.push(`:`,String(n))),(n=this.h)&&(this.g&&n.charAt(0)!=`/`&&e.push(`/`),e.push(Nt(n,n.charAt(0)==`/`?Lt:It,!0))),(n=this.i.toString())&&e.push(`?`,n),(n=this.m)&&e.push(`#`,Nt(n,zt)),e.join(``)},Dt.prototype.resolve=function(e){let t=z(this),n=!!e.j;n?B(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=e.u!=null;var r=e.h;if(n)Ot(t,e.u);else if(n=!!e.h){if(r.charAt(0)!=`/`)if(this.g&&!this.h)r=`/`+r;else{var i=t.h.lastIndexOf(`/`);i!=-1&&(r=t.h.slice(0,i+1)+r)}if(i=r,i==`..`||i==`.`)r=``;else if(i.indexOf(`./`)!=-1||i.indexOf(`/.`)!=-1){r=i.lastIndexOf(`/`,0)==0,i=i.split(`/`);let e=[];for(let t=0;t<i.length;){let n=i[t++];n==`.`?r&&t==i.length&&e.push(``):n==`..`?((e.length>1||e.length==1&&e[0]!=``)&&e.pop(),r&&t==i.length&&e.push(``)):(e.push(n),r=!0)}r=e.join(`/`)}else r=i}return n?t.h=r:n=e.i.toString()!==``,n?kt(t,Kt(e.i)):n=!!e.m,n&&(t.m=e.m),t};function z(e){return new Dt(e)}function B(e,t,n){e.j=n?Mt(t,!0):t,e.j&&=e.j.replace(/:$/,``)}function Ot(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error(`Bad port number `+t);e.u=t}else e.u=null}function kt(e,t,n){t instanceof Bt?(e.i=t,Jt(e.i,e.l)):(n||(t=Nt(t,Rt)),e.i=new Bt(t,e.l))}function At(e,t,n){e.i.set(t,n)}function jt(e){return At(e,`zx`,Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),e}function Mt(e,t){return e?t?decodeURI(e.replace(/%25/g,`%2525`)):decodeURIComponent(e):``}function Nt(e,t,n){return typeof e==`string`?(e=encodeURI(e).replace(t,Pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),e):null}function Pt(e){return e=e.charCodeAt(0),`%`+(e>>4&15).toString(16)+(e&15).toString(16)}var Ft=/[#\/\?@]/g,It=/[#\?:]/g,Lt=/[#\?]/g,Rt=/[#\?@]/g,zt=/#/g;function Bt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Vt(e){e.g||(e.g=new Map,e.h=0,e.i&&Et(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g,` `)),n)}))}e=Bt.prototype,e.add=function(e,t){Vt(this),this.i=null,e=qt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function Ht(e,t){Vt(e),t=qt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ut(e,t){return Vt(e),t=qt(e,t),e.g.has(t)}e.forEach=function(e,t){Vt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)};function Wt(e,t){Vt(e);let n=[];if(typeof t==`string`)Ut(e,t)&&(n=n.concat(e.g.get(qt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}e.set=function(e,t){return Vt(this),this.i=null,e=qt(this,e),Ut(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e?(e=Wt(this,e),e.length>0?String(e[0]):t):t};function Gt(e,t,n){Ht(e,t),n.length>0&&(e.i=null,e.g.set(qt(e,t),p(n)),e.h+=n.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return``;let e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];let i=et(n);n=Wt(this,n);for(let t=0;t<n.length;t++){let r=i;n[t]!==``&&(r+=`=`+et(n[t])),e.push(r)}}return this.i=e.join(`&`)};function Kt(e){let t=new Bt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function qt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Jt(e,t){t&&!e.j&&(Vt(e),e.i=null,e.g.forEach(function(e,t){let n=t.toLowerCase();t!=n&&(Ht(this,t),Gt(this,n,e))},e)),e.j=t}function Yt(e,t){let n=new Ge;if(o.Image){let r=new Image;r.onload=u(Zt,n,`TestLoadImage: loaded`,!0,t,r),r.onerror=u(Zt,n,`TestLoadImage: error`,!1,t,r),r.onabort=u(Zt,n,`TestLoadImage: abort`,!1,t,r),r.ontimeout=u(Zt,n,`TestLoadImage: timeout`,!1,t,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function Xt(e,t){let n=new Ge,r=new AbortController,i=setTimeout(()=>{r.abort(),Zt(n,`TestPingServer: timeout`,!1,t)},1e4);fetch(e,{signal:r.signal}).then(e=>{clearTimeout(i),e.ok?Zt(n,`TestPingServer: ok`,!0,t):Zt(n,`TestPingServer: server error`,!1,t)}).catch(()=>{clearTimeout(i),Zt(n,`TestPingServer: error`,!1,t)})}function Zt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch{}}function Qt(){this.g=new Ae}function $t(e){this.i=e.Sb||null,this.h=e.ab||!1}d($t,je),$t.prototype.g=function(){return new en(this.i,this.h)};function en(e,t){ye.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText=``,this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F=`GET`,this.D=``,this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(en,ye),e=en.prototype,e.open=function(e,t){if(this.readyState!=0)throw this.abort(),Error(`Error reopening a connection`);this.F=e,this.D=t,this.readyState=1,rn(this)},e.send=function(e){if(this.readyState!=1)throw this.abort(),Error(`need to call open() first. `);if(this.v.signal.aborted)throw this.abort(),Error(`Request was aborted.`);this.g=!0;let t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText=``,this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel(`Request was aborted.`).catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,nn(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,rn(this)),this.g&&(this.readyState=3,rn(this),this.g)))if(this.responseType===`arraybuffer`)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(o.ReadableStream!==void 0&&`body`in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error(`responseType must be empty for "streamBinaryChunks" mode responses.`);this.response=[]}else this.response=this.responseText=``,this.B=new TextDecoder;tn(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))};function tn(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array;(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?nn(this):rn(this),this.readyState==3&&tn(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,nn(this))},e.Na=function(e){this.g&&(this.response=e,nn(this))},e.ga=function(){this.g&&nn(this)};function nn(e){e.readyState=4,e.l=null,e.j=null,e.B=null,rn(e)}e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||``},e.getAllResponseHeaders=function(){if(!this.h)return``;let e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+`: `+n[1]),n=t.next();return e.join(`\r
`)};function rn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(en.prototype,`withCredentials`,{get:function(){return this.m===`include`},set:function(e){this.m=e?`include`:`same-origin`}});function an(e){let t=``;return M(e,function(e,n){t+=n,t+=`:`,t+=e,t+=`\r
`}),t}function on(e,t,n){a:{for(r in n){var r=!1;break a}r=!0}r||(n=an(n),typeof e==`string`||At(e,t,n))}function sn(e){ye.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D=``,this.o=0,this.l=``,this.j=this.B=this.v=this.A=!1,this.m=null,this.F=``,this.H=!1}d(sn,ye);var cn=/^https?$/i,ln=[`POST`,`PUT`];e=sn.prototype,e.Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error(`[goog.net.XhrIo] Object is active with another request=`+this.D+`; newUri=`+e);t=t?t.toUpperCase():`GET`,this.D=e,this.l=``,this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Qe.g(),this.g.onreadystatechange=f(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(e){un(this,e);return}if(e=n||``,n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys==`function`&&typeof r.get==`function`)for(let e of r.keys())n.set(e,r.get(e));else throw Error(`Unknown input type for opt_headers: `+String(r));r=Array.from(n.keys()).find(e=>e.toLowerCase()==`content-type`),i=o.FormData&&e instanceof o.FormData,!(Array.prototype.indexOf.call(ln,t,void 0)>=0)||r||i||n.set(`Content-Type`,`application/x-www-form-urlencoded;charset=utf-8`);for(let[e,t]of n)this.g.setRequestHeader(e,t);this.F&&(this.g.responseType=this.F),`withCredentials`in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&=(clearTimeout(this.m),null),this.v=!0,this.g.send(e),this.v=!1}catch(e){un(this,e)}};function un(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,dn(e),pn(e)}function dn(e){e.A||(e.A=!0,be(e,`complete`),be(e,`error`))}e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,be(this,`complete`),be(this,`abort`),pn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pn(this,!0)),sn.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?fn(this):this.Xa())},e.Xa=function(){fn(this)};function fn(e){if(e.h&&a!==void 0){if(e.v&&mn(e)==4)setTimeout(e.Ca.bind(e),0);else if(be(e,`readystatechange`),mn(e)==4){e.h=!1;try{let a=e.ca();a:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break a;default:t=!1}var n;if(!(n=t)){var r;if(r=a===0){let t=String(e.D).match(Tt)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),r=!cn.test(t?t.toLowerCase():``)}n=r}if(n)be(e,`complete`),be(e,`success`);else{e.o=6;try{var i=mn(e)>2?e.g.statusText:``}catch{i=``}e.l=i+` [`+e.ca()+`]`,dn(e)}}finally{pn(e)}}}}function pn(e,t){if(e.g){e.m&&=(clearTimeout(e.m),null);let n=e.g;e.g=null,t||be(e,`ready`);try{n.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function mn(e){return e.g?e.g.readyState:0}e.ca=function(){try{return mn(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:``}catch{return``}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),ke(t)}};function hn(e){try{if(!e.g)return null;if(`response`in e.g)return e.g.response;switch(e.F){case``:case`text`:return e.g.responseText;case`arraybuffer`:if(`mozResponseArrayBuffer`in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function gn(e){let t={};e=(e.g&&mn(e)>=2&&e.g.getAllResponseHeaders()||``).split(`\r
`);for(let r=0;r<e.length;r++){if(ee(e[r]))continue;var n=tt(e[r]);let i=n[0];if(n=n[1],typeof n!=`string`)continue;n=n.trim();let a=t[i]||[];t[i]=a,a.push(n)}N(t,function(e){return e.join(`, `)})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l==`string`?this.l:String(this.l)};function _n(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function vn(e){this.za=0,this.i=[],this.j=new Ge,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=_n(`failFast`,!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=_n(`baseRetryDelayMs`,5e3,e),this.Za=_n(`retryDelaySeedMs`,1e4,e),this.Ta=_n(`forwardChannelMaxRetries`,2,e),this.va=_n(`forwardChannelRequestTimeoutMs`,2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M=``,this.h=new vt(e&&e.concurrentRequestLimit),this.Ba=new Qt,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=vn.prototype,e.ka=8,e.I=1,e.connect=function(e,t,n,r){He(0),this.W=e,this.H=t||{},n&&r!==void 0&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=Fn(this,null,this.W),xn(this)};function yn(e){if(bn(e),e.I==3){var t=e.V++,n=z(e.J);if(At(n,`SID`,e.M),At(n,`RID`,t),At(n,`TYPE`,`terminate`),wn(e,n),t=new nt(e,e.j,t),t.M=2,t.A=jt(z(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(t.A.toString(),``)}catch{}!n&&o.Image&&(new Image().src=t.A,n=!0),n||(t.g=In(t.j,null),t.g.ea(t.A)),t.F=Date.now(),dt(t)}Pn(e)}function V(e){e.g&&=(On(e),e.g.cancel(),null)}function bn(e){V(e),e.v&&=(o.clearTimeout(e.v),null),An(e),e.h.cancel(),e.m&&=(typeof e.m==`number`&&o.clearTimeout(e.m),null)}function xn(e){if(!yt(e.h)&&!e.m){e.m=!0;var t=e.Ea;x||w(),S||=(x(),!0),C.add(t,e),e.D=0}}function Sn(e,t){return bt(e.h)>=e.h.j-(e.m?1:0)?!1:e.m?(e.i=t.G.concat(e.i),!0):e.I==1||e.I==2||e.D>=(e.Sa?0:e.Ta)?!1:(e.m=We(l(e.Ea,e,t),Mn(e,e.D)),e.D++,!0)}e.Ea=function(e){if(this.m)if(this.m=null,this.I==1){if(!e){this.V=Math.floor(Math.random()*1e5),e=this.V++;let i=new nt(this,this.j,e),a=this.o;if(this.U&&(a?(a=P(a),F(a,this.U)):a=this.U),this.u!==null||this.R||(i.J=a,a=null),this.S)a:{for(var t=0,n=0;n<this.i.length;n++){b:{var r=this.i[n];if(`__data__`in r.map&&(r=r.map.__data__,typeof r==`string`)){r=r.length;break b}r=void 0}if(r===void 0)break;if(t+=r,t>4096){t=n;break a}if(t===4096||n===this.i.length-1){t=n+1;break a}}t=1e3}else t=1e3;t=Tn(this,i,t),n=z(this.J),At(n,`RID`,e),At(n,`CVER`,22),this.G&&At(n,`X-HTTP-Session-Id`,this.G),wn(this,n),a&&(this.R?t=`headers=`+et(an(a))+`&`+t:this.u&&on(n,this.u,a)),St(this.h,i),this.Ra&&At(n,`TYPE`,`init`),this.S?(At(n,`$req`,t),At(n,`SID`,`null`),i.U=!0,ot(i,n,null)):ot(i,n,t),this.I=2}}else this.I==3&&(e?Cn(this,e):this.i.length==0||yt(this.h)||Cn(this))};function Cn(e,t){var n=t?t.l:e.V++;let r=z(e.J);At(r,`SID`,e.M),At(r,`RID`,n),At(r,`AID`,e.K),wn(e,r),e.u&&e.o&&on(r,e.u,e.o),n=new nt(e,e.j,n,e.D+1),e.u===null&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Tn(e,n,1e3),n.H=Math.round(e.va*.5)+Math.round(e.va*.5*Math.random()),St(e.h,n),ot(n,r,t)}function wn(e,t){e.H&&M(e.H,function(e,n){At(t,n,e)}),e.l&&M({},function(e,n){At(t,n,e)})}function Tn(e,t,n){n=Math.min(e.i.length,n);let r=e.l?l(e.l.Ka,e.l,e):null;a:{var i=e.i;let t=-1;for(;;){let e=[`count=`+n];t==-1?n>0?(t=i[0].g,e.push(`ofs=`+t)):t=0:e.push(`ofs=`+t);let c=!0;for(let l=0;l<n;l++){var a=i[l].g;let n=i[l].map;if(a-=t,a<0)t=Math.max(0,i[l].g-100),c=!1;else try{a=`req`+a+`_`||``;try{var o=n instanceof Map?n:Object.entries(n);for(let[t,n]of o){let r=n;s(n)&&(r=Oe(n)),e.push(a+t+`=`+encodeURIComponent(r))}}catch(t){throw e.push(a+`type=_badmap`),t}}catch{r&&r(n)}}if(c){o=e.join(`&`);break a}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function En(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;x||w(),S||=(x(),!0),C.add(t,e),e.A=0}}function Dn(e){return e.g||e.v||e.A>=3?!1:(e.Y++,e.v=We(l(e.Da,e),Mn(e,e.A)),e.A++,!0)}e.Da=function(){if(this.v=null,kn(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var e=4*this.T;this.j.info(`BP detection timer enabled: `+e),this.B=We(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info(`BP detection timeout reached.`),this.j.info(`Buffering proxy detected and switch to long-polling!`),this.F=!1,this.P=!0,He(10),V(this),kn(this))};function On(e){e.B!=null&&(o.clearTimeout(e.B),e.B=null)}function kn(e){e.g=new nt(e,e.j,`rpc`,e.Y),e.u===null&&(e.g.J=e.o),e.g.P=0;var t=z(e.na);At(t,`RID`,`rpc`),At(t,`SID`,e.M),At(t,`AID`,e.K),At(t,`CI`,e.F?`0`:`1`),!e.F&&e.ia&&At(t,`TO`,e.ia),At(t,`TYPE`,`xmlhttp`),wn(e,t),e.u&&e.o&&on(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=jt(z(t)),n.u=null,n.R=!0,st(n,e)}e.Va=function(){this.C!=null&&(this.C=null,V(this),Dn(this),He(19))};function An(e){e.C!=null&&(o.clearTimeout(e.C),e.C=null)}function jn(e,t){var n=null;if(e.g==t){An(e),On(e),e.g=null;var r=2}else if(xt(e.h,t))n=t.G,Ct(e.h,t),r=1;else return;if(e.I!=0){if(t.o)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;r=Re(),be(r,new Ue(r,n)),xn(e)}else En(e);else if(i=t.m,i==3||i==0&&t.X>0||!(r==1&&Sn(e,t)||r==2&&Dn(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Nn(e,5);break;case 4:Nn(e,10);break;case 3:Nn(e,6);break;default:Nn(e,2)}}}function Mn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function Nn(e,t){if(e.j.info(`Error code `+t),t==2){var n=l(e.bb,e),r=e.Ua;let t=!r;r=new Dt(r||`//www.google.com/images/cleardot.gif`),o.location&&o.location.protocol==`http`||B(r,`https`),jt(r),t?Yt(r.toString(),n):Xt(r.toString(),n)}else He(2);e.I=0,e.l&&e.l.pa(t),Pn(e),bn(e)}e.bb=function(e){e?(this.j.info(`Successfully pinged google.com`),He(2)):(this.j.info(`Failed to ping google.com`),He(1))};function Pn(e){if(e.I=0,e.ja=[],e.l){let t=wt(e.h);(t.length!=0||e.i.length!=0)&&(m(e.ja,t),m(e.ja,e.i),e.h.i.length=0,p(e.i),e.i.length=0),e.l.oa()}}function Fn(e,t,n){var r=n instanceof Dt?z(n):new Dt(n);if(r.g!=``)t&&(r.g=t+`.`+r.g),Ot(r,r.u);else{var i=o.location;r=i.protocol,t=t?t+`.`+i.hostname:i.hostname,i=+i.port;let e=new Dt(null);r&&B(e,r),t&&(e.g=t),i&&Ot(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&At(r,n,t),At(r,`VER`,e.ka),wn(e,r),r}function In(e,t,n){if(t&&!e.L)throw Error(`Can't create secondary domain capable XhrIo object.`);return t=e.Aa&&!e.ma?new sn(new $t({ab:n})):new sn(e.ma),t.Fa(e.L),t}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ln(){}e=Ln.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function Rn(){}Rn.prototype.g=function(e,t){return new zn(e,t)};function zn(e,t){ye.call(this),this.g=new vn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e[`X-Client-Protocol`]=`webchannel`:e={"X-Client-Protocol":`webchannel`}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e[`X-WebChannel-Content-Type`]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e[`X-WebChannel-Client-Profile`]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!ee(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t&&=t.httpSessionIdParam)&&!ee(t)&&(this.g.G=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Vn(this)}d(zn,ye),zn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},zn.prototype.close=function(){yn(this.g)},zn.prototype.o=function(e){var t=this.g;if(typeof e==`string`){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=Oe(e),e=n);t.i.push(new _t(t.Ya++,e)),t.I==3&&xn(t)},zn.prototype.N=function(){this.g.l=null,delete this.j,yn(this.g),delete this.g,zn.Z.N.call(this)};function H(e){Pe.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){a:{for(let n in t){e=n;break a}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}d(H,Pe);function Bn(){Fe.call(this),this.status=1}d(Bn,Fe);function Vn(e){this.g=e}d(Vn,Ln),Vn.prototype.ra=function(){be(this.g,`a`)},Vn.prototype.qa=function(e){be(this.g,new H(e))},Vn.prototype.pa=function(e){be(this.g,new Bn)},Vn.prototype.oa=function(){be(this.g,`b`)},Rn.prototype.createWebChannel=Rn.prototype.g,zn.prototype.send=zn.prototype.o,zn.prototype.open=zn.prototype.m,zn.prototype.close=zn.prototype.close,Rp=Ap.createWebChannelTransport=function(){return new Rn},Lp=Ap.getStatEventTarget=function(){return Re()},Ip=Ap.Event=Ie,Fp=Ap.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ze.NO_ERROR=0,Ze.TIMEOUT=8,Ze.HTTP_ERROR=6,Pp=Ap.ErrorCode=Ze,R.COMPLETE=`complete`,Np=Ap.EventType=R,Me.EventType=Ne,Ne.OPEN=`a`,Ne.CLOSE=`b`,Ne.ERROR=`c`,Ne.MESSAGE=`d`,ye.prototype.listen=ye.prototype.J,Mp=Ap.WebChannel=Me,Ap.FetchXmlHttpFactory=$t,sn.prototype.listenOnce=sn.prototype.K,sn.prototype.getLastError=sn.prototype.Ha,sn.prototype.getLastErrorCode=sn.prototype.ya,sn.prototype.getStatus=sn.prototype.ca,sn.prototype.getResponseJson=sn.prototype.La,sn.prototype.getResponseText=sn.prototype.la,sn.prototype.send=sn.prototype.ea,sn.prototype.setWithCredentials=sn.prototype.Fa,jp=Ap.XhrIo=sn}).apply(kp===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:kp);var zp=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?`uid:`+this.uid:`anonymous-user`}isEqual(e){return e.uid===this.uid}};zp.UNAUTHENTICATED=new zp(null),zp.GOOGLE_CREDENTIALS=new zp(`google-credentials-uid`),zp.FIRST_PARTY=new zp(`first-party-uid`),zp.MOCK_USER=new zp(`mock-user`);var Bp=`12.9.0`;function Vp(e){Bp=e}var Hp=new Wd(`@firebase/firestore`);function Up(){return Hp.logLevel}function q(e,...t){if(Hp.logLevel<=zd.DEBUG){let n=t.map(Kp);Hp.debug(`Firestore (${Bp}): ${e}`,...n)}}function Wp(e,...t){if(Hp.logLevel<=zd.ERROR){let n=t.map(Kp);Hp.error(`Firestore (${Bp}): ${e}`,...n)}}function Gp(e,...t){if(Hp.logLevel<=zd.WARN){let n=t.map(Kp);Hp.warn(`Firestore (${Bp}): ${e}`,...n)}}function Kp(e){if(typeof e==`string`)return e;try{return function(e){return JSON.stringify(e)}(e)}catch{return e}}function J(e,t,n){let r=`Unexpected state`;typeof t==`string`?r=t:n=t,qp(e,r,n)}function qp(e,t,n){let r=`FIRESTORE (${Bp}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=` CONTEXT: `+JSON.stringify(n)}catch{r+=` CONTEXT: `+n}throw Wp(r),Error(r)}function Jp(e,t,n,r){let i=`Unexpected state`;typeof n==`string`?i=n:r=n,e||qp(t,i,r)}function Yp(e,t){return e}var Y={OK:`ok`,CANCELLED:`cancelled`,UNKNOWN:`unknown`,INVALID_ARGUMENT:`invalid-argument`,DEADLINE_EXCEEDED:`deadline-exceeded`,NOT_FOUND:`not-found`,ALREADY_EXISTS:`already-exists`,PERMISSION_DENIED:`permission-denied`,UNAUTHENTICATED:`unauthenticated`,RESOURCE_EXHAUSTED:`resource-exhausted`,FAILED_PRECONDITION:`failed-precondition`,ABORTED:`aborted`,OUT_OF_RANGE:`out-of-range`,UNIMPLEMENTED:`unimplemented`,INTERNAL:`internal`,UNAVAILABLE:`unavailable`,DATA_LOSS:`data-loss`},X=class extends _d{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}},Xp=class{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}},Zp=class{constructor(e,t){this.user=t,this.type=`OAuth`,this.headers=new Map,this.headers.set(`Authorization`,`Bearer ${e}`)}},Qp=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(zp.UNAUTHENTICATED)))}shutdown(){}},$p=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}},em=class{constructor(e){this.t=e,this.currentUser=zp.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Jp(this.o===void 0,42304);let n=this.i,r=e=>this.i===n?Promise.resolve():(n=this.i,t(e)),i=new Xp;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Xp,e.enqueueRetryable((()=>r(this.currentUser)))};let a=()=>{let t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{q(`FirebaseAuthCredentialsProvider`,`Auth detected`),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?o(e):(q(`FirebaseAuthCredentialsProvider`,`Auth not yet detected`),i.resolve(),i=new Xp)}}),0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i===e?t?(Jp(typeof t.accessToken==`string`,31837,{l:t}),new Zp(t.accessToken,this.currentUser)):null:(q(`FirebaseAuthCredentialsProvider`,`getToken aborted due to token change.`),this.getToken()))):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Jp(e===null||typeof e==`string`,2055,{h:e}),new zp(e)}},tm=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type=`FirstParty`,this.user=zp.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set(`X-Goog-AuthUser`,this.P);let e=this.A();return e&&this.R.set(`Authorization`,e),this.T&&this.R.set(`X-Goog-Iam-Authorization-Token`,this.T),this.R}},nm=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new tm(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(zp.FIRST_PARTY)))}shutdown(){}invalidateToken(){}},rm=class{constructor(e){this.value=e,this.type=`AppCheck`,this.headers=new Map,e&&e.length>0&&this.headers.set(`x-firebase-appcheck`,this.value)}},im=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tp(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Jp(this.o===void 0,3512);let n=e=>{e.error!=null&&q(`FirebaseAppCheckTokenProvider`,`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let n=e.token!==this.m;return this.m=e.token,q(`FirebaseAppCheckTokenProvider`,`Received ${n?`new`:`existing`} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};let r=e=>{q(`FirebaseAppCheckTokenProvider`,`AppCheck detected`),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){let e=this.V.getImmediate({optional:!0});e?r(e):q(`FirebaseAppCheckTokenProvider`,`AppCheck not yet detected`)}}),0)}getToken(){if(this.p)return Promise.resolve(new rm(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Jp(typeof e.token==`string`,44558,{tokenResult:e}),this.m=e.token,new rm(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function am(e){let t=typeof self<`u`&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues==`function`)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}var om=class{static newId(){let e=``;for(;e.length<20;){let t=am(40);for(let n=0;n<t.length;++n)e.length<20&&t[n]<248&&(e+=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`.charAt(t[n]%62))}return e}};function sm(e,t){return e<t?-1:e>t?1:0}function cm(e,t){let n=Math.min(e.length,t.length);for(let r=0;r<n;r++){let n=e.charAt(r),i=t.charAt(r);if(n!==i)return dm(n)===dm(i)?sm(n,i):dm(n)?1:-1}return sm(e.length,t.length)}var lm=55296,um=57343;function dm(e){let t=e.charCodeAt(0);return t>=lm&&t<=um}function fm(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}var pm=`__name__`,mm=class e{constructor(e,t,n){t===void 0?t=0:t>e.length&&J(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&J(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(t){return e.comparator(this,t)===0}child(t){let n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((e=>{n.push(e)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){let r=Math.min(t.length,n.length);for(let i=0;i<r;i++){let r=e.compareSegments(t.get(i),n.get(i));if(r!==0)return r}return sm(t.length,n.length)}static compareSegments(t,n){let r=e.isNumericId(t),i=e.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?e.extractNumericId(t).compare(e.extractNumericId(n)):cm(t,n)}static isNumericId(e){return e.startsWith(`__id`)&&e.endsWith(`__`)}static extractNumericId(e){return Dp.fromString(e.substring(4,e.length-2))}},hm=class e extends mm{construct(t,n,r){return new e(t,n,r)}canonicalString(){return this.toArray().join(`/`)}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join(`/`)}static fromString(...t){let n=[];for(let e of t){if(e.indexOf(`//`)>=0)throw new X(Y.INVALID_ARGUMENT,`Invalid segment (${e}). Paths must not contain // in them.`);n.push(...e.split(`/`).filter((e=>e.length>0)))}return new e(n)}static emptyPath(){return new e([])}},gm=/^[_a-zA-Z][_a-zA-Z0-9]*$/,_m=class e extends mm{construct(t,n,r){return new e(t,n,r)}static isValidIdentifier(e){return gm.test(e)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,`\\\\`).replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(`.`)}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===`__name__`}static keyField(){return new e([pm])}static fromServerFormat(t){let n=[],r=``,i=0,a=()=>{if(r.length===0)throw new X(Y.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=``},o=!1;for(;i<t.length;){let e=t[i];if(e===`\\`){if(i+1===t.length)throw new X(Y.INVALID_ARGUMENT,`Path has trailing escape character: `+t);let e=t[i+1];if(e!==`\\`&&e!==`.`&&e!=="`")throw new X(Y.INVALID_ARGUMENT,`Path has invalid escape sequence: `+t);r+=e,i+=2}else e==="`"?(o=!o,i++):e!==`.`||o?(r+=e,i++):(a(),i++)}if(a(),o)throw new X(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)}static emptyPath(){return new e([])}},Z=class e{constructor(e){this.path=e}static fromPath(t){return new e(hm.fromString(t))}static fromName(t){return new e(hm.fromString(t).popFirst(5))}static empty(){return new e(hm.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&hm.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return hm.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(t){return new e(new hm(t.slice()))}};function vm(e,t,n){if(!n)throw new X(Y.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function ym(e,t,n,r){if(!0===t&&!0===r)throw new X(Y.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function bm(e){if(!Z.isDocumentKey(e))throw new X(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function xm(e){if(Z.isDocumentKey(e))throw new X(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Sm(e){return typeof e==`object`&&!!e&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Cm(e){if(e===void 0)return`undefined`;if(e===null)return`null`;if(typeof e==`string`)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e==`number`||typeof e==`boolean`)return``+e;if(typeof e==`object`){if(e instanceof Array)return`an array`;{let t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:`an object`}}return typeof e==`function`?`a function`:J(12329,{type:typeof e})}function wm(e,t){if(`_delegate`in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new X(Y.INVALID_ARGUMENT,`Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?`);{let n=Cm(e);throw new X(Y.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Tm(e,t){let n={typeString:e};return t&&(n.value=t),n}function Em(e,t){if(!Sm(e))throw new X(Y.INVALID_ARGUMENT,`JSON must be an object`);let n;for(let r in t)if(t[r]){let i=t[r].typeString,a=`value`in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}let o=e[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new X(Y.INVALID_ARGUMENT,n);return!0}var Dm=-62135596800,Om=1e6,km=class e{static now(){return e.fromMillis(Date.now())}static fromDate(t){return e.fromMillis(t.getTime())}static fromMillis(t){let n=Math.floor(t/1e3);return new e(n,Math.floor((t-1e3*n)*Om))}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new X(Y.INVALID_ARGUMENT,`Timestamp nanoseconds out of range: `+t);if(e<Dm||e>=253402300800)throw new X(Y.INVALID_ARGUMENT,`Timestamp seconds out of range: `+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Om}_compareTo(e){return this.seconds===e.seconds?sm(this.nanoseconds,e.nanoseconds):sm(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return`Timestamp(seconds=`+this.seconds+`, nanoseconds=`+this.nanoseconds+`)`}toJSON(){return{type:e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Em(t,e._jsonSchema))return new e(t.seconds,t.nanoseconds)}valueOf(){let e=this.seconds-Dm;return String(e).padStart(12,`0`)+`.`+String(this.nanoseconds).padStart(9,`0`)}};km._jsonSchemaVersion=`firestore/timestamp/1.0`,km._jsonSchema={type:Tm(`string`,km._jsonSchemaVersion),seconds:Tm(`number`),nanoseconds:Tm(`number`)};var Am=class e{static fromTimestamp(t){return new e(t)}static min(){return new e(new km(0,0))}static max(){return new e(new km(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return`SnapshotVersion(`+this.timestamp.toString()+`)`}toTimestamp(){return this.timestamp}},jm=-1,Mm=class{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}};Mm.UNKNOWN_ID=-1;function Nm(e,t){let n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1;return new Fm(Am.fromTimestamp(r===1e9?new km(n+1,0):new km(n,r)),Z.empty(),t)}function Pm(e){return new Fm(e.readTime,e.key,jm)}var Fm=class e{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new e(Am.min(),Z.empty(),jm)}static max(){return new e(Am.max(),Z.empty(),jm)}};function Im(e,t){let n=e.readTime.compareTo(t.readTime);return n===0?(n=Z.comparator(e.documentKey,t.documentKey),n===0?sm(e.largestBatchId,t.largestBatchId):n):n}var Lm=`The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.`,Rm=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}};async function zm(e){if(e.code!==Y.FAILED_PRECONDITION||e.message!==Lm)throw e;q(`LocalStore`,`Unexpectedly lost primary lease`)}var Q=class e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(t,n){return this.callbackAttached&&J(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(((e,r)=>{this.nextCallback=n=>{this.wrapSuccess(t,n).next(e,r)},this.catchCallback=t=>{this.wrapFailure(n,t).next(e,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(t){try{let n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):e.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):e.reject(n)}static resolve(t){return new e(((e,n)=>{e(t)}))}static reject(t){return new e(((e,n)=>{n(t)}))}static waitFor(t){return new e(((e,n)=>{let r=0,i=0,a=!1;t.forEach((t=>{++r,t.next((()=>{++i,a&&i===r&&e()}),(e=>n(e)))})),a=!0,i===r&&e()}))}static or(t){let n=e.resolve(!1);for(let r of t)n=n.next((t=>t?e.resolve(t):r()));return n}static forEach(e,t){let n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(t,n){return new e(((e,r)=>{let i=t.length,a=Array(i),o=0;for(let s=0;s<i;s++){let c=s;n(t[c]).next((t=>{a[c]=t,++o,o===i&&e(a)}),(e=>r(e)))}}))}static doWhile(t,n){return new e(((e,r)=>{let i=()=>{!0===t()?n().next((()=>{i()}),r):e()};i()}))}};function Bm(e){let t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(`.`).slice(0,2).join(`.`):`-1`;return Number(n)}function Vm(e){return e.name===`IndexedDbTransactionError`}var Hm=class{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ue&&this.ue(e),e}};Hm.ce=-1;var Um=-1;function Wm(e){return e==null}function Gm(e){return e===0&&1/e==-1/0}function Km(e){return typeof e==`number`&&Number.isInteger(e)&&!Gm(e)&&e<=2**53-1&&e>=-(2**53-1)}var qm=``;function Jm(e){let t=``;for(let n=0;n<e.length;n++)t.length>0&&(t=Xm(t)),t=Ym(e.get(n),t);return Xm(t)}function Ym(e,t){let n=t,r=e.length;for(let t=0;t<r;t++){let r=e.charAt(t);switch(r){case`\0`:n+=``;break;case qm:n+=``;break;default:n+=r}}return n}function Xm(e){return e+qm+``}function Zm(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Qm(e,t){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function $m(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var eh=class e{constructor(e,t){this.comparator=e,this.root=t||nh.EMPTY}insert(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,nh.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,nh.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){let e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(`, `)}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new th(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new th(this.root,e,this.comparator,!1)}getReverseIterator(){return new th(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new th(this.root,e,this.comparator,!0)}},th=class{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},nh=class e{constructor(t,n,r,i,a){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=a??e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,a){return new e(t??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this,i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return 2**this.check()<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw J(43730,{key:this.key,value:this.value});if(this.right.isRed())throw J(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw J(27949);return e+(this.isRed()?0:1)}};nh.EMPTY=null,nh.RED=!0,nh.BLACK=!1,nh.EMPTY=new class{constructor(){this.size=0}get key(){throw J(57766)}get value(){throw J(16141)}get color(){throw J(16727)}get left(){throw J(29726)}get right(){throw J(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new nh(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var rh=class e{constructor(e){this.comparator=e,this.data=new eh(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){let n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t===void 0?this.data.getIterator():this.data.getIteratorFrom(t);n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ih(this.data.getIterator())}getIteratorFrom(e){return new ih(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(this.comparator(e,t)!==0)return!1}return!0}toArray(){let e=[];return this.forEach((t=>{e.push(t)})),e}toString(){let e=[];return this.forEach((t=>e.push(t))),`SortedSet(`+e.toString()+`)`}copy(t){let n=new e(this.comparator);return n.data=t,n}},ih=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}},ah=class e{constructor(e){this.fields=e,e.sort(_m.comparator)}static empty(){return new e([])}unionWith(t){let n=new rh(_m.comparator);for(let e of this.fields)n=n.add(e);for(let e of t)n=n.add(e);return new e(n.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return fm(this.fields,e.fields,((e,t)=>e.isEqual(t)))}},oh=class extends Error{constructor(){super(...arguments),this.name=`Base64DecodeError`}},sh=class e{constructor(e){this.binaryString=e}static fromBase64String(t){return new e(function(e){try{return atob(e)}catch(e){throw typeof DOMException<`u`&&e instanceof DOMException?new oh(`Invalid base64 string: `+e):e}}(t))}static fromUint8Array(t){return new e(function(e){let t=``;for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return sm(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};sh.EMPTY_BYTE_STRING=new sh(``);var ch=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lh(e){if(Jp(!!e,39018),typeof e==`string`){let t=0,n=ch.exec(e);if(Jp(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+`000000000`).substr(0,9),t=Number(e)}let r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:uh(e.seconds),nanos:uh(e.nanos)}}function uh(e){return typeof e==`number`?e:typeof e==`string`?Number(e):0}function dh(e){return typeof e==`string`?sh.fromBase64String(e):sh.fromUint8Array(e)}var fh=`server_timestamp`,ph=`__type__`,mh=`__previous_value__`,hh=`__local_write_time__`;function gh(e){return(e?.mapValue?.fields||{})[ph]?.stringValue===fh}function _h(e){let t=e.mapValue.fields[mh];return gh(t)?_h(t):t}function vh(e){let t=lh(e.mapValue.fields[hh].timestampValue);return new km(t.seconds,t.nanos)}var yh=class{constructor(e,t,n,r,i,a,o,s,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=s,this.useFetchStreams=c,this.isUsingEmulator=l,this.apiKey=u}},bh=`(default)`,xh=class e{constructor(e,t){this.projectId=e,this.database=t||bh}static empty(){return new e(``,``)}get isDefaultDatabase(){return this.database===bh}isEqual(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}};function Sh(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,[`projectId`]))throw new X(Y.INVALID_ARGUMENT,`"projectId" not provided in firebase.initializeApp.`);return new xh(e.options.projectId,t)}var Ch=`__type__`,wh=`__max__`,Th={mapValue:{fields:{__type__:{stringValue:wh}}}},Eh=`__vector__`,Dh=`value`;function Oh(e){return`nullValue`in e?0:`booleanValue`in e?1:`integerValue`in e||`doubleValue`in e?2:`timestampValue`in e?3:`stringValue`in e?5:`bytesValue`in e?6:`referenceValue`in e?7:`geoPointValue`in e?8:`arrayValue`in e?9:`mapValue`in e?gh(e)?4:Gh(e)?9007199254740991:Uh(e)?10:11:J(28295,{value:e})}function kh(e,t){if(e===t)return!0;let n=Oh(e);if(n!==Oh(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return vh(e).isEqual(vh(t));case 3:return function(e,t){if(typeof e.timestampValue==`string`&&typeof t.timestampValue==`string`&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let n=lh(e.timestampValue),r=lh(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return dh(e.bytesValue).isEqual(dh(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return uh(e.geoPointValue.latitude)===uh(t.geoPointValue.latitude)&&uh(e.geoPointValue.longitude)===uh(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if(`integerValue`in e&&`integerValue`in t)return uh(e.integerValue)===uh(t.integerValue);if(`doubleValue`in e&&`doubleValue`in t){let n=uh(e.doubleValue),r=uh(t.doubleValue);return n===r?Gm(n)===Gm(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return fm(e.arrayValue.values||[],t.arrayValue.values||[],kh);case 10:case 11:return function(e,t){let n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Zm(n)!==Zm(r))return!1;for(let e in n)if(n.hasOwnProperty(e)&&(r[e]===void 0||!kh(n[e],r[e])))return!1;return!0}(e,t);default:return J(52216,{left:e})}}function Ah(e,t){return(e.values||[]).find((e=>kh(e,t)))!==void 0}function jh(e,t){if(e===t)return 0;let n=Oh(e),r=Oh(t);if(n!==r)return sm(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return sm(e.booleanValue,t.booleanValue);case 2:return function(e,t){let n=uh(e.integerValue||e.doubleValue),r=uh(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Mh(e.timestampValue,t.timestampValue);case 4:return Mh(vh(e),vh(t));case 5:return cm(e.stringValue,t.stringValue);case 6:return function(e,t){let n=dh(e),r=dh(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){let n=e.split(`/`),r=t.split(`/`);for(let e=0;e<n.length&&e<r.length;e++){let t=sm(n[e],r[e]);if(t!==0)return t}return sm(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){let n=sm(uh(e.latitude),uh(t.latitude));return n===0?sm(uh(e.longitude),uh(t.longitude)):n}(e.geoPointValue,t.geoPointValue);case 9:return Nh(e.arrayValue,t.arrayValue);case 10:return function(e,t){let n=e.fields||{},r=t.fields||{},i=n[Dh]?.arrayValue,a=r[Dh]?.arrayValue,o=sm(i?.values?.length||0,a?.values?.length||0);return o===0?Nh(i,a):o}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Th.mapValue&&t===Th.mapValue)return 0;if(e===Th.mapValue)return 1;if(t===Th.mapValue)return-1;let n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(let e=0;e<r.length&&e<a.length;++e){let t=cm(r[e],a[e]);if(t!==0)return t;let o=jh(n[r[e]],i[a[e]]);if(o!==0)return o}return sm(r.length,a.length)}(e.mapValue,t.mapValue);default:throw J(23264,{he:n})}}function Mh(e,t){if(typeof e==`string`&&typeof t==`string`&&e.length===t.length)return sm(e,t);let n=lh(e),r=lh(t),i=sm(n.seconds,r.seconds);return i===0?sm(n.nanos,r.nanos):i}function Nh(e,t){let n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){let t=jh(n[e],r[e]);if(t)return t}return sm(n.length,r.length)}function Ph(e){return Fh(e)}function Fh(e){return`nullValue`in e?`null`:`booleanValue`in e?``+e.booleanValue:`integerValue`in e?``+e.integerValue:`doubleValue`in e?``+e.doubleValue:`timestampValue`in e?function(e){let t=lh(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):`stringValue`in e?e.stringValue:`bytesValue`in e?function(e){return dh(e).toBase64()}(e.bytesValue):`referenceValue`in e?function(e){return Z.fromName(e).toString()}(e.referenceValue):`geoPointValue`in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):`arrayValue`in e?function(e){let t=`[`,n=!0;for(let r of e.values||[])n?n=!1:t+=`,`,t+=Fh(r);return t+`]`}(e.arrayValue):`mapValue`in e?function(e){let t=Object.keys(e.fields||{}).sort(),n=`{`,r=!0;for(let i of t)r?r=!1:n+=`,`,n+=`${i}:${Fh(e.fields[i])}`;return n+`}`}(e.mapValue):J(61005,{value:e})}function Ih(e){switch(Oh(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let t=_h(e);return t?16+Ih(t):16;case 5:return 2*e.stringValue.length;case 6:return dh(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+Ih(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Qm(e.fields,((e,n)=>{t+=e.length+Ih(n)})),t}(e.mapValue);default:throw J(13486,{value:e})}}function Lh(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Rh(e){return!!e&&`integerValue`in e}function zh(e){return!!e&&`arrayValue`in e}function Bh(e){return!!e&&`nullValue`in e}function Vh(e){return!!e&&`doubleValue`in e&&isNaN(Number(e.doubleValue))}function Hh(e){return!!e&&`mapValue`in e}function Uh(e){return(e?.mapValue?.fields||{})[Ch]?.stringValue===Eh}function Wh(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue==`object`)return{timestampValue:{...e.timestampValue}};if(e.mapValue){let t={mapValue:{fields:{}}};return Qm(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Wh(n))),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Wh(e.arrayValue.values[n]);return t}return{...e}}function Gh(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===wh}var Kh=class e{constructor(e){this.value=e}static empty(){return new e({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Hh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wh(t)}setAll(e){let t=_m.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Wh(e):r.push(i.lastSegment())}));let i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){let t=this.field(e.popLast());Hh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return kh(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Hh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Qm(t,((t,n)=>e[t]=n));for(let t of n)delete e[t]}clone(){return new e(Wh(this.value))}};function qh(e){let t=[];return Qm(e.fields,((e,n)=>{let r=new _m([e]);if(Hh(n)){let e=qh(n.mapValue).fields;if(e.length===0)t.push(r);else for(let n of e)t.push(r.child(n))}else t.push(r)})),new ah(t)}var Jh=class e{constructor(e,t,n,r,i,a,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(t){return new e(t,0,Am.min(),Am.min(),Am.min(),Kh.empty(),0)}static newFoundDocument(t,n,r,i){return new e(t,1,n,Am.min(),r,i,0)}static newNoDocument(t,n){return new e(t,2,n,Am.min(),Am.min(),Kh.empty(),0)}static newUnknownDocument(t,n){return new e(t,3,n,Am.min(),Am.min(),Kh.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Am.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kh.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kh.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Am.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}},Yh=class{constructor(e,t){this.position=e,this.inclusive=t}};function Xh(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){let a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Z.comparator(Z.fromName(o.referenceValue),n.key):jh(o,n.data.field(a.field)),a.dir===`desc`&&(r*=-1),r!==0)break}return r}function Zh(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!kh(e.position[n],t.position[n]))return!1;return!0}var Qh=class{constructor(e,t=`asc`){this.field=e,this.dir=t}};function $h(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var eg=class{},tg=class e extends eg{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(t,n,r){return t.isKeyField()?n===`in`||n===`not-in`?this.createKeyFieldInFilter(t,n,r):new lg(t,n,r):n===`array-contains`?new pg(t,r):n===`in`?new mg(t,r):n===`not-in`?new hg(t,r):n===`array-contains-any`?new gg(t,r):new e(t,n,r)}static createKeyFieldInFilter(e,t,n){return t===`in`?new ug(e,n):new dg(e,n)}matches(e){let t=e.data.field(this.field);return this.op===`!=`?t!==null&&t.nullValue===void 0&&this.matchesComparison(jh(t,this.value)):t!==null&&Oh(this.value)===Oh(t)&&this.matchesComparison(jh(t,this.value))}matchesComparison(e){switch(this.op){case`<`:return e<0;case`<=`:return e<=0;case`==`:return e===0;case`!=`:return e!==0;case`>`:return e>0;case`>=`:return e>=0;default:return J(47266,{operator:this.op})}}isInequality(){return[`<`,`<=`,`>`,`>=`,`!=`,`not-in`].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ng=class e extends eg{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(t,n){return new e(t,n)}matches(e){return rg(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function rg(e){return e.op===`and`}function ig(e){return ag(e)&&rg(e)}function ag(e){for(let t of e.filters)if(t instanceof ng)return!1;return!0}function og(e){if(e instanceof tg)return e.field.canonicalString()+e.op.toString()+Ph(e.value);if(ig(e))return e.filters.map((e=>og(e))).join(`,`);{let t=e.filters.map((e=>og(e))).join(`,`);return`${e.op}(${t})`}}function sg(e,t){return e instanceof tg?function(e,t){return t instanceof tg&&e.op===t.op&&e.field.isEqual(t.field)&&kh(e.value,t.value)}(e,t):e instanceof ng?function(e,t){return t instanceof ng&&e.op===t.op&&e.filters.length===t.filters.length?e.filters.reduce(((e,n,r)=>e&&sg(n,t.filters[r])),!0):!1}(e,t):void J(19439)}function cg(e){return e instanceof tg?function(e){return`${e.field.canonicalString()} ${e.op} ${Ph(e.value)}`}(e):e instanceof ng?function(e){return e.op.toString()+` {`+e.getFilters().map(cg).join(` ,`)+`}`}(e):`Filter`}var lg=class extends tg{constructor(e,t,n){super(e,t,n),this.key=Z.fromName(n.referenceValue)}matches(e){let t=Z.comparator(e.key,this.key);return this.matchesComparison(t)}},ug=class extends tg{constructor(e,t){super(e,`in`,t),this.keys=fg(`in`,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}},dg=class extends tg{constructor(e,t){super(e,`not-in`,t),this.keys=fg(`not-in`,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}};function fg(e,t){return(t.arrayValue?.values||[]).map((e=>Z.fromName(e.referenceValue)))}var pg=class extends tg{constructor(e,t){super(e,`array-contains`,t)}matches(e){let t=e.data.field(this.field);return zh(t)&&Ah(t.arrayValue,this.value)}},mg=class extends tg{constructor(e,t){super(e,`in`,t)}matches(e){let t=e.data.field(this.field);return t!==null&&Ah(this.value.arrayValue,t)}},hg=class extends tg{constructor(e,t){super(e,`not-in`,t)}matches(e){if(Ah(this.value.arrayValue,{nullValue:`NULL_VALUE`}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ah(this.value.arrayValue,t)}},gg=class extends tg{constructor(e,t){super(e,`array-contains-any`,t)}matches(e){let t=e.data.field(this.field);return!(!zh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Ah(this.value.arrayValue,e)))}},_g=class{constructor(e,t=null,n=[],r=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=a,this.endAt=o,this.Te=null}};function vg(e,t=null,n=[],r=[],i=null,a=null,o=null){return new _g(e,t,n,r,i,a,o)}function yg(e){let t=Yp(e);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+=`|cg:`+t.collectionGroup),e+=`|f:`,e+=t.filters.map((e=>og(e))).join(`,`),e+=`|ob:`,e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(`,`),Wm(t.limit)||(e+=`|l:`,e+=t.limit),t.startAt&&(e+=`|lb:`,e+=t.startAt.inclusive?`b:`:`a:`,e+=t.startAt.position.map((e=>Ph(e))).join(`,`)),t.endAt&&(e+=`|ub:`,e+=t.endAt.inclusive?`a:`:`b:`,e+=t.endAt.position.map((e=>Ph(e))).join(`,`)),t.Te=e}return t.Te}function bg(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!$h(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!sg(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Zh(e.startAt,t.startAt)&&Zh(e.endAt,t.endAt)}function xg(e){return Z.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}var Sg=class{constructor(e,t=null,n=[],r=[],i=null,a=`F`,o=null,s=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=s,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}};function Cg(e,t,n,r,i,a,o,s){return new Sg(e,t,n,r,i,a,o,s)}function wg(e){return new Sg(e)}function Tg(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Eg(e){return Z.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}function Dg(e){return e.collectionGroup!==null}function Og(e){let t=Yp(e);if(t.Ie===null){t.Ie=[];let e=new Set;for(let n of t.explicitOrderBy)t.Ie.push(n),e.add(n.field.canonicalString());let n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:`asc`;(function(e){let t=new rh(_m.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t})(t).forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Qh(r,n))})),e.has(_m.keyField().canonicalString())||t.Ie.push(new Qh(_m.keyField(),n))}return t.Ie}function kg(e){let t=Yp(e);return t.Ee||=Ag(t,Og(e)),t.Ee}function Ag(e,t){if(e.limitType===`F`)return vg(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{let t=e.dir===`desc`?`asc`:`desc`;return new Qh(e.field,t)}));let n=e.endAt?new Yh(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Yh(e.startAt.position,e.startAt.inclusive):null;return vg(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function jg(e,t){let n=e.filters.concat([t]);return new Sg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Mg(e,t){let n=e.explicitOrderBy.concat([t]);return new Sg(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}function Ng(e,t,n){return new Sg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Pg(e,t){return bg(kg(e),kg(t))&&e.limitType===t.limitType}function Fg(e){return`${yg(kg(e))}|lt:${e.limitType}`}function Ig(e){return`Query(target=${function(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=` collectionGroup=`+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>cg(e))).join(`, `)}]`),Wm(e.limit)||(t+=`, limit: `+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(`, `)}]`),e.startAt&&(t+=`, startAt: `,t+=e.startAt.inclusive?`b:`:`a:`,t+=e.startAt.position.map((e=>Ph(e))).join(`,`)),e.endAt&&(t+=`, endAt: `,t+=e.endAt.inclusive?`a:`:`b:`,t+=e.endAt.position.map((e=>Ph(e))).join(`,`)),`Target(${t})`}(kg(e))}; limitType=${e.limitType})`}function Lg(e,t){return t.isFoundDocument()&&function(e,t){let n=t.key.path;return e.collectionGroup===null?Z.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n):t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n)}(e,t)&&function(e,t){for(let n of Og(e))if(!n.field.isKeyField()&&t.data.field(n.field)===null)return!1;return!0}(e,t)&&function(e,t){for(let n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){let r=Xh(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Og(e),t)||e.endAt&&!function(e,t,n){let r=Xh(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Og(e),t))}(e,t)}function Rg(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function zg(e){return(t,n)=>{let r=!1;for(let i of Og(e)){let e=Bg(i,t,n);if(e!==0)return e;r||=i.field.isKeyField()}return 0}}function Bg(e,t,n){let r=e.field.isKeyField()?Z.comparator(t.key,n.key):function(e,t,n){let r=t.data.field(e),i=n.data.field(e);return r!==null&&i!==null?jh(r,i):J(42886)}(e.field,t,n);switch(e.dir){case`asc`:return r;case`desc`:return-1*r;default:return J(19790,{direction:e.dir})}}var Vg=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(let[t,r]of n)if(this.equalsFn(t,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Qm(this.inner,((t,n)=>{for(let[t,r]of n)e(t,r)}))}isEmpty(){return $m(this.inner)}size(){return this.innerSize}},Hg=new eh(Z.comparator);function Ug(){return Hg}var Wg=new eh(Z.comparator);function Gg(...e){let t=Wg;for(let n of e)t=t.insert(n.key,n);return t}function Kg(e){let t=Wg;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function qg(){return Yg()}function Jg(){return Yg()}function Yg(){return new Vg((e=>e.toString()),((e,t)=>e.isEqual(t)))}var Xg=new eh(Z.comparator),Zg=new rh(Z.comparator);function Qg(...e){let t=Zg;for(let n of e)t=t.add(n);return t}var $g=new rh(sm);function e_(){return $g}function t_(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:`NaN`};if(t===1/0)return{doubleValue:`Infinity`};if(t===-1/0)return{doubleValue:`-Infinity`}}return{doubleValue:Gm(t)?`-0`:t}}function n_(e){return{integerValue:``+e}}function r_(e,t){return Km(t)?n_(t):t_(e,t)}var i_=class{constructor(){this._=void 0}};function a_(e,t,n){return e instanceof c_?function(e,t){let n={fields:{[ph]:{stringValue:fh},[hh]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&gh(t)&&(t=_h(t)),t&&(n.fields[mh]=t),{mapValue:n}}(n,t):e instanceof l_?u_(e,t):e instanceof d_?f_(e,t):function(e,t){let n=s_(e,t),r=m_(n)+m_(e.Ae);return Rh(n)&&Rh(e.Ae)?n_(r):t_(e.serializer,r)}(e,t)}function o_(e,t,n){return e instanceof l_?u_(e,t):e instanceof d_?f_(e,t):n}function s_(e,t){return e instanceof p_?function(e){return Rh(e)||function(e){return!!e&&`doubleValue`in e}(e)}(t)?t:{integerValue:0}:null}var c_=class extends i_{},l_=class extends i_{constructor(e){super(),this.elements=e}};function u_(e,t){let n=h_(t);for(let t of e.elements)n.some((e=>kh(e,t)))||n.push(t);return{arrayValue:{values:n}}}var d_=class extends i_{constructor(e){super(),this.elements=e}};function f_(e,t){let n=h_(t);for(let t of e.elements)n=n.filter((e=>!kh(e,t)));return{arrayValue:{values:n}}}var p_=class extends i_{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function m_(e){return uh(e.integerValue||e.doubleValue)}function h_(e){return zh(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var g_=class{constructor(e,t){this.field=e,this.transform=t}};function __(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof l_&&t instanceof l_||e instanceof d_&&t instanceof d_?fm(e.elements,t.elements,kh):e instanceof p_&&t instanceof p_?kh(e.Ae,t.Ae):e instanceof c_&&t instanceof c_}(e.transform,t.transform)}var v_=class{constructor(e,t){this.version=e,this.transformResults=t}},y_=class e{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new e}static exists(t){return new e(void 0,t)}static updateTime(t){return new e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function b_(e,t){return e.updateTime===void 0?e.exists===void 0||e.exists===t.isFoundDocument():t.isFoundDocument()&&t.version.isEqual(e.updateTime)}var x_=class{};function S_(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new M_(e.key,y_.none()):new D_(e.key,e.data,y_.none());{let n=e.data,r=Kh.empty(),i=new rh(_m.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);t===null&&e.length>1&&(e=e.popLast(),t=n.field(e)),t===null?r.delete(e):r.set(e,t),i=i.add(e)}return new O_(e.key,r,new ah(i.toArray()),y_.none())}}function C_(e,t,n){e instanceof D_?function(e,t,n){let r=e.value.clone(),i=A_(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof O_?function(e,t,n){if(!b_(e.precondition,t))return void t.convertToUnknownDocument(n.version);let r=A_(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(k_(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function w_(e,t,n,r){return e instanceof D_?function(e,t,n,r){if(!b_(e.precondition,t))return n;let i=e.value.clone(),a=j_(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof O_?function(e,t,n,r){if(!b_(e.precondition,t))return n;let i=j_(e.fieldTransforms,r,t),a=t.data;return a.setAll(k_(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),n===null?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return b_(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function T_(e,t){let n=null;for(let r of e.fieldTransforms){let e=t.data.field(r.field),i=s_(r.transform,e||null);i!=null&&(n===null&&(n=Kh.empty()),n.set(r.field,i))}return n||null}function E_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return e===void 0&&t===void 0||!(!e||!t)&&fm(e,t,((e,t)=>__(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var D_=class extends x_{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},O_=class extends x_{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}};function k_(e){let t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){let r=e.data.field(n);t.set(n,r)}})),t}function A_(e,t,n){let r=new Map;Jp(e.length===n.length,32656,{Ve:n.length,de:e.length});for(let i=0;i<n.length;i++){let a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,o_(o,s,n[i]))}return r}function j_(e,t,n){let r=new Map;for(let i of e){let e=i.transform,a=n.data.field(i.field);r.set(i.field,a_(e,a,t))}return r}var M_=class extends x_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},N_=class extends x_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}},P_=class{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){let n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let r=this.mutations[t];r.key.isEqual(e.key)&&C_(r,e,n[t])}}applyToLocalView(e,t){for(let n of this.baseMutations)n.key.isEqual(e.key)&&(t=w_(n,e,t,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(e.key)&&(t=w_(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let n=Jg();return this.mutations.forEach((r=>{let i=e.get(r.key),a=i.overlayedDocument,o=this.applyToLocalView(a,i.mutatedFields);o=t.has(r.key)?null:o;let s=S_(a,o);s!==null&&n.set(r.key,s),a.isValidDocument()||a.convertToNoDocument(Am.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Qg())}isEqual(e){return this.batchId===e.batchId&&fm(this.mutations,e.mutations,((e,t)=>E_(e,t)))&&fm(this.baseMutations,e.baseMutations,((e,t)=>E_(e,t)))}},F_=class e{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(t,n,r){Jp(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let i=function(){return Xg}(),a=t.mutations;for(let e=0;e<a.length;e++)i=i.insert(a[e].key,r[e].version);return new e(t,n,r,i)}},I_=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}},L_=class{constructor(e,t){this.count=e,this.unchangedNames=t}},R_,z_;function B_(e){switch(e){case Y.OK:return J(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return J(15467,{code:e})}}function V_(e){if(e===void 0)return Wp(`GRPC error has no .code`),Y.UNKNOWN;switch(e){case R_.OK:return Y.OK;case R_.CANCELLED:return Y.CANCELLED;case R_.UNKNOWN:return Y.UNKNOWN;case R_.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case R_.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case R_.INTERNAL:return Y.INTERNAL;case R_.UNAVAILABLE:return Y.UNAVAILABLE;case R_.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case R_.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case R_.NOT_FOUND:return Y.NOT_FOUND;case R_.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case R_.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case R_.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case R_.ABORTED:return Y.ABORTED;case R_.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case R_.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case R_.DATA_LOSS:return Y.DATA_LOSS;default:return J(39323,{code:e})}}(z_=R_||={})[z_.OK=0]=`OK`,z_[z_.CANCELLED=1]=`CANCELLED`,z_[z_.UNKNOWN=2]=`UNKNOWN`,z_[z_.INVALID_ARGUMENT=3]=`INVALID_ARGUMENT`,z_[z_.DEADLINE_EXCEEDED=4]=`DEADLINE_EXCEEDED`,z_[z_.NOT_FOUND=5]=`NOT_FOUND`,z_[z_.ALREADY_EXISTS=6]=`ALREADY_EXISTS`,z_[z_.PERMISSION_DENIED=7]=`PERMISSION_DENIED`,z_[z_.UNAUTHENTICATED=16]=`UNAUTHENTICATED`,z_[z_.RESOURCE_EXHAUSTED=8]=`RESOURCE_EXHAUSTED`,z_[z_.FAILED_PRECONDITION=9]=`FAILED_PRECONDITION`,z_[z_.ABORTED=10]=`ABORTED`,z_[z_.OUT_OF_RANGE=11]=`OUT_OF_RANGE`,z_[z_.UNIMPLEMENTED=12]=`UNIMPLEMENTED`,z_[z_.INTERNAL=13]=`INTERNAL`,z_[z_.UNAVAILABLE=14]=`UNAVAILABLE`,z_[z_.DATA_LOSS=15]=`DATA_LOSS`;var H_=null;function U_(){return new TextEncoder}var W_=new Dp([4294967295,4294967295],0);function G_(e){let t=U_().encode(e),n=new Op;return n.update(t),new Uint8Array(n.digest())}function K_(e){let t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Dp([n,r],0),new Dp([i,a],0)]}var q_=class e{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new J_(`Invalid padding: ${t}`);if(n<0||e.length>0&&this.hashCount===0)throw new J_(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new J_(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Dp.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Dp.fromNumber(n)));return r.compare(W_)===1&&(r=new Dp([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let[t,n]=K_(G_(e));for(let e=0;e<this.hashCount;e++){let r=this.ye(t,n,e);if(!this.we(r))return!1}return!0}static create(t,n,r){let i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((e=>a.insert(e))),a}insert(e){if(this.ge===0)return;let[t,n]=K_(G_(e));for(let e=0;e<this.hashCount;e++){let r=this.ye(t,n,e);this.be(r)}}be(e){let t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}},J_=class extends Error{constructor(){super(...arguments),this.name=`BloomFilterError`}},Y_=class e{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){let i=new Map;return i.set(t,X_.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Am.min(),i,new eh(sm),Ug(),Qg())}},X_=class e{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new e(r,n,Qg(),Qg(),Qg())}},Z_=class{constructor(e,t,n,r){this.Se=e,this.removedTargetIds=t,this.key=n,this.De=r}},Q_=class{constructor(e,t){this.targetId=e,this.Ce=t}},$_=class{constructor(e,t,n=sh.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}},ev=class{constructor(){this.ve=0,this.Fe=rv(),this.Me=sh.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Qg(),t=Qg(),n=Qg();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:J(38017,{changeType:i})}})),new X_(this.Me,this.xe,e,t,n)}Ke(){this.Oe=!1,this.Fe=rv()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){--this.ve,Jp(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}},tv=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ug(),this.He=nv(),this.Je=nv(),this.Ze=new eh(sm)}Xe(e){for(let t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{let n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.We(),n.Ne||n.Ke(),n.Le(e.resumeToken);break;case 2:n.We(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.Qe(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:J(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((e,n)=>{this.rt(n)&&t(n)}))}st(e){let t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){let i=r.target;if(xg(i))if(n===0){let e=new Z(i.path);this.et(t,e,Jh.newNoDocument(e,Am.min()))}else Jp(n===1,20013,{expectedCount:n});else{let r=this._t(t);if(r!==n){let n=this.ut(e),i=n?this.ct(n,e,r):1;if(i!==0){this.it(t);let e=i===2?`TargetPurposeExistenceFilterMismatchBloom`:`TargetPurposeExistenceFilterMismatch`;this.Ze=this.Ze.insert(t,e)}H_?.lt(function(e,t,n,r,i){let a={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},o=t.unchangedNames;return o&&(a.bloomFilter={applied:i===0,hashCount:o?.hashCount??0,bitmapLength:o?.bits?.bitmap?.length??0,padding:o?.bits?.padding??0,mightContain:e=>r?.mightContain(e)??!1}),a}(r,e.Ce,this.Ge.ht(),n,i))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:n=``,padding:r=0},hashCount:i=0}=t,a,o;try{a=dh(n).toUint8Array()}catch(e){if(e instanceof oh)return Gp(`Decoding the base64 bloom filter in existence filter failed (`+e.message+`); ignoring the bloom filter and falling back to full re-query.`),null;throw e}try{o=new q_(a,r,i)}catch(e){return Gp(e instanceof J_?`BloomFilter error: `:`Applying bloom filter failed: `,e),null}return o.ge===0?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){let n=this.Ge.getRemoteKeysForTarget(t),r=0;return n.forEach((n=>{let i=this.Ge.ht(),a=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(a)||(this.et(t,n,null),r++)})),r}Tt(e){let t=new Map;this.ze.forEach(((n,r)=>{let i=this.ot(r);if(i){if(n.current&&xg(i.target)){let t=new Z(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,Jh.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.Ke())}}));let n=Qg();this.Je.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{let t=this.ot(e);return!t||t.purpose===`TargetPurposeLimboResolution`||(r=!1,!1)})),r&&(n=n.add(e))})),this.je.forEach(((t,n)=>n.setReadTime(e)));let r=new Y_(e,t,this.Ze,this.je,n);return this.je=Ug(),this.He=nv(),this.Je=nv(),this.Ze=new eh(sm),r}Ye(e,t){if(!this.rt(e))return;let n=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,n),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;let r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new ev,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new rh(sm),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new rh(sm),this.He=this.He.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||q(`WatchChangeAggregator`,`Detected inactive target`,e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ev),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function nv(){return new eh(Z.comparator)}function rv(){return new eh(Z.comparator)}var iv={asc:`ASCENDING`,desc:`DESCENDING`},av={"<":`LESS_THAN`,"<=":`LESS_THAN_OR_EQUAL`,">":`GREATER_THAN`,">=":`GREATER_THAN_OR_EQUAL`,"==":`EQUAL`,"!=":`NOT_EQUAL`,"array-contains":`ARRAY_CONTAINS`,in:`IN`,"not-in":`NOT_IN`,"array-contains-any":`ARRAY_CONTAINS_ANY`},ov={and:`AND`,or:`OR`},sv=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function cv(e,t){return e.useProto3Json||Wm(t)?t:{value:t}}function lv(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,``).replace(`Z`,``)}.${(`000000000`+t.nanoseconds).slice(-9)}Z`:{seconds:``+t.seconds,nanos:t.nanoseconds}}function uv(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function dv(e,t){return lv(e,t.toTimestamp())}function fv(e){return Jp(!!e,49232),Am.fromTimestamp(function(e){let t=lh(e);return new km(t.seconds,t.nanos)}(e))}function pv(e,t){return mv(e,t).canonicalString()}function mv(e,t){let n=function(e){return new hm([`projects`,e.projectId,`databases`,e.database])}(e).child(`documents`);return t===void 0?n:n.child(t)}function hv(e){let t=hm.fromString(e);return Jp(Rv(t),10190,{key:t.toString()}),t}function gv(e,t){return pv(e.databaseId,t.path)}function _v(e,t){let n=hv(t);if(n.get(1)!==e.databaseId.projectId)throw new X(Y.INVALID_ARGUMENT,`Tried to deserialize key from different project: `+n.get(1)+` vs `+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new X(Y.INVALID_ARGUMENT,`Tried to deserialize key from different database: `+n.get(3)+` vs `+e.databaseId.database);return new Z(xv(n))}function vv(e,t){return pv(e.databaseId,t)}function yv(e){let t=hv(e);return t.length===4?hm.emptyPath():xv(t)}function bv(e){return new hm([`projects`,e.databaseId.projectId,`databases`,e.databaseId.database]).canonicalString()}function xv(e){return Jp(e.length>4&&e.get(4)===`documents`,29091,{key:e.toString()}),e.popFirst(5)}function Sv(e,t,n){return{name:gv(e,t),fields:n.value.mapValue.fields}}function Cv(e,t){let n;if(`targetChange`in t){t.targetChange;let r=function(e){return e===`NO_CHANGE`?0:e===`ADD`?1:e===`REMOVE`?2:e===`CURRENT`?3:e===`RESET`?4:J(39313,{state:e})}(t.targetChange.targetChangeType||`NO_CHANGE`),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Jp(t===void 0||typeof t==`string`,58123),sh.fromBase64String(t||``)):(Jp(t===void 0||t instanceof Buffer||t instanceof Uint8Array,16193),sh.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause;n=new $_(r,i,a,o&&function(e){return new X(e.code===void 0?Y.UNKNOWN:V_(e.code),e.message||``)}(o)||null)}else if(`documentChange`in t){t.documentChange;let r=t.documentChange;r.document,r.document.name,r.document.updateTime;let i=_v(e,r.document.name),a=fv(r.document.updateTime),o=r.document.createTime?fv(r.document.createTime):Am.min(),s=new Kh({mapValue:{fields:r.document.fields}}),c=Jh.newFoundDocument(i,a,o,s);n=new Z_(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if(`documentDelete`in t){t.documentDelete;let r=t.documentDelete;r.document;let i=_v(e,r.document),a=r.readTime?fv(r.readTime):Am.min(),o=Jh.newNoDocument(i,a);n=new Z_([],r.removedTargetIds||[],o.key,o)}else if(`documentRemove`in t){t.documentRemove;let r=t.documentRemove;r.document;let i=_v(e,r.document);n=new Z_([],r.removedTargetIds||[],i,null)}else{if(!(`filter`in t))return J(11601,{Vt:t});{t.filter;let e=t.filter;e.targetId;let{count:r=0,unchangedNames:i}=e,a=new L_(r,i),o=e.targetId;n=new Q_(o,a)}}return n}function wv(e,t){let n;if(t instanceof D_)n={update:Sv(e,t.key,t.value)};else if(t instanceof M_)n={delete:gv(e,t.key)};else if(t instanceof O_)n={update:Sv(e,t.key,t.data),updateMask:Lv(t.fieldMask)};else{if(!(t instanceof N_))return J(16599,{dt:t.type});n={verify:gv(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){let n=t.transform;if(n instanceof c_)return{fieldPath:t.field.canonicalString(),setToServerValue:`REQUEST_TIME`};if(n instanceof l_)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof d_)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof p_)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw J(20930,{transform:t.transform})}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return t.updateTime===void 0?t.exists===void 0?J(27497):{exists:t.exists}:{updateTime:dv(e,t.updateTime)}}(e,t.precondition)),n}function Tv(e,t){return e&&e.length>0?(Jp(t!==void 0,14353),e.map((e=>function(e,t){let n=e.updateTime?fv(e.updateTime):fv(t);return n.isEqual(Am.min())&&(n=fv(t)),new v_(n,e.transformResults||[])}(e,t)))):[]}function Ev(e,t){return{documents:[vv(e,t.path)]}}function Dv(e,t){let n={structuredQuery:{}},r=t.path,i;t.collectionGroup===null?(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]):(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]),n.parent=vv(e,i);let a=function(e){if(e.length!==0)return Iv(ng.create(e,`and`))}(t.filters);a&&(n.structuredQuery.where=a);let o=function(e){if(e.length!==0)return e.map((e=>function(e){return{field:Pv(e.field),direction:jv(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);let s=cv(e,t.limit);return s!==null&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function Ov(e){let t=yv(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Jp(r===1,65062);let e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){let t=Av(e);return t instanceof ng&&ig(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Qh(Fv(e.field),function(e){switch(e){case`ASCENDING`:return`asc`;case`DESCENDING`:return`desc`;default:return}}(e.direction))}(e)))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t=typeof e==`object`?e.value:e,Wm(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){let t=!!e.before;return new Yh(e.values||[],t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){let t=!e.before;return new Yh(e.values||[],t)}(n.endAt)),Cg(t,i,o,a,s,`F`,c,l)}function kv(e,t){let n=function(e){switch(e){case`TargetPurposeListen`:return null;case`TargetPurposeExistenceFilterMismatch`:return`existence-filter-mismatch`;case`TargetPurposeExistenceFilterMismatchBloom`:return`existence-filter-mismatch-bloom`;case`TargetPurposeLimboResolution`:return`limbo-document`;default:return J(28987,{purpose:e})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Av(e){return e.unaryFilter===void 0?e.fieldFilter===void 0?e.compositeFilter===void 0?J(30097,{filter:e}):function(e){return ng.create(e.compositeFilter.filters.map((e=>Av(e))),function(e){switch(e){case`AND`:return`and`;case`OR`:return`or`;default:return J(1026)}}(e.compositeFilter.op))}(e):function(e){return tg.create(Fv(e.fieldFilter.field),function(e){switch(e){case`EQUAL`:return`==`;case`NOT_EQUAL`:return`!=`;case`GREATER_THAN`:return`>`;case`GREATER_THAN_OR_EQUAL`:return`>=`;case`LESS_THAN`:return`<`;case`LESS_THAN_OR_EQUAL`:return`<=`;case`ARRAY_CONTAINS`:return`array-contains`;case`IN`:return`in`;case`NOT_IN`:return`not-in`;case`ARRAY_CONTAINS_ANY`:return`array-contains-any`;case`OPERATOR_UNSPECIFIED`:return J(58110);default:return J(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):function(e){switch(e.unaryFilter.op){case`IS_NAN`:let t=Fv(e.unaryFilter.field);return tg.create(t,`==`,{doubleValue:NaN});case`IS_NULL`:let n=Fv(e.unaryFilter.field);return tg.create(n,`==`,{nullValue:`NULL_VALUE`});case`IS_NOT_NAN`:let r=Fv(e.unaryFilter.field);return tg.create(r,`!=`,{doubleValue:NaN});case`IS_NOT_NULL`:let i=Fv(e.unaryFilter.field);return tg.create(i,`!=`,{nullValue:`NULL_VALUE`});case`OPERATOR_UNSPECIFIED`:return J(61313);default:return J(60726)}}(e)}function jv(e){return iv[e]}function Mv(e){return av[e]}function Nv(e){return ov[e]}function Pv(e){return{fieldPath:e.canonicalString()}}function Fv(e){return _m.fromServerFormat(e.fieldPath)}function Iv(e){return e instanceof tg?function(e){if(e.op===`==`){if(Vh(e.value))return{unaryFilter:{field:Pv(e.field),op:`IS_NAN`}};if(Bh(e.value))return{unaryFilter:{field:Pv(e.field),op:`IS_NULL`}}}else if(e.op===`!=`){if(Vh(e.value))return{unaryFilter:{field:Pv(e.field),op:`IS_NOT_NAN`}};if(Bh(e.value))return{unaryFilter:{field:Pv(e.field),op:`IS_NOT_NULL`}}}return{fieldFilter:{field:Pv(e.field),op:Mv(e.op),value:e.value}}}(e):e instanceof ng?function(e){let t=e.getFilters().map((e=>Iv(e)));return t.length===1?t[0]:{compositeFilter:{op:Nv(e.op),filters:t}}}(e):J(54877,{filter:e})}function Lv(e){let t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Rv(e){return e.length>=4&&e.get(0)===`projects`&&e.get(2)===`databases`}function zv(e){return!!e&&typeof e._toProto==`function`&&e._protoValueType===`ProtoValue`}var Bv=class e{constructor(e,t,n,r,i=Am.min(),a=Am.min(),o=sh.EMPTY_BYTE_STRING,s=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=s}withSequenceNumber(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}},Vv=class{constructor(e){this.yt=e}};function Hv(e){let t=Ov({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType===`LAST`?Ng(t,t.limit,`L`):t}var Uv=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if(`nullValue`in e)this.Ft(t,5);else if(`booleanValue`in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if(`integerValue`in e)this.Ft(t,15),t.Mt(uh(e.integerValue));else if(`doubleValue`in e){let n=uh(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Gm(n)?t.Mt(0):t.Mt(n))}else if(`timestampValue`in e){let n=e.timestampValue;this.Ft(t,20),typeof n==`string`&&(n=lh(n)),t.xt(`${n.seconds||``}`),t.Mt(n.nanos||0)}else if(`stringValue`in e)this.Ot(e.stringValue,t),this.Nt(t);else if(`bytesValue`in e)this.Ft(t,30),t.Bt(dh(e.bytesValue)),this.Nt(t);else if(`referenceValue`in e)this.Lt(e.referenceValue,t);else if(`geoPointValue`in e){let n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else `mapValue`in e?Gh(e)?this.Ft(t,2**53-1):Uh(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):`arrayValue`in e?(this.qt(e.arrayValue,t),this.Nt(t)):J(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){let n=e.fields||{};this.Ft(t,55);for(let e of Object.keys(n))this.Ot(e,t),this.Ct(n[e],t)}kt(e,t){let n=e.fields||{};this.Ft(t,53);let r=Dh,i=n[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(uh(i)),this.Ot(r,t),this.Ct(n[r],t)}qt(e,t){let n=e.values||[];this.Ft(t,50);for(let e of n)this.Ct(e,t)}Lt(e,t){this.Ft(t,37),Z.fromName(e).path.forEach((e=>{this.Ft(t,60),this.$t(e,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Uv.Wt=new Uv;var Wv=class{constructor(){this.Sn=new Gv}addToCollectionParentIndex(e,t){return this.Sn.add(t),Q.resolve()}getCollectionParents(e,t){return Q.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return Q.resolve()}deleteFieldIndex(e,t){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,t){return Q.resolve()}getDocumentsMatchingTarget(e,t){return Q.resolve(null)}getIndexType(e,t){return Q.resolve(0)}getFieldIndexes(e,t){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,t){return Q.resolve(Fm.min())}getMinOffsetFromCollectionGroup(e,t){return Q.resolve(Fm.min())}updateCollectionGroup(e,t,n){return Q.resolve()}updateIndexEntries(e,t){return Q.resolve()}},Gv=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new rh(hm.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new rh(hm.comparator)).toArray()}};new Uint8Array;var Kv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qv=41943040,Jv=class e{static withCacheSize(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}};Jv.DEFAULT_COLLECTION_PERCENTILE=10,Jv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jv.DEFAULT=new Jv(qv,Jv.DEFAULT_COLLECTION_PERCENTILE,Jv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jv.DISABLED=new Jv(-1,0,0);var Yv=class e{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new e(0)}static ar(){return new e(-1)}},Xv=`LruGarbageCollector`,Zv=1048576;function Qv([e,t],[n,r]){let i=sm(e,n);return i===0?sm(t,r):i}var $v=class{constructor(e){this.Pr=e,this.buffer=new rh(Qv),this.Tr=0}Ir(){return++this.Tr}Er(e){let t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{let e=this.buffer.last();Qv(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}},ey=class{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&=(this.Rr.cancel(),null)}get started(){return this.Rr!==null}Ar(e){q(Xv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay(`lru_garbage_collection`,e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Vm(e)?q(Xv,`Ignoring IndexedDB error during garbage collection: `,e):await zm(e)}await this.Ar(3e5)}))}},ty=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(t===0)return Q.resolve(Hm.ce);let n=new $v(t);return this.Vr.forEachTarget(e,(e=>n.Er(e.sequenceNumber))).next((()=>this.Vr.mr(e,(e=>n.Er(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(q(`LruGarbageCollector`,`Garbage collection skipped; disabled`),Q.resolve(Kv)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(q(`LruGarbageCollector`,`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kv):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let n,r,i,a,o,s,c,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(q(`LruGarbageCollector`,`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,s=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),Up()<=zd.DEBUG&&q(`LruGarbageCollector`,`LRU Garbage Collection\n\tCounted targets in ${a-l}ms\n\tDetermined least recently used ${r} in `+(o-a)+`ms
\tRemoved ${i} targets in `+(s-o)+`ms
\tRemoved ${e} documents in `+(c-s)+`ms
Total Duration: ${c-l}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}};function ny(e,t){return new ty(e,t)}var ry=class{constructor(){this.changes=new Vg((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Jh.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let n=this.changes.get(t);return n===void 0?this.getFromCache(e,t):Q.resolve(n)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}},iy=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}},ay=class{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(n!==null&&w_(n.mutation,e,ah.empty(),km.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Qg()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=Qg()){let r=qg();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Gg();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){let n=qg();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Qg())))}populateOverlays(e,t,n){let r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Ug(),a=Yg(),o=function(){return Yg()}();return t.forEach(((e,t)=>{let o=n.get(t.key);r.has(t.key)&&(o===void 0||o.mutation instanceof O_)?i=i.insert(t.key,t):o===void 0?a.set(t.key,ah.empty()):(a.set(t.key,o.mutation.getFieldMask()),w_(o.mutation,t,o.mutation.getFieldMask(),km.now()))})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>a.set(e,t))),t.forEach(((e,t)=>o.set(e,new iy(t,a.get(e)??null)))),o)))}recalculateAndSaveOverlays(e,t){let n=Yg(),r=new eh(((e,t)=>e-t)),i=Qg();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(let i of e)i.keys().forEach((e=>{let a=t.get(e);if(a===null)return;let o=n.get(e)||ah.empty();o=i.applyToLocalView(a,o),n.set(e,o);let s=(r.get(i.batchId)||Qg()).add(e);r=r.insert(i.batchId,s)}))})).next((()=>{let a=[],o=r.getReverseIterator();for(;o.hasNext();){let r=o.getNext(),s=r.key,c=r.value,l=Jg();c.forEach((e=>{if(!i.has(e)){let r=S_(t.get(e),n.get(e));r!==null&&l.set(e,r),i=i.add(e)}})),a.push(this.documentOverlayCache.saveOverlays(e,s,l))}return Q.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return Eg(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Dg(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{let a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Q.resolve(qg()),o=jm,s=i;return a.next((t=>Q.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Q.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{s=s.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,s,t,Qg()))).next((e=>({batchId:o,changes:Kg(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Z(t)).next((e=>{let t=Gg();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){let i=t.collectionGroup,a=Gg();return this.indexManager.getCollectionParents(e,i).next((o=>Q.forEach(o,(o=>{let s=function(e,t){return new Sg(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next((e=>{e.forEach(((e,t)=>{a=a.insert(e,t)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{let r=n.getKey();e.get(r)===null&&(e=e.insert(r,Jh.newInvalidDocument(r)))}));let n=Gg();return e.forEach(((e,r)=>{let a=i.get(e);a!==void 0&&w_(a.mutation,r,ah.empty(),km.now()),Lg(t,r)&&(n=n.insert(e,r))})),n}))}},oy=class{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return Q.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:fv(e.createTime)}}(t)),Q.resolve()}getNamedQuery(e,t){return Q.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,function(e){return{name:e.name,query:Hv(e.bundledQuery),readTime:fv(e.readTime)}}(t)),Q.resolve()}},sy=class{constructor(){this.overlays=new eh(Z.comparator),this.Lr=new Map}getOverlay(e,t){return Q.resolve(this.overlays.get(t))}getOverlays(e,t){let n=qg();return Q.forEach(t,(t=>this.getOverlay(e,t).next((e=>{e!==null&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.bt(e,t,r)})),Q.resolve()}removeOverlaysForBatchId(e,t,n){let r=this.Lr.get(n);return r!==void 0&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Lr.delete(n)),Q.resolve()}getOverlaysForCollection(e,t,n){let r=qg(),i=t.length+1,a=new Z(t.child(``)),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){let e=o.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Q.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new eh(((e,t)=>e-t)),a=this.overlays.getIterator();for(;a.hasNext();){let e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);t===null&&(t=qg(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let o=qg(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Q.resolve(o)}bt(e,t,n){let r=this.overlays.get(n.key);if(r!==null){let e=this.Lr.get(r.largestBatchId).delete(n.key);this.Lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new I_(t,n));let i=this.Lr.get(t);i===void 0&&(i=Qg(),this.Lr.set(t,i)),this.Lr.set(t,i.add(n.key))}},cy=class{constructor(){this.sessionToken=sh.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Q.resolve()}},ly=class{constructor(){this.kr=new rh(uy.Kr),this.qr=new rh(uy.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){let n=new uy(e,t);this.kr=this.kr.add(n),this.qr=this.qr.add(n)}$r(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Wr(new uy(e,t))}Qr(e,t){e.forEach((e=>this.removeReference(e,t)))}Gr(e){let t=new Z(new hm([])),n=new uy(t,e),r=new uy(t,e+1),i=[];return this.qr.forEachInRange([n,r],(e=>{this.Wr(e),i.push(e.key)})),i}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){let t=new Z(new hm([])),n=new uy(t,e),r=new uy(t,e+1),i=Qg();return this.qr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){let t=new uy(e,0),n=this.kr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}},uy=class{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Z.comparator(e.key,t.key)||sm(e.Hr,t.Hr)}static Ur(e,t){return sm(e.Hr,t.Hr)||Z.comparator(e.key,t.key)}},dy=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new rh(uy.Kr)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){let i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new P_(i,t,n,r);this.mutationQueue.push(a);for(let t of r)this.Jr=this.Jr.add(new uy(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return Q.resolve(a)}lookupMutationBatch(e,t){return Q.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let n=t+1,r=this.Xr(n),i=r<0?0:r;return Q.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?Um:this.Yn-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let n=new uy(t,0),r=new uy(t,1/0),i=[];return this.Jr.forEachInRange([n,r],(e=>{let t=this.Zr(e.Hr);i.push(t)})),Q.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new rh(sm);return t.forEach((e=>{let t=new uy(e,0),r=new uy(e,1/0);this.Jr.forEachInRange([t,r],(e=>{n=n.add(e.Hr)}))})),Q.resolve(this.Yr(n))}getAllMutationBatchesAffectingQuery(e,t){let n=t.path,r=n.length+1,i=n;Z.isDocumentKey(i)||(i=i.child(``));let a=new uy(new Z(i),0),o=new rh(sm);return this.Jr.forEachWhile((e=>{let t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Hr)),!0)}),a),Q.resolve(this.Yr(o))}Yr(e){let t=[];return e.forEach((e=>{let n=this.Zr(e);n!==null&&t.push(n)})),t}removeMutationBatch(e,t){Jp(this.ei(t.batchId,`removed`)===0,55003),this.mutationQueue.shift();let n=this.Jr;return Q.forEach(t.mutations,(r=>{let i=new uy(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Jr=n}))}nr(e){}containsKey(e,t){let n=new uy(t,0),r=this.Jr.firstAfterOrEqual(n);return Q.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}},fy=class{constructor(e){this.ti=e,this.docs=function(){return new eh(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ti(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let n=this.docs.get(t);return Q.resolve(n?n.document.mutableCopy():Jh.newInvalidDocument(t))}getEntries(e,t){let n=Ug();return t.forEach((e=>{let t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Jh.newInvalidDocument(e))})),Q.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Ug(),a=t.path,o=new Z(a.child(`__id-9223372036854775808__`)),s=this.docs.getIteratorFrom(o);for(;s.hasNext();){let{key:e,value:{document:o}}=s.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||Im(Pm(o),n)<=0||(r.has(o.key)||Lg(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Q.resolve(i)}getAllFromCollectionGroup(e,t,n,r){J(9500)}ni(e,t){return Q.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new py(this)}getSize(e){return Q.resolve(this.size)}},py=class extends ry{constructor(e){super(),this.Mr=e}applyChanges(e){let t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(n)})),Q.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}},my=class{constructor(e){this.persistence=e,this.ri=new Vg((e=>yg(e)),bg),this.lastRemoteSnapshotVersion=Am.min(),this.highestTargetId=0,this.ii=0,this.si=new ly,this.targetCount=0,this.oi=Yv._r()}forEachTarget(e,t){return this.ri.forEach(((e,n)=>t(n))),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ii&&(this.ii=t),Q.resolve()}lr(e){this.ri.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.oi=new Yv(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,Q.resolve()}updateTargetData(e,t){return this.lr(t),Q.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),--this.targetCount,Q.resolve()}removeTargets(e,t,n){let r=0,i=[];return this.ri.forEach(((a,o)=>{o.sequenceNumber<=t&&n.get(o.targetId)===null&&(this.ri.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Q.waitFor(i).next((()=>r))}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,t){let n=this.ri.get(t)||null;return Q.resolve(n)}addMatchingKeys(e,t,n){return this.si.$r(t,n),Q.resolve()}removeMatchingKeys(e,t,n){this.si.Qr(t,n);let r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Q.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),Q.resolve()}getMatchingKeysForTargetId(e,t){let n=this.si.jr(t);return Q.resolve(n)}containsKey(e,t){return Q.resolve(this.si.containsKey(t))}},hy=class{constructor(e,t){this._i={},this.overlays={},this.ai=new Hm(0),this.ui=!1,this.ui=!0,this.ci=new cy,this.referenceDelegate=e(this),this.li=new my(this),this.indexManager=new Wv,this.remoteDocumentCache=function(e){return new fy(e)}((e=>this.referenceDelegate.hi(e))),this.serializer=new Vv(t),this.Pi=new oy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new sy,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this._i[e.toKey()];return n||(n=new dy(t,this.referenceDelegate),this._i[e.toKey()]=n),n}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,n){q(`MemoryPersistence`,`Starting transaction:`,e);let r=new gy(this.ai.next());return this.referenceDelegate.Ti(),n(r).next((e=>this.referenceDelegate.Ii(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ei(e,t){return Q.or(Object.values(this._i).map((n=>()=>n.containsKey(e,t))))}},gy=class extends Rm{constructor(e){super(),this.currentSequenceNumber=e}},_y=class e{constructor(e){this.persistence=e,this.Ri=new ly,this.Ai=null}static Vi(t){return new e(t)}get di(){if(this.Ai)return this.Ai;throw J(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.di.delete(n.toString()),Q.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.di.add(n.toString()),Q.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Q.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((e=>this.di.add(e.toString())));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.di.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.di,(n=>{let r=Z.fromPath(n);return this.mi(e,r).next((e=>{e||t.removeEntry(r,Am.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((e=>{e?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return Q.or([()=>Q.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},vy=class e{constructor(e,t){this.persistence=e,this.fi=new Vg((e=>Jm(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=ny(this,t)}static Vi(t,n){return new e(t,n)}Ti(){}Ii(e){return Q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){let t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}pr(e){let t=0;return this.mr(e,(e=>{t++})).next((()=>t))}mr(e,t){return Q.forEach(this.fi,((n,r)=>this.wr(e,n,r).next((e=>e?Q.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0,r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ni(e,(r=>this.wr(e,r,t).next((e=>{e||(n++,i.removeEntry(r,Am.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),Q.resolve()}removeTarget(e,t){let n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),Q.resolve()}removeReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),Q.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ih(e.data.value)),t}wr(e,t,n){return Q.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let e=this.fi.get(t);return Q.resolve(e!==void 0&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}},yy=class e{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Ts=n,this.Is=r}static Es(t,n){let r=Qg(),i=Qg();for(let e of n.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:i=i.add(e.doc.key)}return new e(t,n.fromCache,r,i)}},by=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}},xy=class{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return pd()?8:Bm(od())>0?6:4}()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){let i={result:null};return this.gs(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ps(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;let n=new by;return this.ys(e,t,n).next((r=>{if(i.result=r,this.As)return this.ws(e,t,n,r.size)}))})).next((()=>i.result))}ws(e,t,n,r){return n.documentReadCount<this.Vs?(Up()<=zd.DEBUG&&q(`QueryEngine`,`SDK will not create cache indexes for query:`,Ig(t),`since it only creates cache indexes for collection contains`,`more than or equal to`,this.Vs,`documents`),Q.resolve()):(Up()<=zd.DEBUG&&q(`QueryEngine`,`Query:`,Ig(t),`scans`,n.documentReadCount,`local documents and returns`,r,`documents as results.`),n.documentReadCount>this.ds*r?(Up()<=zd.DEBUG&&q(`QueryEngine`,`The SDK decides to create cache indexes for query:`,Ig(t),`as using cache indexes may help improve performance.`),this.indexManager.createTargetIndexes(e,kg(t))):Q.resolve())}gs(e,t){if(Tg(t))return Q.resolve(null);let n=kg(t);return this.indexManager.getIndexType(e,n).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=Ng(t,null,`F`),n=kg(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{let i=Qg(...r);return this.fs.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{let a=this.bs(t,r);return this.Ss(t,a,i,n.readTime)?this.gs(e,Ng(t,null,`F`)):this.Ds(e,a,t,n)}))))})))))}ps(e,t,n,r){return Tg(t)||r.isEqual(Am.min())?Q.resolve(null):this.fs.getDocuments(e,n).next((i=>{let a=this.bs(t,i);return this.Ss(t,a,n,r)?Q.resolve(null):(Up()<=zd.DEBUG&&q(`QueryEngine`,`Re-using previous result from %s to execute query: %s`,r.toString(),Ig(t)),this.Ds(e,a,t,Nm(r,jm)).next((e=>e)))}))}bs(e,t){let n=new rh(zg(e));return t.forEach(((t,r)=>{Lg(e,r)&&(n=n.add(r))})),n}Ss(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;let i=e.limitType===`F`?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ys(e,t,n){return Up()<=zd.DEBUG&&q(`QueryEngine`,`Using full collection scan to execute query:`,Ig(t)),this.fs.getDocumentsMatchingQuery(e,t,Fm.min(),n)}Ds(e,t,n,r){return this.fs.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}},Sy=`LocalStore`,Cy=3e8,wy=class{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new eh(sm),this.Fs=new Vg((e=>yg(e)),bg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(n)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ay(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction(`Collect garbage`,`readwrite-primary`,(t=>e.collect(t,this.vs)))}};function Ty(e,t,n,r){return new wy(e,t,n,r)}async function Ey(e,t){let n=Yp(e);return await n.persistence.runTransaction(`Handle user change`,`readonly`,(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{let i=[],a=[],o=Qg();for(let e of r){i.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}for(let e of t){a.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Ns:e,removedBatchIds:i,addedBatchIds:a})))}))}))}function Dy(e,t){let n=Yp(e);return n.persistence.runTransaction(`Acknowledge batch`,`readwrite-primary`,(e=>{let r=t.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){let i=n.batch,a=i.keys(),o=Q.resolve();return a.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{let a=n.docVersions.get(e);Jp(a!==null,48541),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Qg();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}function Oy(e){let t=Yp(e);return t.persistence.runTransaction(`Get last remote snapshot version`,`readonly`,(e=>t.li.getLastRemoteSnapshotVersion(e)))}function ky(e,t){let n=Yp(e),r=t.snapshotVersion,i=n.vs;return n.persistence.runTransaction(`Apply remote event`,`readwrite-primary`,(e=>{let a=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;let o=[];t.targetChanges.forEach(((a,s)=>{let c=i.get(s);if(!c)return;o.push(n.li.removeMatchingKeys(e,a.removedDocuments,s).next((()=>n.li.addMatchingKeys(e,a.addedDocuments,s))));let l=c.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.get(s)===null?a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)):l=l.withResumeToken(sh.EMPTY_BYTE_STRING,Am.min()).withLastLimboFreeSnapshotVersion(Am.min()),i=i.insert(s,l),function(e,t,n){return e.resumeToken.approximateByteSize()===0||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=Cy?!0:n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,a)&&o.push(n.li.updateTargetData(e,l))}));let s=Ug(),c=Qg();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Ay(e,a,t.documentUpdates).next((e=>{s=e.Bs,c=e.Ls}))),!r.isEqual(Am.min())){let t=n.li.getLastRemoteSnapshotVersion(e).next((t=>n.li.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Q.waitFor(o).next((()=>a.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,s,c))).next((()=>s))})).then((e=>(n.vs=i,e)))}function Ay(e,t,n){let r=Qg(),i=Qg();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Ug();return n.forEach(((n,a)=>{let o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Am.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||a.version.compareTo(o.version)===0&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):q(Sy,`Ignoring outdated watch update for `,n,`. Current version:`,o.version,` Watch version:`,a.version)})),{Bs:r,Ls:i}}))}function jy(e,t){let n=Yp(e);return n.persistence.runTransaction(`Get next mutation batch`,`readonly`,(e=>(t===void 0&&(t=Um),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function My(e,t){let n=Yp(e);return n.persistence.runTransaction(`Allocate target`,`readwrite`,(e=>{let r;return n.li.getTargetData(e,t).next((i=>i?(r=i,Q.resolve(r)):n.li.allocateTargetId(e).next((i=>(r=new Bv(t,i,`TargetPurposeListen`,e.currentSequenceNumber),n.li.addTargetData(e,r).next((()=>r)))))))})).then((e=>{let r=n.vs.get(e.targetId);return(r===null||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.vs=n.vs.insert(e.targetId,e),n.Fs.set(t,e.targetId)),e}))}async function Ny(e,t,n){let r=Yp(e),i=r.vs.get(t),a=n?`readwrite`:`readwrite-primary`;try{n||await r.persistence.runTransaction(`Release target`,a,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Vm(e))throw e;q(Sy,`Failed to update sequence numbers for target ${t}: ${e}`)}r.vs=r.vs.remove(t),r.Fs.delete(i.target)}function Py(e,t,n){let r=Yp(e),i=Am.min(),a=Qg();return r.persistence.runTransaction(`Execute query`,`readwrite`,(e=>function(e,t,n){let r=Yp(e),i=r.Fs.get(n);return i===void 0?r.li.getTargetData(t,n):Q.resolve(r.vs.get(i))}(r,e,kg(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(e,t.targetId).next((e=>{a=e}))})).next((()=>r.Cs.getDocumentsMatchingQuery(e,t,n?i:Am.min(),n?a:Qg()))).next((e=>(Fy(r,Rg(t),e),{documents:e,ks:a})))))}function Fy(e,t,n){let r=e.Ms.get(t)||Am.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ms.set(t,r)}var Iy=class{constructor(){this.activeTargetIds=e_()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Ly=class{constructor(){this.vo=new Iy,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||`not-current`}updateQueryState(e,t,n){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Iy,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}},Ry=class{Mo(e){}shutdown(){}},zy=`ConnectivityMonitor`,By=class{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener(`online`,this.xo),window.removeEventListener(`offline`,this.No)}ko(){window.addEventListener(`online`,this.xo),window.addEventListener(`offline`,this.No)}Oo(){q(zy,`Network connectivity changed: AVAILABLE`);for(let e of this.Lo)e(0)}Bo(){q(zy,`Network connectivity changed: UNAVAILABLE`);for(let e of this.Lo)e(1)}static v(){return typeof window<`u`&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}},Vy=null;function Hy(){return Vy===null?Vy=function(){return 268435456+Math.round(2147483648*Math.random())}():Vy++,`0x`+Vy.toString(16)}var Uy=`RestConnection`,Wy={BatchGetDocuments:`batchGet`,Commit:`commit`,RunQuery:`runQuery`,RunAggregationQuery:`runAggregationQuery`,ExecutePipeline:`executePipeline`},Gy=class{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?`https`:`http`,n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+`://`+e.host,this.Uo=`projects/${n}/databases/${r}`,this.$o=this.databaseId.database===bh?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Wo(e,t,n,r,i){let a=Hy(),o=this.Qo(e,t.toUriEncodedString());q(Uy,`Sending RPC '${e}' ${a}:`,o,n);let s={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(s,r,i);let{host:c}=new URL(o),l=Qu(c);return this.zo(e,o,s,n,l).then((t=>(q(Uy,`Received RPC '${e}' ${a}: `,t),t)),(t=>{throw Gp(Uy,`RPC '${e}' ${a} failed with error: `,t,`url: `,o,`request:`,n),t}))}jo(e,t,n,r,i,a){return this.Wo(e,t,n,r,i)}Go(e,t,n){e[`X-Goog-Api-Client`]=function(){return`gl-js/ fire/`+Bp}(),e[`Content-Type`]=`text/plain`,this.databaseInfo.appId&&(e[`X-Firebase-GMPID`]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}Qo(e,t){let n=Wy[e],r=`${this.qo}/v1/${t}:${n}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}},Ky=class{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}},qy=`WebChannelConnection`,Jy=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))},Yy=class e extends Gy{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){e.c_||=(Jy(Lp(),Ip.STAT_EVENT,(e=>{e.stat===Fp.PROXY?q(qy,`STAT_EVENT: detected buffering proxy`):e.stat===Fp.NOPROXY&&q(qy,`STAT_EVENT: detected no buffering proxy`)})),!0)}zo(e,t,n,r,i){let a=Hy();return new Promise(((i,o)=>{let s=new jp;s.setWithCredentials(!0),s.listenOnce(Np.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case Pp.NO_ERROR:let t=s.getResponseJson();q(qy,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(t)),i(t);break;case Pp.TIMEOUT:q(qy,`RPC '${e}' ${a} timed out`),o(new X(Y.DEADLINE_EXCEEDED,`Request time out`));break;case Pp.HTTP_ERROR:let n=s.getStatus();if(q(qy,`RPC '${e}' ${a} failed with status:`,n,`response text:`,s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=e?.error;t&&t.status&&t.message?o(new X(function(e){let t=e.toLowerCase().replace(/_/g,`-`);return Object.values(Y).indexOf(t)>=0?t:Y.UNKNOWN}(t.status),t.message)):o(new X(Y.UNKNOWN,`Server responded with status `+s.getStatus()))}else o(new X(Y.UNAVAILABLE,`Connection failed.`));break;default:J(9055,{l_:e,streamId:a,h_:s.getLastErrorCode(),P_:s.getLastError()})}}finally{q(qy,`RPC '${e}' ${a} completed.`)}}));let c=JSON.stringify(r);q(qy,`RPC '${e}' ${a} sending request:`,r),s.send(t,`POST`,c,n,15)}))}T_(t,n,r){let i=Hy(),a=[this.qo,`/`,`google.firestore.v1.Firestore`,`/`,t,`/channel`],o=this.createWebChannelTransport(),s={httpSessionIdParam:`gsessionid`,initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(s.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(s.useFetchStreams=!0),this.Go(s.initMessageHeaders,n,r),s.encodeInitMessageHeaders=!0;let l=a.join(``);q(qy,`Creating RPC '${t}' stream ${i}: ${l}`,s);let u=o.createWebChannel(l,s);this.I_(u);let d=!1,f=!1,p=new Ky({Ho:e=>{f?q(qy,`Not sending because RPC '${t}' stream ${i} is closed:`,e):(d||=(q(qy,`Opening RPC '${t}' stream ${i} transport.`),u.open(),!0),q(qy,`RPC '${t}' stream ${i} sending:`,e),u.send(e))},Jo:()=>u.close()});return Jy(u,Mp.EventType.OPEN,(()=>{f||(q(qy,`RPC '${t}' stream ${i} transport opened.`),p.i_())})),Jy(u,Mp.EventType.CLOSE,(()=>{f||(f=!0,q(qy,`RPC '${t}' stream ${i} transport closed`),p.o_(),this.E_(u))})),Jy(u,Mp.EventType.ERROR,(e=>{f||(f=!0,Gp(qy,`RPC '${t}' stream ${i} transport errored. Name:`,e.name,`Message:`,e.message),p.o_(new X(Y.UNAVAILABLE,`The operation could not be completed`)))})),Jy(u,Mp.EventType.MESSAGE,(e=>{if(!f){let n=e.data[0];Jp(!!n,16349);let r=n,a=r?.error||r[0]?.error;if(a){q(qy,`RPC '${t}' stream ${i} received error:`,a);let e=a.status,n=function(e){let t=R_[e];if(t!==void 0)return V_(t)}(e),r=a.message;e===`NOT_FOUND`&&r.includes(`database`)&&r.includes(`does not exist`)&&r.includes(this.databaseId.database)&&Gp(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),n===void 0&&(n=Y.INTERNAL,r=`Unknown error status: `+e+` with message `+a.message),f=!0,p.o_(new X(n,r)),u.close()}else q(qy,`RPC '${t}' stream ${i} received:`,n),p.__(n)}})),e.u_(),setTimeout((()=>{p.s_()}),0),p}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,n){super.Go(e,t,n),this.databaseInfo.apiKey&&(e[`x-goog-api-key`]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Rp()}};function Xy(e){return new Yy(e)}function Zy(){return typeof document<`u`?document:null}function Qy(e){return new sv(e,!0)}Yy.c_=!1;var $y=class{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Ci=e,this.timerId=t,this.R_=n,this.A_=r,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();let t=Math.floor(this.d_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&q(`ExponentialBackoff`,`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}},eb=`PersistentStream`,tb=class{constructor(e,t,n,r,i,a,o,s){this.Ci=e,this.b_=n,this.S_=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=s,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $y(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state===4?this.N_():this.auth()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&=(this.C_.cancel(),null)}U_(){this.v_&&=(this.v_.cancel(),null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e===4?t&&t.code===Y.RESOURCE_EXHAUSTED?(Wp(t.toString()),Wp(`Using maximum backoff delay to prevent overloading the backend.`),this.M_.g_()):t&&t.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()):this.M_.reset(),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;let e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.D_===t&&this.G_(e,n)}),(t=>{e((()=>{let e=new X(Y.UNKNOWN,`Fetching auth token failed: `+t.message);return this.z_(e)}))}))}G_(e,t){let n=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{n((()=>this.listener.Zo()))})),this.stream.Yo((()=>{n((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((e=>{n((()=>this.z_(e)))})),this.stream.onMessage((e=>{n((()=>++this.F_==1?this.H_(e):this.onNext(e)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return q(eb,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(q(eb,`stream callback skipped by getCloseGuardedDispatcher.`),Promise.resolve())))}}},nb=class extends tb{constructor(e,t,n,r,i,a){super(e,`listen_stream_connection_backoff`,`listen_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}j_(e,t){return this.connection.T_(`Listen`,e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=Cv(this.serializer,e),n=function(e){if(!(`targetChange`in e))return Am.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length?Am.min():t.readTime?fv(t.readTime):Am.min()}(e);return this.listener.J_(t,n)}Z_(e){let t={};t.database=bv(this.serializer),t.addTarget=function(e,t){let n,r=t.target;if(n=xg(r)?{documents:Ev(e,r)}:{query:Dv(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=uv(e,t.resumeToken);let r=cv(e,t.expectedCount);r!==null&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Am.min())>0){n.readTime=lv(e,t.snapshotVersion.toTimestamp());let r=cv(e,t.expectedCount);r!==null&&(n.expectedCount=r)}return n}(this.serializer,e);let n=kv(this.serializer,e);n&&(t.labels=n),this.K_(t)}X_(e){let t={};t.database=bv(this.serializer),t.removeTarget=e,this.K_(t)}},rb=class extends tb{constructor(e,t,n,r,i,a){super(e,`write_stream_connection_backoff`,`write_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_(`Write`,e,t)}H_(e){return Jp(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Jp(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Jp(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=Tv(e.writeResults,e.commitTime),n=fv(e.commitTime);return this.listener.na(n,t)}ra(){let e={};e.database=bv(this.serializer),this.K_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map((e=>wv(this.serializer,e)))};this.K_(t)}},ib=class{},ab=class extends ib{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new X(Y.FAILED_PRECONDITION,`The client has already been terminated.`)}Wo(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Wo(e,mv(t,n),r,i,a))).catch((e=>{throw e.name===`FirebaseError`?(e.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new X(Y.UNKNOWN,e.toString())}))}jo(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.jo(e,mv(t,n),r,a,o,i))).catch((e=>{throw e.name===`FirebaseError`?(e.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new X(Y.UNKNOWN,e.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}};function ob(e,t,n,r){return new ab(e,t,n,r)}var sb=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=`Unknown`,this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca(`Unknown`),this._a=this.asyncQueue.enqueueAfterDelay(`online_state_timeout`,1e4,(()=>(this._a=null,this.la(`Backend didn't respond within 10 seconds.`),this.ca(`Offline`),Promise.resolve()))))}ha(e){this.state===`Online`?this.ca(`Unknown`):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca(`Offline`)))}set(e){this.Pa(),this.oa=0,e===`Online`&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Wp(t),this.aa=!1):q(`OnlineStateTracker`,t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}},cb=`RemoteStore`,lb=class{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo((e=>{n.enqueueAndForget((async()=>{vb(this)&&(q(cb,`Restarting streams for network reachability change.`),await async function(e){let t=Yp(e);t.Ea.add(4),await db(t),t.Va.set(`Unknown`),t.Ea.delete(4),await ub(t)}(this))}))})),this.Va=new sb(n,r)}};async function ub(e){if(vb(e))for(let t of e.Ra)await t(!0)}async function db(e){for(let t of e.Ra)await t(!1)}function fb(e,t){let n=Yp(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),_b(n)?gb(n):Lb(n).O_()&&mb(n,t))}function pb(e,t){let n=Yp(e),r=Lb(n);n.Ia.delete(t),r.O_()&&hb(n,t),n.Ia.size===0&&(r.O_()?r.L_():vb(n)&&n.Va.set(`Unknown`))}function mb(e,t){if(e.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Am.min())>0){let n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Lb(e).Z_(t)}function hb(e,t){e.da.$e(t),Lb(e).X_(t)}function gb(e){e.da=new tv({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Lb(e).start(),e.Va.ua()}function _b(e){return vb(e)&&!Lb(e).x_()&&e.Ia.size>0}function vb(e){return Yp(e).Ea.size===0}function yb(e){e.da=void 0}async function bb(e){e.Va.set(`Online`)}async function xb(e){e.Ia.forEach(((t,n)=>{mb(e,t)}))}async function Sb(e,t){yb(e),_b(e)?(e.Va.ha(t),gb(e)):e.Va.set(`Unknown`)}async function Cb(e,t,n){if(e.Va.set(`Online`),t instanceof $_&&t.state===2&&t.cause)try{await async function(e,t){let n=t.cause;for(let r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.da.removeTarget(r))}(e,t)}catch(n){q(cb,`Failed to remove targets %s: %s `,t.targetIds.join(`,`),n),await wb(e,n)}else if(t instanceof Z_?e.da.Xe(t):t instanceof Q_?e.da.st(t):e.da.tt(t),!n.isEqual(Am.min()))try{let t=await Oy(e.localStore);n.compareTo(t)>=0&&await function(e,t){let n=e.da.Tt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){let i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{let r=e.Ia.get(t);r&&(e.Ia.set(t,r.withResumeToken(sh.EMPTY_BYTE_STRING,r.snapshotVersion)),hb(e,t),mb(e,new Bv(r.target,t,n,r.sequenceNumber)))})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){q(cb,`Failed to raise snapshot:`,t),await wb(e,t)}}async function wb(e,t,n){if(!Vm(t))throw t;e.Ea.add(1),await db(e),e.Va.set(`Offline`),n||=()=>Oy(e.localStore),e.asyncQueue.enqueueRetryable((async()=>{q(cb,`Retrying IndexedDB access`),await n(),e.Ea.delete(1),await ub(e)}))}function Tb(e,t){return t().catch((n=>wb(e,n,t)))}async function Eb(e){let t=Yp(e),n=Rb(t),r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Um;for(;Db(t);)try{let e=await jy(t.localStore,r);if(e===null){t.Ta.length===0&&n.L_();break}r=e.batchId,Ob(t,e)}catch(e){await wb(t,e)}kb(t)&&Ab(t)}function Db(e){return vb(e)&&e.Ta.length<10}function Ob(e,t){e.Ta.push(t);let n=Rb(e);n.O_()&&n.Y_&&n.ea(t.mutations)}function kb(e){return vb(e)&&!Rb(e).x_()&&e.Ta.length>0}function Ab(e){Rb(e).start()}async function jb(e){Rb(e).ra()}async function Mb(e){let t=Rb(e);for(let n of e.Ta)t.ea(n.mutations)}async function Nb(e,t,n){let r=e.Ta.shift(),i=F_.from(r,t,n);await Tb(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Eb(e)}async function Pb(e,t){t&&Rb(e).Y_&&await async function(e,t){if(function(e){return B_(e)&&e!==Y.ABORTED}(t.code)){let n=e.Ta.shift();Rb(e).B_(),await Tb(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Eb(e)}}(e,t),kb(e)&&Ab(e)}async function Fb(e,t){let n=Yp(e);n.asyncQueue.verifyOperationInProgress(),q(cb,`RemoteStore received new credentials`);let r=vb(n);n.Ea.add(3),await db(n),r&&n.Va.set(`Unknown`),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await ub(n)}async function Ib(e,t){let n=Yp(e);t?(n.Ea.delete(2),await ub(n)):t||(n.Ea.add(2),await db(n),n.Va.set(`Unknown`))}function Lb(e){return e.ma||(e.ma=function(e,t,n){let r=Yp(e);return r.sa(),new nb(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:bb.bind(null,e),Yo:xb.bind(null,e),t_:Sb.bind(null,e),J_:Cb.bind(null,e)}),e.Ra.push((async t=>{t?(e.ma.B_(),_b(e)?gb(e):e.Va.set(`Unknown`)):(await e.ma.stop(),yb(e))}))),e.ma}function Rb(e){return e.fa||(e.fa=function(e,t,n){let r=Yp(e);return r.sa(),new rb(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),Yo:jb.bind(null,e),t_:Pb.bind(null,e),ta:Mb.bind(null,e),na:Nb.bind(null,e)}),e.Ra.push((async t=>{t?(e.fa.B_(),await Eb(e)):(await e.fa.stop(),e.Ta.length>0&&(q(cb,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}var zb=class e{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Xp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,a){let o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(Y.CANCELLED,`Operation cancelled`+(e?`: `+e:``))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle===null?Promise.resolve():(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e))))))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Bb(e,t){if(Wp(`AsyncQueue`,`${t}: ${e}`),Vm(e))return new X(Y.UNAVAILABLE,`${t}: ${e}`);throw e}var Vb=class e{static emptySet(t){return new e(t.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Z.comparator(t.key,n.key):(e,t)=>Z.comparator(e.key,t.key),this.keyedMap=Gg(),this.sortedSet=new eh(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(!e.isEqual(t))return!1}return!0}toString(){let e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?`DocumentSet ()`:`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(t,n){let r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}},Hb=class{constructor(){this.ga=new eh(Z.comparator)}track(e){let t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):J(63341,{Vt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}},Ub=class e{constructor(e,t,n,r,i,a,o,s,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=s,this.hasCachedResults=c}static fromInitialDocuments(t,n,r,i,a){let o=[];return n.forEach((e=>{o.push({type:0,doc:e})})),new e(t,n,Vb.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}},Wb=class{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}},Gb=class{constructor(){this.queries=Kb(),this.onlineState=`Unknown`,this.Ca=new Set}terminate(){(function(e,t){let n=Yp(e),r=n.queries;n.queries=Kb(),r.forEach(((e,n)=>{for(let e of n.ba)e.onError(t)}))})(this,new X(Y.ABORTED,`Firestore shutting down`))}};function Kb(){return new Vg((e=>Fg(e)),Pg)}async function qb(e,t){let n=Yp(e),r=3,i=t.query,a=n.queries.get(i);a?!a.Sa()&&t.Da()&&(r=2):(a=new Wb,r=t.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){let n=Bb(e,`Initialization of query '${Ig(t.query)}' failed`);t.onError(n);return}n.queries.set(i,a),a.ba.push(t),t.va(n.onlineState),a.wa&&t.Fa(a.wa)&&Zb(n)}async function Jb(e,t){let n=Yp(e),r=t.query,i=3,a=n.queries.get(r);if(a){let e=a.ba.indexOf(t);e>=0&&(a.ba.splice(e,1),a.ba.length===0?i=t.Da()?0:1:!a.Sa()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Yb(e,t){let n=Yp(e),r=!1;for(let e of t){let t=e.query,i=n.queries.get(t);if(i){for(let t of i.ba)t.Fa(e)&&(r=!0);i.wa=e}}r&&Zb(n)}function Xb(e,t,n){let r=Yp(e),i=r.queries.get(t);if(i)for(let e of i.ba)e.onError(n);r.queries.delete(t)}function Zb(e){e.Ca.forEach((e=>{e.next()}))}var Qb,$b;($b=Qb||={}).Ma=`default`,$b.Cache=`cache`;var ex=class{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState=`Unknown`,this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){let t=[];for(let n of e.docChanges)n.type!==3&&t.push(n);e=new Ub(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let n=t!==`Offline`;return(!this.options.Ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t===`Offline`)}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Ub.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Qb.Cache}},tx=class{constructor(e){this.key=e}},nx=class{constructor(e){this.key=e}},rx=class{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Qg(),this.mutatedKeys=Qg(),this.eu=zg(e),this.tu=new Vb(this.eu)}get nu(){return this.Za}ru(e,t){let n=t?t.iu:new Hb,r=t?t.tu:this.tu,i=t?t.mutatedKeys:this.mutatedKeys,a=r,o=!1,s=this.query.limitType===`F`&&r.size===this.query.limit?r.last():null,c=this.query.limitType===`L`&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{let l=r.get(e),u=Lg(this.query,t)?t:null,d=!!l&&this.mutatedKeys.has(l.key),f=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations),p=!1;l&&u?l.data.isEqual(u.data)?d!==f&&(n.track({type:3,doc:u}),p=!0):this.su(l,u)||(n.track({type:2,doc:u}),p=!0,(s&&this.eu(u,s)>0||c&&this.eu(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),p=!0):l&&!u&&(n.track({type:1,doc:l}),p=!0,(s||c)&&(o=!0)),p&&(u?(a=a.add(u),i=f?i.add(e):i.delete(e)):(a=a.delete(e),i=i.delete(e)))})),this.query.limit!==null)for(;a.size>this.query.limit;){let e=this.query.limitType===`F`?a.last():a.first();a=a.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:a,iu:n,Ss:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){let i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let a=e.iu.ya();a.sort(((e,t)=>function(e,t){let n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J(20277,{Vt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc))),this.ou(n),r??=!1;let o=t&&!r?this._u():[],s=this.Ya.size===0&&this.current&&!r?1:0,c=s!==this.Xa;return this.Xa=s,a.length!==0||c?{snapshot:new Ub(this.query,e.tu,i,a,e.mutatedKeys,s===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e===`Offline`?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Hb,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((e=>this.Za=this.Za.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Za=this.Za.delete(e))),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Ya;this.Ya=Qg(),this.tu.forEach((e=>{this.uu(e.key)&&(this.Ya=this.Ya.add(e.key))}));let t=[];return e.forEach((e=>{this.Ya.has(e)||t.push(new nx(e))})),this.Ya.forEach((n=>{e.has(n)||t.push(new tx(n))})),t}cu(e){this.Za=e.ks,this.Ya=Qg();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ub.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}},ix=`SyncEngine`,ax=class{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}},ox=class{constructor(e){this.key=e,this.hu=!1}},sx=class{constructor(e,t,n,r,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Vg((e=>Fg(e)),Pg),this.Iu=new Map,this.Eu=new Set,this.Ru=new eh(Z.comparator),this.Au=new Map,this.Vu=new ly,this.du={},this.mu=new Map,this.fu=Yv.ar(),this.onlineState=`Unknown`,this.gu=void 0}get isPrimaryClient(){return!0===this.gu}};async function cx(e,t,n=!0){let r=Ax(e),i,a=r.Tu.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await ux(r,t,n,!0),i}async function lx(e,t){await ux(Ax(e),t,!0,!1)}async function ux(e,t,n,r){let i=await My(e.localStore,kg(t)),a=i.targetId,o=e.sharedClientState.addLocalQueryTarget(a,n),s;return r&&(s=await dx(e,t,a,o===`current`,i.resumeToken)),e.isPrimaryClient&&n&&fb(e.remoteStore,i),s}async function dx(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Ss&&(i=await Py(e.localStore,t.query,!1).then((({documents:e})=>t.view.ru(e,i))));let a=r&&r.targetChanges.get(t.targetId),o=r&&r.targetMismatches.get(t.targetId)!=null,s=t.view.applyChanges(i,e.isPrimaryClient,a,o);return wx(e,t.targetId,s.au),s.snapshot}(e,t,n,r);let a=await Py(e.localStore,t,!0),o=new rx(t,a.ks),s=o.ru(a.documents),c=X_.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!==`Offline`,i),l=o.applyChanges(s,e.isPrimaryClient,c);wx(e,n,l.au);let u=new ax(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),l.snapshot}async function fx(e,t,n){let r=Yp(e),i=r.Tu.get(t),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((e=>!Pg(e,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ny(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&pb(r.remoteStore,i.targetId),Sx(r,i.targetId)})).catch(zm)):(Sx(r,i.targetId),await Ny(r.localStore,i.targetId,!0))}async function px(e,t){let n=Yp(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),pb(n.remoteStore,r.targetId))}async function mx(e,t,n){let r=jx(e);try{let e=await function(e,t){let n=Yp(e),r=km.now(),i=t.reduce(((e,t)=>e.add(t.key)),Qg()),a,o;return n.persistence.runTransaction(`Locally write mutations`,`readwrite`,(e=>{let s=Ug(),c=Qg();return n.xs.getEntries(e,i).next((e=>{s=e,s.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,s))).next((i=>{a=i;let o=[];for(let e of t){let t=T_(e,a.get(e.key).overlayedDocument);t!=null&&o.push(new O_(e.key,t,qh(t.value.mapValue),y_.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;let r=t.applyToLocalDocumentSet(a,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Kg(a)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.du[e.currentUser.toKey()];r||=new eh(sm),r=r.insert(t,n),e.du[e.currentUser.toKey()]=r}(r,e.batchId,n),await Dx(r,e.changes),await Eb(r.remoteStore)}catch(e){let t=Bb(e,`Failed to persist write`);n.reject(t)}}async function hx(e,t){let n=Yp(e);try{let e=await ky(n.localStore,t);t.targetChanges.forEach(((e,t)=>{let r=n.Au.get(t);r&&(Jp(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?Jp(r.hu,14607):e.removedDocuments.size>0&&(Jp(r.hu,42227),r.hu=!1))})),await Dx(n,e,t)}catch(e){await zm(e)}}function gx(e,t,n){let r=Yp(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let e=[];r.Tu.forEach(((n,r)=>{let i=r.view.va(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){let n=Yp(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(let e of n.ba)e.va(t)&&(r=!0)})),r&&Zb(n)}(r.eventManager,t),e.length&&r.Pu.J_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function _x(e,t,n){let r=Yp(e);r.sharedClientState.updateQueryState(t,`rejected`,n);let i=r.Au.get(t),a=i&&i.key;if(a){let e=new eh(Z.comparator);e=e.insert(a,Jh.newNoDocument(a,Am.min()));let n=Qg().add(a);await hx(r,new Y_(Am.min(),new Map,new eh(sm),e,n)),r.Ru=r.Ru.remove(a),r.Au.delete(t),Ex(r)}else await Ny(r.localStore,t,!1).then((()=>Sx(r,t,n))).catch(zm)}async function vx(e,t){let n=Yp(e),r=t.batch.batchId;try{let e=await Dy(n.localStore,t);xx(n,r,null),bx(n,r),n.sharedClientState.updateMutationState(r,`acknowledged`),await Dx(n,e)}catch(e){await zm(e)}}async function yx(e,t,n){let r=Yp(e);try{let e=await function(e,t){let n=Yp(e);return n.persistence.runTransaction(`Reject batch`,`readwrite-primary`,(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Jp(t!==null,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);xx(r,t,n),bx(r,t),r.sharedClientState.updateMutationState(t,`rejected`,n),await Dx(r,e)}catch(e){await zm(e)}}function bx(e,t){(e.mu.get(t)||[]).forEach((e=>{e.resolve()})),e.mu.delete(t)}function xx(e,t,n){let r=Yp(e),i=r.du[r.currentUser.toKey()];if(i){let e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.du[r.currentUser.toKey()]=i}}function Sx(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(let r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Vu.Gr(t).forEach((t=>{e.Vu.containsKey(t)||Cx(e,t)}))}function Cx(e,t){e.Eu.delete(t.path.canonicalString());let n=e.Ru.get(t);n!==null&&(pb(e.remoteStore,n),e.Ru=e.Ru.remove(t),e.Au.delete(n),Ex(e))}function wx(e,t,n){for(let r of n)r instanceof tx?(e.Vu.addReference(r.key,t),Tx(e,r)):r instanceof nx?(q(ix,`Document no longer in limbo: `+r.key),e.Vu.removeReference(r.key,t),e.Vu.containsKey(r.key)||Cx(e,r.key)):J(19791,{wu:r})}function Tx(e,t){let n=t.key,r=n.path.canonicalString();e.Ru.get(n)||e.Eu.has(r)||(q(ix,`New document in limbo: `+n),e.Eu.add(r),Ex(e))}function Ex(e){for(;e.Eu.size>0&&e.Ru.size<e.maxConcurrentLimboResolutions;){let t=e.Eu.values().next().value;e.Eu.delete(t);let n=new Z(hm.fromString(t)),r=e.fu.next();e.Au.set(r,new ox(n)),e.Ru=e.Ru.insert(n,r),fb(e.remoteStore,new Bv(kg(wg(n.path)),r,`TargetPurposeLimboResolution`,Hm.ce))}}async function Dx(e,t,n){let r=Yp(e),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((e,s)=>{o.push(r.pu(s,t,n).then((e=>{if((e||n)&&r.isPrimaryClient){let t=e?!e.fromCache:n?.targetChanges.get(s.targetId)?.current;r.sharedClientState.updateQueryState(s.targetId,t?`current`:`not-current`)}if(e){i.push(e);let t=yy.Es(s.targetId,e);a.push(t)}})))})),await Promise.all(o),r.Pu.J_(i),await async function(e,t){let n=Yp(e);try{await n.persistence.runTransaction(`notifyLocalViewChanges`,`readwrite`,(e=>Q.forEach(t,(t=>Q.forEach(t.Ts,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Q.forEach(t.Is,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Vm(e))throw e;q(Sy,`Failed to update sequence numbers: `+e)}for(let e of t){let t=e.targetId;if(!e.fromCache){let e=n.vs.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.vs=n.vs.insert(t,i)}}}(r.localStore,a))}async function Ox(e,t){let n=Yp(e);if(!n.currentUser.isEqual(t)){q(ix,`User change. New user:`,t.toKey());let e=await Ey(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach((e=>{e.forEach((e=>{e.reject(new X(Y.CANCELLED,t))}))})),e.mu.clear()}(n,`'waitForPendingWrites' promise is rejected due to a user change.`),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Dx(n,e.Ns)}}function kx(e,t){let n=Yp(e),r=n.Au.get(t);if(r&&r.hu)return Qg().add(r.key);{let e=Qg(),r=n.Iu.get(t);if(!r)return e;for(let t of r){let r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function Ax(e){let t=Yp(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=hx.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=kx.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=_x.bind(null,t),t.Pu.J_=Yb.bind(null,t.eventManager),t.Pu.yu=Xb.bind(null,t.eventManager),t}function jx(e){let t=Yp(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=vx.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=yx.bind(null,t),t}var Mx=class{constructor(){this.kind=`memory`,this.synchronizeTabs=!1}async initialize(e){this.serializer=Qy(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Ty(this.persistence,new xy,e.initialUser,this.serializer)}Cu(e){return new hy(_y.Vi,this.serializer)}Du(e){return new Ly}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}};Mx.provider={build:()=>new Mx};var Nx=class extends Mx{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Jp(this.persistence.referenceDelegate instanceof vy,46915);let n=this.persistence.referenceDelegate.garbageCollector;return new ey(n,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes===void 0?Jv.DEFAULT:Jv.withCacheSize(this.cacheSizeBytes);return new hy((e=>vy.Vi(e,t)),this.serializer)}},Px=class{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>gx(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ox.bind(null,this.syncEngine),await Ib(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Gb}()}createDatastore(e){let t=Qy(e.databaseInfo.databaseId),n=Xy(e.databaseInfo);return ob(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new lb(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>gx(this.syncEngine,e,0)),function(){return By.v()?new By:new Ry}())}createSyncEngine(e,t){return function(e,t,n,r,i,a,o){let s=new sx(e,t,n,r,i,a);return o&&(s.gu=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(e){let t=Yp(e);q(cb,`RemoteStore shutting down.`),t.Ea.add(5),await db(t),t.Aa.shutdown(),t.Va.set(`Unknown`)}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}};Px.provider={build:()=>new Px};var Fx=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Wp(`Uncaught Error in snapshot listener:`,e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}},Ix=`FirestoreClient`,Lx=class{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this._databaseInfo=r,this.user=zp.UNAUTHENTICATED,this.clientId=om.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{q(Ix,`Received user=`,e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(q(Ix,`Received new app check token=`,e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Xp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let n=Bb(t,`Failed to shutdown persistence`);e.reject(n)}})),e.promise}};async function Rx(e,t){e.asyncQueue.verifyOperationInProgress(),q(Ix,`Initializing OfflineComponentProvider`);let n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Ey(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function zx(e,t){e.asyncQueue.verifyOperationInProgress();let n=await Bx(e);q(Ix,`Initializing OnlineComponentProvider`),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Fb(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Fb(t.remoteStore,n))),e._onlineComponents=t}async function Bx(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){q(Ix,`Using user provided OfflineComponentProvider`);try{await Rx(e,e._uninitializedComponentsProvider._offline)}catch(t){let n=t;if(!function(e){return e.name===`FirebaseError`?e.code===Y.FAILED_PRECONDITION||e.code===Y.UNIMPLEMENTED:!(typeof DOMException<`u`&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}(n))throw n;Gp(`Error using user provided cache. Falling back to memory cache: `+n),await Rx(e,new Mx)}}else q(Ix,`Using default OfflineComponentProvider`),await Rx(e,new Nx(void 0));return e._offlineComponents}async function Vx(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(q(Ix,`Using user provided OnlineComponentProvider`),await zx(e,e._uninitializedComponentsProvider._online)):(q(Ix,`Using default OnlineComponentProvider`),await zx(e,new Px))),e._onlineComponents}function Hx(e){return Vx(e).then((e=>e.syncEngine))}async function Ux(e){let t=await Vx(e),n=t.eventManager;return n.onListen=cx.bind(null,t.syncEngine),n.onUnlisten=fx.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=lx.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=px.bind(null,t.syncEngine),n}function Wx(e,t,n,r){let i=new Fx(r),a=new ex(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>qb(await Ux(e),a))),()=>{i.Nu(),e.asyncQueue.enqueueAndForget((async()=>Jb(await Ux(e),a)))}}function Gx(e,t,n={}){let r=new Xp;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){let a=new Fx({next:s=>{a.Nu(),t.enqueueAndForget((()=>Jb(e,o)));let c=s.docs.has(n);!c&&s.fromCache?i.reject(new X(Y.UNAVAILABLE,`Failed to get document because the client is offline.`)):c&&s.fromCache&&r&&r.source===`server`?i.reject(new X(Y.UNAVAILABLE,`Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)`)):i.resolve(s)},error:e=>i.reject(e)}),o=new ex(wg(n.path),a,{includeMetadataChanges:!0,Ka:!0});return qb(e,o)}(await Ux(e),e.asyncQueue,t,n,r))),r.promise}function Kx(e,t,n={}){let r=new Xp;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){let a=new Fx({next:n=>{a.Nu(),t.enqueueAndForget((()=>Jb(e,o))),n.fromCache&&r.source===`server`?i.reject(new X(Y.UNAVAILABLE,`Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)`)):i.resolve(n)},error:e=>i.reject(e)}),o=new ex(n,a,{includeMetadataChanges:!0,Ka:!0});return qb(e,o)}(await Ux(e),e.asyncQueue,t,n,r))),r.promise}function qx(e,t){let n=new Xp;return e.asyncQueue.enqueueAndForget((async()=>mx(await Hx(e),t,n))),n.promise}function Jx(e){let t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}var Yx=`ComponentProvider`,Xx=new Map;function Zx(e,t,n,r,i){return new yh(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,Jx(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}var Qx=`firestore.googleapis.com`,$x=!0,eS=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new X(Y.INVALID_ARGUMENT,`Can't provide ssl option if host option is not set`);this.host=Qx,this.ssl=$x}else this.host=e.host,this.ssl=e.ssl??$x;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Zv)throw new X(Y.INVALID_ARGUMENT,`cacheSizeBytes must be at least 1048576`);this.cacheSizeBytes=e.cacheSizeBytes}ym(`experimentalForceLongPolling`,e.experimentalForceLongPolling,`experimentalAutoDetectLongPolling`,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Jx(e.experimentalLongPollingOptions??{}),function(e){if(e.timeoutSeconds!==void 0){if(isNaN(e.timeoutSeconds))throw new X(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new X(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new X(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},tS=class{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type=`firestore-lite`,this._persistenceKey=`(lite)`,this._settings=new eS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask=`notTerminated`}get app(){if(!this._app)throw new X(Y.FAILED_PRECONDITION,`Firestore was not initialized using the Firebase SDK. 'app' is not available`);return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==`notTerminated`}_setSettings(e){if(this._settingsFrozen)throw new X(Y.FAILED_PRECONDITION,`Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.`);this._settings=new eS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(e){if(!e)return new Qp;switch(e.type){case`firstParty`:return new nm(e.sessionIndex||`0`,e.iamToken||null,e.authTokenFactory||null);case`provider`:return e.client;default:throw new X(Y.INVALID_ARGUMENT,`makeAuthCredentialsProvider failed due to invalid credential type`)}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask===`notTerminated`&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask===`notTerminated`?await this._terminate():this._terminateTask=`notTerminated`}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let t=Xx.get(e);t&&(q(Yx,`Removing Datastore`),Xx.delete(e),t.terminate())}(this),Promise.resolve()}};function nS(e,t,n,r={}){e=wm(e,tS);let i=Qu(t),a=e._getSettings(),o={...a,emulatorOptions:e._getEmulatorOptions()},s=`${t}:${n}`;i&&($u(`https://${s}`),ad(`Firestore`,!0)),a.host!==Qx&&a.host!==s&&Gp(`Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.`);let c={...a,host:s,ssl:i,emulatorOptions:r};if(!Sd(c,o)&&(e._setSettings(c),r.mockUserToken)){let t,n;if(typeof r.mockUserToken==`string`)t=r.mockUserToken,n=zp.MOCK_USER;else{t=ed(r.mockUserToken,e._app?.options.projectId);let i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new X(Y.INVALID_ARGUMENT,`mockUserToken must contain 'sub' or 'user_id' field!`);n=new zp(i)}e._authCredentials=new $p(new Zp(t,n))}}var rS=class e{constructor(e,t,n){this.converter=t,this._query=n,this.type=`query`,this.firestore=e}withConverter(t){return new e(this.firestore,t,this._query)}},iS=class e{constructor(e,t,n){this.converter=t,this._key=n,this.type=`document`,this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new aS(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}toJSON(){return{type:e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(Em(n,e._jsonSchema))return new e(t,r||null,new Z(hm.fromString(n.referencePath)))}};iS._jsonSchemaVersion=`firestore/documentReference/1.0`,iS._jsonSchema={type:Tm(`string`,iS._jsonSchemaVersion),referencePath:Tm(`string`)};var aS=class e extends rS{constructor(e,t,n){super(e,t,wg(n)),this._path=n,this.type=`collection`}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new iS(this.firestore,null,new Z(e))}withConverter(t){return new e(this.firestore,t,this._path)}};function oS(e,t,...n){if(e=jd(e),vm(`collection`,`path`,t),e instanceof tS){let r=hm.fromString(t,...n);return xm(r),new aS(e,null,r)}{if(!(e instanceof iS||e instanceof aS))throw new X(Y.INVALID_ARGUMENT,`Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child(hm.fromString(t,...n));return xm(r),new aS(e.firestore,null,r)}}function sS(e,t,...n){if(e=jd(e),arguments.length===1&&(t=om.newId()),vm(`doc`,`path`,t),e instanceof tS){let r=hm.fromString(t,...n);return bm(r),new iS(e,null,new Z(r))}{if(!(e instanceof iS||e instanceof aS))throw new X(Y.INVALID_ARGUMENT,`Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child(hm.fromString(t,...n));return bm(r),new iS(e.firestore,e instanceof aS?e.converter:null,new Z(r))}}var cS=`AsyncQueue`,lS=class{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $y(this,`async_queue_retry`),this._c=()=>{let e=Zy();e&&q(cS,`Visibility state changed to `+e.visibilityState),this.M_.w_()},this.ac=e;let t=Zy();t&&typeof t.addEventListener==`function`&&t.addEventListener(`visibilitychange`,this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=Zy();t&&typeof t.removeEventListener==`function`&&t.removeEventListener(`visibilitychange`,this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));let t=new Xp;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Vm(e))throw e;q(cS,`Operation failed with retryable error: `+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){let t=this.ac.then((()=>(this.rc=!0,e().catch((e=>{throw this.nc=e,this.rc=!1,Wp(`INTERNAL UNHANDLED ERROR: `,uS(e)),e})).then((e=>(this.rc=!1,e))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let r=zb.createAndSchedule(this,e,t,n,(e=>this.hc(e)));return this.tc.push(r),r}uc(){this.nc&&J(47125,{Pc:uS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(let t of this.tc)if(t.skipDelay(),e!==`all`&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function uS(e){let t=e.message||``;return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}var dS=class extends tS{constructor(e,t,n,r){super(e,t,n,r),this.type=`firestore`,this._queue=new lS,this._persistenceKey=r?.name||`[DEFAULT]`}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new lS(e),this._firestoreClient=void 0,await e}}};function fS(e,t){let n=typeof e==`object`?e:op(),r=typeof e==`string`?e:t||bh,i=ep(n,`firestore`).getImmediate({identifier:r});if(!i._initialized){let e=Ju(`firestore`);e&&nS(i,...e)}return i}function pS(e){if(e._terminated)throw new X(Y.FAILED_PRECONDITION,`The client has already been terminated.`);return e._firestoreClient||mS(e),e._firestoreClient}function mS(e){let t=e._freezeSettings(),n=Zx(e._databaseId,e._app?.options.appId||``,e._persistenceKey,e._app?.options.apiKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new Lx(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(e){let t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}var hS=class e{constructor(e){this._byteString=e}static fromBase64String(t){try{return new e(sh.fromBase64String(t))}catch(e){throw new X(Y.INVALID_ARGUMENT,`Failed to construct data from Base64 string: `+e)}}static fromUint8Array(t){return new e(sh.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return`Bytes(base64: `+this.toBase64()+`)`}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:e._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Em(t,e._jsonSchema))return e.fromBase64String(t.bytes)}};hS._jsonSchemaVersion=`firestore/bytes/1.0`,hS._jsonSchema={type:Tm(`string`,hS._jsonSchemaVersion),bytes:Tm(`string`)};var gS=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new X(Y.INVALID_ARGUMENT,`Invalid field name at argument $(i + 1). Field names must not be empty.`);this._internalPath=new _m(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}},_S=class{constructor(e){this._methodName=e}},vS=class e{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new X(Y.INVALID_ARGUMENT,`Latitude must be a number between -90 and 90, but was: `+e);if(!isFinite(t)||t<-180||t>180)throw new X(Y.INVALID_ARGUMENT,`Longitude must be a number between -180 and 180, but was: `+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return sm(this._lat,e._lat)||sm(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:e._jsonSchemaVersion}}static fromJSON(t){if(Em(t,e._jsonSchema))return new e(t.latitude,t.longitude)}};vS._jsonSchemaVersion=`firestore/geoPoint/1.0`,vS._jsonSchema={type:Tm(`string`,vS._jsonSchemaVersion),latitude:Tm(`number`),longitude:Tm(`number`)};var yS=class e{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:e._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Em(t,e._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e==`number`)))return new e(t.vectorValues);throw new X(Y.INVALID_ARGUMENT,`Expected 'vectorValues' field to be a number array`)}}};yS._jsonSchemaVersion=`firestore/vectorValue/1.0`,yS._jsonSchema={type:Tm(`string`,yS._jsonSchemaVersion),vectorValues:Tm(`object`)};var bS=/^__.*__$/,xS=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask===null?new D_(e,this.data,t,this.fieldTransforms):new O_(e,this.data,this.fieldMask,t,this.fieldTransforms)}},SS=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new O_(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function CS(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J(40011,{dataSource:e})}}var wS=class e{constructor(e,t,n,r,i,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(t){return new e({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){let t=this.path?.child(e),n=this.contextWith({path:t,arrayElement:!1});return n.validatePathSegment(e),n}childContextForFieldPath(e){let t=this.path?.child(e),n=this.contextWith({path:t,arrayElement:!1});return n.validatePath(),n}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return BS(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError(`Document fields must not be empty`);if(CS(this.dataSource)&&bS.test(e))throw this.createError(`Document fields cannot begin and end with "__"`)}},TS=class{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Qy(e)}createContext(e,t,n,r=!1){return new wS({dataSource:e,methodName:t,targetDoc:n,path:_m.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ES(e){let t=e._freezeSettings(),n=Qy(e._databaseId);return new TS(e._databaseId,!!t.ignoreUndefinedProperties,n)}function DS(e,t,n,r,i,a={}){let o=e.createContext(a.merge||a.mergeFields?2:0,t,n,i);IS(`Data must be an object, but it was:`,o,r);let s=PS(r,o),c,l;if(a.merge)c=new ah(o.fieldMask),l=o.fieldTransforms;else if(a.mergeFields){let e=[];for(let r of a.mergeFields){let i=LS(t,r,n);if(!o.contains(i))throw new X(Y.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);VS(e,i)||e.push(i)}c=new ah(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new xS(new Kh(s),c,l)}var OS=class e extends _S{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(t){return t instanceof e}},kS=class e extends _S{_toFieldTransform(e){return new g_(e.path,new c_)}isEqual(t){return t instanceof e}};function AS(e,t,n,r){let i=e.createContext(1,t,n);IS(`Data must be an object, but it was:`,i,r);let a=[],o=Kh.empty();return Qm(r,((e,r)=>{let s=zS(t,e,n);r=jd(r);let c=i.childContextForFieldPath(s);if(r instanceof OS)a.push(s);else{let e=NS(r,c);e!=null&&(a.push(s),o.set(s,e))}})),new SS(o,new ah(a),i.fieldTransforms)}function jS(e,t,n,r,i,a){let o=e.createContext(1,t,n),s=[LS(t,r,n)],c=[i];if(a.length%2!=0)throw new X(Y.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<a.length;e+=2)s.push(LS(t,a[e])),c.push(a[e+1]);let l=[],u=Kh.empty();for(let e=s.length-1;e>=0;--e)if(!VS(l,s[e])){let t=s[e],n=c[e];n=jd(n);let r=o.childContextForFieldPath(t);if(n instanceof OS)l.push(t);else{let e=NS(n,r);e!=null&&(l.push(t),u.set(t,e))}}return new SS(u,new ah(l),o.fieldTransforms)}function MS(e,t,n,r=!1){return NS(n,e.createContext(r?4:3,t))}function NS(e,t){if(FS(e=jd(e)))return IS(`Unsupported field value:`,t,e),PS(e,t);if(e instanceof _S)return function(e,t){if(!CS(t.dataSource))throw t.createError(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.createError(`${e._methodName}() is not currently supported inside arrays`);let n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.arrayElement&&t.dataSource!==4)throw t.createError(`Nested arrays are not supported`);return function(e,t){let n=[],r=0;for(let i of e){let e=NS(i,t.childContextForArray(r));e??={nullValue:`NULL_VALUE`},n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if((e=jd(e))===null)return{nullValue:`NULL_VALUE`};if(typeof e==`number`)return r_(t.serializer,e);if(typeof e==`boolean`)return{booleanValue:e};if(typeof e==`string`)return{stringValue:e};if(e instanceof Date){let n=km.fromDate(e);return{timestampValue:lv(t.serializer,n)}}if(e instanceof km){let n=new km(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:lv(t.serializer,n)}}if(e instanceof vS)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof hS)return{bytesValue:uv(t.serializer,e._byteString)};if(e instanceof iS){let n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.createError(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:pv(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof yS)return function(e,t){let n=e instanceof yS?e.toArray():e;return{mapValue:{fields:{[Ch]:{stringValue:Eh},[Dh]:{arrayValue:{values:n.map((e=>{if(typeof e!=`number`)throw t.createError(`VectorValues must only contain numeric values.`);return t_(t.serializer,e)}))}}}}}}(e,t);if(zv(e))return e._toProto(t.serializer);throw t.createError(`Unsupported field value: ${Cm(e)}`)}(e,t)}function PS(e,t){let n={};return $m(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Qm(e,((e,r)=>{let i=NS(r,t.childContextForField(e));i!=null&&(n[e]=i)})),{mapValue:{fields:n}}}function FS(e){return!(typeof e!=`object`||!e||e instanceof Array||e instanceof Date||e instanceof km||e instanceof vS||e instanceof hS||e instanceof iS||e instanceof _S||e instanceof yS||zv(e))}function IS(e,t,n){if(!FS(n)||!Sm(n)){let r=Cm(n);throw r===`an object`?t.createError(e+` a custom object`):t.createError(e+` `+r)}}function LS(e,t,n){if((t=jd(t))instanceof gS)return t._internalPath;if(typeof t==`string`)return zS(e,t);throw BS(`Field path arguments must be of type string or `,e,!1,void 0,n)}var RS=RegExp(`[~\\*/\\[\\]]`);function zS(e,t,n){if(t.search(RS)>=0)throw BS(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new gS(...t.split(`.`))._internalPath}catch{throw BS(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function BS(e,t,n,r,i){let a=r&&!r.isEmpty(),o=i!==void 0,s=`Function ${t}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=`. `;let c=``;return(a||o)&&(c+=` (found`,a&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=`)`),new X(Y.INVALID_ARGUMENT,s+e+c)}function VS(e,t){return e.some((e=>e.isEqual(t)))}var HS=class{convertValue(e,t=`none`){switch(Oh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return uh(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(dh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw J(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t=`none`){let n={};return Qm(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){let t=e.fields?.[Dh].arrayValue?.values?.map((e=>uh(e.doubleValue)));return new yS(t)}convertGeoPoint(e){return new vS(uh(e.latitude),uh(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case`previous`:let n=_h(e);return n==null?null:this.convertValue(n,t);case`estimate`:return this.convertTimestamp(vh(e));default:return null}}convertTimestamp(e){let t=lh(e);return new km(t.seconds,t.nanos)}convertDocumentKey(e,t){let n=hm.fromString(e);Jp(Rv(n),9688,{name:e});let r=new xh(n.get(1),n.get(3)),i=new Z(n.popFirst(5));return r.isEqual(t)||Wp(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}},US=class extends HS{constructor(e){super(),this.firestore=e}convertBytes(e){return new hS(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new iS(this.firestore,null,t)}};function WS(){return new kS(`serverTimestamp`)}var GS=`@firebase/firestore`,KS=`4.11.0`;function qS(e){return function(e,t){if(typeof e!=`object`||!e)return!1;let n=e;for(let e of t)if(e in n&&typeof n[e]==`function`)return!0;return!1}(e,[`next`,`error`,`complete`])}var JS=class{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new iS(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new YS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){let t=this._document.data.field(LS(`DocumentSnapshot.get`,e));if(t!==null)return this._userDataWriter.convertValue(t)}}},YS=class extends JS{data(){return super.data()}};function XS(e){if(e.limitType===`L`&&e.explicitOrderBy.length===0)throw new X(Y.UNIMPLEMENTED,`limitToLast() queries require specifying at least one orderBy() clause`)}var ZS=class{},QS=class extends ZS{};function $S(e,t,...n){let r=[];t instanceof ZS&&r.push(t),r=r.concat(n),function(e){let t=e.filter((e=>e instanceof nC)).length,n=e.filter((e=>e instanceof eC)).length;if(t>1||t>0&&n>0)throw new X(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let t of r)e=t._apply(e);return e}var eC=class e extends QS{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type=`where`}static _create(t,n,r){return new e(t,n,r)}_apply(e){let t=this._parse(e);return sC(e._query,t),new rS(e.firestore,e.converter,jg(e._query,t))}_parse(e){let t=ES(e.firestore);return function(e,t,n,r,i,a,o){let s;if(i.isKeyField()){if(a===`array-contains`||a===`array-contains-any`)throw new X(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${a}' queries on documentId().`);if(a===`in`||a===`not-in`){oC(o,a);let t=[];for(let n of o)t.push(aC(r,e,n));s={arrayValue:{values:t}}}else s=aC(r,e,o)}else a!==`in`&&a!==`not-in`&&a!==`array-contains-any`||oC(o,a),s=MS(n,t,o,a===`in`||a===`not-in`);return tg.create(i,a,s)}(e._query,`where`,t,e.firestore._databaseId,this._field,this._op,this._value)}};function tC(e,t,n){let r=t,i=LS(`where`,e);return eC._create(i,r,n)}var nC=class e extends ZS{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(t,n){return new e(t,n)}_parse(e){let t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return t.length===1?t[0]:ng.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(e,t){let n=e,r=t.getFlattenedFilters();for(let e of r)sC(n,e),n=jg(n,e)}(e._query,t),new rS(e.firestore,e.converter,jg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type===`and`?`and`:`or`}},rC=class e extends QS{constructor(e,t){super(),this._field=e,this._direction=t,this.type=`orderBy`}static _create(t,n){return new e(t,n)}_apply(e){let t=function(e,t,n){if(e.startAt!==null)throw new X(Y.INVALID_ARGUMENT,`Invalid query. You must not call startAt() or startAfter() before calling orderBy().`);if(e.endAt!==null)throw new X(Y.INVALID_ARGUMENT,`Invalid query. You must not call endAt() or endBefore() before calling orderBy().`);return new Qh(t,n)}(e._query,this._field,this._direction);return new rS(e.firestore,e.converter,Mg(e._query,t))}};function iC(e,t=`asc`){let n=t,r=LS(`orderBy`,e);return rC._create(r,n)}function aC(e,t,n){if(typeof(n=jd(n))==`string`){if(n===``)throw new X(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.`);if(!Dg(t)&&n.indexOf(`/`)!==-1)throw new X(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=t.path.child(hm.fromString(n));if(!Z.isDocumentKey(r))throw new X(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Lh(e,new Z(r))}if(n instanceof iS)return Lh(e,n._key);throw new X(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cm(n)}.`)}function oC(e,t){if(!Array.isArray(e)||e.length===0)throw new X(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function sC(e,t){let n=function(e,t){for(let n of e)for(let e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case`!=`:return[`!=`,`not-in`];case`array-contains-any`:case`in`:return[`not-in`];case`not-in`:return[`array-contains-any`,`in`,`not-in`,`!=`];default:return[]}}(t.op));if(n!==null)throw n===t.op?new X(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new X(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function cC(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}var lC=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},uC=class e extends JS{constructor(e,t,n,r,i,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new dC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let n=this._document.data.field(LS(`DocumentSnapshot.get`,e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new X(Y.FAILED_PRECONDITION,`DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t=this._document,n={};return n.type=e._jsonSchemaVersion,n.bundle=``,n.bundleSource=`DocumentSnapshot`,n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,`previous`),n.bundle=(this._firestore,this.ref.path,`NOT SUPPORTED`),n)}};uC._jsonSchemaVersion=`firestore/documentSnapshot/1.0`,uC._jsonSchema={type:Tm(`string`,uC._jsonSchemaVersion),bundleSource:Tm(`string`,`DocumentSnapshot`),bundleName:Tm(`string`),bundle:Tm(`string`)};var dC=class extends uC{data(e={}){return super.data(e)}},fC=class e{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new lC(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){let e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new dC(this._firestore,this._userDataWriter,n.key,n,new lC(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new X(Y.INVALID_ARGUMENT,`To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().`);return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{let r=new dC(e._firestore,e._userDataWriter,n.doc.key,n.doc,new lC(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:`added`,doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||e.type!==3)).map((t=>{let r=new dC(e._firestore,e._userDataWriter,t.doc.key,t.doc,new lC(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return t.type!==0&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),t.type!==1&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:pC(t.type),doc:r,oldIndex:i,newIndex:a}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new X(Y.FAILED_PRECONDITION,`QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t={};t.type=e._jsonSchemaVersion,t.bundleSource=`QuerySnapshot`,t.bundleName=om.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach((e=>{e._document!==null&&(n.push(e._document),r.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,`previous`)),i.push(e.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,`NOT SUPPORTED`),t}};function pC(e){switch(e){case 0:return`added`;case 2:case 3:return`modified`;case 1:return`removed`;default:return J(61501,{type:e})}}fC._jsonSchemaVersion=`firestore/querySnapshot/1.0`,fC._jsonSchema={type:Tm(`string`,fC._jsonSchemaVersion),bundleSource:Tm(`string`,`QuerySnapshot`),bundleName:Tm(`string`),bundle:Tm(`string`)};var mC=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ES(e)}set(e,t,n){this._verifyNotCommitted();let r=hC(e,this._firestore),i=cC(r.converter,t,n),a=DS(this._dataReader,`WriteBatch.set`,r._key,i,r.converter!==null,n);return this._mutations.push(a.toMutation(r._key,y_.none())),this}update(e,t,n,...r){this._verifyNotCommitted();let i=hC(e,this._firestore),a;return a=typeof(t=jd(t))==`string`||t instanceof gS?jS(this._dataReader,`WriteBatch.update`,i._key,t,n,r):AS(this._dataReader,`WriteBatch.update`,i._key,t),this._mutations.push(a.toMutation(i._key,y_.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=hC(e,this._firestore);return this._mutations=this._mutations.concat(new M_(t._key,y_.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new X(Y.FAILED_PRECONDITION,`A write batch can no longer be used after commit() has been called.`)}};function hC(e,t){if((e=jd(e)).firestore!==t)throw new X(Y.INVALID_ARGUMENT,`Provided document reference is from a different Firestore instance.`);return e}function gC(e){e=wm(e,iS);let t=wm(e.firestore,dS);return Gx(pS(t),e._key).then((n=>CC(t,e,n)))}function _C(e){e=wm(e,rS);let t=wm(e.firestore,dS),n=pS(t),r=new US(t);return XS(e._query),Kx(n,e._query).then((n=>new fC(t,r,e,n)))}function vC(e,t,n){e=wm(e,iS);let r=wm(e.firestore,dS),i=cC(e.converter,t,n);return SC(r,[DS(ES(r),`setDoc`,e._key,i,e.converter!==null,n).toMutation(e._key,y_.none())])}function yC(e,t,n,...r){e=wm(e,iS);let i=wm(e.firestore,dS),a=ES(i),o;return o=typeof(t=jd(t))==`string`||t instanceof gS?jS(a,`updateDoc`,e._key,t,n,r):AS(a,`updateDoc`,e._key,t),SC(i,[o.toMutation(e._key,y_.exists(!0))])}function bC(e,t){let n=wm(e.firestore,dS),r=sS(e),i=cC(e.converter,t);return SC(n,[DS(ES(e.firestore),`addDoc`,r._key,i,e.converter!==null,{}).toMutation(r._key,y_.exists(!1))]).then((()=>r))}function xC(e,...t){e=jd(e);let n={includeMetadataChanges:!1,source:`default`},r=0;typeof t[r]!=`object`||qS(t[r])||(n=t[r++]);let i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(qS(t[r])){let e=t[r];t[r]=e.next?.bind(e),t[r+1]=e.error?.bind(e),t[r+2]=e.complete?.bind(e)}let a,o,s;if(e instanceof iS)o=wm(e.firestore,dS),s=wg(e._key.path),a={next:n=>{t[r]&&t[r](CC(o,e,n))},error:t[r+1],complete:t[r+2]};else{let n=wm(e,rS);o=wm(n.firestore,dS),s=n._query;let i=new US(o);a={next:e=>{t[r]&&t[r](new fC(o,i,n,e))},error:t[r+1],complete:t[r+2]},XS(e._query)}return Wx(pS(o),s,i,a)}function SC(e,t){return qx(pS(e),t)}function CC(e,t,n){let r=n.docs.get(t._key);return new uC(e,new US(e),t._key,r,new lC(n.hasPendingWrites,n.fromCache),t.converter)}function wC(e){return e=wm(e,dS),pS(e),new mC(e,(t=>SC(e,t)))}(function(e,t=!0){Vp(ip),$f(new Md(`firestore`,((e,{instanceIdentifier:n,options:r})=>{let i=e.getProvider(`app`).getImmediate(),a=new dS(new em(e.getProvider(`auth-internal`)),new im(i,e.getProvider(`app-check-internal`)),Sh(i,n),i);return r={useFetchStreams:t,...r},a._setSettings(r),a}),`PUBLIC`).setMultipleInstances(!0)),sp(GS,KS,e),sp(GS,KS,`esm2020`)})();function TC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var EC=TC,DC=new vd(`auth`,`Firebase`,TC()),OC=new Wd(`@firebase/auth`);function kC(e,...t){OC.logLevel<=zd.WARN&&OC.warn(`Auth (${ip}): ${e}`,...t)}function AC(e,...t){OC.logLevel<=zd.ERROR&&OC.error(`Auth (${ip}): ${e}`,...t)}function jC(e,...t){throw FC(e,...t)}function MC(e,...t){return FC(e,...t)}function NC(e,t,n){return new vd(`auth`,`Firebase`,{...EC(),[t]:n}).create(t,{appName:e.name})}function PC(e){return NC(e,`operation-not-supported-in-this-environment`,`Operations that alter the current user are not supported in conjunction with FirebaseServerApp`)}function FC(e,...t){if(typeof e!=`string`){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return DC.create(e,...t)}function $(e,t,...n){if(!e)throw FC(t,...n)}function IC(e){let t=`INTERNAL ASSERTION FAILED: `+e;throw AC(t),Error(t)}function LC(e,t){e||IC(t)}function RC(){return typeof self<`u`&&self.location?.href||``}function zC(){return BC()===`http:`||BC()===`https:`}function BC(){return typeof self<`u`&&self.location?.protocol||null}function VC(){return typeof navigator<`u`&&navigator&&`onLine`in navigator&&typeof navigator.onLine==`boolean`&&(zC()||ud()||`connection`in navigator)?navigator.onLine:!0}function HC(){if(typeof navigator>`u`)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}var UC=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,LC(t>e,`Short delay should be less than long delay!`),this.isMobile=sd()||dd()}get(){return VC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function WC(e,t){LC(e.emulator,`Emulator should always be set here`);let{url:n}=e.emulator;return t?`${n}${t.startsWith(`/`)?t.slice(1):t}`:n}var GC=class{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<`u`&&`fetch`in self)return self.fetch;if(typeof globalThis<`u`&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<`u`)return fetch;IC(`Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<`u`&&`Headers`in self)return self.Headers;if(typeof globalThis<`u`&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<`u`)return Headers;IC(`Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<`u`&&`Response`in self)return self.Response;if(typeof globalThis<`u`&&globalThis.Response)return globalThis.Response;if(typeof Response<`u`)return Response;IC(`Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}},KC={CREDENTIAL_MISMATCH:`custom-token-mismatch`,MISSING_CUSTOM_TOKEN:`internal-error`,INVALID_IDENTIFIER:`invalid-email`,MISSING_CONTINUE_URI:`internal-error`,INVALID_PASSWORD:`wrong-password`,MISSING_PASSWORD:`missing-password`,INVALID_LOGIN_CREDENTIALS:`invalid-credential`,EMAIL_EXISTS:`email-already-in-use`,PASSWORD_LOGIN_DISABLED:`operation-not-allowed`,INVALID_IDP_RESPONSE:`invalid-credential`,INVALID_PENDING_TOKEN:`invalid-credential`,FEDERATED_USER_ID_ALREADY_LINKED:`credential-already-in-use`,MISSING_REQ_TYPE:`internal-error`,EMAIL_NOT_FOUND:`user-not-found`,RESET_PASSWORD_EXCEED_LIMIT:`too-many-requests`,EXPIRED_OOB_CODE:`expired-action-code`,INVALID_OOB_CODE:`invalid-action-code`,MISSING_OOB_CODE:`internal-error`,CREDENTIAL_TOO_OLD_LOGIN_AGAIN:`requires-recent-login`,INVALID_ID_TOKEN:`invalid-user-token`,TOKEN_EXPIRED:`user-token-expired`,USER_NOT_FOUND:`user-token-expired`,TOO_MANY_ATTEMPTS_TRY_LATER:`too-many-requests`,PASSWORD_DOES_NOT_MEET_REQUIREMENTS:`password-does-not-meet-requirements`,INVALID_CODE:`invalid-verification-code`,INVALID_SESSION_INFO:`invalid-verification-id`,INVALID_TEMPORARY_PROOF:`invalid-credential`,MISSING_SESSION_INFO:`missing-verification-id`,SESSION_EXPIRED:`code-expired`,MISSING_ANDROID_PACKAGE_NAME:`missing-android-pkg-name`,UNAUTHORIZED_DOMAIN:`unauthorized-continue-uri`,INVALID_OAUTH_CLIENT_ID:`invalid-oauth-client-id`,ADMIN_ONLY_OPERATION:`admin-restricted-operation`,INVALID_MFA_PENDING_CREDENTIAL:`invalid-multi-factor-session`,MFA_ENROLLMENT_NOT_FOUND:`multi-factor-info-not-found`,MISSING_MFA_ENROLLMENT_ID:`missing-multi-factor-info`,MISSING_MFA_PENDING_CREDENTIAL:`missing-multi-factor-session`,SECOND_FACTOR_EXISTS:`second-factor-already-in-use`,SECOND_FACTOR_LIMIT_EXCEEDED:`maximum-second-factor-count-exceeded`,BLOCKING_FUNCTION_ERROR_RESPONSE:`internal-error`,RECAPTCHA_NOT_ENABLED:`recaptcha-not-enabled`,MISSING_RECAPTCHA_TOKEN:`missing-recaptcha-token`,INVALID_RECAPTCHA_TOKEN:`invalid-recaptcha-token`,INVALID_RECAPTCHA_ACTION:`invalid-recaptcha-action`,MISSING_CLIENT_TYPE:`missing-client-type`,MISSING_RECAPTCHA_VERSION:`missing-recaptcha-version`,INVALID_RECAPTCHA_VERSION:`invalid-recaptcha-version`,INVALID_REQ_TYPE:`invalid-req-type`},qC=[`/v1/accounts:signInWithCustomToken`,`/v1/accounts:signInWithEmailLink`,`/v1/accounts:signInWithIdp`,`/v1/accounts:signInWithPassword`,`/v1/accounts:signInWithPhoneNumber`,`/v1/token`],JC=new UC(3e4,6e4);function YC(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function XC(e,t,n,r,i={}){return ZC(e,i,async()=>{let i={},a={};r&&(t===`GET`?a=r:i={body:JSON.stringify(r)});let o=wd({key:e.config.apiKey,...a}).slice(1),s=await e._getAdditionalHeaders();s[`Content-Type`]=`application/json`,e.languageCode&&(s[`X-Firebase-Locale`]=e.languageCode);let c={method:t,headers:s,...i};return ld()||(c.referrerPolicy=`no-referrer`),e.emulatorConfig&&Qu(e.emulatorConfig.host)&&(c.credentials=`include`),GC.fetch()(await $C(e,e.config.apiHost,n,o),c)})}async function ZC(e,t,n){e._canInitEmulator=!1;let r={...KC,...t};try{let t=new tw(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();let a=await i.json();if(`needConfirmation`in a)throw nw(e,`account-exists-with-different-credential`,a);if(i.ok&&!(`errorMessage`in a))return a;{let[t,n]=(i.ok?a.errorMessage:a.error.message).split(` : `);if(t===`FEDERATED_USER_ID_ALREADY_LINKED`)throw nw(e,`credential-already-in-use`,a);if(t===`EMAIL_EXISTS`)throw nw(e,`email-already-in-use`,a);if(t===`USER_DISABLED`)throw nw(e,`user-disabled`,a);let o=r[t]||t.toLowerCase().replace(/[_\s]+/g,`-`);if(n)throw NC(e,o,n);jC(e,o)}}catch(t){if(t instanceof _d)throw t;jC(e,`network-request-failed`,{message:String(t)})}}async function QC(e,t,n,r,i={}){let a=await XC(e,t,n,r,i);return`mfaPendingCredential`in a&&jC(e,`multi-factor-auth-required`,{_serverResponse:a}),a}async function $C(e,t,n,r){let i=`${t}${n}?${r}`,a=e,o=a.config.emulator?WC(e.config,i):`${e.config.apiScheme}://${i}`;return qC.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()===`COOKIE`)?a._getPersistence()._getFinalTarget(o).toString():o}function ew(e){switch(e){case`ENFORCE`:return`ENFORCE`;case`AUDIT`:return`AUDIT`;case`OFF`:return`OFF`;default:return`ENFORCEMENT_STATE_UNSPECIFIED`}}var tw=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(MC(this.auth,`network-request-failed`)),JC.get())})}};function nw(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=MC(e,t,r);return i.customData._tokenResponse=n,i}function rw(e){return e!==void 0&&e.enterprise!==void 0}var iw=class{constructor(e){if(this.siteKey=``,this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw Error(`recaptchaKey undefined`);this.siteKey=e.recaptchaKey.split(`/`)[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ew(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)===`ENFORCE`||this.getProviderEnforcementState(e)===`AUDIT`}isAnyProviderEnabled(){return this.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)||this.isProviderEnabled(`PHONE_PROVIDER`)}};async function aw(e,t){return XC(e,`GET`,`/v2/recaptchaConfig`,YC(e,t))}async function ow(e,t){return XC(e,`POST`,`/v1/accounts:delete`,t)}async function sw(e,t){return XC(e,`POST`,`/v1/accounts:lookup`,t)}function cw(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function lw(e,t=!1){let n=jd(e),r=await n.getIdToken(t),i=dw(r);$(i&&i.exp&&i.auth_time&&i.iat,n.auth,`internal-error`);let a=typeof i.firebase==`object`?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:cw(uw(i.auth_time)),issuedAtTime:cw(uw(i.iat)),expirationTime:cw(uw(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function uw(e){return Number(e)*1e3}function dw(e){let[t,n,r]=e.split(`.`);if(t===void 0||n===void 0||r===void 0)return AC(`JWT malformed, contained fewer than 3 sections`),null;try{let e=Vu(n);return e?JSON.parse(e):(AC(`Failed to decode base64 JWT payload`),null)}catch(e){return AC(`Caught error parsing JWT payload as JSON`,e?.toString()),null}}function fw(e){let t=dw(e);return $(t,`internal-error`),$(t.exp!==void 0,`internal-error`),$(t.iat!==void 0,`internal-error`),Number(t.exp)-Number(t.iat)}async function pw(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof _d&&mw(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}function mw({code:e}){return e===`auth/user-disabled`||e===`auth/user-token-expired`}var hw=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;let e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code===`auth/network-request-failed`&&this.schedule(!0);return}this.schedule()}},gw=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=cw(this.lastLoginAt),this.creationTime=cw(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function _w(e){let t=e.auth,n=await pw(e,sw(t,{idToken:await e.getIdToken()}));$(n?.users.length,t,`internal-error`);let r=n.users[0];e._notifyReloadListener(r);let i=r.providerUserInfo?.length?bw(r.providerUserInfo):[],a=yw(e.providerData,i),o=e.isAnonymous,s=!(e.email&&r.passwordHash)&&!a?.length,c=o?s:!1,l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new gw(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(e,l)}async function vw(e){let t=jd(e);await _w(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function yw(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function bw(e){return e.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||``,displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function xw(e,t){let n=await ZC(e,{},async()=>{let n=wd({grant_type:`refresh_token`,refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,a=await $C(e,r,`/v1/token`,`key=${i}`),o=await e._getAdditionalHeaders();o[`Content-Type`]=`application/x-www-form-urlencoded`;let s={method:`POST`,headers:o,body:n};return e.emulatorConfig&&Qu(e.emulatorConfig.host)&&(s.credentials=`include`),GC.fetch()(a,s)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Sw(e,t){return XC(e,`POST`,`/v2/accounts:revokeToken`,YC(e,t))}var Cw=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$(e.idToken,`internal-error`),$(e.idToken!==void 0,`internal-error`),$(e.refreshToken!==void 0,`internal-error`);let t=`expiresIn`in e&&e.expiresIn!==void 0?Number(e.expiresIn):fw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$(e.length!==0,`internal-error`);let t=fw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:($(this.refreshToken,e,`user-token-expired`),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:n,refreshToken:r,expiresIn:i}=await xw(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new e;return r&&($(typeof r==`string`,`internal-error`,{appName:t}),o.refreshToken=r),i&&($(typeof i==`string`,`internal-error`,{appName:t}),o.accessToken=i),a&&($(typeof a==`number`,`internal-error`,{appName:t}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return IC(`not implemented`)}};function ww(e,t){$(typeof e==`string`||e===void 0,`internal-error`,{appName:t})}var Tw=class e{constructor({uid:e,auth:t,stsTokenManager:n,...r}){this.providerId=`firebase`,this.proactiveRefresh=new hw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new gw(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){let t=await pw(this,this.stsTokenManager.getToken(this.auth,e));return $(t,this.auth,`internal-error`),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return lw(this,e)}reload(){return vw(this)}_assign(e){this!==e&&($(this.uid===e.uid,this.auth,`internal-error`),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(t){let n=new e({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){$(!this.reloadListener,this.auth,`internal-error`),this.reloadListener=e,this.reloadUserInfo&&=(this._notifyReloadListener(this.reloadUserInfo),null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await _w(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tp(this.auth.app))return Promise.reject(PC(this.auth));let e=await this.getIdToken();return await pw(this,ow(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||``}static _fromJSON(t,n){let r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,s=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:p,providerData:m,stsTokenManager:h}=n;$(d&&h,t,`internal-error`);let g=Cw.fromJSON(this.name,h);$(typeof d==`string`,t,`internal-error`),ww(r,t.name),ww(i,t.name),$(typeof f==`boolean`,t,`internal-error`),$(typeof p==`boolean`,t,`internal-error`),ww(a,t.name),ww(o,t.name),ww(s,t.name),ww(c,t.name),ww(l,t.name),ww(u,t.name);let _=new e({uid:d,auth:t,email:i,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:a,tenantId:s,stsTokenManager:g,createdAt:l,lastLoginAt:u});return m&&Array.isArray(m)&&(_.providerData=m.map(e=>({...e}))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(t,n,r=!1){let i=new Cw;i.updateFromServerResponse(n);let a=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await _w(a),a}static async _fromGetAccountInfoResponse(t,n,r){let i=n.users[0];$(i.localId!==void 0,`internal-error`);let a=i.providerUserInfo===void 0?[]:bw(i.providerUserInfo),o=!(i.email&&i.passwordHash)&&!a?.length,s=new Cw;s.updateFromIdToken(r);let c=new e({uid:i.localId,auth:t,stsTokenManager:s,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new gw(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(c,l),c}},Ew=new Map;function Dw(e){LC(e instanceof Function,`Expected a class definition`);let t=Ew.get(e);return t?(LC(t instanceof e,`Instance stored in cache mismatched with class`),t):(t=new e,Ew.set(e,t),t)}var Ow=class{constructor(){this.type=`NONE`,this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}};Ow.type=`NONE`;var kw=Ow;function Aw(e,t,n){return`firebase:${e}:${t}:${n}`}var jw=class e{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;let{config:r,name:i}=this.auth;this.fullUserKey=Aw(this.userKey,r.apiKey,i),this.fullPersistenceKey=Aw(`persistence`,r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e==`string`){let t=await sw(this.auth,{idToken:e}).catch(()=>void 0);return t?Tw._fromGetAccountInfoResponse(this.auth,t,e):null}return Tw._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r=`authUser`){if(!n.length)return new e(Dw(kw),t,r);let i=(await Promise.all(n.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),a=i[0]||Dw(kw),o=Aw(r,t.config.apiKey,t.name),s=null;for(let e of n)try{let n=await e._get(o);if(n){let r;if(typeof n==`string`){let e=await sw(t,{idToken:n}).catch(()=>void 0);if(!e)break;r=await Tw._fromGetAccountInfoResponse(t,e,n)}else r=Tw._fromJSON(t,n);e!==a&&(s=r),a=e;break}}catch{}let c=i.filter(e=>e._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new e(a,t,r):(a=c[0],s&&await a._set(o,s.toJSON()),await Promise.all(n.map(async e=>{if(e!==a)try{await e._remove(o)}catch{}})),new e(a,t,r))}};function Mw(e){let t=e.toLowerCase();if(t.includes(`opera/`)||t.includes(`opr/`)||t.includes(`opios/`))return`Opera`;if(Iw(t))return`IEMobile`;if(t.includes(`msie`)||t.includes(`trident/`))return`IE`;if(t.includes(`edge/`))return`Edge`;if(Nw(t))return`Firefox`;if(t.includes(`silk/`))return`Silk`;if(Rw(t))return`Blackberry`;if(zw(t))return`Webos`;if(Pw(t))return`Safari`;if((t.includes(`chrome/`)||Fw(t))&&!t.includes(`edge/`))return`Chrome`;if(Lw(t))return`Android`;{let t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(t?.length===2)return t[1]}return`Other`}function Nw(e=od()){return/firefox\//i.test(e)}function Pw(e=od()){let t=e.toLowerCase();return t.includes(`safari/`)&&!t.includes(`chrome/`)&&!t.includes(`crios/`)&&!t.includes(`android`)}function Fw(e=od()){return/crios\//i.test(e)}function Iw(e=od()){return/iemobile/i.test(e)}function Lw(e=od()){return/android/i.test(e)}function Rw(e=od()){return/blackberry/i.test(e)}function zw(e=od()){return/webos/i.test(e)}function Bw(e=od()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Vw(e=od()){return Bw(e)&&!!window.navigator?.standalone}function Hw(){return fd()&&document.documentMode===10}function Uw(e=od()){return Bw(e)||Lw(e)||zw(e)||Rw(e)||/windows phone/i.test(e)||Iw(e)}function Ww(e,t=[]){let n;switch(e){case`Browser`:n=Mw(od());break;case`Worker`:n=`${Mw(od())}-${e}`;break;default:n=e}let r=t.length?t.join(`,`):`FirebaseCore-web`;return`${n}/JsCore/${ip}/${r}`}var Gw=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let n=t=>new Promise((n,r)=>{try{n(e(t))}catch(e){r(e)}});n.onAbort=t,this.queue.push(n);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(let e of t)try{e()}catch{}throw this.auth._errorFactory.create(`login-blocked`,{originalMessage:e?.message})}}};async function Kw(e,t={}){return XC(e,`GET`,`/v2/passwordPolicy`,YC(e,t))}var qw=6,Jw=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??qw,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState===`ENFORCEMENT_STATE_UNSPECIFIED`&&(this.enforcementState=`OFF`),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join(``)??``,this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&=t.meetsMinPasswordLength??!0,t.isValid&&=t.meetsMaxPasswordLength??!0,t.isValid&&=t.containsLowercaseLetter??!0,t.isValid&&=t.containsUppercaseLetter??!0,t.isValid&&=t.containsNumericCharacter??!0,t.isValid&&=t.containsNonAlphanumericCharacter??!0,t}validatePasswordLengthOptions(e,t){let n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>=`a`&&n<=`z`,n>=`A`&&n<=`Z`,n>=`0`&&n<=`9`,this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||=t),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||=n),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||=r),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||=i)}},Yw=class{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zw(this),this.idTokenSubscription=new Zw(this),this.beforeStateQueue=new Gw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Dw(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await jw.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await sw(this,{idToken:e}),n=await Tw._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(e){console.warn(`FirebaseServerApp could not login user with provided authIdToken: `,e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(tp(this.app)){let e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let t=this.redirectUser?._redirectEventId,i=n?._redirectEventId,a=await this.tryRedirectSignIn(e);(!t||t===i)&&a?.user&&(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(e){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return $(this._popupRedirectResolver,this,`argument-error`),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await _w(e)}catch(e){if(e?.code!==`auth/network-request-failed`)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tp(this.app))return Promise.reject(PC(this));let t=e?jd(e):null;return t&&$(t.auth.config.apiKey===this.config.apiKey,this,`invalid-user-token`),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&$(this.tenantId===e.tenantId,this,`tenant-id-mismatch`),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tp(this.app)?Promise.reject(PC(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tp(this.app)?Promise.reject(PC(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Dw(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion===this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?t.validatePassword(e):Promise.reject(this._errorFactory.create(`unsupported-password-policy-schema-version`,{}))}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=new Jw(await Kw(this));this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new vd(`auth`,`Firebase`,e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t={providerId:`apple.com`,tokenType:`ACCESS_TOKEN`,token:e,idToken:await this.currentUser.getIdToken()};this.tenantId!=null&&(t.tenantId=this.tenantId),await Sw(this,t)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Dw(e)||this._popupRedirectResolver;$(t,this,`argument-error`),this.redirectPersistenceManager=await jw.create(this,[Dw(t._redirectPersistence)],`redirectUser`),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};let i=typeof t==`function`?t:t.next.bind(t),a=!1,o=this._isInitialized?Promise.resolve():this._initializationPromise;if($(o,this,`internal-error`),o.then(()=>{a||i(this.currentUser)}),typeof t==`function`){let i=e.addObserver(t,n,r);return()=>{a=!0,i()}}else{let n=e.addObserver(t);return()=>{a=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,`internal-error`),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ww(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e[`X-Firebase-gmpid`]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e[`X-Firebase-Client`]=t);let n=await this._getAppCheckToken();return n&&(e[`X-Firebase-AppCheck`]=n),e}async _getAppCheckToken(){if(tp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&kC(`Error while retrieving App Check token: ${e.error}`),e?.token}};function Xw(e){return jd(e)}var Zw=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Dd(e=>this.observer=e)}get next(){return $(this.observer,this.auth,`internal-error`),this.observer.next.bind(this.observer)}},Qw={async loadJS(){throw Error(`Unable to load external scripts`)},recaptchaV2Script:``,recaptchaEnterpriseScript:``,gapiScript:``};function $w(e){Qw=e}function eT(e){return Qw.loadJS(e)}function tT(){return Qw.recaptchaEnterpriseScript}function nT(){return Qw.gapiScript}function rT(e){return`__${e}${Math.floor(Math.random()*1e6)}`}var iT=class{constructor(){this.enterprise=new aT}ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},aT=class{ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},oT=`recaptcha-enterprise`,sT=`NO_RECAPTCHA`,cT=class{constructor(e){this.type=oT,this.auth=Xw(e)}async verify(e=`verify`,t=!1){async function n(e){if(!t){if(e.tenantId==null&&e._agentRecaptchaConfig!=null)return e._agentRecaptchaConfig.siteKey;if(e.tenantId!=null&&e._tenantRecaptchaConfigs[e.tenantId]!==void 0)return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{aw(e,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}).then(r=>{if(r.recaptchaKey===void 0)n(Error(`recaptcha Enterprise site key undefined`));else{let n=new iw(r);return e.tenantId==null?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}}).catch(e=>{n(e)})})}function r(t,n,r){let i=window.grecaptcha;rw(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(sT)})}):r(Error(`No reCAPTCHA enterprise script loaded.`))}return this.auth.settings.appVerificationDisabledForTesting?new iT().execute(`siteKey`,{action:`verify`}):new Promise((e,i)=>{n(this.auth).then(n=>{if(!t&&rw(window.grecaptcha))r(n,e,i);else{if(typeof window>`u`){i(Error(`RecaptchaVerifier is only supported in browser`));return}let t=tT();t.length!==0&&(t+=n),eT(t).then(()=>{r(n,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}};async function lT(e,t,n,r=!1,i=!1){let a=new cT(e),o;if(i)o=sT;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}let s={...t};if(n===`mfaSmsEnrollment`||n===`mfaSmsSignIn`){if(`phoneEnrollmentInfo`in s){let e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}else if(`phoneSignInInfo`in s){let e=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}return s}return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:`CLIENT_TYPE_WEB`}),Object.assign(s,{recaptchaVersion:`RECAPTCHA_ENTERPRISE`}),s}async function uT(e,t,n,r,i){return i===`EMAIL_PASSWORD_PROVIDER`?e._getRecaptchaConfig()?.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)?r(e,await lT(e,t,n,n===`getOobCode`)):r(e,t).catch(async i=>i.code===`auth/missing-recaptcha-token`?(console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`),r(e,await lT(e,t,n,n===`getOobCode`))):Promise.reject(i)):i===`PHONE_PROVIDER`?e._getRecaptchaConfig()?.isProviderEnabled(`PHONE_PROVIDER`)?r(e,await lT(e,t,n)).catch(async i=>e._getRecaptchaConfig()?.getProviderEnforcementState(`PHONE_PROVIDER`)===`AUDIT`&&(i.code===`auth/missing-recaptcha-token`||i.code===`auth/invalid-app-credential`)?(console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`),r(e,await lT(e,t,n,!1,!0))):Promise.reject(i)):r(e,await lT(e,t,n,!1,!0)):Promise.reject(i+` provider is not supported.`)}async function dT(e){let t=Xw(e),n=new iw(await aw(t,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}));t.tenantId==null?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,n.isAnyProviderEnabled()&&new cT(t).verify()}function fT(e,t){let n=ep(e,`auth`);if(n.isInitialized()){let e=n.getImmediate();if(Sd(n.getOptions(),t??{}))return e;jC(e,`already-initialized`)}return n.initialize({options:t})}function pT(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Dw);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function mT(e,t,n){let r=Xw(e);$(/^https?:\/\//.test(t),r,`invalid-emulator-scheme`);let i=!!n?.disableWarnings,a=hT(t),{host:o,port:s}=gT(t),c=s===null?``:`:${s}`,l={url:`${a}//${o}${c}/`},u=Object.freeze({host:o,port:s,protocol:a.replace(`:`,``),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){$(r.config.emulator&&r.emulatorConfig,r,`emulator-config-failed`),$(Sd(l,r.config.emulator)&&Sd(u,r.emulatorConfig),r,`emulator-config-failed`);return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Qu(o)?($u(`${a}//${o}${c}`),ad(`Auth`,!0)):i||vT()}function hT(e){let t=e.indexOf(`:`);return t<0?``:e.substr(0,t+1)}function gT(e){let t=hT(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:``,port:null};let r=n[2].split(`@`).pop()||``,i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let e=i[1];return{host:e,port:_T(r.substr(e.length+1))}}else{let[e,t]=r.split(`:`);return{host:e,port:_T(t)}}}function _T(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}function vT(){function e(){let e=document.createElement(`p`),t=e.style;e.innerText=`Running in emulator mode. Do not use with production credentials.`,t.position=`fixed`,t.width=`100%`,t.backgroundColor=`#ffffff`,t.border=`.1em solid #000000`,t.color=`#b50000`,t.bottom=`0px`,t.left=`0px`,t.margin=`0px`,t.zIndex=`10000`,t.textAlign=`center`,e.classList.add(`firebase-emulator-warning`),document.body.appendChild(e)}typeof console<`u`&&typeof console.info==`function`&&console.info(`WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.`),typeof window<`u`&&typeof document<`u`&&(document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,e):e())}var yT=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return IC(`not implemented`)}_getIdTokenResponse(e){return IC(`not implemented`)}_linkToIdToken(e,t){return IC(`not implemented`)}_getReauthenticationResolver(e){return IC(`not implemented`)}};async function bT(e,t){return XC(e,`POST`,`/v1/accounts:signUp`,t)}async function xT(e,t){return QC(e,`POST`,`/v1/accounts:signInWithPassword`,YC(e,t))}async function ST(e,t){return QC(e,`POST`,`/v1/accounts:signInWithEmailLink`,YC(e,t))}async function CT(e,t){return QC(e,`POST`,`/v1/accounts:signInWithEmailLink`,YC(e,t))}var wT=class e extends yT{constructor(e,t,n,r=null){super(`password`,n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(t,n){return new e(t,n,`password`)}static _fromEmailAndCode(t,n,r=null){return new e(t,n,`emailLink`,r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e==`string`?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod===`password`)return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod===`emailLink`)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case`password`:return uT(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`},`signInWithPassword`,xT,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return ST(e,{email:this._email,oobCode:this._password});default:jC(e,`internal-error`)}}async _linkToIdToken(e,t){switch(this.signInMethod){case`password`:return uT(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`},`signUpPassword`,bT,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return CT(e,{idToken:t,email:this._email,oobCode:this._password});default:jC(e,`internal-error`)}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function TT(e,t){return QC(e,`POST`,`/v1/accounts:signInWithIdp`,YC(e,t))}var ET=`http://localhost`,DT=class e extends yT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){let n=new e(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):jC(`argument-error`),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){let{providerId:n,signInMethod:r,...i}=typeof t==`string`?JSON.parse(t):t;if(!n||!r)return null;let a=new e(n,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){return TT(e,this.buildRequest())}_linkToIdToken(e,t){let n=this.buildRequest();return n.idToken=t,TT(e,n)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,TT(e,t)}buildRequest(){let e={requestUri:ET,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=wd(t)}return e}};async function OT(e,t){return XC(e,`POST`,`/v1/accounts:sendVerificationCode`,YC(e,t))}async function kT(e,t){return QC(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,YC(e,t))}async function AT(e,t){let n=await QC(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,YC(e,t));if(n.temporaryProof)throw nw(e,`account-exists-with-different-credential`,n);return n}var jT={USER_NOT_FOUND:`user-not-found`};async function MT(e,t){return QC(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,YC(e,{...t,operation:`REAUTH`}),jT)}var NT=class e extends yT{constructor(e){super(`phone`,`phone`),this.params=e}static _fromVerification(t,n){return new e({verificationId:t,verificationCode:n})}static _fromTokenResponse(t,n){return new e({phoneNumber:t,temporaryProof:n})}_getIdTokenResponse(e){return kT(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return AT(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return MT(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(t){typeof t==`string`&&(t=JSON.parse(t));let{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a}=t;return!r&&!n&&!i&&!a?null:new e({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a})}};function PT(e){switch(e){case`recoverEmail`:return`RECOVER_EMAIL`;case`resetPassword`:return`PASSWORD_RESET`;case`signIn`:return`EMAIL_SIGNIN`;case`verifyEmail`:return`VERIFY_EMAIL`;case`verifyAndChangeEmail`:return`VERIFY_AND_CHANGE_EMAIL`;case`revertSecondFactorAddition`:return`REVERT_SECOND_FACTOR_ADDITION`;default:return null}}function FT(e){let t=Td(Ed(e)).link,n=t?Td(Ed(t)).deep_link_id:null,r=Td(Ed(e)).deep_link_id;return(r?Td(Ed(r)).link:null)||r||n||t||e}var IT=class e{constructor(e){let t=Td(Ed(e)),n=t.apiKey??null,r=t.oobCode??null,i=PT(t.mode??null);$(n&&r&&i,`argument-error`),this.apiKey=n,this.operation=i,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(t){let n=FT(t);try{return new e(n)}catch{return null}}},LT=class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return wT._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let n=IT.parseLink(t);return $(n,`argument-error`),wT._fromEmailAndCode(e,n.code,n.tenantId)}};LT.PROVIDER_ID=`password`,LT.EMAIL_PASSWORD_SIGN_IN_METHOD=`password`,LT.EMAIL_LINK_SIGN_IN_METHOD=`emailLink`;var RT=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}},zT=class extends RT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}},BT=class e extends zT{constructor(){super(`facebook.com`)}static credential(t){return DT._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};BT.FACEBOOK_SIGN_IN_METHOD=`facebook.com`,BT.PROVIDER_ID=`facebook.com`;var VT=class e extends zT{constructor(){super(`google.com`),this.addScope(`profile`)}static credential(t,n){return DT._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return e.credential(n,r)}catch{return null}}};VT.GOOGLE_SIGN_IN_METHOD=`google.com`,VT.PROVIDER_ID=`google.com`;var HT=class e extends zT{constructor(){super(`github.com`)}static credential(t){return DT._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};HT.GITHUB_SIGN_IN_METHOD=`github.com`,HT.PROVIDER_ID=`github.com`;var UT=class e extends zT{constructor(){super(`twitter.com`)}static credential(t,n){return DT._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e.credential(n,r)}catch{return null}}};UT.TWITTER_SIGN_IN_METHOD=`twitter.com`,UT.PROVIDER_ID=`twitter.com`;async function WT(e,t){return QC(e,`POST`,`/v1/accounts:signUp`,YC(e,t))}var GT=class e{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){return new e({user:await Tw._fromIdTokenResponse(t,r,i),providerId:KT(r),_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){return await t._updateTokensIfNecessary(r,!0),new e({user:t,providerId:KT(r),_tokenResponse:r,operationType:n})}};function KT(e){return e.providerId?e.providerId:`phoneNumber`in e?`phone`:null}async function qT(e){if(tp(e.app))return Promise.reject(PC(e));let t=Xw(e);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new GT({user:t.currentUser,providerId:null,operationType:`signIn`});let n=await WT(t,{returnSecureToken:!0}),r=await GT._fromIdTokenResponse(t,`signIn`,n,!0);return await t._updateCurrentUser(r.user),r}var JT=class e extends _d{constructor(t,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,e.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new e(t,n,r,i)}};function YT(e,t,n,r){return(t===`reauthenticate`?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{throw n.code===`auth/multi-factor-auth-required`?JT._fromErrorAndOperation(e,n,t,r):n})}async function XT(e,t,n=!1){let r=await pw(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return GT._forOperation(e,`link`,r)}async function ZT(e,t,n=!1){let{auth:r}=e;if(tp(r.app))return Promise.reject(PC(r));let i=`reauthenticate`;try{let a=await pw(e,YT(r,i,t,e),n);$(a.idToken,r,`internal-error`);let o=dw(a.idToken);$(o,r,`internal-error`);let{sub:s}=o;return $(e.uid===s,r,`user-mismatch`),GT._forOperation(e,i,a)}catch(e){throw e?.code===`auth/user-not-found`&&jC(r,`user-mismatch`),e}}async function QT(e,t,n=!1){if(tp(e.app))return Promise.reject(PC(e));let r=`signIn`,i=await YT(e,r,t),a=await GT._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(a.user),a}function $T(e,t,n,r){return jd(e).onIdTokenChanged(t,n,r)}function eE(e,t,n){return jd(e).beforeAuthStateChanged(t,n)}function tE(e){return jd(e).signOut()}function nE(e,t){return XC(e,`POST`,`/v2/accounts/mfaEnrollment:start`,YC(e,t))}function rE(e,t){return XC(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,YC(e,t))}function iE(e,t){return XC(e,`POST`,`/v2/accounts/mfaEnrollment:start`,YC(e,t))}function aE(e,t){return XC(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,YC(e,t))}var oE=`__sak`,sE=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(oE,`1`),this.storage.removeItem(oE),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}},cE=1e3,lE=10,uE=class extends sE{constructor(){super(()=>window.localStorage,`LOCAL`),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Uw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});return}let n=e.key;t?this.detachListener():this.stopPolling();let r=()=>{let e=this.storage.getItem(n);!t&&this.localCache[n]===e||this.notifyListeners(n,e)},i=this.storage.getItem(n);Hw()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,lE):r()}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent(`storage`,{key:e,oldValue:t,newValue:n}),!0)})},cE)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}attachListener(){window.addEventListener(`storage`,this.boundEventHandler)}detachListener(){window.removeEventListener(`storage`,this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}};uE.type=`LOCAL`;var dE=uE,fE=1e3;function pE(e){let t=e.replace(/[\\^$.*+?()[\]{}|]/g,`\\$&`),n=RegExp(`${t}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function mE(e){return`${window.location.protocol===`http:`?`__dev_`:`__HOST-`}FIREBASE_${e.split(`:`)[3]}`}var hE=class{constructor(){this.type=`COOKIE`,this.listenerUnsubscribes=new Map}_getFinalTarget(e){let t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set(`finalTarget`,e),t}async _isAvailable(){return typeof isSecureContext==`boolean`&&!isSecureContext||typeof navigator>`u`||typeof document>`u`?!1:navigator.cookieEnabled??!0}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;let t=mE(e);return window.cookieStore?(await window.cookieStore.get(t))?.value:pE(t)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;let t=mE(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch(`/__cookies__`,{method:`DELETE`}).catch(()=>void 0)}_addListener(e,t){if(!this._isAvailable())return;let n=mE(e);if(window.cookieStore){let e=(e=>{let r=e.changed.find(e=>e.name===n);r&&t(r.value),e.deleted.find(e=>e.name===n)&&t(null)});return this.listenerUnsubscribes.set(t,()=>window.cookieStore.removeEventListener(`change`,e)),window.cookieStore.addEventListener(`change`,e)}let r=pE(n),i=setInterval(()=>{let e=pE(n);e!==r&&(t(e),r=e)},fE);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){let n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}};hE.type=`COOKIE`;var gE=class extends sE{constructor(){super(()=>window.sessionStorage,`SESSION`)}_addListener(e,t){}_removeListener(e,t){}};gE.type=`SESSION`;var _E=gE;function vE(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}}))}var yE=class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;let r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let t=e,{eventId:n,eventType:r,data:i}=t.data,a=this.handlersMap[r];if(!a?.size)return;t.ports[0].postMessage({status:`ack`,eventId:n,eventType:r});let o=await vE(Array.from(a).map(async e=>e(t.origin,i)));t.ports[0].postMessage({status:`done`,eventId:n,eventType:r,response:o})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener(`message`,this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener(`message`,this.boundEventHandler)}};yE.receivers=[];function bE(e=``,t=10){let n=``;for(let e=0;e<t;e++)n+=Math.floor(Math.random()*10);return e+n}var xE=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener(`message`,e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){let r=typeof MessageChannel<`u`?new MessageChannel:null;if(!r)throw Error(`connection_unavailable`);let i,a;return new Promise((o,s)=>{let c=bE(``,20);r.port1.start();let l=setTimeout(()=>{s(Error(`unsupported_event`))},n);a={messageChannel:r,onMessage(e){let t=e;if(t.data.eventId===c)switch(t.data.status){case`ack`:clearTimeout(l),i=setTimeout(()=>{s(Error(`timeout`))},3e3);break;case`done`:clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),s(Error(`invalid_response`));break}}},this.handlers.add(a),r.port1.addEventListener(`message`,a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}};function SE(){return window}function CE(e){SE().location.href=e}function wE(){return SE().WorkerGlobalScope!==void 0&&typeof SE().importScripts==`function`}async function TE(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function EE(){return navigator?.serviceWorker?.controller||null}function DE(){return wE()?self:null}var OE=`firebaseLocalStorageDb`,kE=1,AE=`firebaseLocalStorage`,jE=`fbase_key`,ME=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener(`success`,()=>{e(this.request.result)}),this.request.addEventListener(`error`,()=>{t(this.request.error)})})}};function NE(e,t){return e.transaction([AE],t?`readwrite`:`readonly`).objectStore(AE)}function PE(){return new ME(indexedDB.deleteDatabase(OE)).toPromise()}function FE(){let e=indexedDB.open(OE,kE);return new Promise((t,n)=>{e.addEventListener(`error`,()=>{n(e.error)}),e.addEventListener(`upgradeneeded`,()=>{let t=e.result;try{t.createObjectStore(AE,{keyPath:jE})}catch(e){n(e)}}),e.addEventListener(`success`,async()=>{let n=e.result;n.objectStoreNames.contains(AE)?t(n):(n.close(),await PE(),t(await FE()))})})}async function IE(e,t,n){return new ME(NE(e,!0).put({[jE]:t,value:n})).toPromise()}async function LE(e,t){let n=await new ME(NE(e,!1).get(t)).toPromise();return n===void 0?null:n.value}function RE(e,t){return new ME(NE(e,!0).delete(t)).toPromise()}var zE=800,BE=3,VE=class{constructor(){this.type=`LOCAL`,this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||=await FE(),this.db}async _withRetries(e){let t=0;for(;;)try{return await e(await this._openDb())}catch(e){if(t++>BE)throw e;this.db&&=(this.db.close(),void 0)}}async initializeServiceWorkerMessaging(){return wE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yE._getInstance(DE()),this.receiver._subscribe(`keyChanged`,async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe(`ping`,async(e,t)=>[`keyChanged`])}async initializeSender(){if(this.activeServiceWorker=await TE(),!this.activeServiceWorker)return;this.sender=new xE(this.activeServiceWorker);let e=await this.sender._send(`ping`,{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes(`keyChanged`)&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||EE()!==this.activeServiceWorker))try{await this.sender._send(`keyChanged`,{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await FE();return await IE(e,oE,`1`),await RE(e,oE),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>IE(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>LE(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>RE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>new ME(NE(e,!1).getAll()).toPromise());if(!e||this.pendingWrites!==0)return[];let t=[],n=new Set;if(e.length!==0)for(let{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(let e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zE)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};VE.type=`LOCAL`;var HE=VE;function UE(e,t){return XC(e,`POST`,`/v2/accounts/mfaSignIn:start`,YC(e,t))}function WE(e,t){return XC(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,YC(e,t))}function GE(e,t){return XC(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,YC(e,t))}rT(`rcb`),new UC(3e4,6e4);var KE=`recaptcha`;async function qE(e,t,n){if(!e._getRecaptchaConfig())try{await dT(e)}catch{console.log(`Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.`)}try{let r;if(r=typeof t==`string`?{phoneNumber:t}:t,`session`in r){let t=r.session;if(`phoneNumber`in r)return $(t.type===`enroll`,e,`internal-error`),(await uT(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`}},`mfaSmsEnrollment`,async(e,t)=>t.phoneEnrollmentInfo.captchaResponse===sT?($(n?.type===KE,e,`argument-error`),nE(e,await JE(e,t,n))):nE(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo;{$(t.type===`signin`,e,`internal-error`);let i=r.multiFactorHint?.uid||r.multiFactorUid;return $(i,e,`missing-multi-factor-info`),(await uT(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:`CLIENT_TYPE_WEB`}},`mfaSmsSignIn`,async(e,t)=>t.phoneSignInInfo.captchaResponse===sT?($(n?.type===KE,e,`argument-error`),UE(e,await JE(e,t,n))):UE(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}else return(await uT(e,{phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`},`sendVerificationCode`,async(e,t)=>t.captchaResponse===sT?($(n?.type===KE,e,`argument-error`),OT(e,await JE(e,t,n))):OT(e,t),`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).sessionInfo}finally{n?._reset()}}async function JE(e,t,n){$(n.type===KE,e,`argument-error`);let r=await n.verify();$(typeof r==`string`,e,`argument-error`);let i={...t};if(`phoneEnrollmentInfo`in i){let e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,a=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:a}}),i}else if(`phoneSignInInfo`in i){let e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}else return Object.assign(i,{recaptchaToken:r}),i}var YE=class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=Xw(t)}verifyPhoneNumber(e,t){return qE(this.auth,e,jd(t))}static credential(e,t){return NT._fromVerification(e,t)}static credentialFromResult(t){let n=t;return e.credentialFromTaggedObject(n)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:n}=e;return t&&n?NT._fromTokenResponse(t,n):null}};YE.PROVIDER_ID=`phone`,YE.PHONE_SIGN_IN_METHOD=`phone`;function XE(e,t){return t?Dw(t):($(e._popupRedirectResolver,e,`argument-error`),e._popupRedirectResolver)}var ZE=class extends yT{constructor(e){super(`custom`,`custom`),this.params=e}_getIdTokenResponse(e){return TT(e,this._buildIdpRequest())}_linkToIdToken(e,t){return TT(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return TT(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function QE(e){return QT(e.auth,new ZE(e),e.bypassAuthState)}function $E(e){let{auth:t,user:n}=e;return $(n,t,`internal-error`),ZT(n,new ZE(e),e.bypassAuthState)}async function eD(e){let{auth:t,user:n}=e;return $(n,t,`internal-error`),XT(n,new ZE(e),e.bypassAuthState)}var tD=class{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}let s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(s))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case`signInViaPopup`:case`signInViaRedirect`:return QE;case`linkViaPopup`:case`linkViaRedirect`:return eD;case`reauthViaPopup`:case`reauthViaRedirect`:return $E;default:jC(this.auth,`internal-error`)}}resolve(e){LC(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){LC(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}},nD=new UC(2e3,1e4),rD=class e extends tD{constructor(t,n,r,i,a){super(t,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return $(e,this.auth,`internal-error`),e}async onExecution(){LC(this.filter.length===1,`Popup operations only handle one event`);let e=bE();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(MC(this.auth,`web-storage-unsupported`))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(MC(this.auth,`cancelled-popup-request`))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){let e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(MC(this.auth,`popup-closed-by-user`))},8e3);return}this.pollId=window.setTimeout(e,nD.get())};e()}};rD.currentPopupAction=null;var iD=`pendingRedirect`,aD=new Map,oD=class extends tD{constructor(e,t,n=!1){super(e,[`signInViaRedirect`,`linkViaRedirect`,`reauthViaRedirect`,`unknown`],t,void 0,n),this.eventId=null}async execute(){let e=aD.get(this.auth._key());if(!e){try{let t=await sD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}aD.set(this.auth._key(),e)}return this.bypassAuthState||aD.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type===`signInViaRedirect`)return super.onAuthEvent(e);if(e.type===`unknown`){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function sD(e,t){let n=uD(t),r=lD(e);if(!await r._isAvailable())return!1;let i=await r._get(n)===`true`;return await r._remove(n),i}function cD(e,t){aD.set(e._key(),t)}function lD(e){return Dw(e._redirectPersistence)}function uD(e){return Aw(iD,e.config.apiKey,e.name)}async function dD(e,t,n=!1){if(tp(e.app))return Promise.reject(PC(e));let r=Xw(e),i=await new oD(r,XE(r,t),n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,t)),i}var fD=600*1e3,pD=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gD(e)?t:(this.hasHandledPotentialRedirect=!0,t||=(this.queuedRedirectEvent=e,!0),t)}sendToConsumer(e,t){if(e.error&&!hD(e)){let n=e.error.code?.split(`auth/`)[1]||`internal-error`;t.onError(MC(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fD&&this.cachedEventUids.clear(),this.cachedEventUids.has(mD(e))}saveEventToCache(e){this.cachedEventUids.add(mD(e)),this.lastProcessedEventTime=Date.now()}};function mD(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join(`-`)}function hD({type:e,error:t}){return e===`unknown`&&t?.code===`auth/no-auth-event`}function gD(e){switch(e.type){case`signInViaRedirect`:case`linkViaRedirect`:case`reauthViaRedirect`:return!0;case`unknown`:return hD(e);default:return!1}}async function _D(e,t={}){return XC(e,`GET`,`/v1/projects`,t)}var vD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yD=/^https?/;async function bD(e){if(e.config.emulator)return;let{authorizedDomains:t}=await _D(e);for(let e of t)try{if(xD(e))return}catch{}jC(e,`unauthorized-domain`)}function xD(e){let t=RC(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith(`chrome-extension://`)){let i=new URL(e);return i.hostname===``&&r===``?n===`chrome-extension:`&&e.replace(`chrome-extension://`,``)===t.replace(`chrome-extension://`,``):n===`chrome-extension:`&&i.hostname===r}if(!yD.test(n))return!1;if(vD.test(e))return r===e;let i=e.replace(/\./g,`\\.`);return RegExp(`^(.+\\.`+i+`|`+i+`)$`,`i`).test(r)}var SD=new UC(3e4,6e4);function CD(){let e=SE().___jsl;if(e?.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}function wD(e){return new Promise((t,n)=>{function r(){CD(),gapi.load(`gapi.iframes`,{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{CD(),n(MC(e,`network-request-failed`))},timeout:SD.get()})}if(SE().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(SE().gapi?.load)r();else{let t=rT(`iframefcb`);return SE()[t]=()=>{gapi.load?r():n(MC(e,`network-request-failed`))},eT(`${nT()}?onload=${t}`).catch(e=>n(e))}}).catch(e=>{throw TD=null,e})}var TD=null;function ED(e){return TD||=wD(e),TD}var DD=new UC(5e3,15e3),OD=`__/auth/iframe`,kD=`emulator/auth/iframe`,AD={style:{position:`absolute`,top:`-100px`,width:`1px`,height:`1px`},"aria-hidden":`true`,tabindex:`-1`},jD=new Map([[`identitytoolkit.googleapis.com`,`p`],[`staging-identitytoolkit.sandbox.googleapis.com`,`s`],[`test-identitytoolkit.sandbox.googleapis.com`,`t`]]);function MD(e){let t=e.config;$(t.authDomain,e,`auth-domain-config-required`);let n=t.emulator?WC(t,kD):`https://${e.config.authDomain}/${OD}`,r={apiKey:t.apiKey,appName:e.name,v:ip},i=jD.get(e.config.apiHost);i&&(r.eid=i);let a=e._getFrameworks();return a.length&&(r.fw=a.join(`,`)),`${n}?${wd(r).slice(1)}`}async function ND(e){let t=await ED(e),n=SE().gapi;return $(n,e,`internal-error`),t.open({where:document.body,url:MD(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:AD,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});let i=MC(e,`network-request-failed`),a=SE().setTimeout(()=>{r(i)},DD.get());function o(){SE().clearTimeout(a),n(t)}t.ping(o).then(o,()=>{r(i)})}))}var PD={location:`yes`,resizable:`yes`,statusbar:`yes`,toolbar:`no`},FD=500,ID=600,LD=`_blank`,RD=`http://localhost`,zD=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function BD(e,t,n,r=FD,i=ID){let a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s=``,c={...PD,width:r.toString(),height:i.toString(),top:a,left:o},l=od().toLowerCase();n&&(s=Fw(l)?LD:n),Nw(l)&&(t||=RD,c.scrollbars=`yes`);let u=Object.entries(c).reduce((e,[t,n])=>`${e}${t}=${n},`,``);if(Vw(l)&&s!==`_self`)return VD(t||``,s),new zD(null);let d=window.open(t||``,s,u);$(d,e,`popup-blocked`);try{d.focus()}catch{}return new zD(d)}function VD(e,t){let n=document.createElement(`a`);n.href=e,n.target=t;let r=document.createEvent(`MouseEvent`);r.initMouseEvent(`click`,!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var HD=`__/auth/handler`,UD=`emulator/auth/handler`,WD=`fac`;async function GD(e,t,n,r,i,a){$(e.config.authDomain,e,`auth-domain-config-required`),$(e.config.apiKey,e,`invalid-api-key`);let o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:ip,eventId:i};if(t instanceof RT){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||``,xd(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(let[e,t]of Object.entries(a||{}))o[e]=t}if(t instanceof zT){let e=t.getScopes().filter(e=>e!==``);e.length>0&&(o.scopes=e.join(`,`))}e.tenantId&&(o.tid=e.tenantId);let s=o;for(let e of Object.keys(s))s[e]===void 0&&delete s[e];let c=await e._getAppCheckToken(),l=c?`#${WD}=${encodeURIComponent(c)}`:``;return`${KD(e)}?${wd(s).slice(1)}${l}`}function KD({config:e}){return e.emulator?WC(e,UD):`https://${e.authDomain}/${HD}`}var qD=`webStorageSupport`,JD=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_E,this._completeRedirectFn=dD,this._overrideRedirectResult=cD}async _openPopup(e,t,n,r){return LC(this.eventManagers[e._key()]?.manager,`_initialize() not called before _openPopup()`),BD(e,await GD(e,t,n,RC(),r),bE())}async _openRedirect(e,t,n,r){return await this._originValidation(e),CE(await GD(e,t,n,RC(),r)),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(LC(n,`If manager is not set, promise should be`),n)}let n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){let t=await ND(e),n=new pD(e);return t.register(`authEvent`,t=>($(t?.authEvent,e,`invalid-auth-event`),{status:n.onEvent(t.authEvent)?`ACK`:`ERROR`}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(qD,{type:qD},n=>{let r=n?.[0]?.[qD];r!==void 0&&t(!!r),jC(e,`internal-error`)},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=bD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Uw()||Pw()||Bw()}},YD=class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case`enroll`:return this._finalizeEnroll(e,t.credential,n);case`signin`:return this._finalizeSignIn(e,t.credential);default:return IC(`unexpected MultiFactorSessionType`)}}},XD=class e extends YD{constructor(e){super(`phone`),this.credential=e}static _fromCredential(t){return new e(t)}_finalizeEnroll(e,t,n){return rE(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return WE(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},ZD=class{constructor(){}static assertion(e){return XD._fromCredential(e)}};ZD.FACTOR_ID=`phone`;var QD=class{static assertionForEnrollment(e,t){return $D._fromSecret(e,t)}static assertionForSignIn(e,t){return $D._fromEnrollmentId(e,t)}static async generateSecret(e){let t=e;$(t.user?.auth!==void 0,`internal-error`);let n=await iE(t.user.auth,{idToken:t.credential,totpEnrollmentInfo:{}});return eO._fromStartTotpMfaEnrollmentResponse(n,t.user.auth)}};QD.FACTOR_ID=`totp`;var $D=class e extends YD{constructor(e,t,n){super(`totp`),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(t,n){return new e(n,void 0,t)}static _fromEnrollmentId(t,n){return new e(n,t)}async _finalizeEnroll(e,t,n){return $(this.secret!==void 0,e,`argument-error`),aE(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){$(this.enrollmentId!==void 0&&this.otp!==void 0,e,`argument-error`);let n={verificationCode:this.otp};return GE(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}},eO=class e{constructor(e,t,n,r,i,a,o){this.sessionInfo=a,this.auth=o,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=r,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){let n=!1;return(tO(e)||tO(t))&&(n=!0),n&&(tO(e)&&(e=this.auth.currentUser?.email||`unknownuser`),tO(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}};function tO(e){return e===void 0||e?.length===0}var nO=`@firebase/auth`,rO=`1.12.0`,iO=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,`dependent-sdk-initialized-before-auth`)}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function aO(e){switch(e){case`Node`:return`node`;case`ReactNative`:return`rn`;case`Worker`:return`webworker`;case`Cordova`:return`cordova`;case`WebExtension`:return`web-extension`;default:return}}function oO(e){$f(new Md(`auth`,(t,{options:n})=>{let r=t.getProvider(`app`).getImmediate(),i=t.getProvider(`heartbeat`),a=t.getProvider(`app-check-internal`),{apiKey:o,authDomain:s}=r.options;$(o&&!o.includes(`:`),`invalid-api-key`,{appName:r.name});let c=new Yw(r,i,a,{apiKey:o,authDomain:s,clientPlatform:e,apiHost:`identitytoolkit.googleapis.com`,tokenApiHost:`securetoken.googleapis.com`,apiScheme:`https`,sdkClientVersion:Ww(e)});return pT(c,n),c},`PUBLIC`).setInstantiationMode(`EXPLICIT`).setInstanceCreatedCallback((e,t,n)=>{e.getProvider(`auth-internal`).initialize()})),$f(new Md(`auth-internal`,e=>(e=>new iO(e))(Xw(e.getProvider(`auth`).getImmediate())),`PRIVATE`).setInstantiationMode(`EXPLICIT`)),sp(nO,rO,aO(e)),sp(nO,rO,`esm2020`)}var sO=Xu(`authIdTokenMaxAge`)||300,cO=null,lO=e=>async t=>{let n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>sO)return;let i=n?.token;cO!==i&&(cO=i,await fetch(e,{method:i?`POST`:`DELETE`,headers:i?{Authorization:`Bearer ${i}`}:{}}))};function uO(e=op()){let t=ep(e,`auth`);if(t.isInitialized())return t.getImmediate();let n=fT(e,{popupRedirectResolver:JD,persistence:[HE,dE,_E]}),r=Xu(`authTokenSyncURL`);if(r&&typeof isSecureContext==`boolean`&&isSecureContext){let e=new URL(r,location.origin);if(location.origin===e.origin){let t=lO(e.toString());eE(n,t,()=>t(n.currentUser)),$T(n,e=>t(e))}}let i=qu(`auth`);return i&&mT(n,`http://${i}`),n}function dO(){return document.getElementsByTagName(`head`)?.[0]??document}$w({loadJS(e){return new Promise((t,n)=>{let r=document.createElement(`script`);r.setAttribute(`src`,e),r.onload=t,r.onerror=e=>{let t=MC(`internal-error`);t.customData=e,n(t)},r.type=`text/javascript`,r.charset=`UTF-8`,dO().appendChild(r)})},gapiScript:`https://apis.google.com/js/api.js`,recaptchaV2Script:`https://www.google.com/recaptcha/api.js`,recaptchaEnterpriseScript:`https://www.google.com/recaptcha/enterprise.js?render=`}),oO(`Browser`);var fO=s({getAuth:()=>uO,signOut:()=>tE}),pO=`firebasestorage.googleapis.com`,mO=`storageBucket`,hO=120*1e3,gO=600*1e3,_O=class e extends _d{constructor(t,n,r=0){super(yO(t),`Firebase Storage: ${n} (${yO(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,e.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return yO(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}},vO;(function(e){e.UNKNOWN=`unknown`,e.OBJECT_NOT_FOUND=`object-not-found`,e.BUCKET_NOT_FOUND=`bucket-not-found`,e.PROJECT_NOT_FOUND=`project-not-found`,e.QUOTA_EXCEEDED=`quota-exceeded`,e.UNAUTHENTICATED=`unauthenticated`,e.UNAUTHORIZED=`unauthorized`,e.UNAUTHORIZED_APP=`unauthorized-app`,e.RETRY_LIMIT_EXCEEDED=`retry-limit-exceeded`,e.INVALID_CHECKSUM=`invalid-checksum`,e.CANCELED=`canceled`,e.INVALID_EVENT_NAME=`invalid-event-name`,e.INVALID_URL=`invalid-url`,e.INVALID_DEFAULT_BUCKET=`invalid-default-bucket`,e.NO_DEFAULT_BUCKET=`no-default-bucket`,e.CANNOT_SLICE_BLOB=`cannot-slice-blob`,e.SERVER_FILE_WRONG_SIZE=`server-file-wrong-size`,e.NO_DOWNLOAD_URL=`no-download-url`,e.INVALID_ARGUMENT=`invalid-argument`,e.INVALID_ARGUMENT_COUNT=`invalid-argument-count`,e.APP_DELETED=`app-deleted`,e.INVALID_ROOT_OPERATION=`invalid-root-operation`,e.INVALID_FORMAT=`invalid-format`,e.INTERNAL_ERROR=`internal-error`,e.UNSUPPORTED_ENVIRONMENT=`unsupported-environment`})(vO||={});function yO(e){return`storage/`+e}function bO(){return new _O(vO.UNKNOWN,`An unknown error occurred, please check the error payload for server response.`)}function xO(){return new _O(vO.RETRY_LIMIT_EXCEEDED,`Max retry time for operation exceeded, please try again.`)}function SO(){return new _O(vO.CANCELED,`User canceled the upload/download.`)}function CO(e){return new _O(vO.INVALID_URL,`Invalid URL '`+e+`'.`)}function wO(e){return new _O(vO.INVALID_DEFAULT_BUCKET,`Invalid default bucket '`+e+`'.`)}function TO(e){return new _O(vO.INVALID_ARGUMENT,e)}function EO(){return new _O(vO.APP_DELETED,`The Firebase app was deleted.`)}function DO(e){return new _O(vO.INVALID_ROOT_OPERATION,`The operation '`+e+`' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').`)}var OO=class e{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return`/b/`+e(this.bucket)+`/o/`+e(this.path)}bucketOnlyServerUrl(){return`/b/`+encodeURIComponent(this.bucket)+`/o`}static makeFromBucketSpec(t,n){let r;try{r=e.makeFromUrl(t,n)}catch{return new e(t,``)}if(r.path===``)return r;throw wO(t)}static makeFromUrl(t,n){let r=null,i=`([A-Za-z0-9.\\-_]+)`;function a(e){e.path.charAt(e.path.length-1)===`/`&&(e.path_=e.path_.slice(0,-1))}let o=RegExp(`^gs://`+i+`(/(.*))?$`,`i`),s={bucket:1,path:3};function c(e){e.path_=decodeURIComponent(e.path)}let l=n.replace(/[.]/g,`\\.`),u=RegExp(`^https?://${l}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?\$`,`i`),d={bucket:1,path:3},f=n===pO?`(?:storage.googleapis.com|storage.cloud.google.com)`:n,p=RegExp(`^https?://${f}/${i}/([^?#]*)`,`i`),m=[{regex:o,indices:s,postModify:a},{regex:u,indices:d,postModify:c},{regex:p,indices:{bucket:1,path:2},postModify:c}];for(let n=0;n<m.length;n++){let i=m[n],a=i.regex.exec(t);if(a){let t=a[i.indices.bucket],n=a[i.indices.path];n||=``,r=new e(t,n),i.postModify(r);break}}if(r==null)throw CO(t);return r}},kO=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function AO(e,t,n){let r=1,i=null,a=null,o=!1,s=0;function c(){return s===2}let l=!1;function u(...e){l||(l=!0,t.apply(null,e))}function d(t){i=setTimeout(()=>{i=null,e(p,c())},t)}function f(){a&&clearTimeout(a)}function p(e,...t){if(l){f();return}if(e){f(),u.call(null,e,...t);return}if(c()||o){f(),u.call(null,e,...t);return}r<64&&(r*=2);let n;s===1?(s=2,n=0):n=(r+Math.random())*1e3,d(n)}let m=!1;function h(e){m||(m=!0,f(),!l&&(i===null?e||(s=1):(e||(s=2),clearTimeout(i),d(0))))}return d(0),a=setTimeout(()=>{o=!0,h(!0)},n),h}function jO(e){e(!1)}function MO(e){return e!==void 0}function NO(e,t,n,r){if(r<t)throw TO(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw TO(`Invalid value for '${e}'. Expected ${n} or less.`)}function PO(e){let t=encodeURIComponent,n=`?`;for(let r in e)if(e.hasOwnProperty(r)){let i=t(r)+`=`+t(e[r]);n=n+i+`&`}return n=n.slice(0,-1),n}var FO;(function(e){e[e.NO_ERROR=0]=`NO_ERROR`,e[e.NETWORK_ERROR=1]=`NETWORK_ERROR`,e[e.ABORT=2]=`ABORT`})(FO||={});function IO(e,t){let n=e>=500&&e<600,r=[408,429].indexOf(e)!==-1,i=t.indexOf(e)!==-1;return n||r||i}var LO=class{constructor(e,t,n,r,i,a,o,s,c,l,u,d=!0,f=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=u,this.retry=d,this.isUsingEmulator=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){let e=(e,t)=>{if(t){e(!1,new RO(!1,null,!0));return}let n=this.connectionFactory_();this.pendingConnection_=n;let r=e=>{let t=e.loaded,n=e.lengthComputable?e.total:-1;this.progressCallback_!==null&&this.progressCallback_(t,n)};this.progressCallback_!==null&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&n.removeUploadProgressListener(r),this.pendingConnection_=null;let t=n.getErrorCode()===FO.NO_ERROR,i=n.getStatus();if(!t||IO(i,this.additionalRetryCodes_)&&this.retry){e(!1,new RO(!1,null,n.getErrorCode()===FO.ABORT));return}e(!0,new RO(this.successCodes_.indexOf(i)!==-1,n))})},t=(e,t)=>{let n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{let e=this.callback_(i,i.getResponse());MO(e)?n(e):n()}catch(e){r(e)}else if(i!==null){let e=bO();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else t.canceled?r(this.appDelete_?EO():SO()):r(xO())};this.canceled_?t(!1,new RO(!1,null,!0)):this.backoffId_=AO(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&jO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},RO=class{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}};function zO(e,t){t!==null&&t.length>0&&(e.Authorization=`Firebase `+t)}function BO(e,t){e[`X-Firebase-Storage-Version`]=`webjs/`+(t??`AppManager`)}function VO(e,t){t&&(e[`X-Firebase-GMPID`]=t)}function HO(e,t){t!==null&&(e[`X-Firebase-AppCheck`]=t)}function UO(e,t,n,r,i,a,o=!0,s=!1){let c=PO(e.urlParams),l=e.url+c,u=Object.assign({},e.headers);return VO(u,t),zO(u,n),BO(u,a),HO(u,r),new LO(l,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o,s)}function WO(e){if(e.length===0)return null;let t=e.lastIndexOf(`/`);return t===-1?``:e.slice(0,t)}function GO(e){let t=e.lastIndexOf(`/`,e.length-2);return t===-1?e:e.slice(t+1)}var KO=class e{constructor(e,t){this._service=e,t instanceof OO?this._location=t:this._location=OO.makeFromUrl(t,e.host)}toString(){return`gs://`+this._location.bucket+`/`+this._location.path}_newRef(t,n){return new e(t,n)}get root(){let e=new OO(this._location.bucket,``);return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return GO(this._location.path)}get storage(){return this._service}get parent(){let t=WO(this._location.path);if(t===null)return null;let n=new OO(this._location.bucket,t);return new e(this._service,n)}_throwIfRoot(e){if(this._location.path===``)throw DO(e)}};function qO(e,t){let n=t?.[mO];return n==null?null:OO.makeFromBucketSpec(n,e)}function JO(e,t,n,r={}){e.host=`${t}:${n}`;let i=Qu(t);i&&($u(`https://${e.host}/b`),ad(`Storage`,!0)),e._isUsingEmulator=!0,e._protocol=i?`https`:`http`;let{mockUserToken:a}=r;a&&(e._overrideAuthToken=typeof a==`string`?a:ed(a,e.app.options.projectId))}var YO=class{constructor(e,t,n,r,i,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=a,this._bucket=null,this._host=pO,this._protocol=`https`,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=hO,this._maxUploadRetryTime=gO,this._requests=new Set,r==null?this._bucket=qO(this._host,this.app.options):this._bucket=OO.makeFromBucketSpec(r,this._host)}get host(){return this._host}set host(e){this._host=e,this._url==null?this._bucket=qO(e,this.app.options):this._bucket=OO.makeFromBucketSpec(this._url,e)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){NO(`time`,0,1/0,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){NO(`time`,0,1/0,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(tp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new KO(this,e)}_makeRequest(e,t,n,r,i=!0){if(this._deleted)return new kO(EO());{let a=UO(e,this._appId,n,r,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){let[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}},XO=`@firebase/storage`,ZO=`0.14.0`,QO=`storage`;function $O(e=op(),t){e=jd(e);let n=ep(e,QO).getImmediate({identifier:t}),r=Ju(`storage`);return r&&ek(n,...r),n}function ek(e,t,n,r={}){JO(e,t,n,r)}function tk(e,{instanceIdentifier:t}){return new YO(e.getProvider(`app`).getImmediate(),e.getProvider(`auth-internal`),e.getProvider(`app-check-internal`),t,ip)}function nk(){$f(new Md(QO,tk,`PUBLIC`).setMultipleInstances(!0)),sp(XO,ZO,``),sp(XO,ZO,`esm2020`)}nk();var rk=ap({apiKey:`AIzaSyCuCrZa3qDjcjr1lG4Gl_X-C-3BrpGA1T8`,authDomain:`prc-chat-system.firebaseapp.com`,projectId:`prc-chat-system`,storageBucket:`prc-chat-system.firebasestorage.app`,messagingSenderId:`641761375067`,appId:`1:641761375067:web:ed822c08fe21f5c2fae07e`,measurementId:`G-5JL7JLQC90`});const ik=fS(rk),ak=uO(rk);$O(rk);const ok=async(e,t)=>{try{console.log(`Getting/creating conversation between`,e,`and`,t);let n=await _C($S(oS(ik,`conversations`),tC(`participants`,`array-contains`,e))),r=null;if(n.forEach(e=>{let n=e.data();n.participants.includes(t)&&(r={id:e.id,...n})}),r)return console.log(`Found existing conversation:`,r),r;console.log(`Creating new conversation`);let i={participants:[e,t],createdAt:WS(),updatedAt:WS(),lastMessage:null,lastMessageTime:null,unreadCount:{[e]:0,[t]:0}},a=await bC(oS(ik,`conversations`),i);return console.log(`New conversation created with ID:`,a.id),{id:a.id,...i}}catch(e){throw console.error(`Error getting/creating conversation:`,e),e}},sk=(e,t)=>(console.log(`Setting up conversation listener for:`,e),xC($S(oS(ik,`conversations`),tC(`participants`,`array-contains`,e),iC(`updatedAt`,`desc`)),async n=>{console.log(`Conversation snapshot received, size:`,n.size);let r=[];for(let t of n.docs){let n=t.data(),i=n.participants.find(t=>t!==e);try{let a=await gC(sS(ik,`users`,i));if(a.exists()){r.push({id:t.id,...n,otherUser:{user_id:a.data().userId,full_name:a.data().name,role:a.data().role},unread:n.unreadCount?.[e]||0});continue}}catch(e){console.log(`User not found in Firestore, trying PHP...`,e)}try{let a=await K.get(`/api/users.php`,{params:{id:i}});r.push({id:t.id,...n,otherUser:a.data?.data||{full_name:`Unknown User`,user_id:i},unread:n.unreadCount?.[e]||0})}catch(a){console.error(`Error fetching user from PHP:`,a),r.push({id:t.id,...n,otherUser:{full_name:`Unknown User`,user_id:i},unread:n.unreadCount?.[e]||0})}}t(r)},e=>{console.error(`Conversation listener error:`,e),t([])})),ck=async(e,t,n,r,i=`text`,a=null)=>{try{console.log(`Sending message:`,{conversationId:e,senderId:t,recipientId:n,content:r});let o=oS(ik,`conversations`,e,`messages`),s={senderId:t,recipientId:n,content:r,messageType:i,fileUrl:a,createdAt:WS(),read:!1};return await bC(o,s),await yC(sS(ik,`conversations`,e),{lastMessage:r,lastMessageTime:WS(),updatedAt:WS(),[`unreadCount.${n}`]:e=>(e||0)+1}),s}catch(e){throw console.error(`Error sending message:`,e),e}},lk=(e,t)=>(console.log(`Setting up message listener for conversation:`,e),xC($S(oS(ik,`conversations`,e,`messages`),iC(`createdAt`,`asc`)),e=>{t(e.docs.map(e=>({id:e.id,...e.data(),createdAt:e.data().createdAt?.toDate()})))},e=>{console.error(`Message listener error:`,e),t([])})),uk=async(e,t)=>{try{let n=await _C($S(oS(ik,`conversations`,e,`messages`),tC(`recipientId`,`==`,t),tC(`read`,`==`,!1)));if(n.empty)return;let r=wC(ik);n.forEach(e=>{r.update(e.ref,{read:!0})});let i=sS(ik,`conversations`,e);r.update(i,{[`unreadCount.${t}`]:0}),await r.commit()}catch(e){console.error(`Error marking messages as read:`,e)}};var dk=`/api/chat_uploads.php`;const fk=async e=>{let t=new FormData;t.append(`file`,e);try{let{data:e}=await K.post(`${dk}?action=upload`,t,{headers:{"Content-Type":`multipart/form-data`}});if(!e.success)throw Error(e.message||`Upload failed`);return{success:!0,fileUrl:e.fileUrl,fileName:e.fileName,fileSize:e.fileSize,fileType:e.fileType}}catch(e){return console.error(`Error uploading file:`,e),{success:!1,error:e.message}}},pk=e=>`http://localhost/prc-management-system/backend/api/chat_uploads.php?action=download&file=${encodeURIComponent(e)}`;function mk({userRole:e=`user`,currentUserId:t,currentUserName:n}){let[r,i]=(0,v.useState)(!1),[a,o]=(0,v.useState)(!0),[s,c]=(0,v.useState)([]),[l,u]=(0,v.useState)(null),[d,f]=(0,v.useState)(0),[p,m]=(0,v.useState)(!0),[h,g]=(0,v.useState)(!1),[_,y]=(0,v.useState)([]),[b,x]=(0,v.useState)(!1),[S,C]=(0,v.useState)(null),[w,T]=(0,v.useState)(null),[E,D]=(0,v.useState)([]),[O,ee]=(0,v.useState)(``),[k,te]=(0,v.useState)(!1),[A,ne]=(0,v.useState)(!1),j=(0,v.useRef)(null),M=(0,v.useRef)(null),N=(0,v.useRef)(null);(0,v.useEffect)(()=>{(async()=>{try{console.log(`Signing in to Firebase...`);let e=await qT(ak);C(e.user),console.log(`Firebase user:`,e.user.uid),m(!1)}catch(e){console.error(`Firebase auth error:`,e),T(e.message),m(!1)}})()},[]),(0,v.useEffect)(()=>{(async()=>{if(!(!S||!t))try{console.log(`Initializing user in Firestore...`);let r=sS(ik,`users`,S.uid);(await gC(r)).exists()||(await vC(r,{userId:t,firebaseUid:S.uid,name:n||`User`,role:e,createdAt:new Date,lastActive:new Date}),console.log(`User created in Firestore`))}catch(e){console.error(`Error initializing user:`,e)}})()},[S,t,n,e]),(0,v.useEffect)(()=>{if(!S)return;console.log(`Subscribing to conversations for Firebase user:`,S.uid);let e=sk(S.uid,e=>{console.log(`Received conversations:`,e),c(e),f(e.reduce((e,t)=>e+(t.unread||0),0))});return()=>e()},[S]),(0,v.useEffect)(()=>{if(!l?.conversationId||!S)return;console.log(`Subscribing to messages for conversation:`,l.conversationId);let e=lk(l.conversationId,e=>{console.log(`Received messages:`,e),D(e),e.length>0&&uk(l.conversationId,S.uid).catch(e=>console.error(`Error marking messages as read:`,e))});return N.current?.focus(),()=>e()},[l?.conversationId,S]),(0,v.useEffect)(()=>{P()},[E]);let P=()=>{setTimeout(()=>{j.current?.scrollIntoView({behavior:`smooth`})},100)},re=async()=>{x(!0);try{let e=await K.get(`/api/users.php`);e.data?.success?y((e.data.users||[]).filter(e=>e.user_id.toString()!==t?.toString()).map(e=>({user_id:e.user_id,full_name:e.full_name,role:e.role}))):y([{user_id:2,full_name:`Admin User`,role:`admin`},{user_id:3,full_name:`Safety Admin`,role:`safety_admin`},{user_id:4,full_name:`Health Admin`,role:`health_admin`},{user_id:5,full_name:`Welfare Admin`,role:`welfare_admin`},{user_id:6,full_name:`Disaster Admin`,role:`disaster_admin`},{user_id:7,full_name:`Youth Admin`,role:`youth_admin`}].filter(e=>e.user_id.toString()!==t?.toString()))}catch(e){console.error(`Error fetching users:`,e),y([{user_id:2,full_name:`Admin User`,role:`admin`},{user_id:3,full_name:`Safety Admin`,role:`safety_admin`},{user_id:4,full_name:`Health Admin`,role:`health_admin`}].filter(e=>e.user_id.toString()!==t?.toString()))}finally{x(!1)}},F=()=>{i(!r),r||(o(!1),g(!1),u(null),D([]))},I=()=>{re(),g(!0),u(null),D([])},ie=async e=>{try{if(!S){console.error(`No Firebase user`);return}console.log(`Selecting user:`,e),g(!1),x(!0);let t=await ok(S.uid,e.user_id.toString());console.log(`Conversation created/retrieved:`,t),u({conversationId:t.id,recipientId:e.user_id,recipientName:e.full_name}),o(!1),x(!1)}catch(e){console.error(`Error creating conversation:`,e),x(!1)}},ae=async e=>{console.log(`Selecting existing chat:`,e),u({conversationId:e.id,recipientId:e.otherUser.user_id,recipientName:e.otherUser.full_name}),o(!1),g(!1)},oe=()=>{u(null),o(!0),D([])},se=()=>{u(null),g(!1),D([])},ce=async e=>{if(e.preventDefault(),!(!O.trim()||A||!l)){ne(!0);try{await ck(l.conversationId,S.uid,l.recipientId.toString(),O.trim(),`text`,null),ee(``),N.current?.focus()}catch(e){console.error(`Error sending message:`,e)}finally{ne(!1)}}},le=async e=>{let t=e.target.files[0];if(!(!t||!l)){if(t.size>10*1024*1024){alert(`File too large. Max size is 10MB.`);return}te(!0);try{let e=await fk(t);e.success&&await ck(l.conversationId,S.uid,l.recipientId.toString(),`Sent a file: ${e.fileName}`,`file`,e.fileUrl)}catch(e){console.error(`Error uploading file:`,e)}finally{te(!1),M.current.value=``}}},ue=e=>{e.key===`Enter`&&!e.shiftKey&&(e.preventDefault(),ce(e))},de=e=>e?new Date(e).toLocaleTimeString(`en-US`,{hour:`2-digit`,minute:`2-digit`}):``,fe=e=>{let t=new Date,n=new Date(t);n.setDate(n.getDate()-1);let r=new Date(e);return r.toDateString()===t.toDateString()?`Today`:r.toDateString()===n.toDateString()?`Yesterday`:r.toLocaleDateString(`en-US`,{month:`short`,day:`numeric`})},pe=(e,t)=>{let n=e.senderId===S?.uid;return(0,H.jsxs)(`div`,{children:[(t===0||!E[t-1]?.createdAt||fe(new Date(e.createdAt))!==fe(new Date(E[t-1].createdAt)))&&(0,H.jsx)(`div`,{className:`chat-date-divider`,children:(0,H.jsx)(`span`,{children:fe(new Date(e.createdAt))})}),(0,H.jsx)(`div`,{className:`message-wrapper ${n?`own`:`other`}`,children:(0,H.jsxs)(`div`,{className:`message-bubble ${e.messageType===`file`?`file-message`:``}`,children:[e.messageType===`file`?(0,H.jsxs)(`div`,{className:`file-attachment`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-paperclip`}),(0,H.jsx)(`a`,{href:pk(e.fileUrl),target:`_blank`,rel:`noopener noreferrer`,download:!0,children:e.content.replace(`Sent a file: `,``)})]}):(0,H.jsx)(`p`,{children:e.content}),(0,H.jsxs)(`span`,{className:`message-time`,children:[de(e.createdAt),n&&(0,H.jsx)(`i`,{className:`fa-solid ${e.read?`fa-check-double`:`fa-check`}`})]})]})})]},e.id)};return p?(0,H.jsx)(`div`,{className:`floating-chat-button`,onClick:F,children:(0,H.jsx)(`div`,{className:`chat-icon`,children:``})}):w?(0,H.jsx)(`div`,{className:`floating-chat-button`,onClick:F,children:(0,H.jsx)(`div`,{className:`chat-icon`,children:``})}):!S||!t?null:(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(`div`,{className:`floating-chat-button`,onClick:F,children:[(0,H.jsx)(`div`,{className:`chat-icon`,children:``}),d>0&&(0,H.jsx)(`div`,{className:`notification-badge`,children:d})]}),r&&(0,H.jsx)(`div`,{className:`floating-chat-window ${a?`minimized`:`expanded`}`,children:l?(0,H.jsxs)(`div`,{className:`chat-view`,children:[(0,H.jsxs)(`div`,{className:`chat-header`,children:[(0,H.jsxs)(`div`,{className:`chat-header-info`,children:[(0,H.jsx)(`button`,{className:`back-btn`,onClick:se,children:(0,H.jsx)(`i`,{className:`fa-solid fa-arrow-left`})}),(0,H.jsx)(`div`,{className:`chat-avatar`,children:l.recipientName?.charAt(0).toUpperCase()}),(0,H.jsx)(`h3`,{children:l.recipientName})]}),(0,H.jsx)(`button`,{className:`chat-close-btn`,onClick:oe,children:(0,H.jsx)(`i`,{className:`fa-solid fa-times`})})]}),(0,H.jsxs)(`div`,{className:`chat-messages`,children:[E.length===0?(0,H.jsxs)(`div`,{className:`chat-empty`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-message`}),(0,H.jsx)(`p`,{children:`No messages yet. Say hello!`})]}):E.map((e,t)=>pe(e,t)),(0,H.jsx)(`div`,{ref:j})]}),(0,H.jsxs)(`form`,{className:`chat-input`,onSubmit:ce,children:[(0,H.jsx)(`input`,{ref:N,type:`text`,placeholder:`Type a message...`,value:O,onChange:e=>ee(e.target.value),onKeyPress:ue,disabled:A||k}),(0,H.jsx)(`input`,{type:`file`,ref:M,onChange:le,style:{display:`none`},accept:`.jpg,.jpeg,.png,.gif,.pdf,.doc,.docx`}),(0,H.jsx)(`button`,{type:`button`,className:`file-btn`,onClick:()=>M.current?.click(),disabled:k||A,children:(0,H.jsx)(`i`,{className:`fa-solid ${k?`fa-spinner fa-spin`:`fa-paperclip`}`})}),(0,H.jsx)(`button`,{type:`submit`,disabled:!O.trim()||A||k,children:(0,H.jsx)(`i`,{className:`fa-solid fa-paper-plane`})})]})]}):h?(0,H.jsxs)(`div`,{className:`conversations-view`,children:[(0,H.jsxs)(`div`,{className:`chat-header`,children:[(0,H.jsx)(`button`,{className:`back-btn`,onClick:()=>g(!1),children:(0,H.jsx)(`i`,{className:`fa-solid fa-arrow-left`})}),(0,H.jsx)(`h3`,{children:`Select User`}),(0,H.jsx)(`button`,{className:`minimize-btn`,onClick:()=>i(!1),children:``})]}),(0,H.jsx)(`div`,{className:`conversations-list`,children:b?(0,H.jsxs)(`div`,{className:`empty-state`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-spinner fa-spin`}),(0,H.jsx)(`p`,{children:`Loading users...`})]}):_.length===0?(0,H.jsx)(`div`,{className:`empty-state`,children:(0,H.jsx)(`p`,{children:`No other users available`})}):_.map(e=>(0,H.jsxs)(`div`,{className:`conversation-item`,onClick:()=>ie(e),children:[(0,H.jsx)(`div`,{className:`avatar`,children:e.full_name?.charAt(0).toUpperCase()}),(0,H.jsxs)(`div`,{className:`conversation-info`,children:[(0,H.jsx)(`h4`,{children:e.full_name}),(0,H.jsx)(`p`,{children:e.role})]})]},e.user_id))})]}):(0,H.jsxs)(`div`,{className:`conversations-view`,children:[(0,H.jsxs)(`div`,{className:`chat-header`,children:[(0,H.jsx)(`h3`,{children:`Messages`}),(0,H.jsx)(`button`,{className:`minimize-btn`,onClick:()=>i(!1),children:``})]}),(0,H.jsxs)(`button`,{className:`new-chat-btn`,onClick:I,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-plus`}),` New Chat`]}),(0,H.jsx)(`div`,{className:`conversations-list`,children:s.length===0?(0,H.jsxs)(`div`,{className:`empty-state`,children:[(0,H.jsx)(`p`,{children:`No conversations yet`}),(0,H.jsx)(`button`,{className:`start-chat-btn`,onClick:I,children:`Start a new chat`})]}):s.map(e=>(0,H.jsxs)(`div`,{className:`conversation-item`,onClick:()=>ae(e),children:[(0,H.jsx)(`div`,{className:`avatar`,children:e.otherUser?.full_name?.charAt(0).toUpperCase()||`?`}),(0,H.jsxs)(`div`,{className:`conversation-info`,children:[(0,H.jsx)(`h4`,{children:e.otherUser?.full_name||`Unknown User`}),(0,H.jsx)(`p`,{className:`last-message`,children:e.lastMessage||`No messages yet`})]}),e.unread>0&&(0,H.jsx)(`span`,{className:`unread-badge`,children:e.unread})]},e.id))})]})})]})}var hk=Oa.create({baseURL:`http://localhost/prc-management-system/backend/api/notifications.php`,withCredentials:!0,headers:{"Content-Type":`application/json`,Accept:`application/json`}});async function gk(e){try{let{data:t}=await hk(e);return t.unread_count!==void 0&&(t.unreadCount=t.unread_count),t}catch(e){let t=e?.response?.data?.message??e.message??`Request failed`;return console.error(`[notificationsApi]`,t,e?.response?.data),{success:!1,message:t}}}function _k(e=20,t=0){return gk({method:`GET`,params:{limit:e,offset:t}})}function vk(){return gk({method:`GET`,params:{action:`unread-count`}})}function yk(e){return gk({method:`PUT`,params:{action:`mark-read`,id:e}})}function bk(){return gk({method:`PUT`,params:{action:`mark-all-read`}})}function xk(e){return gk({method:`DELETE`,params:{action:`delete`,id:e}})}var Sk=3e4,Ck={event:{icon:`fa-solid fa-calendar-days`,color:`#3b82f6`},training:{icon:`fa-solid fa-graduation-cap`,color:`#8b5cf6`},announcement:{icon:`fa-solid fa-bullhorn`,color:`#f59e0b`},message:{icon:`fa-solid fa-envelope`,color:`#10b981`},donation:{icon:`fa-solid fa-hand-holding-heart`,color:`#ef4444`},system:{icon:`fa-solid fa-bell`,color:`#6b7280`}},wk={event:`Event`,training:`Training`,announcement:`Announcement`,message:`Message`,donation:`Donation`,system:`System`};function Tk(e){let t=Date.now()-new Date(e),n=Math.floor(t/6e4),r=Math.floor(t/36e5),i=Math.floor(t/864e5);return n<1?`Just now`:n<60?`${n}m ago`:r<24?`${r}h ago`:i<7?`${i}d ago`:new Date(e).toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,year:`numeric`})}function Ek({type:e,size:t=`sm`}){let n=Ck[e]??Ck.system;return(0,H.jsx)(`span`,{className:`notif-icon-wrap notif-icon-wrap--${t}`,style:{"--icon-color":n.color},children:(0,H.jsx)(`i`,{className:n.icon})})}function Dk({n:e,onRead:t,onDelete:n,onClick:r,showFull:i=!1}){return(0,H.jsxs)(`div`,{className:`notif-item${e.is_read?``:` unread`}${i?` notif-item--full`:``}`,children:[!e.is_read&&(0,H.jsx)(`span`,{className:`notif-dot`}),(0,H.jsxs)(V,{to:e.link||`#`,className:`notif-content`,onClick:()=>{e.is_read||t(e.notification_id),r&&r()},children:[(0,H.jsx)(Ek,{type:e.type,size:i?`md`:`sm`}),(0,H.jsxs)(`div`,{className:`notif-text`,children:[i&&(0,H.jsx)(`span`,{className:`notif-type-tag`,style:{"--icon-color":(Ck[e.type]??Ck.system).color},children:wk[e.type]??`System`}),(0,H.jsx)(`strong`,{children:e.title}),(0,H.jsx)(`p`,{children:e.message}),(0,H.jsxs)(`time`,{children:[(0,H.jsx)(`i`,{className:`fa-regular fa-clock`}),Tk(e.created_at)]})]})]}),(0,H.jsx)(`button`,{className:`notif-del`,onClick:t=>n(e.notification_id,t),title:`Dismiss`,"aria-label":`Delete notification`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]})}function Ok({onClose:e,onRead:t,onDelete:n,onMarkAll:r}){let[i,a]=(0,v.useState)([]),[o,s]=(0,v.useState)(!0),[c,l]=(0,v.useState)(`all`),[u,d]=(0,v.useState)(0),[f,p]=(0,v.useState)(0),[m,h]=(0,v.useState)(!0),g=(0,v.useCallback)(async(e=!1)=>{s(!0);let t=await _k(20,e?0:f*20);if(t.success){let n=t.notifications??[];a(t=>e?n:[...t,...n]),d(t.unread_count??0),h(n.length===20),e||p(e=>e+1)}s(!1)},[f]);(0,v.useEffect)(()=>{g(!0)},[]),(0,v.useEffect)(()=>(document.body.style.overflow=`hidden`,()=>{document.body.style.overflow=``}),[]),(0,v.useEffect)(()=>{let t=t=>{t.key===`Escape`&&e()};return window.addEventListener(`keydown`,t),()=>window.removeEventListener(`keydown`,t)},[e]);let _=e=>{t(e),a(t=>t.map(t=>t.notification_id===e?{...t,is_read:1}:t)),d(e=>Math.max(0,e-1))},y=(e,t)=>{t.stopPropagation();let r=i.find(t=>t.notification_id===e&&!t.is_read);n(e,t),a(t=>t.filter(t=>t.notification_id!==e)),r&&d(e=>Math.max(0,e-1))},b=async()=>{await r(),a(e=>e.map(e=>({...e,is_read:1}))),d(0)},x=[`all`,`unread`,`event`,`training`,`announcement`,`donation`,`system`],S=c===`all`?i:c===`unread`?i.filter(e=>!e.is_read):i.filter(e=>e.type===c);return(0,H.jsx)(`div`,{className:`notif-modal-overlay`,onClick:t=>{t.target===t.currentTarget&&e()},children:(0,H.jsxs)(`div`,{className:`notif-modal`,role:`dialog`,"aria-modal":`true`,"aria-label":`All Notifications`,children:[(0,H.jsxs)(`div`,{className:`notif-modal-head`,children:[(0,H.jsxs)(`div`,{className:`notif-modal-head-left`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-bell`}),(0,H.jsx)(`h2`,{children:`Notifications`}),u>0&&(0,H.jsxs)(`span`,{className:`notif-modal-badge`,children:[u,` unread`]})]}),(0,H.jsxs)(`div`,{className:`notif-modal-head-right`,children:[u>0&&(0,H.jsxs)(`button`,{className:`notif-modal-markall`,onClick:b,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-check-double`}),`Mark all read`]}),(0,H.jsx)(`button`,{className:`notif-modal-close`,onClick:e,"aria-label":`Close`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-xmark`})})]})]}),(0,H.jsx)(`div`,{className:`notif-modal-filters`,children:x.map(e=>(0,H.jsxs)(`button`,{className:`notif-filter-tab${c===e?` active`:``}`,onClick:()=>l(e),style:e!==`all`&&e!==`unread`?{"--icon-color":(Ck[e]??Ck.system).color}:{},children:[e!==`all`&&e!==`unread`&&(0,H.jsx)(`i`,{className:Ck[e]?.icon??`fa-solid fa-bell`}),e===`unread`&&(0,H.jsx)(`i`,{className:`fa-solid fa-circle`}),e.charAt(0).toUpperCase()+e.slice(1)]},e))}),(0,H.jsx)(`div`,{className:`notif-modal-body`,children:o&&S.length===0?(0,H.jsxs)(`div`,{className:`notif-modal-empty`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-notch fa-spin`}),(0,H.jsx)(`p`,{children:`Loading notifications`})]}):S.length===0?(0,H.jsxs)(`div`,{className:`notif-modal-empty`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-bell-slash`}),(0,H.jsxs)(`p`,{children:[`No `,c===`all`?``:c,` notifications`]})]}):(0,H.jsxs)(H.Fragment,{children:[S.map(e=>(0,H.jsx)(Dk,{n:e,onRead:_,onDelete:y,showFull:!0},e.notification_id)),m&&(0,H.jsx)(`div`,{className:`notif-modal-loadmore`,children:(0,H.jsx)(`button`,{onClick:()=>g(!1),disabled:o,children:o?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-notch fa-spin`}),` `,`Loading`]}):(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-down`}),` Load more`]})})})]})})]})})}function kk(){let[e,t]=(0,v.useState)(!1),[n,r]=(0,v.useState)(!1),[i,a]=(0,v.useState)([]),[o,s]=(0,v.useState)(0),[c,l]=(0,v.useState)(!1),u=(0,v.useRef)(null),d=(0,v.useCallback)(async()=>{let e=await vk();e.success&&s(e.unreadCount??e.unread_count??0)},[]),f=(0,v.useCallback)(async()=>{l(!0);let e=await _k(15);e.success&&a(e.notifications??[]),l(!1)},[]);(0,v.useEffect)(()=>{d(),f()},[d,f]),(0,v.useEffect)(()=>{e&&f()},[e,f]),(0,v.useEffect)(()=>{let t=setInterval(()=>{d(),e&&f()},Sk);return()=>clearInterval(t)},[e,d,f]),(0,v.useEffect)(()=>{let e=e=>{u.current&&!u.current.contains(e.target)&&t(!1)};return document.addEventListener(`mousedown`,e),()=>document.removeEventListener(`mousedown`,e)},[]);let p=async e=>{await yk(e),a(t=>t.map(t=>t.notification_id===e?{...t,is_read:1}:t)),s(e=>Math.max(0,e-1))},m=async()=>{await bk(),a(e=>e.map(e=>({...e,is_read:1}))),s(0)},h=async(e,t)=>{t.stopPropagation();let n=i.find(t=>t.notification_id===e&&!t.is_read);await xk(e),a(t=>t.filter(t=>t.notification_id!==e)),n&&s(e=>Math.max(0,e-1))},g=()=>{t(!1),r(!0)};return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(`div`,{className:`notif-wrap`,ref:u,children:[(0,H.jsxs)(`button`,{className:`notif-bell${e?` active`:``}`,onClick:()=>t(e=>!e),"aria-label":`Notifications`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-bell`}),o>0&&(0,H.jsx)(`span`,{className:`notif-badge`,children:o>99?`99+`:o})]}),e&&(0,H.jsxs)(`div`,{className:`notif-dropdown`,children:[(0,H.jsxs)(`div`,{className:`notif-head`,children:[(0,H.jsxs)(`div`,{className:`notif-head-left`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-bell`}),(0,H.jsx)(`span`,{children:`Notifications`}),o>0&&(0,H.jsx)(`span`,{className:`notif-head-count`,children:o})]}),o>0&&(0,H.jsxs)(`button`,{className:`notif-mark-all`,onClick:m,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-check-double`}),`Mark all read`]})]}),(0,H.jsx)(`div`,{className:`notif-body`,children:c&&i.length===0?(0,H.jsxs)(`div`,{className:`notif-empty`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle-notch fa-spin`}),(0,H.jsx)(`p`,{children:`Loading`})]}):i.length===0?(0,H.jsxs)(`div`,{className:`notif-empty`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-bell-slash`}),(0,H.jsx)(`p`,{children:`You're all caught up!`})]}):i.map(e=>(0,H.jsx)(Dk,{n:e,onRead:p,onDelete:h,onClick:()=>t(!1)},e.notification_id))}),(0,H.jsx)(`div`,{className:`notif-foot`,children:(0,H.jsxs)(`button`,{className:`notif-view-all`,onClick:g,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-list`}),`View all notifications`,o>0&&(0,H.jsx)(`span`,{className:`notif-foot-badge`,children:o})]})})]})]}),n&&(0,H.jsx)(Ok,{onClose:()=>{r(!1),d(),f()},onRead:p,onDelete:h,onMarkAll:m})]})}function Ak(){let e=Xe(),t=Qe(),n=ja.getCurrentUser(),[r,i]=(0,v.useState)(!1),[a,o]=(0,v.useState)(window.innerWidth),[s,c]=(0,v.useState)(!1),[l,u]=(0,v.useState)(null);(0,v.useEffect)(()=>{let e=()=>{o(window.innerWidth),window.innerWidth>992&&i(!1)},t=()=>{c(window.scrollY>50)};return window.addEventListener(`resize`,e),window.addEventListener(`scroll`,t),()=>{window.removeEventListener(`resize`,e),window.removeEventListener(`scroll`,t)}},[]);let d=()=>{window.confirm(`Are you sure you want to logout?`)&&(ja.logout(),t(`/login`))},f=t=>e.pathname.startsWith(t),p=[{path:`/user/dashboard`,icon:`fa-solid fa-chart-pie`,label:`Dashboard`,color:`#c41e3a`},{path:`/user/events`,icon:`fa-solid fa-calendar-days`,label:`Events`,color:`#f59e0b`},{path:`/user/training`,icon:`fa-solid fa-graduation-cap`,label:`Training`,color:`#7c3aed`},{path:`/user/donations`,icon:`fa-solid fa-hand-holding-heart`,label:`Donations`,color:`#10b981`},{path:`/user/merchandise`,icon:`fa-solid fa-shirt`,label:`Merchandise`,color:`#0891b2`},{path:`/user/blood-map`,icon:`fa-solid fa-map-location-dot`,label:`Blood Map`,color:`#c2410c`},{path:`/user/announcements`,icon:`fa-solid fa-bullhorn`,label:`Announcements`,color:`#f97316`},{path:`/user/profile`,icon:`fa-regular fa-user`,label:`Profile`,color:`#6b7280`}],m=()=>n?.full_name?n.full_name.split(` `).map(e=>e[0]).join(``).toUpperCase().slice(0,2):`U`,h=n?.full_name?.split(` `)[0]||`User`;return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(`div`,{className:`user-layout`,children:[(0,H.jsx)(`header`,{className:`user-header ${s?`user-header--scrolled`:``}`,children:(0,H.jsx)(`div`,{className:`user-header__container`,children:(0,H.jsxs)(`div`,{className:`user-header__content`,children:[(0,H.jsxs)(V,{to:`/`,className:`user-header__logo`,onClick:()=>i(!1),children:[(0,H.jsx)(`img`,{src:Rn,alt:`PRC Logo`,className:`user-header__logo-img`}),(0,H.jsxs)(`div`,{className:`user-header__logo-text`,children:[(0,H.jsx)(`h1`,{children:`Philippine Red Cross`}),(0,H.jsx)(`span`,{children:`Iloilo Chapter`})]})]}),a>992&&(0,H.jsx)(`nav`,{className:`user-header__nav`,children:(0,H.jsx)(`ul`,{className:`user-header__nav-list`,children:p.map(e=>(0,H.jsx)(`li`,{className:`user-header__nav-item`,children:(0,H.jsxs)(V,{to:e.path,className:`user-header__nav-link ${f(e.path)?`user-header__nav-link--active`:``}`,onMouseEnter:()=>u(e.path),onMouseLeave:()=>u(null),style:l===e.path&&!f(e.path)?{color:e.color}:{},children:[(0,H.jsx)(`i`,{className:e.icon,style:l===e.path&&!f(e.path)?{color:e.color}:{}}),(0,H.jsx)(`span`,{children:e.label})]})},e.path))})}),a<=992&&(0,H.jsx)(`button`,{className:`user-header__mobile-btn`,onClick:()=>i(!r),"aria-label":`Toggle menu`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-${r?`xmark`:`bars`}`})}),(0,H.jsxs)(`div`,{className:`user-header__actions`,children:[(0,H.jsx)(kk,{}),a>768&&(0,H.jsx)(`div`,{className:`user-header__actions-divider`}),a>992&&(0,H.jsxs)(`div`,{className:`user-header__actions-user`,children:[(0,H.jsx)(`div`,{className:`user-avatar`,children:m()}),(0,H.jsxs)(`div`,{className:`user-info`,children:[(0,H.jsx)(`span`,{className:`user-name`,children:h}),(0,H.jsx)(`span`,{className:`user-role`,children:`Member`})]}),(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-down`})]}),(0,H.jsxs)(`button`,{onClick:d,className:`user-header__actions-logout`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-right-from-bracket`}),(0,H.jsx)(`span`,{children:`Logout`})]})]})]})})}),r&&a<=992&&(0,H.jsxs)(`div`,{className:`user-mobile-menu`,children:[(0,H.jsx)(`div`,{className:`user-mobile-menu__header`,children:(0,H.jsxs)(`div`,{className:`user-mobile-menu__user`,children:[(0,H.jsx)(`div`,{className:`user-mobile-menu__avatar`,children:m()}),(0,H.jsxs)(`div`,{className:`user-mobile-menu__info`,children:[(0,H.jsx)(`span`,{className:`user-mobile-menu__name`,children:n?.full_name||`User`}),(0,H.jsx)(`span`,{className:`user-mobile-menu__role`,children:`Member`})]})]})}),(0,H.jsx)(`nav`,{className:`user-mobile-menu__nav`,children:(0,H.jsx)(`ul`,{className:`user-mobile-menu__nav-list`,children:p.map(e=>(0,H.jsx)(`li`,{className:`user-mobile-menu__nav-item`,children:(0,H.jsxs)(V,{to:e.path,className:`user-mobile-menu__nav-link ${f(e.path)?`user-mobile-menu__nav-link--active`:``}`,onClick:()=>i(!1),children:[(0,H.jsx)(`i`,{className:e.icon}),(0,H.jsx)(`span`,{children:e.label})]})},e.path))})})]}),(0,H.jsx)(`main`,{className:`user-main`,children:(0,H.jsx)(`div`,{className:`user-main__container`,children:(0,H.jsx)(Dt,{})})}),(0,H.jsx)(`footer`,{className:`user-footer`,children:(0,H.jsxs)(`div`,{className:`user-footer__container`,children:[(0,H.jsxs)(`div`,{className:`user-footer__content`,children:[(0,H.jsxs)(`div`,{className:`user-footer__section`,children:[(0,H.jsx)(`h4`,{className:`user-footer__section-title`,children:(0,H.jsxs)(`div`,{className:`footer-logo`,children:[(0,H.jsx)(`img`,{src:Rn,alt:`PRC Logo`,className:`user-footer__logo-img`}),(0,H.jsx)(`span`,{children:`PRC Iloilo`})]})}),(0,H.jsx)(`p`,{className:`user-footer__description`,children:`The Philippine Red Cross is committed to providing humanitarian services that help vulnerable communities become self-reliant.`}),(0,H.jsxs)(`ul`,{className:`user-footer__section-links`,children:[(0,H.jsx)(`li`,{children:(0,H.jsxs)(V,{to:`/about`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-right`}),` About Us`]})}),(0,H.jsx)(`li`,{children:(0,H.jsxs)(V,{to:`/contact`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-right`}),` Contact`]})}),(0,H.jsx)(`li`,{children:(0,H.jsxs)(V,{to:`/faq`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-right`}),` FAQ`]})}),(0,H.jsx)(`li`,{children:(0,H.jsxs)(V,{to:`/privacy`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-right`}),` Privacy Policy`]})})]})]}),(0,H.jsxs)(`div`,{className:`user-footer__section`,children:[(0,H.jsxs)(`h4`,{className:`user-footer__section-title`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-clock`}),`Quick Links`]}),(0,H.jsxs)(`ul`,{className:`user-footer__section-links`,children:[(0,H.jsx)(`li`,{children:(0,H.jsxs)(V,{to:`/user/events`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-right`}),` Upcoming Events`]})}),(0,H.jsx)(`li`,{children:(0,H.jsxs)(V,{to:`/user/training`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-right`}),` Training Programs`]})}),(0,H.jsx)(`li`,{children:(0,H.jsxs)(V,{to:`/user/blood-map`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-right`}),` Blood Donation Map`]})}),(0,H.jsx)(`li`,{children:(0,H.jsxs)(V,{to:`/user/donations`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-right`}),` Make a Donation`]})}),(0,H.jsx)(`li`,{children:(0,H.jsxs)(V,{to:`/user/merchandise`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-right`}),` Merchandise`]})})]})]}),(0,H.jsxs)(`div`,{className:`user-footer__section`,children:[(0,H.jsxs)(`h4`,{className:`user-footer__section-title`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-address-book`}),`Contact Us`]}),(0,H.jsxs)(`div`,{className:`user-footer__section-contact`,children:[(0,H.jsxs)(`p`,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-location-dot`}),(0,H.jsx)(`span`,{children:`Iloilo City, Philippines`})]}),(0,H.jsxs)(`p`,{children:[(0,H.jsx)(`i`,{className:`fa-solid fa-phone`}),(0,H.jsx)(`span`,{children:`(033) 123-4567`})]}),(0,H.jsxs)(`p`,{children:[(0,H.jsx)(`i`,{className:`fa-regular fa-envelope`}),(0,H.jsx)(`span`,{children:`info@redcross.gov.ph`})]})]}),(0,H.jsxs)(`div`,{className:`user-footer__section-social`,children:[(0,H.jsx)(`a`,{href:`#`,"aria-label":`Facebook`,title:`Facebook`,children:(0,H.jsx)(`i`,{className:`fa-brands fa-facebook-f`})}),(0,H.jsx)(`a`,{href:`#`,"aria-label":`Twitter`,title:`Twitter`,children:(0,H.jsx)(`i`,{className:`fa-brands fa-twitter`})}),(0,H.jsx)(`a`,{href:`#`,"aria-label":`Instagram`,title:`Instagram`,children:(0,H.jsx)(`i`,{className:`fa-brands fa-instagram`})}),(0,H.jsx)(`a`,{href:`#`,"aria-label":`YouTube`,title:`YouTube`,children:(0,H.jsx)(`i`,{className:`fa-brands fa-youtube`})})]})]})]}),(0,H.jsxs)(`div`,{className:`user-footer__bottom`,children:[(0,H.jsxs)(`p`,{children:[(0,H.jsx)(`i`,{className:`fa-regular fa-copyright`}),new Date().getFullYear(),` Philippine Red Cross - Iloilo Chapter. All rights reserved.`]}),(0,H.jsx)(`button`,{className:`user-footer__scroll-top`,onClick:()=>window.scrollTo({top:0,behavior:`smooth`}),"aria-label":`Scroll to top`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-arrow-up`})})]})]})})]}),(0,H.jsx)(mk,{userRole:`user`})]})}const jk=()=>ja.getCurrentUser()?.admin_role||null,Mk=e=>({super:`Super Administrator`,health:`Health Services`,safety:`Safety Services`,welfare:`Welfare Services`,disaster:`Disaster Management`,youth:`Red Cross Youth`})[e]||e;function Nk(){let e=Qe(),t=Xe(),[n,r]=(0,v.useState)(!0),[i,a]=(0,v.useState)(null),[o,s]=(0,v.useState)(new Date),[c,l]=(0,v.useState)(null),u=jk();(0,v.useEffect)(()=>{a(ja.getCurrentUser());let e=setInterval(()=>{s(new Date)},6e4);return()=>clearInterval(e)},[]);let d=()=>{window.confirm(`Are you sure you want to logout?`)&&(ja.logout(),e(`/login`))},f=e=>t.pathname.startsWith(e),p=[{path:`/admin/dashboard`,icon:`fa-solid fa-chart-pie`,label:`Dashboard`,color:`#c41e3a`},{path:`/admin/users`,icon:`fa-solid fa-users`,label:`User Management`,color:`#0891b2`},{path:`/admin/volunteers`,icon:`fa-solid fa-hand-peace`,label:`Volunteers`,color:`#10b981`},{path:`/admin/events`,icon:`fa-solid fa-calendar-days`,label:`Events`,color:`#f59e0b`},{path:`/admin/training`,icon:`fa-solid fa-graduation-cap`,label:`Training`,color:`#7c3aed`},{path:`/admin/training-requests`,icon:`fa-solid fa-pen-to-square`,label:`Training Requests`,color:`#8b5cf6`},{path:`/admin/announcements`,icon:`fa-solid fa-bullhorn`,label:`Announcements`,color:`#f97316`},{path:`/admin/blood-bank`,icon:`fa-solid fa-droplet`,label:`Blood Bank`,color:`#c41e3a`},{path:`/admin/inventory`,icon:`fa-solid fa-boxes`,label:`Inventory`,color:`#c2410c`},{path:`/admin/merchandise`,icon:`fa-solid fa-shirt`,label:`Merchandise`,color:`#7c3aed`},{path:`/admin/reports`,icon:`fa-solid fa-chart-line`,label:`Reports`,color:`#059669`}],m=()=>ja.getCurrentUser()?.user_id||null,h=()=>{let e=ja.getCurrentUser();return e?.full_name||e?.username||`Admin`},g=()=>{let e=o.getHours();return e<12?`Good morning`:e<18?`Good afternoon`:`Good evening`},_=()=>o.toLocaleTimeString(`en-US`,{hour:`2-digit`,minute:`2-digit`}),y=e=>e?e.split(` `).map(e=>e[0]).join(``).toUpperCase().slice(0,2):`A`;return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(`div`,{className:`admin-layout`,children:[(0,H.jsxs)(`aside`,{className:`sidebar ${n?`open`:`closed`}`,children:[(0,H.jsxs)(`div`,{className:`sidebar__header`,children:[(0,H.jsxs)(`div`,{className:`sidebar__header-logo`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-hand-holding-heart`}),(0,H.jsx)(`h2`,{children:`PRC Admin`})]}),(0,H.jsx)(`button`,{className:`sidebar__header-toggle`,onClick:()=>r(!n),"aria-label":n?`Collapse sidebar`:`Expand sidebar`,children:(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-${n?`left`:`right`}`})})]}),(0,H.jsxs)(`div`,{className:`sidebar__profile`,children:[(0,H.jsx)(`div`,{className:`sidebar__profile-avatar`,children:y(i?.full_name)}),(0,H.jsxs)(`div`,{className:`sidebar__profile-info`,children:[(0,H.jsxs)(`p`,{className:`sidebar__profile-info-name`,children:[i?.full_name||`Admin User`,i?.is_new&&(0,H.jsx)(`span`,{className:`sidebar__new-badge`,children:`NEW`})]}),(0,H.jsxs)(`p`,{className:`sidebar__profile-info-role`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-circle`}),Mk(u)]})]})]}),(0,H.jsx)(`nav`,{className:`sidebar__nav`,children:p.map(e=>(0,H.jsxs)(V,{to:e.path,className:`sidebar__nav-item ${f(e.path)?`sidebar__nav-item--active`:``}`,title:n?``:e.label,onMouseEnter:()=>l(e.path),onMouseLeave:()=>l(null),style:c===e.path&&!f(e.path)?{color:e.color}:{},children:[(0,H.jsx)(`i`,{className:e.icon,style:c===e.path&&!f(e.path)?{color:e.color}:{}}),n&&(0,H.jsx)(`span`,{className:`sidebar__nav-item-label`,children:e.label})]},e.path))}),(0,H.jsx)(`div`,{className:`sidebar__footer`,children:(0,H.jsxs)(`button`,{className:`sidebar__footer-logout`,onClick:d,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-right-from-bracket`}),n&&(0,H.jsx)(`span`,{children:`Logout`})]})})]}),(0,H.jsxs)(`div`,{className:`main-content`,children:[(0,H.jsxs)(`header`,{className:`main-content__header`,children:[(0,H.jsxs)(`div`,{className:`main-content__header-left`,children:[(0,H.jsxs)(`div`,{className:`main-content__header-breadcrumb`,children:[(0,H.jsx)(`i`,{className:`fa-solid fa-house`}),(0,H.jsx)(`span`,{children:`Admin Panel`}),(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-right main-content__header-breadcrumb-separator`}),(0,H.jsx)(`span`,{className:`main-content__header-breadcrumb-current`,children:t.pathname.split(`/`).pop()||`dashboard`})]}),(0,H.jsxs)(`div`,{className:`main-content__header-greeting`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-clock`}),g(),`,`,` `,i?.first_name||i?.full_name?.split(` `)[0]||`Admin`,`!`]})]}),(0,H.jsxs)(`div`,{className:`main-content__header-right`,children:[(0,H.jsxs)(`div`,{className:`main-content__header-time`,children:[(0,H.jsx)(`i`,{className:`fa-regular fa-calendar`}),o.toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,year:`numeric`}),(0,H.jsx)(`span`,{className:`time-separator`,children:``}),(0,H.jsx)(`i`,{className:`fa-regular fa-clock`}),_()]}),(0,H.jsxs)(`div`,{className:`main-content__header-actions`,children:[(0,H.jsx)(kk,{}),(0,H.jsx)(`div`,{className:`main-content__header-actions-divider`}),(0,H.jsxs)(`div`,{className:`main-content__header-actions-user`,children:[(0,H.jsx)(`div`,{className:`user-avatar-small`,children:y(i?.full_name)}),(0,H.jsxs)(`div`,{className:`user-info`,children:[(0,H.jsx)(`span`,{className:`user-name`,children:i?.full_name||`Admin`}),(0,H.jsx)(`span`,{className:`user-role`,children:Mk(u)})]}),(0,H.jsx)(`i`,{className:`fa-solid fa-chevron-down`})]})]})]})]}),(0,H.jsx)(`main`,{className:`main-content__body`,children:(0,H.jsx)(Dt,{})})]})]}),(0,H.jsx)(mk,{userRole:`admin`,currentUserId:m(),currentUserName:h()})]})}function Pk({children:e}){return ja.isAuthenticated()?e:(0,H.jsx)(Et,{to:`/login`,replace:!0})}function Fk({children:e}){let t=ja.isAuthenticated(),n=ja.isAdmin();return t?n?e:(0,H.jsx)(Et,{to:`/user/dashboard`,replace:!0}):(0,H.jsx)(Et,{to:`/login`,replace:!0})}function Ik(){return(0,H.jsx)(_n,{children:(0,H.jsxs)(Ot,{children:[(0,H.jsx)(z,{path:`/`,element:(0,H.jsx)(Bn,{})}),(0,H.jsx)(z,{path:`/login`,element:(0,H.jsx)(Ma,{})}),(0,H.jsx)(z,{path:`/register`,element:(0,H.jsx)(La,{})}),(0,H.jsx)(z,{path:`/verify-email`,element:(0,H.jsx)(Ra,{})}),(0,H.jsxs)(z,{path:`/user`,element:(0,H.jsx)(Pk,{children:(0,H.jsx)(Ak,{})}),children:[(0,H.jsx)(z,{index:!0,element:(0,H.jsx)(Et,{to:`/user/dashboard`,replace:!0})}),(0,H.jsx)(z,{path:`dashboard`,element:(0,H.jsx)(Ka,{})}),(0,H.jsx)(z,{path:`messages`,element:(0,H.jsx)(ac,{})}),(0,H.jsx)(z,{path:`events`,element:(0,H.jsx)(po,{})}),(0,H.jsx)(z,{path:`events/:id`,element:(0,H.jsx)(mo,{})}),(0,H.jsx)(z,{path:`training`,element:(0,H.jsx)(qo,{})}),(0,H.jsx)(z,{path:`merchandise`,element:(0,H.jsx)(ls,{})}),(0,H.jsx)(z,{path:`donations`,element:(0,H.jsx)(hs,{})}),(0,H.jsx)(z,{path:`blood-map`,element:(0,H.jsx)(ic,{})}),(0,H.jsx)(z,{path:`announcements`,element:(0,H.jsx)(ps,{})}),(0,H.jsx)(z,{path:`profile`,element:(0,H.jsx)(ho,{})})]}),(0,H.jsxs)(z,{path:`/admin`,element:(0,H.jsx)(Fk,{children:(0,H.jsx)(Nk,{})}),children:[(0,H.jsx)(z,{index:!0,element:(0,H.jsx)(Et,{to:`/admin/dashboard`,replace:!0})}),(0,H.jsx)(z,{path:`dashboard`,element:(0,H.jsx)(_c,{})}),(0,H.jsx)(z,{path:`events`,element:(0,H.jsx)(Ec,{})}),(0,H.jsx)(z,{path:`announcements`,element:(0,H.jsx)(Kc,{})}),(0,H.jsx)(z,{path:`volunteers`,element:(0,H.jsx)(al,{})}),(0,H.jsx)(z,{path:`training`,element:(0,H.jsx)(ml,{})}),(0,H.jsx)(z,{path:`blood-bank`,element:(0,H.jsx)(vl,{})}),(0,H.jsx)(z,{path:`inventory`,element:(0,H.jsx)(Kl,{})}),(0,H.jsx)(z,{path:`merchandise`,element:(0,H.jsx)(Xl,{})}),(0,H.jsx)(z,{path:`users`,element:(0,H.jsx)(hu,{})}),(0,H.jsx)(z,{path:`messages`,element:(0,H.jsx)(Ou,{})}),(0,H.jsx)(z,{path:`training-requests`,element:(0,H.jsx)(Nu,{})}),(0,H.jsx)(z,{path:`/admin/training-sessions`,element:(0,H.jsx)(ml,{})}),(0,H.jsx)(z,{path:`reports`,element:(0,H.jsx)(Du,{})})]}),(0,H.jsx)(z,{path:`*`,element:(0,H.jsx)(Et,{to:`/`,replace:!0})})]})})}(0,_.createRoot)(document.getElementById(`root`)).render((0,H.jsx)(v.StrictMode,{children:(0,H.jsx)(Ik,{})}));